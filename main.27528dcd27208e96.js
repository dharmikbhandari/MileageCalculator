(self.webpackChunkmileageCalculator=self.webpackChunkmileageCalculator||[]).push([[179],{6304:(It,Fe,R)=>{"use strict";R.d(Fe,{Dh:()=>Ae,GT:()=>Ie,cc:()=>le,hO:()=>ie,on:()=>q,pX:()=>de,xv:()=>fe});var u=R(5879),U=R(7142),N=R(8186);It=R.hmd(It);const ue=["ngOnDestroy"],de=(Z,Re,je,re={})=>new Proxy(Z,{get:(Ee,ae)=>je.runOutsideAngular(()=>{var ye;if(Z[ae])return!(null===(ye=re?.spy)||void 0===ye)&&ye.get&&re.spy.get(ae,Z[ae]),Z[ae];if(ue.indexOf(ae)>-1)return()=>{};const oe=Re.toPromise().then(K=>{const Pe=K&&K[ae];return"function"==typeof Pe?Pe.bind(K):Pe&&Pe.then?Pe.then(ve=>je.run(()=>ve)):je.run(()=>Pe)});return new Proxy(()=>{},{get:(K,Pe)=>oe[Pe],apply:(K,Pe,ve)=>oe.then(Ve=>{var Ye;const Qe=Ve&&Ve(...ve);return!(null===(Ye=re?.spy)||void 0===Ye)&&Ye.apply&&re.spy.apply(ae,ve,Qe),Qe})})})}),Ie=(Z,Re)=>{Re.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(re=>{Object.defineProperty(Z.prototype,re,Object.getOwnPropertyDescriptor(je.prototype||je,re))})})};class ne{constructor(Re){return Re}}const Ae=new u.OlP("angularfire2.app.options"),fe=new u.OlP("angularfire2.app.name");function q(Z,Re,je){const Ee="object"==typeof je&&je||{};Ee.name=Ee.name||"string"==typeof je&&je||"[DEFAULT]";const ye=U.Z.apps.filter(oe=>oe&&oe.name===Ee.name)[0]||Re.runOutsideAngular(()=>U.Z.initializeApp(Z,Ee));try{JSON.stringify(Z)!==JSON.stringify(ye.options)&&H("error",`${ye.name} Firebase App already initialized with different options${It.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ne(ye)}const H=(Z,...Re)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Z](...Re)},ee={provide:ne,useFactory:q,deps:[Ae,u.R0b,[new u.FiY,fe]]};let ie=(()=>{class Z{constructor(je){U.Z.registerVersion("angularfire",N.q4.full,"core"),U.Z.registerVersion("angularfire",N.q4.full,"app-compat"),U.Z.registerVersion("angular",u.q4F.full,je.toString())}static initializeApp(je,re){return{ngModule:Z,providers:[{provide:Ae,useValue:je},{provide:fe,useValue:re}]}}}return Z.\u0275fac=function(je){return new(je||Z)(u.LFG(u.Lbi))},Z.\u0275mod=u.oAB({type:Z}),Z.\u0275inj=u.cJS({providers:[ee]}),Z})();function le(Z,Re,je,re,Ee){const[,ae,ye]=globalThis.\u0275AngularfireInstanceCache.find(oe=>oe[0]===Z)||[];if(ae)return function Me(Z,Re){try{return Z.toString()===Re.toString()}catch{return Z===Re}}(Ee,ye)||(pe("error",`${Re} was already initialized on the ${je} Firebase App with different settings.${Ce?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ee,was:ye})),ae;{const oe=re();return globalThis.\u0275AngularfireInstanceCache.push([Z,oe,Ee]),oe}}const Ce=!!It.hot,pe=(Z,...Re)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Z](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(It,Fe,R)=>{"use strict";R.d(Fe,{q4:()=>td,iC:()=>Sa,fc:()=>rd,HU:()=>Ul,vb:()=>Ws,JM:()=>$l});var u=R(5879),U=R(3182),N=R(5861),ue=R(534),de=R(9058),Ie=R(4537),ne=R(7879);const Ae=(w,T)=>T.some(M=>w instanceof M);let fe,q;const ie=new WeakMap,le=new WeakMap,Me=new WeakMap,Ce=new WeakMap,pe=new WeakMap;let je={get(w,T,M){if(w instanceof IDBTransaction){if("done"===T)return le.get(w);if("objectStoreNames"===T)return w.objectStoreNames||Me.get(w);if("store"===T)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return ye(w[T])},set:(w,T,M)=>(w[T]=M,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function ae(w){return"function"==typeof w?function Ee(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ee(){return q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(oe(this),T),ye(ie.get(this))}:function(...T){return ye(w.apply(oe(this),T))}:function(T,...M){const G=w.call(oe(this),T,...M);return Me.set(G,T.sort?T.sort():[T]),ye(G)}}(w):(w instanceof IDBTransaction&&function Re(w){if(le.has(w))return;const T=new Promise((M,G)=>{const he=()=>{w.removeEventListener("complete",Te),w.removeEventListener("error",Ze),w.removeEventListener("abort",Ze)},Te=()=>{M(),he()},Ze=()=>{G(w.error||new DOMException("AbortError","AbortError")),he()};w.addEventListener("complete",Te),w.addEventListener("error",Ze),w.addEventListener("abort",Ze)});le.set(w,T)}(w),Ae(w,function H(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,je):w)}function ye(w){if(w instanceof IDBRequest)return function Z(w){const T=new Promise((M,G)=>{const he=()=>{w.removeEventListener("success",Te),w.removeEventListener("error",Ze)},Te=()=>{M(ye(w.result)),he()},Ze=()=>{G(w.error),he()};w.addEventListener("success",Te),w.addEventListener("error",Ze)});return T.then(M=>{M instanceof IDBCursor&&ie.set(M,w)}).catch(()=>{}),pe.set(T,w),T}(w);if(Ce.has(w))return Ce.get(w);const T=ae(w);return T!==w&&(Ce.set(w,T),pe.set(T,w)),T}const oe=w=>pe.get(w),ve=["get","getKey","getAll","getAllKeys","count"],Ve=["put","add","delete","clear"],Ye=new Map;function Qe(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(Ye.get(T))return Ye.get(T);const M=T.replace(/FromIndex$/,""),G=T!==M,he=Ve.includes(M);if(!(M in(G?IDBIndex:IDBObjectStore).prototype)||!he&&!ve.includes(M))return;const Te=function(){var Ze=(0,N.Z)(function*(Ct,..._t){const Ut=this.transaction(Ct,he?"readwrite":"readonly");let mn=Ut.store;return G&&(mn=mn.index(_t.shift())),(yield Promise.all([mn[M](..._t),he&&Ut.done]))[0]});return function(_t){return Ze.apply(this,arguments)}}();return Ye.set(T,Te),Te}!function re(w){je=w(je)}(w=>({...w,get:(T,M,G)=>Qe(T,M)||w.get(T,M,G),has:(T,M)=>!!Qe(T,M)||w.has(T,M)}));const xt="@firebase/installations",$t="0.6.4",Qt=1e4,Je=`w:${$t}`,z="FIS_v2",J="https://firebaseinstallations.googleapis.com/v1",ce=36e5,ut=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(w){return w instanceof de.ZR&&w.code.includes("request-failed")}function pt({projectId:w}){return`${J}/projects/${w}/installations`}function Ue(w){return{token:w.token,requestStatus:2,expiresIn:tn(w.expiresIn),creationTime:Date.now()}}function He(w,T){return Le.apply(this,arguments)}function Le(){return(Le=(0,N.Z)(function*(w,T){const G=(yield T.json()).error;return ut.create("request-failed",{requestName:w,serverCode:G.code,serverMessage:G.message,serverStatus:G.status})})).apply(this,arguments)}function ct({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function Ht(w){return zt.apply(this,arguments)}function zt(){return(zt=(0,N.Z)(function*(w){const T=yield w();return T.status>=500&&T.status<600?w():T})).apply(this,arguments)}function tn(w){return Number(w.replace("s","000"))}function $n(){return($n=(0,N.Z)(function*({appConfig:w,heartbeatServiceProvider:T},{fid:M}){const G=pt(w),he=ct(w),Te=T.getImmediate({optional:!0});if(Te){const Ut=yield Te.getHeartbeatsHeader();Ut&&he.append("x-firebase-client",Ut)}const Ct={method:"POST",headers:he,body:JSON.stringify({fid:M,authVersion:z,appId:w.appId,sdkVersion:Je})},_t=yield Ht(()=>fetch(G,Ct));if(_t.ok){const Ut=yield _t.json();return{fid:Ut.fid||M,registrationStatus:2,refreshToken:Ut.refreshToken,authToken:Ue(Ut.authToken)}}throw yield He("Create Installation",_t)})).apply(this,arguments)}function Mn(w){return new Promise(T=>{setTimeout(T,w)})}const er=/^[cdef][\w-]{21}$/,vt="";function Lt(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const M=function qt(w){return function kr(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return er.test(M)?M:vt}catch{return vt}}function En(w){return`${w.appName}!${w.appId}`}const dr=new Map;function Xr(w,T){const M=En(w);fr(M,T),function kn(w,T){const M=function ln(){return!jr&&"BroadcastChannel"in self&&(jr=new BroadcastChannel("[Firebase] FID Change"),jr.onmessage=w=>{fr(w.data.key,w.data.fid)}),jr}();M&&M.postMessage({key:w,fid:T}),function tr(){0===dr.size&&jr&&(jr.close(),jr=null)}()}(M,T)}function fr(w,T){const M=dr.get(w);if(M)for(const G of M)G(T)}let jr=null;const mi="firebase-installations-database",yi=1,Hr="firebase-installations-store";let ar=null;function Zn(){return ar||(ar=function K(w,T,{blocked:M,upgrade:G,blocking:he,terminated:Te}={}){const Ze=indexedDB.open(w,T),Ct=ye(Ze);return G&&Ze.addEventListener("upgradeneeded",_t=>{G(ye(Ze.result),_t.oldVersion,_t.newVersion,ye(Ze.transaction))}),M&&Ze.addEventListener("blocked",()=>M()),Ct.then(_t=>{Te&&_t.addEventListener("close",()=>Te()),he&&_t.addEventListener("versionchange",()=>he())}).catch(()=>{}),Ct}(mi,yi,{upgrade:(w,T)=>{0===T&&w.createObjectStore(Hr)}})),ar}function vr(w,T){return nr.apply(this,arguments)}function nr(){return(nr=(0,N.Z)(function*(w,T){const M=En(w),he=(yield Zn()).transaction(Hr,"readwrite"),Te=he.objectStore(Hr),Ze=yield Te.get(M);return yield Te.put(T,M),yield he.done,(!Ze||Ze.fid!==T.fid)&&Xr(w,T.fid),T})).apply(this,arguments)}function br(w){return rr.apply(this,arguments)}function rr(){return(rr=(0,N.Z)(function*(w){const T=En(w),G=(yield Zn()).transaction(Hr,"readwrite");yield G.objectStore(Hr).delete(T),yield G.done})).apply(this,arguments)}function Cr(w,T){return rn.apply(this,arguments)}function rn(){return(rn=(0,N.Z)(function*(w,T){const M=En(w),he=(yield Zn()).transaction(Hr,"readwrite"),Te=he.objectStore(Hr),Ze=yield Te.get(M),Ct=T(Ze);return void 0===Ct?yield Te.delete(M):yield Te.put(Ct,M),yield he.done,Ct&&(!Ze||Ze.fid!==Ct.fid)&&Xr(w,Ct.fid),Ct})).apply(this,arguments)}function se(w){return te.apply(this,arguments)}function te(){return te=(0,N.Z)(function*(w){let T;const M=yield Cr(w.appConfig,G=>{const he=function L(w){return Wt(w||{fid:Lt(),registrationStatus:0})}(G),Te=function $(w,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ut.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},G=function k(w,T){return Se.apply(this,arguments)}(w,M);return{installationEntry:M,registrationPromise:G}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Xe(w)}:{installationEntry:T}}(w,he);return T=Te.registrationPromise,Te.installationEntry});return M.fid===vt?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}}),te.apply(this,arguments)}function Se(){return Se=(0,N.Z)(function*(w,T){try{const M=yield function xn(w,T){return $n.apply(this,arguments)}(w,T);return vr(w.appConfig,M)}catch(M){throw dt(M)&&409===M.customData.serverCode?yield br(w.appConfig):yield vr(w.appConfig,{fid:T.fid,registrationStatus:0}),M}}),Se.apply(this,arguments)}function Xe(w){return yt.apply(this,arguments)}function yt(){return(yt=(0,N.Z)(function*(w){let T=yield Yt(w.appConfig);for(;1===T.registrationStatus;)yield Mn(100),T=yield Yt(w.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:G}=yield se(w);return G||M}return T})).apply(this,arguments)}function Yt(w){return Cr(w,T=>{if(!T)throw ut.create("installation-not-found");return Wt(T)})}function Wt(w){return function Bt(w){return 1===w.registrationStatus&&w.registrationTime+Qt<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function zn(){return(zn=(0,N.Z)(function*({appConfig:w,heartbeatServiceProvider:T},M){const G=function fn(w,{fid:T}){return`${pt(w)}/${T}/authTokens:generate`}(w,M),he=function mt(w,{refreshToken:T}){const M=ct(w);return M.append("Authorization",function vn(w){return`${z} ${w}`}(T)),M}(w,M),Te=T.getImmediate({optional:!0});if(Te){const Ut=yield Te.getHeartbeatsHeader();Ut&&he.append("x-firebase-client",Ut)}const Ct={method:"POST",headers:he,body:JSON.stringify({installation:{sdkVersion:Je,appId:w.appId}})},_t=yield Ht(()=>fetch(G,Ct));if(_t.ok)return Ue(yield _t.json());throw yield He("Generate Auth Token",_t)})).apply(this,arguments)}function Gr(w){return xr.apply(this,arguments)}function xr(){return xr=(0,N.Z)(function*(w,T=!1){let M;const G=yield Cr(w.appConfig,Te=>{if(!pn(Te))throw ut.create("not-registered");const Ze=Te.authToken;if(!T&&function bn(w){return 2===w.requestStatus&&!function pr(w){const T=Date.now();return T<w.creationTime||w.creationTime+w.expiresIn<T+ce}(w)}(Ze))return Te;if(1===Ze.requestStatus)return M=function $e(w,T){return Oe.apply(this,arguments)}(w,T),Te;{if(!navigator.onLine)throw ut.create("app-offline");const Ct=function ir(w){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:T})}(Te);return M=function Vt(w,T){return Xt.apply(this,arguments)}(w,Ct),Ct}});return M?yield M:G.authToken}),xr.apply(this,arguments)}function Oe(){return(Oe=(0,N.Z)(function*(w,T){let M=yield lt(w.appConfig);for(;1===M.authToken.requestStatus;)yield Mn(100),M=yield lt(w.appConfig);const G=M.authToken;return 0===G.requestStatus?Gr(w,T):G})).apply(this,arguments)}function lt(w){return Cr(w,T=>{if(!pn(T))throw ut.create("not-registered");return function sr(w){return 1===w.requestStatus&&w.requestTime+Qt<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Xt(){return Xt=(0,N.Z)(function*(w,T){try{const M=yield function sn(w,T){return zn.apply(this,arguments)}(w,T),G=Object.assign(Object.assign({},T),{authToken:M});return yield vr(w.appConfig,G),M}catch(M){if(!dt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const G=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield vr(w.appConfig,G)}else yield br(w.appConfig);throw M}}),Xt.apply(this,arguments)}function pn(w){return void 0!==w&&2===w.registrationStatus}function Rn(){return(Rn=(0,N.Z)(function*(w){const T=w,{installationEntry:M,registrationPromise:G}=yield se(T);return G?G.catch(console.error):Gr(T).catch(console.error),M.fid})).apply(this,arguments)}function Qr(){return Qr=(0,N.Z)(function*(w,T=!1){const M=w;return yield function ls(w){return Ls.apply(this,arguments)}(M),(yield Gr(M,T)).token}),Qr.apply(this,arguments)}function Ls(){return(Ls=(0,N.Z)(function*(w){const{registrationPromise:T}=yield se(w);T&&(yield T)})).apply(this,arguments)}function O(w){return ut.create("missing-app-config-values",{valueName:w})}const W="installations",X=w=>{const T=w.getProvider("app").getImmediate(),M=function ro(w){if(!w||!w.options)throw O("App Configuration");if(!w.name)throw O("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!w.options[M])throw O(M);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ue._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},we=w=>{const T=w.getProvider("app").getImmediate(),M=(0,ue._getProvider)(T,W).getImmediate();return{getId:()=>function lr(w){return Rn.apply(this,arguments)}(M),getToken:he=>function za(w){return Qr.apply(this,arguments)}(M,he)}};(function De(){(0,ue._registerComponent)(new Ie.wA(W,X,"PUBLIC")),(0,ue._registerComponent)(new Ie.wA("installations-internal",we,"PRIVATE"))})(),(0,ue.registerVersion)(xt,$t),(0,ue.registerVersion)(xt,$t,"esm2017");const Ke="@firebase/remote-config",wt=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Sl{constructor(T,M,G,he){this.client=T,this.storage=M,this.storageCache=G,this.logger=he}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const G=Date.now()-M,he=G<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${G}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${he}.`),he}fetch(T){var M=this;return(0,N.Z)(function*(){const[G,he]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(he&&M.isCachedDataFresh(T.cacheMaxAgeMillis,G))return he;T.eTag=he&&he.eTag;const Te=yield M.client.fetch(T),Ze=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Te.status&&Ze.push(M.storage.setLastSuccessfulFetchResponse(Te)),yield Promise.all(Ze),Te})()}}function _c(w=navigator){return w.languages&&w.languages[0]||w.language}class Go{constructor(T,M,G,he,Te,Ze){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=G,this.projectId=he,this.apiKey=Te,this.appId=Ze}fetch(T){var M=this;return(0,N.Z)(function*(){const[G,he]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ze=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ct={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},_t={sdk_version:M.sdkVersion,app_instance_id:G,app_instance_id_token:he,app_id:M.appId,language_code:_c()},Ut={method:"POST",headers:Ct,body:JSON.stringify(_t)},mn=fetch(Ze,Ut),gn=new Promise((Ui,na)=>{T.signal.addEventListener(()=>{const Hl=new Error("The operation was aborted.");Hl.name="AbortError",na(Hl)})});let xi;try{yield Promise.race([mn,gn]),xi=yield mn}catch(Ui){let na="fetch-client-network";throw"AbortError"===Ui?.name&&(na="fetch-timeout"),wt.create(na,{originalErrorMessage:Ui?.message})}let Ar=xi.status;const Aa=xi.headers.get("ETag")||void 0;let Do,al;if(200===xi.status){let Ui;try{Ui=yield xi.json()}catch(na){throw wt.create("fetch-client-parse",{originalErrorMessage:na?.message})}Do=Ui.entries,al=Ui.state}if("INSTANCE_STATE_UNSPECIFIED"===al?Ar=500:"NO_CHANGE"===al?Ar=304:("NO_TEMPLATE"===al||"EMPTY_CONFIG"===al)&&(Do={}),304!==Ar&&200!==Ar)throw wt.create("fetch-status",{httpStatus:Ar});return{status:Ar,eTag:Aa,config:Do}})()}}class pa{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,N.Z)(function*(){const G=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,G)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:G}){var he=this;return(0,N.Z)(function*(){yield function Dr(w,T){return new Promise((M,G)=>{const he=Math.max(T-Date.now(),0),Te=setTimeout(M,he);w.addEventListener(()=>{clearTimeout(Te),G(wt.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const Te=yield he.client.fetch(T);return yield he.storage.deleteThrottleMetadata(),Te}catch(Te){if(!function vc(w){if(!(w instanceof de.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Te))throw Te;const Ze={throttleEndTimeMillis:Date.now()+(0,de.$s)(G),backoffCount:G+1};return yield he.storage.setThrottleMetadata(Ze),he.attemptFetch(T,Ze)}})()}}class Ec{constructor(T,M,G,he,Te){this.app=T,this._client=M,this._storageCache=G,this._storage=he,this._logger=Te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vi(w,T){const M=w.target.error||void 0;return wt.create(T,{originalErrorMessage:M&&M?.message})}const ki="app_namespace_store";class bp{constructor(T,M,G,he=function Vn(){return new Promise((w,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=G=>{T(vi(G,"storage-open"))},M.onsuccess=G=>{w(G.target.result)},M.onupgradeneeded=G=>{0===G.oldVersion&&G.target.result.createObjectStore(ki,{keyPath:"compositeKey"})}}catch(M){T(wt.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=T,this.appName=M,this.namespace=G,this.openDbPromise=he}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,N.Z)(function*(){const G=yield M.openDbPromise;return new Promise((he,Te)=>{const Ct=G.transaction([ki],"readonly").objectStore(ki),_t=M.createCompositeKey(T);try{const Ut=Ct.get(_t);Ut.onerror=mn=>{Te(vi(mn,"storage-get"))},Ut.onsuccess=mn=>{const gn=mn.target.result;he(gn?gn.value:void 0)}}catch(Ut){Te(wt.create("storage-get",{originalErrorMessage:Ut?.message}))}})})()}set(T,M){var G=this;return(0,N.Z)(function*(){const he=yield G.openDbPromise;return new Promise((Te,Ze)=>{const _t=he.transaction([ki],"readwrite").objectStore(ki),Ut=G.createCompositeKey(T);try{const mn=_t.put({compositeKey:Ut,value:M});mn.onerror=gn=>{Ze(vi(gn,"storage-set"))},mn.onsuccess=()=>{Te()}}catch(mn){Ze(wt.create("storage-set",{originalErrorMessage:mn?.message}))}})})()}delete(T){var M=this;return(0,N.Z)(function*(){const G=yield M.openDbPromise;return new Promise((he,Te)=>{const Ct=G.transaction([ki],"readwrite").objectStore(ki),_t=M.createCompositeKey(T);try{const Ut=Ct.delete(_t);Ut.onerror=mn=>{Te(vi(mn,"storage-delete"))},Ut.onsuccess=()=>{he()}}catch(Ut){Te(wt.create("storage-delete",{originalErrorMessage:Ut?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class io{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const M=T.storage.getLastFetchStatus(),G=T.storage.getLastSuccessfulFetchTimestampMillis(),he=T.storage.getActiveConfig(),Te=yield M;Te&&(T.lastFetchStatus=Te);const Ze=yield G;Ze&&(T.lastSuccessfulFetchTimestampMillis=Ze);const Ct=yield he;Ct&&(T.activeConfig=Ct)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Ya(){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,N.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function ga(){(0,ue._registerComponent)(new Ie.wA("remote-config",function w(T,{instanceIdentifier:M}){const G=T.getProvider("app").getImmediate(),he=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw wt.create("registration-window");if(!(0,de.hl)())throw wt.create("indexed-db-unavailable");const{projectId:Te,apiKey:Ze,appId:Ct}=G.options;if(!Te)throw wt.create("registration-project-id");if(!Ze)throw wt.create("registration-api-key");if(!Ct)throw wt.create("registration-app-id");const _t=new bp(Ct,G.name,M=M||"firebase"),Ut=new io(_t),mn=new ne.Yd(Ke);mn.logLevel=ne.in.ERROR;const gn=new Go(he,ue.SDK_VERSION,M,Te,Ze,Ct),xi=new pa(gn,_t),Ar=new Sl(xi,_t,Ut,mn),Aa=new Ec(G,Ar,Ut,_t,mn);return function yn(w){const T=(0,de.m9)(w);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Aa),Aa},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Ke,"0.4.4"),(0,ue.registerVersion)(Ke,"0.4.4","esm2017")}();const Di=(w,T)=>T.some(M=>w instanceof M);let Al,Ti;const Us=new WeakMap,zo=new WeakMap,mr=new WeakMap,Za=new WeakMap,sh=new WeakMap;let Au={get(w,T,M){if(w instanceof IDBTransaction){if("done"===T)return zo.get(w);if("objectStoreNames"===T)return w.objectStoreNames||mr.get(w);if("store"===T)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return so(w[T])},set:(w,T,M)=>(w[T]=M,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function oh(w){return"function"==typeof w?function Fm(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Du(){return Ti||(Ti=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(Mu(this),T),so(Us.get(this))}:function(...T){return so(w.apply(Mu(this),T))}:function(T,...M){const G=w.call(Mu(this),T,...M);return mr.set(G,T.sort?T.sort():[T]),so(G)}}(w):(w instanceof IDBTransaction&&function Su(w){if(zo.has(w))return;const T=new Promise((M,G)=>{const he=()=>{w.removeEventListener("complete",Te),w.removeEventListener("error",Ze),w.removeEventListener("abort",Ze)},Te=()=>{M(),he()},Ze=()=>{G(w.error||new DOMException("AbortError","AbortError")),he()};w.addEventListener("complete",Te),w.addEventListener("error",Ze),w.addEventListener("abort",Ze)});zo.set(w,T)}(w),Di(w,function Si(){return Al||(Al=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,Au):w)}function so(w){if(w instanceof IDBRequest)return function Tu(w){const T=new Promise((M,G)=>{const he=()=>{w.removeEventListener("success",Te),w.removeEventListener("error",Ze)},Te=()=>{M(so(w.result)),he()},Ze=()=>{G(w.error),he()};w.addEventListener("success",Te),w.addEventListener("error",Ze)});return T.then(M=>{M instanceof IDBCursor&&Us.set(M,w)}).catch(()=>{}),sh.set(T,w),T}(w);if(Za.has(w))return Za.get(w);const T=oh(w);return T!==w&&(Za.set(w,T),sh.set(T,w)),T}const Mu=w=>sh.get(w);function xu(w,T,{blocked:M,upgrade:G,blocking:he,terminated:Te}={}){const Ze=indexedDB.open(w,T),Ct=so(Ze);return G&&Ze.addEventListener("upgradeneeded",_t=>{G(so(Ze.result),_t.oldVersion,_t.newVersion,so(Ze.transaction))}),M&&Ze.addEventListener("blocked",()=>M()),Ct.then(_t=>{Te&&_t.addEventListener("close",()=>Te()),he&&_t.addEventListener("versionchange",()=>he())}).catch(()=>{}),Ct}function wc(w,{blocked:T}={}){const M=indexedDB.deleteDatabase(w);return T&&M.addEventListener("blocked",()=>T()),so(M).then(()=>{})}const Dp=["get","getKey","getAll","getAllKeys","count"],ah=["put","add","delete","clear"],lh=new Map;function ch(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(lh.get(T))return lh.get(T);const M=T.replace(/FromIndex$/,""),G=T!==M,he=ah.includes(M);if(!(M in(G?IDBIndex:IDBObjectStore).prototype)||!he&&!Dp.includes(M))return;const Te=function(){var Ze=(0,N.Z)(function*(Ct,..._t){const Ut=this.transaction(Ct,he?"readwrite":"readonly");let mn=Ut.store;return G&&(mn=mn.index(_t.shift())),(yield Promise.all([mn[M](..._t),he&&Ut.done]))[0]});return function(_t){return Ze.apply(this,arguments)}}();return lh.set(T,Te),Te}!function Cp(w){Au=w(Au)}(w=>({...w,get:(T,M,G)=>ch(T,M)||w.get(T,M,G),has:(T,M)=>!!ch(T,M)||w.has(T,M)}));const Ru="/firebase-messaging-sw.js",uh="/firebase-cloud-messaging-push-scope",Ic="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Nu="https://fcmregistrations.googleapis.com/v1",Tp="google.c.a.c_id",Fr="google.c.a.c_l",a0="google.c.a.ts";var qo=(()=>((qo=qo||{}).PUSH_RECEIVED="push-received",qo.NOTIFICATION_CLICKED="notification-clicked",qo))();function Ki(w){const T=new Uint8Array(w);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ou(w){const M=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),G=atob(M),he=new Uint8Array(G.length);for(let Te=0;Te<G.length;++Te)he[Te]=G.charCodeAt(Te);return he}const Ml="fcm_token_details_db",xl=5,Sp="fcm_token_object_Store";function bc(){return bc=(0,N.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Te=>Te.name).includes(Ml))return null;let T=null;return(yield xu(Ml,xl,{upgrade:(G=(0,N.Z)(function*(he,Te,Ze,Ct){var _t;if(Te<2||!he.objectStoreNames.contains(Sp))return;const Ut=Ct.objectStore(Sp),mn=yield Ut.index("fcmSenderId").get(w);if(yield Ut.clear(),mn)if(2===Te){const gn=mn;if(!gn.auth||!gn.p256dh||!gn.endpoint)return;T={token:gn.fcmToken,createTime:null!==(_t=gn.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:gn.auth,p256dh:gn.p256dh,endpoint:gn.endpoint,swScope:gn.swScope,vapidKey:"string"==typeof gn.vapidKey?gn.vapidKey:Ki(gn.vapidKey)}}}else if(3===Te){const gn=mn;T={token:gn.fcmToken,createTime:gn.createTime,subscriptionOptions:{auth:Ki(gn.auth),p256dh:Ki(gn.p256dh),endpoint:gn.endpoint,swScope:gn.swScope,vapidKey:Ki(gn.vapidKey)}}}else if(4===Te){const gn=mn;T={token:gn.fcmToken,createTime:gn.createTime,subscriptionOptions:{auth:Ki(gn.auth),p256dh:Ki(gn.p256dh),endpoint:gn.endpoint,swScope:gn.swScope,vapidKey:Ki(gn.vapidKey)}}}}),function(Te,Ze,Ct,_t){return G.apply(this,arguments)})})).close(),yield wc(Ml),yield wc("fcm_vapid_details_db"),yield wc("undefined"),function bs(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:T}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var G}),bc.apply(this,arguments)}const Cc="firebase-messaging-database",Lr=1,hs="firebase-messaging-store";let Pu=null;function Dc(){return Pu||(Pu=xu(Cc,Lr,{upgrade:(w,T)=>{0===T&&w.createObjectStore(hs)}})),Pu}function ya(w){return _a.apply(this,arguments)}function _a(){return _a=(0,N.Z)(function*(w){const T=hh(w),G=yield(yield Dc()).transaction(hs).objectStore(hs).get(T);if(G)return G;{const he=yield function Ap(w){return bc.apply(this,arguments)}(w.appConfig.senderId);if(he)return yield Tc(w,he),he}}),_a.apply(this,arguments)}function Tc(w,T){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,N.Z)(function*(w,T){const M=hh(w),he=(yield Dc()).transaction(hs,"readwrite");return yield he.objectStore(hs).put(T,M),yield he.done,T})).apply(this,arguments)}function Yo(){return(Yo=(0,N.Z)(function*(w){const T=hh(w),G=(yield Dc()).transaction(hs,"readwrite");yield G.objectStore(hs).delete(T),yield G.done})).apply(this,arguments)}function hh({appConfig:w}){return w.appId}const ci=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function l0(w,T){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,N.Z)(function*(w,T){const M=yield Xa(w),G=Bu(T),he={method:"POST",headers:M,body:JSON.stringify(G)};let Te;try{Te=yield(yield fetch(Sc(w.appConfig),he)).json()}catch(Ze){throw ci.create("token-subscribe-failed",{errorInfo:Ze?.toString()})}if(Te.error)throw ci.create("token-subscribe-failed",{errorInfo:Te.error.message});if(!Te.token)throw ci.create("token-subscribe-no-token");return Te.token})).apply(this,arguments)}function Rl(){return(Rl=(0,N.Z)(function*(w,T){const M=yield Xa(w),G=Bu(T.subscriptionOptions),he={method:"PATCH",headers:M,body:JSON.stringify(G)};let Te;try{Te=yield(yield fetch(`${Sc(w.appConfig)}/${T.token}`,he)).json()}catch(Ze){throw ci.create("token-update-failed",{errorInfo:Ze?.toString()})}if(Te.error)throw ci.create("token-update-failed",{errorInfo:Te.error.message});if(!Te.token)throw ci.create("token-update-no-token");return Te.token})).apply(this,arguments)}function xp(w,T){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,N.Z)(function*(w,T){const G={method:"DELETE",headers:yield Xa(w)};try{const Te=yield(yield fetch(`${Sc(w.appConfig)}/${T}`,G)).json();if(Te.error)throw ci.create("token-unsubscribe-failed",{errorInfo:Te.error.message})}catch(he){throw ci.create("token-unsubscribe-failed",{errorInfo:he?.toString()})}})).apply(this,arguments)}function Sc({projectId:w}){return`${Nu}/projects/${w}/registrations`}function Xa(w){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,N.Z)(function*({appConfig:w,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Bu({p256dh:w,auth:T,endpoint:M,vapidKey:G}){const he={web:{endpoint:M,auth:T,p256dh:w}};return G!==Ic&&(he.web.applicationPubKey=G),he}const Rp=6048e5;function fh(){return fh=(0,N.Z)(function*(w){const T=yield function Ac(w,T){return Qa.apply(this,arguments)}(w.swRegistration,w.vapidKey),M={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:T.endpoint,auth:Ki(T.getKey("auth")),p256dh:Ki(T.getKey("p256dh"))},G=yield ya(w.firebaseDependencies);if(G){if(function Ai(w,T){return T.vapidKey===w.vapidKey&&T.endpoint===w.endpoint&&T.auth===w.auth&&T.p256dh===w.p256dh}(G.subscriptionOptions,M))return Date.now()>=G.createTime+Rp?function js(w,T){return ju.apply(this,arguments)}(w,{token:G.token,createTime:Date.now(),subscriptionOptions:M}):G.token;try{yield xp(w.firebaseDependencies,G.token)}catch(he){console.warn(he)}return va(w.firebaseDependencies,M)}return va(w.firebaseDependencies,M)}),fh.apply(this,arguments)}function Uu(){return Uu=(0,N.Z)(function*(w){const T=yield ya(w.firebaseDependencies);T&&(yield xp(w.firebaseDependencies,T.token),yield function dh(w){return Yo.apply(this,arguments)}(w.firebaseDependencies));const M=yield w.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Uu.apply(this,arguments)}function ju(){return ju=(0,N.Z)(function*(w,T){try{const M=yield function Bm(w,T){return Rl.apply(this,arguments)}(w.firebaseDependencies,T),G=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield Tc(w.firebaseDependencies,G),M}catch(M){throw yield function $u(w){return Uu.apply(this,arguments)}(w),M}}),ju.apply(this,arguments)}function va(w,T){return ur.apply(this,arguments)}function ur(){return(ur=(0,N.Z)(function*(w,T){const G={token:yield l0(w,T),createTime:Date.now(),subscriptionOptions:T};return yield Tc(w,G),G.token})).apply(this,arguments)}function Qa(){return(Qa=(0,N.Z)(function*(w,T){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ou(T)})})).apply(this,arguments)}function Ja(w){const T={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function ph(w,T){if(!T.notification)return;w.notification={};const M=T.notification.title;M&&(w.notification.title=M);const G=T.notification.body;G&&(w.notification.body=G);const he=T.notification.image;he&&(w.notification.image=he);const Te=T.notification.icon;Te&&(w.notification.icon=Te)}(T,w),function Ko(w,T){T.data&&(w.data=T.data)}(T,w),function Cs(w,T){var M,G,he,Te,Ze;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;w.fcmOptions={};const Ct=null!==(he=null===(G=T.fcmOptions)||void 0===G?void 0:G.link)&&void 0!==he?he:null===(Te=T.notification)||void 0===Te?void 0:Te.click_action;Ct&&(w.fcmOptions.link=Ct);const _t=null===(Ze=T.fcmOptions)||void 0===Ze?void 0:Ze.analytics_label;_t&&(w.fcmOptions.analyticsLabel=_t)}(T,w),T}function gh(w,T){const M=[];for(let G=0;G<w.length;G++)M.push(w.charAt(G)),G<T.length&&M.push(T.charAt(G));return M.join("")}function oo(w){return ci.create("missing-app-config-values",{valueName:w})}gh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yh{constructor(T,M,G){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const he=function mh(w){if(!w||!w.options)throw oo("App Configuration Object");if(!w.name)throw oo("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=w;for(const G of T)if(!M[G])throw oo(G);return{appName:w.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:he,installations:M,analyticsProvider:G}}_delete(){return Promise.resolve()}}function Mc(){return(Mc=(0,N.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(Ru,{scope:uh}),w.swRegistration.update().catch(()=>{})}catch(T){throw ci.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Ds(){return(Ds=(0,N.Z)(function*(w,T){if(!T&&!w.swRegistration&&(yield function Hu(w){return Mc.apply(this,arguments)}(w)),T||!w.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw ci.create("invalid-sw-registration");w.swRegistration=T}})).apply(this,arguments)}function un(){return(un=(0,N.Z)(function*(w,T){T?w.vapidKey=T:w.vapidKey||(w.vapidKey=Ic)})).apply(this,arguments)}function _h(){return _h=(0,N.Z)(function*(w,T){if(!navigator)throw ci.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ci.create("permission-blocked");return yield function xc(w,T){return un.apply(this,arguments)}(w,T?.vapidKey),yield function el(w,T){return Ds.apply(this,arguments)}(w,T?.serviceWorkerRegistration),function Vu(w){return fh.apply(this,arguments)}(w)}),_h.apply(this,arguments)}function zu(){return(zu=(0,N.Z)(function*(w,T,M){const G=function Op(w){switch(w){case qo.NOTIFICATION_CLICKED:return"notification_open";case qo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(G,{message_id:M[Tp],message_name:M[Fr],message_time:M[a0],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Hs(){return Hs=(0,N.Z)(function*(w,T){const M=T.data;if(!M.isFirebaseMessaging)return;w.onMessageHandler&&M.messageType===qo.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(Ja(M)):w.onMessageHandler.next(Ja(M)));const G=M.data;(function Np(w){return"object"==typeof w&&!!w&&Tp in w})(G)&&"1"===G["google.c.a.e"]&&(yield function Vm(w,T,M){return zu.apply(this,arguments)}(w,M.messageType,G))}),Hs.apply(this,arguments)}const Rc="@firebase/messaging",Pp=w=>{const T=new yh(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ol(w,T){return Hs.apply(this,arguments)}(T,M)),T},vh=w=>{const T=w.getProvider("messaging").getImmediate();return{getToken:G=>function Gu(w,T){return _h.apply(this,arguments)}(T,G)}};function ot(){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,N.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kp(){(0,ue._registerComponent)(new Ie.wA("messaging",Pp,"PUBLIC")),(0,ue._registerComponent)(new Ie.wA("messaging-internal",vh,"PRIVATE")),(0,ue.registerVersion)(Rc,"0.12.4"),(0,ue.registerVersion)(Rc,"0.12.4","esm2017")}();const qu="analytics",Eh="firebase_id",wh="origin",Ei=6e4,ao="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pc="https://www.googletagmanager.com/gtag/js",Tr=new ne.Yd("@firebase/analytics"),ei=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Yu(w){if(!w.startsWith(Pc)){const T=ei.create("invalid-gtag-resource",{gtagURL:w});return Tr.warn(T.message),""}return w}function kl(w){return Promise.all(w.map(T=>T.catch(M=>M)))}function Zo(){return(Zo=(0,N.Z)(function*(w,T,M,G,he,Te){const Ze=G[he];try{if(Ze)yield T[Ze];else{const _t=(yield kl(M)).find(Ut=>Ut.measurementId===he);_t&&(yield T[_t.appId])}}catch(Ct){Tr.error(Ct)}w("config",he,Te)})).apply(this,arguments)}function tl(){return(tl=(0,N.Z)(function*(w,T,M,G,he){try{let Te=[];if(he&&he.send_to){let Ze=he.send_to;Array.isArray(Ze)||(Ze=[Ze]);const Ct=yield kl(M);for(const _t of Ze){const Ut=Ct.find(gn=>gn.measurementId===_t),mn=Ut&&T[Ut.appId];if(!mn){Te=[];break}Te.push(mn)}}0===Te.length&&(Te=Object.values(T)),yield Promise.all(Te),w("event",G,he||{})}catch(Te){Tr.error(Te)}})).apply(this,arguments)}const $m=30,Dh=new class Ch{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Um(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function Qo(){return(Qo=(0,N.Z)(function*(w){var T;const{appId:M,apiKey:G}=w,he={method:"GET",headers:Um(G)},Te=ao.replace("{app-id}",M),Ze=yield fetch(Te,he);if(200!==Ze.status&&304!==Ze.status){let Ct="";try{const _t=yield Ze.json();null!==(T=_t.error)&&void 0!==T&&T.message&&(Ct=_t.error.message)}catch{}throw ei.create("config-fetch-failed",{httpStatus:Ze.status,responseMessage:Ct})}return Ze.json()})).apply(this,arguments)}function Th(){return(Th=(0,N.Z)(function*(w,T=Dh,M){const{appId:G,apiKey:he,measurementId:Te}=w.options;if(!G)throw ei.create("no-app-id");if(!he){if(Te)return{measurementId:Te,appId:G};throw ei.create("no-api-key")}const Ze=T.getThrottleMetadata(G)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ct=new Zu;return setTimeout((0,N.Z)(function*(){Ct.abort()}),void 0!==M?M:Ei),Bp({appId:G,apiKey:he,measurementId:Te},Ze,Ct,T)})).apply(this,arguments)}function Bp(w,T,M){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,N.Z)(function*(w,{throttleEndTimeMillis:T,backoffCount:M},G,he=Dh){var Te;const{appId:Ze,measurementId:Ct}=w;try{yield function Ah(w,T){return new Promise((M,G)=>{const he=Math.max(T-Date.now(),0),Te=setTimeout(M,he);w.addEventListener(()=>{clearTimeout(Te),G(ei.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(G,T)}catch(_t){if(Ct)return Tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ct} provided in the "measurementId" field in the local Firebase config. [${_t?.message}]`),{appId:Ze,measurementId:Ct};throw _t}try{const _t=yield function Zi(w){return Qo.apply(this,arguments)}(w);return he.deleteThrottleMetadata(Ze),_t}catch(_t){const Ut=_t;if(!function Mh(w){if(!(w instanceof de.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Ut)){if(he.deleteThrottleMetadata(Ze),Ct)return Tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ct} provided in the "measurementId" field in the local Firebase config. [${Ut?.message}]`),{appId:Ze,measurementId:Ct};throw _t}const mn=503===Number(null===(Te=Ut?.customData)||void 0===Te?void 0:Te.httpStatus)?(0,de.$s)(M,he.intervalMillis,$m):(0,de.$s)(M,he.intervalMillis),gn={throttleEndTimeMillis:Date.now()+mn,backoffCount:M+1};return he.setThrottleMetadata(Ze,gn),Tr.debug(`Calling attemptFetch again in ${mn} millis`),Bp(w,gn,G,he)}}),Sh.apply(this,arguments)}class Zu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Ll,Uc;function xh(){return(xh=(0,N.Z)(function*(w,T,M,G,he){if(he&&he.global)w("event",M,G);else{const Te=yield T;w("event",M,Object.assign(Object.assign({},G),{send_to:Te}))}})).apply(this,arguments)}function nl(){return(nl=(0,N.Z)(function*(){if(!(0,de.hl)())return Tr.warn(ei.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(w){return Tr.warn(ei.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ts(){return Ts=(0,N.Z)(function*(w,T,M,G,he,Te,Ze){var Ct;const _t=function Er(w){return Th.apply(this,arguments)}(w);_t.then(Ar=>{M[Ar.measurementId]=Ar.appId,w.options.measurementId&&Ar.measurementId!==w.options.measurementId&&Tr.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${Ar.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ar=>Tr.error(Ar)),T.push(_t);const Ut=function Vp(){return nl.apply(this,arguments)}().then(Ar=>{if(Ar)return G.getId()}),[mn,gn]=yield Promise.all([_t,Ut]);(function Ku(w){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(Pc)&&M.src.includes(w))return M;return null})(Te)||function Ih(w,T){const M=function kc(w,T){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(w,T)),M}("firebase-js-sdk-policy",{createScriptURL:Yu}),G=document.createElement("script"),he=`${Pc}?l=${w}&id=${T}`;G.src=M?M?.createScriptURL(he):he,G.async=!0,document.head.appendChild(G)}(Te,mn.measurementId),Uc&&(he("consent","default",Uc),function wa(w){Uc=w}(void 0)),he("js",new Date);const xi=null!==(Ct=Ze?.config)&&void 0!==Ct?Ct:{};return xi[wh]="firebase",xi.update=!0,null!=gn&&(xi[Eh]=gn),he("config",mn.measurementId,xi),Ll&&(he("set",Ll),function Ju(w){Ll=w}(void 0)),mn.measurementId}),Ts.apply(this,arguments)}class dn{constructor(T){this.app=T}_delete(){return delete fs[this.app.options.appId],Promise.resolve()}}let fs={},Rh=[];const Ia={};let Mi,Gs,ps="dataLayer",Jo=!1;function $p(w,T,M){!function gs(){const w=[];if((0,de.ru)()&&w.push("This is a browser extension environment."),(0,de.zI)()||w.push("Cookies are not available."),w.length>0){const T=w.map((G,he)=>`(${he+1}) ${G}`).join(" "),M=ei.create("invalid-analytics-context",{errorInfo:T});Tr.warn(M.message)}}();const G=w.options.appId;if(!G)throw ei.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw ei.create("no-api-key");Tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fs[G])throw ei.create("already-exists",{id:G});if(!Jo){!function Fl(w){let T=[];Array.isArray(window[w])?T=window[w]:window[w]=T}(ps);const{wrappedGtag:Te,gtagCore:Ze}=function Bc(w,T,M,G,he){let Te=function(...Ze){window[G].push(arguments)};return window[he]&&"function"==typeof window[he]&&(Te=window[he]),window[he]=function Lc(w,T,M,G){function Te(){return Te=(0,N.Z)(function*(Ze,...Ct){try{if("event"===Ze){const[_t,Ut]=Ct;yield function Xo(w,T,M,G,he){return tl.apply(this,arguments)}(w,T,M,_t,Ut)}else if("config"===Ze){const[_t,Ut]=Ct;yield function Fc(w,T,M,G,he,Te){return Zo.apply(this,arguments)}(w,T,M,G,_t,Ut)}else if("consent"===Ze){const[_t]=Ct;w("consent","update",_t)}else if("get"===Ze){const[_t,Ut,mn]=Ct;w("get",_t,Ut,mn)}else if("set"===Ze){const[_t]=Ct;w("set",_t)}else w(Ze,...Ct)}catch(_t){Tr.error(_t)}}),Te.apply(this,arguments)}return function he(Ze){return Te.apply(this,arguments)}}(Te,w,T,M),{gtagCore:Te,wrappedGtag:window[he]}}(fs,Rh,Ia,ps,"gtag");Gs=Te,Mi=Ze,Jo=!0}return fs[G]=function jm(w,T,M,G,he,Te,Ze){return Ts.apply(this,arguments)}(w,Rh,Ia,T,Mi,ps,M),new dn(w)}function Nh(){return zs.apply(this,arguments)}function zs(){return(zs=(0,N.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const Xi="@firebase/analytics";!function Io(){(0,ue._registerComponent)(new Ie.wA(qu,(T,{options:M})=>$p(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ue._registerComponent)(new Ie.wA("analytics-internal",function w(T){try{const M=T.getProvider(qu).getImmediate();return{logEvent:(G,he,Te)=>function Da(w,T,M,G){w=(0,de.m9)(w),function Ea(w,T,M,G,he){return xh.apply(this,arguments)}(Gs,fs[w.app.options.appId],T,M,G).catch(he=>Tr.error(he))}(M,G,he,Te)}}catch(M){throw ei.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ue.registerVersion)(Xi,"0.10.0"),(0,ue.registerVersion)(Xi,"0.10.0","esm2017")}();var bo=R(1954),ti=R(2631);const Ph=new class sl extends ti.v{}(class ms extends bo.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(T,M,G):(T.flush(this),0)}});var uo=R(6321),Ss=R(9397),Or=R(3093),Qi=R(5137);const td=new u.GfV("7.6.1"),As="__angularfire_symbol__analyticsIsSupportedValue",ho="__angularfire_symbol__analyticsIsSupported",nd="__angularfire_symbol__remoteConfigIsSupportedValue",jc="__angularfire_symbol__remoteConfigIsSupported",Vl="__angularfire_symbol__messagingIsSupportedValue",wn="__angularfire_symbol__messagingIsSupported";function $l(w,T,M){if(T){if(1===T.length)return T[0];const Te=T.filter(Ze=>Ze.app===M);if(1===Te.length)return Te[0]}return M.container.getProvider(w).getImmediate({optional:!0})}globalThis[ho]||(globalThis[ho]=Nh().then(w=>globalThis[As]=w).catch(()=>globalThis[As]=!1)),globalThis[wn]||(globalThis[wn]=ot().then(w=>globalThis[Vl]=w).catch(()=>globalThis[Vl]=!1)),globalThis[jc]||(globalThis[jc]=Ya().then(w=>globalThis[nd]=w).catch(()=>globalThis[nd]=!1));const Ws=(w,T)=>{const M=T?[T]:(0,U.C6)(),G=[];return M.forEach(he=>{he.container.getProvider(w).instances.forEach(Ze=>{G.includes(Ze)||G.push(Ze)})}),G};function ol(){}class zr{constructor(T,M=Ph){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,G){const he=this.zone;return this.delegate.schedule(function(Ze){he.runGuarded(()=>{T.apply(this,[Ze])})},M,G)}}class Co{constructor(T){this.zone=T,this.task=null}call(T,M){const G=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ol,{},ol,ol)),M.pipe((0,Ss.b)({next:G,complete:G,error:G})).subscribe(T).add(G)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ul=(()=>{class w{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new zr(Zone.current)),this.insideAngular=M.run(()=>new zr(Zone.current,uo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(M){return new(M||w)(u.LFG(u.R0b))},w.\u0275prov=u.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function qs(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function rd(w){return w.pipe((0,Or.Q)(qs().outsideAngular))}function Sa(w){return qs(),function kh(w){return function(M){return(M=M.lift(new Co(w.ngZone))).pipe((0,Qi.R)(w.outsideAngular),(0,Or.Q)(w.insideAngular))}}(qs())(w)}},6878:(It,Fe,R)=>{"use strict";R.d(Fe,{$:()=>Ru,A:()=>H,D:()=>le,I:()=>Wa,J:()=>X,L:()=>on,N:()=>Cr,P:()=>jm,Q:()=>bp,R:()=>Xu,U:()=>ma,V:()=>Ya,W:()=>Ka,X:()=>ds,Y:()=>Si,Z:()=>Du,_:()=>sh,a:()=>Jr,a0:()=>Ic,a1:()=>Tp,a2:()=>Lm,a3:()=>Sp,a4:()=>bc,a5:()=>Cc,a6:()=>hs,a7:()=>Dc,a8:()=>_a,a9:()=>Mp,aA:()=>K,aB:()=>nd,aC:()=>br,aD:()=>rn,aE:()=>Or,aF:()=>$i,aG:()=>Oh,aH:()=>gr,aL:()=>Fi,aO:()=>Al,aa:()=>dh,ab:()=>hh,ac:()=>ku,ad:()=>Bm,ae:()=>xp,af:()=>Sc,ai:()=>Rp,aj:()=>fh,ak:()=>$u,an:()=>Fm,ao:()=>ph,aq:()=>un,ar:()=>Rc,as:()=>ve,at:()=>Wt,au:()=>Xe,av:()=>re,aw:()=>xi,ax:()=>Ta,ay:()=>Bt,az:()=>Ee,b:()=>Wu,c:()=>Gs,d:()=>$p,e:()=>Hm,f:()=>Xi,g:()=>sl,h:()=>bo,i:()=>bh,j:()=>uo,k:()=>Ui,l:()=>Un,m:()=>od,p:()=>Ae,r:()=>Vi,s:()=>Bi,u:()=>Vp});var u=R(5861),U=R(9058),N=R(534),ue=R(7582),de=R(7879),Ie=R(4537);const Ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const le=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Me=function ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Z=new de.Yd("@firebase/auth");function je(E,...g){Z.logLevel<=de.in.ERROR&&Z.error(`Auth (${N.SDK_VERSION}): ${E}`,...g)}function re(E,...g){throw oe(E,...g)}function Ee(E,...g){return oe(E,...g)}function ae(E,g,y){const b=Object.assign(Object.assign({},Me()),{[g]:y});return new U.LL("auth","Firebase",b).create(g,{appName:E.name})}function ye(E,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&re(E,"argument-error"),ae(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oe(E,...g){if("string"!=typeof E){const y=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(y,...b)}return Ce.create(E,...g)}function K(E,g,...y){if(!E)throw oe(g,...y)}function Pe(E){const g="INTERNAL ASSERTION FAILED: "+E;throw je(g),new Error(g)}function ve(E,g){E||Pe(g)}function Ve(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Ye(){return"http:"===Qe()||"https:"===Qe()}function Qe(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Qt{constructor(g,y){this.shortDelay=g,this.longDelay=y,ve(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function xt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ye()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Je(E,g){ve(E.emulator,"Emulator should always be set here");const{url:y}=E.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class z{static initialize(g,y,b){this.fetchImpl=g,y&&(this.headersImpl=y),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const J={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Qt(3e4,6e4);function ge(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function Ne(E,g,y,b){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,u.Z)(function*(E,g,y,b,x={}){return ut(E,x,(0,u.Z)(function*(){let B={},be={};b&&("GET"===g?be=b:B={body:JSON.stringify(b)});const We=(0,U.xO)(Object.assign({key:E.config.apiKey},be)).slice(1),gt=yield E._getAdditionalHeaders();return gt["Content-Type"]="application/json",E.languageCode&&(gt["X-Firebase-Locale"]=E.languageCode),z.fetch()(He(E,E.config.apiHost,y,We),Object.assign({method:g,headers:gt,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function ut(E,g,y){return dt.apply(this,arguments)}function dt(){return(dt=(0,u.Z)(function*(E,g,y){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},J),g);try{const x=new Le(E),B=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const be=yield B.json();if("needConfirmation"in be)throw ct(E,"account-exists-with-different-credential",be);if(B.ok&&!("errorMessage"in be))return be;{const We=B.ok?be.errorMessage:be.error.message,[gt,Rt]=We.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===gt)throw ct(E,"credential-already-in-use",be);if("EMAIL_EXISTS"===gt)throw ct(E,"email-already-in-use",be);if("USER_DISABLED"===gt)throw ct(E,"user-disabled",be);const Jt=b[gt]||gt.toLowerCase().replace(/[_\s]+/g,"-");if(Rt)throw ae(E,Jt,Rt);re(E,Jt)}}catch(x){if(x instanceof U.ZR)throw x;re(E,"network-request-failed",{message:String(x)})}})).apply(this,arguments)}function pt(E,g,y,b){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,u.Z)(function*(E,g,y,b,x={}){const B=yield Ne(E,g,y,b,x);return"mfaPendingCredential"in B&&re(E,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function He(E,g,y,b){const x=`${g}${y}?${b}`;return E.config.emulator?Je(E.config,x):`${E.config.apiScheme}://${x}`}class Le{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,b)=>{this.timer=setTimeout(()=>b(Ee(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ct(E,g,y){const b={appName:E.name};y.email&&(b.email=y.email),y.phoneNumber&&(b.phoneNumber=y.phoneNumber);const x=Ee(E,g,b);return x.customData._tokenResponse=y,x}function Ht(){return(Ht=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function tn(){return(tn=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function $n(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function er(){return(er=(0,u.Z)(function*(E,g=!1){const y=(0,U.m9)(E),b=yield y.getIdToken(g),x=Lt(b);K(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const B="object"==typeof x.firebase?x.firebase:void 0,be=B?.sign_in_provider;return{claims:x,token:b,authTime:$n(vt(x.auth_time)),issuedAtTime:$n(vt(x.iat)),expirationTime:$n(vt(x.exp)),signInProvider:be||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function vt(E){return 1e3*Number(E)}function Lt(E){const[g,y,b]=E.split(".");if(void 0===g||void 0===y||void 0===b)return je("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,U.tV)(y);return x?JSON.parse(x):(je("Failed to decode base64 JWT payload"),null)}catch(x){return je("Caught error parsing JWT payload as JSON",x?.toString()),null}}function En(E,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,u.Z)(function*(E,g,y=!1){if(y)return g;try{return yield g}catch(b){throw b instanceof U.ZR&&function Xr({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}class an{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),b)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class hr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=$n(this.lastLoginAt),this.creationTime=$n(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fr(E){return kn.apply(this,arguments)}function kn(){return kn=(0,u.Z)(function*(E){var g;const y=E.auth,b=yield E.getIdToken(),x=yield En(E,function vn(E,g){return xn.apply(this,arguments)}(y,{idToken:b}));K(x?.users.length,y,"internal-error");const B=x.users[0];E._notifyReloadListener(B);const be=null!==(g=B.providerUserInfo)&&void 0!==g&&g.length?function mi(E){return E.map(g=>{var{providerId:y}=g,b=(0,ue._T)(g,["providerId"]);return{providerId:y,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}(B.providerUserInfo):[],We=function tr(E,g){return[...E.filter(b=>!g.some(x=>x.providerId===b.providerId)),...g]}(E.providerData,be),Jt=!!E.isAnonymous&&!(E.email&&B.passwordHash||We?.length),Nn={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:We,metadata:new hr(B.createdAt,B.lastLoginAt),isAnonymous:Jt};Object.assign(E,Nn)}),kn.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(E){const g=(0,U.m9)(E);yield fr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(E,g){const y=yield ut(E,{},(0,u.Z)(function*(){const b=(0,U.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:B}=E.config,be=He(E,x,"/v1/token",`key=${B}`),We=yield E._getAdditionalHeaders();return We["Content-Type"]="application/x-www-form-urlencoded",z.fetch()(be,{method:"POST",headers:We,body:b})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){K(g.idToken,"internal-error"),K(typeof g.idToken<"u","internal-error"),K(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function qt(E){const g=Lt(E);return K(g,"internal-error"),K(typeof g.exp<"u","internal-error"),K(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var b=this;return(0,u.Z)(function*(){return K(!b.accessToken||b.refreshToken,g,"user-token-expired"),y||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var b=this;return(0,u.Z)(function*(){const{accessToken:x,refreshToken:B,expiresIn:be}=yield function yi(E,g){return Hr.apply(this,arguments)}(g,y);b.updateTokensAndExpiration(x,B,Number(be))})()}updateTokensAndExpiration(g,y,b){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,y){const{refreshToken:b,accessToken:x,expirationTime:B}=y,be=new ar;return b&&(K("string"==typeof b,"internal-error",{appName:g}),be.refreshToken=b),x&&(K("string"==typeof x,"internal-error",{appName:g}),be.accessToken=x),B&&(K("number"==typeof B,"internal-error",{appName:g}),be.expirationTime=B),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ar,this.toJSON())}_performRefresh(){return Pe("not implemented")}}function Zn(E,g){K("string"==typeof E||typeof E>"u","internal-error",{appName:g})}class vr{constructor(g){var{uid:y,auth:b,stsTokenManager:x}=g,B=(0,ue._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new an(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=b,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new hr(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,u.Z)(function*(){const b=yield En(y,y.stsTokenManager.getToken(y.auth,g));return K(b,y.auth,"internal-error"),y.accessToken!==b&&(y.accessToken=b,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),b})()}getIdTokenResult(g){return function kr(E){return er.apply(this,arguments)}(this,g)}reload(){return function jr(E){return ln.apply(this,arguments)}(this)}_assign(g){this!==g&&(K(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const y=new vr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(g){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var b=this;return(0,u.Z)(function*(){let x=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield fr(b)),yield b.auth._persistUserIfCurrent(b),x&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,u.Z)(function*(){const y=yield g.getIdToken();return yield En(g,function mt(E,g){return Ht.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var b,x,B,be,We,gt,Rt,Jt;const Nn=null!==(b=y.displayName)&&void 0!==b?b:void 0,Ji=null!==(x=y.email)&&void 0!==x?x:void 0,Ma=null!==(B=y.phoneNumber)&&void 0!==B?B:void 0,zp=null!==(be=y.photoURL)&&void 0!==be?be:void 0,qm=null!==(We=y.tenantId)&&void 0!==We?We:void 0,Wp=null!==(gt=y._redirectEventId)&&void 0!==gt?gt:void 0,ad=null!==(Rt=y.createdAt)&&void 0!==Rt?Rt:void 0,To=null!==(Jt=y.lastLoginAt)&&void 0!==Jt?Jt:void 0,{uid:xa,emailVerified:ra,isAnonymous:Wc,providerData:ll,stsTokenManager:ld}=y;K(xa&&ld,g,"internal-error");const qc=ar.fromJSON(this.name,ld);K("string"==typeof xa,g,"internal-error"),Zn(Nn,g.name),Zn(Ji,g.name),K("boolean"==typeof ra,g,"internal-error"),K("boolean"==typeof Wc,g,"internal-error"),Zn(Ma,g.name),Zn(zp,g.name),Zn(qm,g.name),Zn(Wp,g.name),Zn(ad,g.name),Zn(To,g.name);const Bh=new vr({uid:xa,auth:g,email:Ji,emailVerified:ra,displayName:Nn,isAnonymous:Wc,photoURL:zp,phoneNumber:Ma,tenantId:qm,stsTokenManager:qc,createdAt:ad,lastLoginAt:To});return ll&&Array.isArray(ll)&&(Bh.providerData=ll.map(Ym=>Object.assign({},Ym))),Wp&&(Bh._redirectEventId=Wp),Bh}static _fromIdTokenResponse(g,y,b=!1){return(0,u.Z)(function*(){const x=new ar;x.updateFromServerResponse(y);const B=new vr({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:b});return yield fr(B),B})()}}const nr=new Map;function br(E){ve(E instanceof Function,"Expected a class definition");let g=nr.get(E);return g?(ve(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,nr.set(E,g),g)}const Cr=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,b){var x=this;return(0,u.Z)(function*(){x.storage[y]=b})()}_get(y){var b=this;return(0,u.Z)(function*(){const x=b.storage[y];return void 0===x?null:x})()}_remove(y){var b=this;return(0,u.Z)(function*(){delete b.storage[y]})()}_addListener(y,b){}_removeListener(y,b){}}return E.type="NONE",E})();function rn(E,g,y){return`firebase:${E}:${g}:${y}`}class se{constructor(g,y,b){this.persistence=g,this.auth=y,this.userKey=b;const{config:x,name:B}=this.auth;this.fullUserKey=rn(this.userKey,x.apiKey,B),this.fullPersistenceKey=rn("persistence",x.apiKey,B),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?vr._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,u.Z)(function*(){if(y.persistence===g)return;const b=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,b?y.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,b="authUser"){return(0,u.Z)(function*(){if(!y.length)return new se(br(Cr),g,b);const x=(yield Promise.all(y.map(function(){var Rt=(0,u.Z)(function*(Jt){if(yield Jt._isAvailable())return Jt});return function(Jt){return Rt.apply(this,arguments)}}()))).filter(Rt=>Rt);let B=x[0]||br(Cr);const be=rn(b,g.config.apiKey,g.name);let We=null;for(const Rt of y)try{const Jt=yield Rt._get(be);if(Jt){const Nn=vr._fromJSON(g,Jt);Rt!==B&&(We=Nn),B=Rt;break}}catch{}const gt=x.filter(Rt=>Rt._shouldAllowMigration);return B._shouldAllowMigration&&gt.length?(B=gt[0],We&&(yield B._set(be,We.toJSON())),yield Promise.all(y.map(function(){var Rt=(0,u.Z)(function*(Jt){if(Jt!==B)try{yield Jt._remove(be)}catch{}});return function(Jt){return Rt.apply(this,arguments)}}())),new se(B,g,b)):new se(B,g,b)})()}}function te(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Se(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(L(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(yt(g))return"Blackberry";if(Yt(g))return"Webos";if($(g))return"Safari";if((g.includes("chrome/")||k(g))&&!g.includes("edge/"))return"Chrome";if(Xe(g))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function L(E=(0,U.z$)()){return/firefox\//i.test(E)}function $(E=(0,U.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function k(E=(0,U.z$)()){return/crios\//i.test(E)}function Se(E=(0,U.z$)()){return/iemobile/i.test(E)}function Xe(E=(0,U.z$)()){return/android/i.test(E)}function yt(E=(0,U.z$)()){return/blackberry/i.test(E)}function Yt(E=(0,U.z$)()){return/webos/i.test(E)}function Wt(E=(0,U.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Bt(E=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function fn(E=(0,U.z$)()){return Wt(E)||Xe(E)||Yt(E)||yt(E)||/windows phone/i.test(E)||Se(E)}function xr(E,g=[]){let y;switch(E){case"Browser":y=te((0,U.z$)());break;case"Worker":y=`${te((0,U.z$)())}-${E}`;break;default:y=E}const b=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${N.SDK_VERSION}/${b}`}function Oe(){return(Oe=(0,u.Z)(function*(E){return(yield Ne(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lt(E,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,u.Z)(function*(E,g){return Ne(E,"GET","/v2/recaptchaConfig",ge(E,g))})).apply(this,arguments)}function Xt(E){return void 0!==E&&void 0!==E.getResponse}function pn(E){return void 0!==E&&void 0!==E.enterprise}class bn{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function ir(E){return new Promise((g,y)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=g,b.onerror=x=>{const B=Ee("internal-error");B.customData=x,y(B)},b.type="text/javascript",b.charset="UTF-8",function pr(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(b)})}function sr(E){return`__${E}${Math.floor(1e6*Math.random())}`}class Qr{constructor(g){this.type="recaptcha-enterprise",this.auth=gr(g)}verify(g="verify",y=!1){var b=this;return(0,u.Z)(function*(){function B(){return B=(0,u.Z)(function*(We){if(!y){if(null==We.tenantId&&null!=We._agentRecaptchaConfig)return We._agentRecaptchaConfig.siteKey;if(null!=We.tenantId&&void 0!==We._tenantRecaptchaConfigs[We.tenantId])return We._tenantRecaptchaConfigs[We.tenantId].siteKey}return new Promise(function(){var gt=(0,u.Z)(function*(Rt,Jt){lt(We,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Nn=>{if(void 0!==Nn.recaptchaKey){const Ji=new bn(Nn);return null==We.tenantId?We._agentRecaptchaConfig=Ji:We._tenantRecaptchaConfigs[We.tenantId]=Ji,Rt(Ji.siteKey)}Jt(new Error("recaptcha Enterprise site key undefined"))}).catch(Nn=>{Jt(Nn)})});return function(Rt,Jt){return gt.apply(this,arguments)}}())}),B.apply(this,arguments)}function be(We,gt,Rt){const Jt=window.grecaptcha;pn(Jt)?Jt.enterprise.ready(()=>{Jt.enterprise.execute(We,{action:g}).then(Nn=>{gt(Nn)}).catch(()=>{gt("NO_RECAPTCHA")})}):Rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((We,gt)=>{(function x(We){return B.apply(this,arguments)})(b.auth).then(Rt=>{if(!y&&pn(window.grecaptcha))be(Rt,We,gt);else{if(typeof window>"u")return void gt(new Error("RecaptchaVerifier is only supported in browser"));ir("https://www.google.com/recaptcha/enterprise.js?render="+Rt).then(()=>{be(Rt,We,gt)}).catch(Jt=>{gt(Jt)})}}).catch(Rt=>{gt(Rt)})})})()}}function ls(E,g,y){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(E,g,y,b=!1){const x=new Qr(E);let B;try{B=yield x.verify(y)}catch{B=yield x.verify(y,!0)}const be=Object.assign({},g);return Object.assign(be,b?{captchaResp:B}:{captchaResponse:B}),Object.assign(be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),be})).apply(this,arguments)}class vo{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const b=B=>new Promise((be,We)=>{try{be(g(B))}catch(gt){We(gt)}});b.onAbort=y,this.queue.push(b);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,u.Z)(function*(){if(y.auth.currentUser===g)return;const b=[];try{for(const x of y.queue)yield x(g),x.onAbort&&b.push(x.onAbort)}catch(x){b.reverse();for(const B of b)try{B()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class Ho{constructor(g,y,b,x){this.app=g,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=b,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tl(this),this.idTokenSubscription=new Tl(this),this.beforeStateQueue=new vo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(g,y){var b=this;return y&&(this._popupRedirectResolver=br(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var x,B;if(!b._deleted&&(b.persistenceManager=yield se.create(b,g),!b._deleted)){if(null!==(x=b._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(y),b.lastNotifiedUid=(null===(B=b.currentUser)||void 0===B?void 0:B.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,u.Z)(function*(){var b;const x=yield y.assertedPersistence.getCurrentUser();let B=x,be=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const We=null===(b=y.redirectUser)||void 0===b?void 0:b._redirectEventId,gt=B?._redirectEventId,Rt=yield y.tryRedirectSignIn(g);(!We||We===gt)&&Rt?.user&&(B=Rt.user,be=!0)}if(!B)return y.directlySetCurrentUser(null);if(!B._redirectEventId){if(be)try{yield y.beforeStateQueue.runMiddleware(B)}catch(We){B=x,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(We))}return B?y.reloadAndSetCurrentUserOrClear(B):y.directlySetCurrentUser(null)}return K(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===B._redirectEventId?y.directlySetCurrentUser(B):y.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(g){var y=this;return(0,u.Z)(function*(){let b=null;try{b=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,u.Z)(function*(){try{yield fr(g)}catch(b){if("auth/network-request-failed"!==b?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function $t(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){const b=g?(0,U.m9)(g):null;return b&&K(b.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(b&&b._clone(y))})()}_updateCurrentUser(g,y=!1){var b=this;return(0,u.Z)(function*(){if(!b._deleted)return g&&K(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),y||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,u.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(br(g))}))}initializeRecaptchaConfig(){var g=this;return(0,u.Z)(function*(){const y=yield lt(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new bn(y);null==g.tenantId?g._agentRecaptchaConfig=b:g._tenantRecaptchaConfigs[g.tenantId]=b,b.emailPasswordEnabled&&new Qr(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,y,b){return this.registerStateListener(this.authStateSubscription,g,y,b)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,b){return this.registerStateListener(this.idTokenSubscription,g,y,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var b=this;return(0,u.Z)(function*(){const x=yield b.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const b=g&&br(g)||y._popupRedirectResolver;K(b,y,"argument-error"),y.redirectPersistenceManager=yield se.create(y,[br(b._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,u.Z)(function*(){var b,x;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(b=y._currentUser)||void 0===b?void 0:b._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,u.Z)(function*(){if(g===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,b,x){if(this._deleted)return()=>{};const B="function"==typeof y?y:y.next.bind(y),be=this._isInitialized?Promise.resolve():this._initializationPromise;return K(be,this,"internal-error"),be.then(()=>B(this.currentUser)),"function"==typeof y?g.addObserver(y,b,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=xr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var y;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();x&&(b["X-Firebase-Client"]=x);const B=yield g._getAppCheckToken();return B&&(b["X-Firebase-AppCheck"]=B),b})()}_getAppCheckToken(){var g=this;return(0,u.Z)(function*(){var y;const b=yield null===(y=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return b?.error&&function Re(E,...g){Z.logLevel<=de.in.WARN&&Z.warn(`Auth (${N.SDK_VERSION}): ${E}`,...g)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function gr(E){return(0,U.m9)(E)}class Tl{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(y=>this.observer=y)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wa(E,g,y){const b=gr(E);K(b._canInitEmulator,b,"emulator-config-failed"),K(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const x=!!y?.disableWarnings,B=ro(g),{host:be,port:We}=function O(E){const g=ro(E),y=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!y)return{host:"",port:null};const b=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(b);if(x){const B=x[1];return{host:B,port:W(b.substr(B.length+1))}}{const[B,be]=b.split(":");return{host:B,port:W(be)}}}(g);b.config.emulator={url:`${B}//${be}${null===We?"":`:${We}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:be,port:We,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function V(){function E(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function ro(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function W(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class X{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return Pe("not implemented")}_getIdTokenResponse(g){return Pe("not implemented")}_linkToIdToken(g,y){return Pe("not implemented")}_getReauthenticationResolver(g){return Pe("not implemented")}}function we(E,g){return De.apply(this,arguments)}function De(){return(De=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:resetPassword",ge(E,g))})).apply(this,arguments)}function Ke(E,g){return nt.apply(this,arguments)}function nt(){return(nt=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Be(){return(Be=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:update",ge(E,g))})).apply(this,arguments)}function Et(E,g){return wt.apply(this,arguments)}function wt(){return(wt=(0,u.Z)(function*(E,g){return pt(E,"POST","/v1/accounts:signInWithPassword",ge(E,g))})).apply(this,arguments)}function cn(E,g){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:sendOobCode",ge(E,g))})).apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(E,g){return cn(E,g)})).apply(this,arguments)}function us(E,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,u.Z)(function*(E,g){return cn(E,g)})).apply(this,arguments)}function ha(E,g){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,u.Z)(function*(E,g){return cn(E,g)})).apply(this,arguments)}function yn(){return(yn=(0,u.Z)(function*(E,g){return cn(E,g)})).apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(E,g){return pt(E,"POST","/v1/accounts:signInWithEmailLink",ge(E,g))})).apply(this,arguments)}function _i(){return(_i=(0,u.Z)(function*(E,g){return pt(E,"POST","/v1/accounts:signInWithEmailLink",ge(E,g))})).apply(this,arguments)}class Eo extends X{constructor(g,y,b,x=null){super("password",b),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new Eo(g,y,"password")}static _fromEmailAndCode(g,y,b=null){return new Eo(g,y,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,u.Z)(function*(){var b;switch(y.signInMethod){case"password":const x={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=g._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const B=yield ls(g,x,"signInWithPassword");return Et(g,B)}return Et(g,x).catch(function(){var B=(0,u.Z)(function*(be){if("auth/missing-recaptcha-token"===be.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const We=yield ls(g,x,"signInWithPassword");return Et(g,We)}return Promise.reject(be)});return function(be){return B.apply(this,arguments)}}());case"emailLink":return function Nr(E,g){return Pi.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:re(g,"internal-error")}})()}_linkToIdToken(g,y){var b=this;return(0,u.Z)(function*(){switch(b.signInMethod){case"password":return Ke(g,{idToken:y,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function yc(E,g){return _i.apply(this,arguments)}(g,{idToken:y,email:b._email,oobCode:b._password});default:re(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function cr(E,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,u.Z)(function*(E,g){return pt(E,"POST","/v1/accounts:signInWithIdp",ge(E,g))})).apply(this,arguments)}class on extends X{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new on(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):re("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:x}=y,B=(0,ue._T)(y,["providerId","signInMethod"]);if(!b||!x)return null;const be=new on(b,x);return be.idToken=B.idToken||void 0,be.accessToken=B.accessToken||void 0,be.secret=B.secret,be.nonce=B.nonce,be.pendingToken=B.pendingToken||null,be}_getIdTokenResponse(g){return cr(g,this.buildRequest())}_linkToIdToken(g,y){const b=this.buildRequest();return b.idToken=y,cr(g,b)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,cr(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,U.xO)(y)}return g}}function _c(){return(_c=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:sendVerificationCode",ge(E,g))})).apply(this,arguments)}function Dr(){return(Dr=(0,u.Z)(function*(E,g){return pt(E,"POST","/v1/accounts:signInWithPhoneNumber",ge(E,g))})).apply(this,arguments)}function pa(){return(pa=(0,u.Z)(function*(E,g){const y=yield pt(E,"POST","/v1/accounts:signInWithPhoneNumber",ge(E,g));if(y.temporaryProof)throw ct(E,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Vs={USER_NOT_FOUND:"user-not-found"};function Ec(){return(Ec=(0,u.Z)(function*(E,g){return pt(E,"POST","/v1/accounts:signInWithPhoneNumber",ge(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Vs)})).apply(this,arguments)}class vi extends X{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new vi({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new vi({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Go(E,g){return Dr.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function vc(E,g){return pa.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function qa(E,g){return Ec.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:b,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:b,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:b,phoneNumber:x,temporaryProof:B}=g;return b||y||x||B?new vi({verificationId:y,verificationCode:b,phoneNumber:x,temporaryProof:B}):null}}class $s{constructor(g){var y,b,x,B,be,We;const gt=(0,U.zd)((0,U.pd)(g)),Rt=null!==(y=gt.apiKey)&&void 0!==y?y:null,Jt=null!==(b=gt.oobCode)&&void 0!==b?b:null,Nn=function ki(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=gt.mode)&&void 0!==x?x:null);K(Rt&&Jt&&Nn,"argument-error"),this.apiKey=Rt,this.operation=Nn,this.code=Jt,this.continueUrl=null!==(B=gt.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(be=gt.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(We=gt.tenantId)&&void 0!==We?We:null}static parseLink(g){const y=function Cu(E){const g=(0,U.zd)((0,U.pd)(E)).link,y=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,b=(0,U.zd)((0,U.pd)(E)).deep_link_id;return(b?(0,U.zd)((0,U.pd)(b)).link:null)||b||y||g||E}(g);try{return new $s(y)}catch{return null}}}let bp=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(y,b){return Eo._fromEmailAndPassword(y,b)}static credentialWithLink(y,b){const x=$s.parseLink(b);return K(x,"argument-error"),Eo._fromEmailAndCode(y,x.code,x.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class io{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ga extends io{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ds extends ga{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return K("providerId"in y&&"signInMethod"in y,"argument-error"),on._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return K(g.idToken||g.accessToken,"argument-error"),on._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ds.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ds.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:x,pendingToken:B,nonce:be,providerId:We}=g;if(!b&&!x&&!y&&!B||!We)return null;try{return new ds(We)._credential({idToken:y,accessToken:b,nonce:be,pendingToken:B})}catch{return null}}}let ma=(()=>{class E extends ga{constructor(){super("facebook.com")}static credential(y){return on._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Ya=(()=>{class E extends ga{constructor(){super("google.com"),this.addScope("profile")}static credential(y,b){return on._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:b})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:b,oauthAccessToken:x}=y;if(!b&&!x)return null;try{return E.credential(b,x)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Ka=(()=>{class E extends ga{constructor(){super("github.com")}static credential(y){return on._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Al extends X{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return cr(g,this.buildRequest())}_linkToIdToken(g,y){const b=this.buildRequest();return b.idToken=y,cr(g,b)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,cr(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:x,pendingToken:B}=y;return b&&x&&B&&b===x?new Al(b,B):null}static _create(g,y){return new Al(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Si extends io{constructor(g){K(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Si.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Si.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Al.fromJSON(g);return K(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:b}=g;if(!y||!b)return null;try{return Al._create(b,y)}catch{return null}}}let Du=(()=>{class E extends ga{constructor(){super("twitter.com")}static credential(y,b){return on._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:b})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:b,oauthTokenSecret:x}=y;if(!b||!x)return null;try{return E.credential(b,x)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Us(E,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,u.Z)(function*(E,g){return pt(E,"POST","/v1/accounts:signUp",ge(E,g))})).apply(this,arguments)}class mr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,b,x=!1){return(0,u.Z)(function*(){const B=yield vr._fromIdTokenResponse(g,b,x),be=Za(b);return new mr({user:B,providerId:be,_tokenResponse:b,operationType:y})})()}static _forOperation(g,y,b){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const x=Za(b);return new mr({user:g,providerId:x,_tokenResponse:b,operationType:y})})()}}function Za(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function sh(E){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,u.Z)(function*(E){var g;const y=gr(E);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new mr({user:y.currentUser,providerId:null,operationType:"signIn"});const b=yield Us(y,{returnSecureToken:!0}),x=yield mr._fromIdTokenResponse(y,"signIn",b,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class Su extends U.ZR{constructor(g,y,b,x){var B;super(y.code,y.message),this.operationType=b,this.user=x,Object.setPrototypeOf(this,Su.prototype),this.customData={appName:g.name,tenantId:null!==(B=g.tenantId)&&void 0!==B?B:void 0,_serverResponse:y.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,y,b,x){return new Su(g,y,b,x)}}function Au(E,g,y,b){return("reauthenticate"===g?y._getReauthenticationResolver(E):y._getIdTokenResponse(E)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?Su._fromErrorAndOperation(E,B,g,b):B})}function Cp(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function Fm(E,g){return oh.apply(this,arguments)}function oh(){return oh=(0,u.Z)(function*(E,g){const y=(0,U.m9)(E);yield xu(!0,y,g);const{providerUserInfo:b}=yield function zt(E,g){return tn.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=Cp(b||[]);return y.providerData=y.providerData.filter(B=>x.has(B.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),oh.apply(this,arguments)}function so(E,g){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,u.Z)(function*(E,g,y=!1){const b=yield En(E,g._linkToIdToken(E.auth,yield E.getIdToken()),y);return mr._forOperation(E,"link",b)})).apply(this,arguments)}function xu(E,g,y){return wc.apply(this,arguments)}function wc(){return(wc=(0,u.Z)(function*(E,g,y){yield fr(g);const x=!1===E?"provider-already-linked":"no-such-provider";K(Cp(g.providerData).has(y)===E,g.auth,x)})).apply(this,arguments)}function Dp(E,g){return ah.apply(this,arguments)}function ah(){return(ah=(0,u.Z)(function*(E,g,y=!1){const{auth:b}=E,x="reauthenticate";try{const B=yield En(E,Au(b,x,g,E),y);K(B.idToken,b,"internal-error");const be=Lt(B.idToken);K(be,b,"internal-error");const{sub:We}=be;return K(E.uid===We,b,"user-mismatch"),mr._forOperation(E,x,B)}catch(B){throw"auth/user-not-found"===B?.code&&re(b,"user-mismatch"),B}})).apply(this,arguments)}function lh(E,g){return ch.apply(this,arguments)}function ch(){return(ch=(0,u.Z)(function*(E,g,y=!1){const b="signIn",x=yield Au(E,b,g),B=yield mr._fromIdTokenResponse(E,b,x);return y||(yield E._updateCurrentUser(B.user)),B})).apply(this,arguments)}function Ru(E,g){return uh.apply(this,arguments)}function uh(){return(uh=(0,u.Z)(function*(E,g){return lh(gr(E),g)})).apply(this,arguments)}function Ic(E,g){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,u.Z)(function*(E,g){const y=(0,U.m9)(E);return yield xu(!1,y,g.providerId),so(y,g)})).apply(this,arguments)}function Tp(E,g){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,u.Z)(function*(E,g){return Dp((0,U.m9)(E),g)})).apply(this,arguments)}function Wo(){return(Wo=(0,u.Z)(function*(E,g){return pt(E,"POST","/v1/accounts:signInWithCustomToken",ge(E,g))})).apply(this,arguments)}function Lm(E,g){return qo.apply(this,arguments)}function qo(){return qo=(0,u.Z)(function*(E,g){const y=gr(E),b=yield function a0(E,g){return Wo.apply(this,arguments)}(y,{token:g,returnSecureToken:!0}),x=yield mr._fromIdTokenResponse(y,"signIn",b);return yield y._updateCurrentUser(x.user),x}),qo.apply(this,arguments)}class Ki{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Ou._fromServerResponse(g,y):"totpInfo"in y?Ml._fromServerResponse(g,y):re(g,"internal-error")}}class Ou extends Ki{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Ou(y)}}class Ml extends Ki{constructor(g){super("totp",g)}static _fromServerResponse(g,y){return new Ml(y)}}function xl(E,g,y){var b;K((null===(b=y.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),K(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(K(y.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(K(y.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Sp(E,g,y){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,u.Z)(function*(E,g,y){var b;const x=gr(E),B={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=x._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const be=yield ls(x,B,"getOobCode",!0);y&&xl(x,be,y),yield us(x,be)}else y&&xl(x,B,y),yield us(x,B).catch(function(){var be=(0,u.Z)(function*(We){if("auth/missing-recaptcha-token"!==We.code)return Promise.reject(We);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const gt=yield ls(x,B,"getOobCode",!0);y&&xl(x,gt,y),yield us(x,gt)}});return function(We){return be.apply(this,arguments)}}())}),Ap.apply(this,arguments)}function bc(E,g,y){return bs.apply(this,arguments)}function bs(){return(bs=(0,u.Z)(function*(E,g,y){yield we((0,U.m9)(E),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Cc(E,g){return Lr.apply(this,arguments)}function Lr(){return Lr=(0,u.Z)(function*(E,g){yield function it(E,g){return Be.apply(this,arguments)}((0,U.m9)(E),{oobCode:g})}),Lr.apply(this,arguments)}function hs(E,g){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,u.Z)(function*(E,g){const y=(0,U.m9)(E),b=yield we(y,{oobCode:g}),x=b.requestType;switch(K(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(b.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(b.mfaInfo,y,"internal-error");default:K(b.email,y,"internal-error")}let B=null;return b.mfaInfo&&(B=Ki._fromServerResponse(gr(y),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:B},operation:x}})).apply(this,arguments)}function Dc(E,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,u.Z)(function*(E,g){const{data:y}=yield hs((0,U.m9)(E),g);return y.email})).apply(this,arguments)}function _a(E,g,y){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,u.Z)(function*(E,g,y){var b;const x=gr(E),B={returnSecureToken:!0,email:g,password:y,clientType:"CLIENT_TYPE_WEB"};let be;if(null!==(b=x._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Rt=yield ls(x,B,"signUpPassword");be=Us(x,Rt)}else be=Us(x,B).catch(function(){var Rt=(0,u.Z)(function*(Jt){if("auth/missing-recaptcha-token"===Jt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Nn=yield ls(x,B,"signUpPassword");return Us(x,Nn)}return Promise.reject(Jt)});return function(Jt){return Rt.apply(this,arguments)}}());const We=yield be.catch(Rt=>Promise.reject(Rt)),gt=yield mr._fromIdTokenResponse(x,"signIn",We);return yield x._updateCurrentUser(gt.user),gt}),Tc.apply(this,arguments)}function Mp(E,g,y){return Ru((0,U.m9)(E),bp.credential(g,y))}function dh(E,g,y){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,u.Z)(function*(E,g,y){var b;const x=gr(E),B={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function be(We,gt){K(gt.handleCodeInApp,x,"argument-error"),gt&&xl(x,We,gt)}if(null!==(b=x._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const We=yield ls(x,B,"getOobCode",!0);be(We,y),yield ha(x,We)}else be(B,y),yield ha(x,B).catch(function(){var We=(0,u.Z)(function*(gt){if("auth/missing-recaptcha-token"!==gt.code)return Promise.reject(gt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Rt=yield ls(x,B,"getOobCode",!0);be(Rt,y),yield ha(x,Rt)}});return function(gt){return We.apply(this,arguments)}}())}),Yo.apply(this,arguments)}function hh(E,g){const y=$s.parseLink(g);return"EMAIL_SIGNIN"===y?.operation}function ku(E,g,y){return ci.apply(this,arguments)}function ci(){return(ci=(0,u.Z)(function*(E,g,y){const b=(0,U.m9)(E),x=bp.credentialWithLink(g,y||Ve());return K(x._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Ru(b,x)})).apply(this,arguments)}function Fu(){return(Fu=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:createAuthUri",ge(E,g))})).apply(this,arguments)}function Bm(E,g){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,u.Z)(function*(E,g){const b={identifier:g,continueUri:Ye()?Ve():"http://localhost"},{signinMethods:x}=yield function l0(E,g){return Fu.apply(this,arguments)}((0,U.m9)(E),b);return x||[]}),Rl.apply(this,arguments)}function xp(E,g){return Nl.apply(this,arguments)}function Nl(){return Nl=(0,u.Z)(function*(E,g){const y=(0,U.m9)(E),x={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&xl(y.auth,x,g);const{email:B}=yield function cs(E,g){return li.apply(this,arguments)}(y.auth,x);B!==E.email&&(yield E.reload())}),Nl.apply(this,arguments)}function Sc(E,g,y){return Xa.apply(this,arguments)}function Xa(){return Xa=(0,u.Z)(function*(E,g,y){const b=(0,U.m9)(E),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};y&&xl(b.auth,B,y);const{email:be}=yield function Dt(E,g){return yn.apply(this,arguments)}(b.auth,B);be!==E.email&&(yield E.reload())}),Xa.apply(this,arguments)}function Bu(){return(Bu=(0,u.Z)(function*(E,g){return Ne(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Rp(E,g){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,u.Z)(function*(E,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const b=(0,U.m9)(E),B={idToken:yield b.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},be=yield En(b,function Lu(E,g){return Bu.apply(this,arguments)}(b.auth,B));b.displayName=be.displayName||null,b.photoURL=be.photoUrl||null;const We=b.providerData.find(({providerId:gt})=>"password"===gt);We&&(We.displayName=b.displayName,We.photoURL=b.photoURL),yield b._updateTokensIfNecessary(be)}),Vu.apply(this,arguments)}function fh(E,g){return Uu((0,U.m9)(E),g,null)}function $u(E,g){return Uu((0,U.m9)(E),null,g)}function Uu(E,g,y){return js.apply(this,arguments)}function js(){return(js=(0,u.Z)(function*(E,g,y){const{auth:b}=E,B={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(B.email=g),y&&(B.password=y);const be=yield En(E,Ke(b,B));yield E._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class va{constructor(g,y,b={}){this.isNewUser=g,this.providerId=y,this.profile=b}}class ur extends va{constructor(g,y,b,x){super(g,y,b),this.username=x}}class Ac extends va{constructor(g,y){super(g,"facebook.com",y)}}class Qa extends ur{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Ai extends va{constructor(g,y){super(g,"google.com",y)}}class Ja extends ur{constructor(g,y,b){super(g,"twitter.com",y,b)}}function ph(E){const{user:g,_tokenResponse:y}=E;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function ju(E){var g,y;if(!E)return null;const{providerId:b}=E,x=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},B=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&E?.idToken){const be=null===(y=null===(g=Lt(E.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(be)return new va(B,"anonymous"!==be&&"custom"!==be?be:null)}if(!b)return null;switch(b){case"facebook.com":return new Ac(B,x);case"github.com":return new Qa(B,x);case"google.com":return new Ai(B,x);case"twitter.com":return new Ja(B,x,E.screenName||null);case"custom":case"anonymous":return new va(B,null);default:return new va(B,b,x)}}(y)}class Ds{constructor(g,y,b){this.type=g,this.credential=y,this.auth=b}static _fromIdtoken(g,y){return new Ds("enroll",g,y)}static _fromMfaPendingCredential(g){return new Ds("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,b;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Ds._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(b=g.multiFactorSession)&&void 0!==b&&b.idToken)return Ds._fromIdtoken(g.multiFactorSession.idToken)}return null}}class xc{constructor(g,y,b){this.session=g,this.hints=y,this.signInResolver=b}static _fromError(g,y){const b=gr(g),x=y.customData._serverResponse,B=(x.mfaInfo||[]).map(We=>Ki._fromServerResponse(b,We));K(x.mfaPendingCredential,b,"internal-error");const be=Ds._fromMfaPendingCredential(x.mfaPendingCredential);return new xc(be,B,function(){var We=(0,u.Z)(function*(gt){const Rt=yield gt._process(b,be);delete x.mfaInfo,delete x.mfaPendingCredential;const Jt=Object.assign(Object.assign({},x),{idToken:Rt.idToken,refreshToken:Rt.refreshToken});switch(y.operationType){case"signIn":const Nn=yield mr._fromIdTokenResponse(b,y.operationType,Jt);return yield b._updateCurrentUser(Nn.user),Nn;case"reauthenticate":return K(y.user,b,"internal-error"),mr._forOperation(y.user,y.operationType,Jt);default:re(b,"internal-error")}});return function(gt){return We.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,u.Z)(function*(){return y.signInResolver(g)})()}}function un(E,g){var y;const b=(0,U.m9)(E),x=g;return K(g.customData.operationType,b,"argument-error"),K(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,b,"argument-error"),xc._fromError(b,x)}class Ol{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(b=>Ki._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new Ol(g)}getSession(){var g=this;return(0,u.Z)(function*(){return Ds._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var b=this;return(0,u.Z)(function*(){const x=g,B=yield b.getSession(),be=yield En(b.user,x._process(b.user.auth,B,y));return yield b.user._updateTokensIfNecessary(be),b.user.reload()})()}unenroll(g){var y=this;return(0,u.Z)(function*(){const b="string"==typeof g?g:g.uid,x=yield y.user.getIdToken();try{const B=yield En(y.user,function Op(E,g){return Ne(E,"POST","/v2/accounts/mfaEnrollment:withdraw",ge(E,g))}(y.user.auth,{idToken:x,mfaEnrollmentId:b}));y.enrolledFactors=y.enrolledFactors.filter(({uid:be})=>be!==b),yield y.user._updateTokensIfNecessary(B),yield y.user.reload()}catch(B){throw B}})()}}const Hs=new WeakMap;function Rc(E){const g=(0,U.m9)(E);return Hs.has(g)||Hs.set(g,Ol._fromUser(g)),Hs.get(g)}const Pl="__sak";class Pp{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Pl,"1"),this.storage.removeItem(Pl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wu=(()=>{class E extends Pp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,b)=>this.onStorageEvent(y,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vh(){const E=(0,U.z$)();return $(E)||Wt(E)}()&&function Gr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const b of Object.keys(this.listeners)){const x=this.storage.getItem(b),B=this.localCache[b];x!==B&&y(b,B,x)}}onStorageEvent(y,b=!1){if(!y.key)return void this.forAllChangedKeys((We,gt,Rt)=>{this.notifyListeners(We,Rt)});const x=y.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const We=this.storage.getItem(x);if(y.newValue!==We)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!b)return}const B=()=>{const We=this.storage.getItem(x);!b&&this.localCache[x]===We||this.notifyListeners(x,We)},be=this.storage.getItem(x);!function zn(){return(0,U.w1)()&&10===document.documentMode}()||be===y.newValue||y.newValue===y.oldValue?B():setTimeout(B,10)}notifyListeners(y,b){this.localCache[y]=b;const x=this.listeners[y];if(x)for(const B of Array.from(x))B(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,b,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:b,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,b){var x=()=>super._set,B=this;return(0,u.Z)(function*(){yield x().call(B,y,b),B.localCache[y]=JSON.stringify(b)})()}_get(y){var b=()=>super._get,x=this;return(0,u.Z)(function*(){const B=yield b().call(x,y);return x.localCache[y]=JSON.stringify(B),B})()}_remove(y){var b=()=>super._remove,x=this;return(0,u.Z)(function*(){yield b().call(x,y),delete x.localCache[y]})()}}return E.type="LOCAL",E})(),Jr=(()=>{class E extends Pp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,b){}_removeListener(y,b){}}return E.type="SESSION",E})();let Oc=(()=>{class E{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const b=this.receivers.find(B=>B.isListeningto(y));if(b)return b;const x=new E(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var b=this;return(0,u.Z)(function*(){const x=y,{eventId:B,eventType:be,data:We}=x.data,gt=b.handlersMap[be];if(!gt?.size)return;x.ports[0].postMessage({status:"ack",eventId:B,eventType:be});const Rt=Array.from(gt).map(function(){var Nn=(0,u.Z)(function*(Ji){return Ji(x.origin,We)});return function(Ji){return Nn.apply(this,arguments)}}()),Jt=yield function Fp(E){return Promise.all(E.map(function(){var g=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(b){return{fulfilled:!1,reason:b}}});return function(y){return g.apply(this,arguments)}}()))}(Rt);x.ports[0].postMessage({status:"done",eventId:B,eventType:be,response:Jt})})()}_subscribe(y,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(b)}_unsubscribe(y,b){this.handlersMap[y]&&b&&this.handlersMap[y].delete(b),(!b||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Fi(E="",g=10){let y="";for(let b=0;b<g;b++)y+=Math.floor(10*Math.random());return E+y}class Lp{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,b=50){var x=this;return(0,u.Z)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let be,We;return new Promise((gt,Rt)=>{const Jt=Fi("",20);B.port1.start();const Nn=setTimeout(()=>{Rt(new Error("unsupported_event"))},b);We={messageChannel:B,onMessage(Ji){const Ma=Ji;if(Ma.data.eventId===Jt)switch(Ma.data.status){case"ack":clearTimeout(Nn),be=setTimeout(()=>{Rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),gt(Ma.data.response);break;default:clearTimeout(Nn),clearTimeout(be),Rt(new Error("invalid_response"))}}},x.handlers.add(We),B.port1.addEventListener("message",We.onMessage),x.target.postMessage({eventType:g,eventId:Jt,data:y},[B.port2])}).finally(()=>{We&&x.removeMessageHandler(We)})})()}}function Br(){return window}function Eh(){return typeof Br().WorkerGlobalScope<"u"&&"function"==typeof Br().importScripts}function Ei(){return(Ei=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tr="firebaseLocalStorageDb",ei="firebaseLocalStorage",Yu="fbase_key";class kl{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function kc(E,g){return E.transaction([ei],g?"readwrite":"readonly").objectStore(ei)}function Fl(){const E=indexedDB.open(Tr,1);return new Promise((g,y)=>{E.addEventListener("error",()=>{y(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(ei,{keyPath:Yu})}catch(x){y(x)}}),E.addEventListener("success",(0,u.Z)(function*(){const b=E.result;b.objectStoreNames.contains(ei)?g(b):(b.close(),yield function Ih(){const E=indexedDB.deleteDatabase(Tr);return new kl(E).toPromise()}(),g(yield Fl()))}))})}function Fc(E,g,y){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,u.Z)(function*(E,g,y){const b=kc(E,!0).put({[Yu]:g,value:y});return new kl(b).toPromise()})).apply(this,arguments)}function tl(){return(tl=(0,u.Z)(function*(E,g){const y=kc(E,!1).get(g),b=yield new kl(y).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Lc(E,g){const y=kc(E,!0).delete(g);return new kl(y).toPromise()}const bh=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield Fl()),y.db})()}_withRetries(y){var b=this;return(0,u.Z)(function*(){let x=0;for(;;)try{const B=yield b._openDb();return yield y(B)}catch(B){if(x++>3)throw B;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return Eh()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=Oc._getInstance(function Pc(){return Eh()?self:null}()),y.receiver._subscribe("keyChanged",function(){var b=(0,u.Z)(function*(x,B){return{keyProcessed:(yield y._poll()).includes(B.key)}});return function(x,B){return b.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var b=(0,u.Z)(function*(x,B){return["keyChanged"]});return function(x,B){return b.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var b,x;if(y.activeServiceWorker=yield function wh(){return Ei.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Lp(y.activeServiceWorker);const B=yield y.sender._send("ping",{},800);B&&null!==(b=B[0])&&void 0!==b&&b.fulfilled&&null!==(x=B[0])&&void 0!==x&&x.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var b=this;return(0,u.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function ao(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:y},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Fl();return yield Fc(y,Pl,"1"),yield Lc(y,Pl),!0}catch{}return!1})()}_withPendingWrite(y){var b=this;return(0,u.Z)(function*(){b.pendingWrites++;try{yield y()}finally{b.pendingWrites--}})()}_set(y,b){var x=this;return(0,u.Z)(function*(){return x._withPendingWrite((0,u.Z)(function*(){return yield x._withRetries(B=>Fc(B,y,b)),x.localCache[y]=b,x.notifyServiceWorker(y)}))})()}_get(y){var b=this;return(0,u.Z)(function*(){const x=yield b._withRetries(B=>function Xo(E,g){return tl.apply(this,arguments)}(B,y));return b.localCache[y]=x,x})()}_remove(y){var b=this;return(0,u.Z)(function*(){return b._withPendingWrite((0,u.Z)(function*(){return yield b._withRetries(x=>Lc(x,y)),delete b.localCache[y],b.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const b=yield y._withRetries(be=>{const We=kc(be,!1).getAll();return new kl(We).toPromise()});if(!b)return[];if(0!==y.pendingWrites)return[];const x=[],B=new Set;for(const{fbase_key:be,value:We}of b)B.add(be),JSON.stringify(y.localCache[be])!==JSON.stringify(We)&&(y.notifyListeners(be,We),x.push(be));for(const be of Object.keys(y.localCache))y.localCache[be]&&!B.has(be)&&(y.notifyListeners(be,null),x.push(be));return x})()}notifyListeners(y,b){this.localCache[y]=b;const x=this.listeners[y];if(x)for(const B of Array.from(x))B(b)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),Er=1e12;class Th{constructor(g){this.auth=g,this.counter=Er,this._widgets=new Map}render(g,y){const b=this.counter;return this._widgets.set(b,new Bp(g,this.auth.name,y||{})),this.counter++,b}reset(g){var y;const b=g||Er;null===(y=this._widgets.get(b))||void 0===y||y.delete(),this._widgets.delete(b)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Er))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,u.Z)(function*(){var b;return null===(b=y._widgets.get(g||Er))||void 0===b||b.execute(),""})()}}class Bp{constructor(g,y,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;K(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Sh(E){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<E;b++)g.push(y.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ah=sr("rcb"),Mh=new Qt(3e4,6e4);class Ll{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Br().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return K(function Ea(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(y),g,"argument-error"),this.shouldResolveImmediately(y)&&Xt(Br().grecaptcha)?Promise.resolve(Br().grecaptcha):new Promise((b,x)=>{const B=Br().setTimeout(()=>{x(Ee(g,"network-request-failed"))},Mh.get());Br()[Ah]=()=>{Br().clearTimeout(B),delete Br()[Ah];const We=Br().grecaptcha;if(!We||!Xt(We))return void x(Ee(g,"internal-error"));const gt=We.render;We.render=(Rt,Jt)=>{const Nn=gt(Rt,Jt);return this.counter++,Nn},this.hostLanguage=y,b(We)},ir(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Ah,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(B),x(Ee(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Br().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xh{load(g){return(0,u.Z)(function*(){return new Th(g)})()}clearedOneInstance(){}}const Vc="recaptcha",Bl={theme:"light",type:"image"};class Xu{constructor(g,y=Object.assign({},Bl),b){this.parameters=y,this.type=Vc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gr(b),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;K(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xh:new Ll,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(y)||new Promise(B=>{const be=We=>{We&&(g.tokenChangeListeners.delete(be),B(We))};g.tokenChangeListeners.add(be),g.isInvisible&&b.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(b=>b(y)),"function"==typeof g)g(y);else if("string"==typeof g){const b=Br()[g];"function"==typeof b&&b(y)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const b=document.createElement("div");y.appendChild(b),y=b}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){K(Ye()&&!Eh(),g.auth,"internal-error"),yield function $c(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function $e(E){return Oe.apply(this,arguments)}(g.auth);K(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Li{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=vi._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Bi(E,g,y){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,u.Z)(function*(E,g,y){const b=gr(E),x=yield wa(b,g,(0,U.m9)(y));return new Li(x,B=>Ru(b,B))})).apply(this,arguments)}function Un(E,g,y){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,u.Z)(function*(E,g,y){const b=(0,U.m9)(E);yield xu(!1,b,"phone");const x=yield wa(b.auth,g,(0,U.m9)(y));return new Li(x,B=>Ic(b,B))})).apply(this,arguments)}function Vi(E,g,y){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,u.Z)(function*(E,g,y){const b=(0,U.m9)(E),x=yield wa(b.auth,g,(0,U.m9)(y));return new Li(x,B=>Tp(b,B))})).apply(this,arguments)}function wa(E,g,y){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,u.Z)(function*(E,g,y){var b;const x=yield y.verify();try{let B;if(K("string"==typeof x,E,"argument-error"),K(y.type===Vc,E,"argument-error"),B="string"==typeof g?{phoneNumber:g}:g,"session"in B){const be=B.session;if("phoneNumber"in B)return K("enroll"===be.type,E,"internal-error"),(yield function Gu(E,g){return Ne(E,"POST","/v2/accounts/mfaEnrollment:start",ge(E,g))}(E,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{K("signin"===be.type,E,"internal-error");const We=(null===(b=B.multiFactorHint)||void 0===b?void 0:b.uid)||B.multiFactorUid;return K(We,E,"missing-multi-factor-info"),(yield function Ch(E,g){return Ne(E,"POST","/v2/accounts/mfaSignIn:start",ge(E,g))}(E,{mfaPendingCredential:be.credential,mfaEnrollmentId:We,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield function Sl(E,g){return _c.apply(this,arguments)}(E,{phoneNumber:B.phoneNumber,recaptchaToken:x});return be}}finally{y._reset()}}),Ju.apply(this,arguments)}function Vp(E,g){return nl.apply(this,arguments)}function nl(){return(nl=(0,u.Z)(function*(E,g){yield so((0,U.m9)(E),g)})).apply(this,arguments)}let jm=(()=>{class E{constructor(y){this.providerId=E.PROVIDER_ID,this.auth=gr(y)}verifyPhoneNumber(y,b){return wa(this.auth,y,(0,U.m9)(b))}static credential(y,b){return vi._fromVerification(y,b)}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:b,temporaryProof:x}=y;return b&&x?vi._fromTokenResponse(b,x):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Ts(E,g){return g?br(g):(K(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class dn extends X{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return cr(g,this._buildIdpRequest())}_linkToIdToken(g,y){return cr(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return cr(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function fs(E){return lh(E.auth,new dn(E),E.bypassAuthState)}function Rh(E){const{auth:g,user:y}=E;return K(y,g,"internal-error"),Dp(y,new dn(E),E.bypassAuthState)}function Ia(E){return ps.apply(this,arguments)}function ps(){return(ps=(0,u.Z)(function*(E){const{auth:g,user:y}=E;return K(y,g,"internal-error"),so(y,new dn(E),E.bypassAuthState)})).apply(this,arguments)}class ba{constructor(g,y,b,x,B=!1){this.auth=g,this.resolver=b,this.user=x,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,u.Z)(function*(b,x){g.pendingPromise={resolve:b,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(B){g.reject(B)}});return function(b,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,u.Z)(function*(){const{urlResponse:b,sessionId:x,postBody:B,tenantId:be,error:We,type:gt}=g;if(We)return void y.reject(We);const Rt={auth:y.auth,requestUri:b,sessionId:x,tenantId:be||void 0,postBody:B||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(gt)(Rt))}catch(Jt){y.reject(Jt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return fs;case"linkViaPopup":case"linkViaRedirect":return Ia;case"reauthViaPopup":case"reauthViaRedirect":return Rh;default:re(this.auth,"internal-error")}}resolve(g){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mi=new Qt(2e3,1e4);function Gs(E,g,y){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,u.Z)(function*(E,g,y){const b=gr(E);ye(E,g,io);const x=Ts(b,y);return new wo(b,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Hm(E,g,y){return gs.apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(E,g,y){const b=(0,U.m9)(E);ye(b.auth,g,io);const x=Ts(b.auth,y);return new wo(b.auth,"reauthViaPopup",g,x,b).executeNotNull()})).apply(this,arguments)}function $p(E,g,y){return ea.apply(this,arguments)}function ea(){return(ea=(0,u.Z)(function*(E,g,y){const b=(0,U.m9)(E);ye(b.auth,g,io);const x=Ts(b.auth,y);return new wo(b.auth,"linkViaPopup",g,x,b).executeNotNull()})).apply(this,arguments)}let wo=(()=>{class E extends ba{constructor(y,b,x,B,be){super(y,b,B,be),this.provider=x,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const b=yield y.execute();return K(b,y.auth,"internal-error"),b})()}onExecution(){var y=this;return(0,u.Z)(function*(){ve(1===y.filter.length,"Popup operations only handle one event");const b=Fi();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],b),y.authWindow.associatedEvent=b,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Ee(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const y=()=>{var b,x;this.pollId=null!==(x=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,Mi.get())};y()}}return E.currentPopupAction=null,E})();const Nh="pendingRedirect",zs=new Map;class rl extends ba{constructor(g,y,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,u.Z)(function*(){let b=zs.get(y.auth._key());if(!b){try{const B=(yield function Up(E,g){return il.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;b=()=>Promise.resolve(B)}catch(x){b=()=>Promise.reject(x)}zs.set(y.auth._key(),b)}return y.bypassAuthState||zs.set(y.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,b=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(b,g);if("unknown"!==g.type){if(g.eventId){const x=yield b.auth._redirectUserForId(g.eventId);if(x)return b.user=x,y().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function il(){return(il=(0,u.Z)(function*(E,g){const y=ta(g),b=Da(E);if(!(yield b._isAvailable()))return!1;const x="true"===(yield b._get(y));return yield b._remove(y),x})).apply(this,arguments)}function Ca(E,g){return co.apply(this,arguments)}function co(){return(co=(0,u.Z)(function*(E,g){return Da(E)._set(ta(g),"true")})).apply(this,arguments)}function Oh(){zs.clear()}function $i(E,g){zs.set(E._key(),g)}function Da(E){return br(E._redirectPersistence)}function ta(E){return rn(Nh,E.config.apiKey,E.name)}function Xi(E,g,y){return function Sr(E,g,y){return Io.apply(this,arguments)}(E,g,y)}function Io(){return(Io=(0,u.Z)(function*(E,g,y){const b=gr(E);ye(E,g,io),yield b._initializationPromise;const x=Ts(b,y);return yield Ca(x,b),x._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function bo(E,g,y){return function ms(E,g,y){return ti.apply(this,arguments)}(E,g,y)}function ti(){return(ti=(0,u.Z)(function*(E,g,y){const b=(0,U.m9)(E);ye(b.auth,g,io),yield b.auth._initializationPromise;const x=Ts(b.auth,y);yield Ca(x,b.auth);const B=yield td(b);return x._openRedirect(b.auth,g,"reauthViaRedirect",B)})).apply(this,arguments)}function sl(E,g,y){return function Ph(E,g,y){return ed.apply(this,arguments)}(E,g,y)}function ed(){return(ed=(0,u.Z)(function*(E,g,y){const b=(0,U.m9)(E);ye(b.auth,g,io),yield b.auth._initializationPromise;const x=Ts(b.auth,y);yield xu(!1,b,g.providerId),yield Ca(x,b.auth);const B=yield td(b);return x._openRedirect(b.auth,g,"linkViaRedirect",B)})).apply(this,arguments)}function uo(E,g){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,u.Z)(function*(E,g){return yield gr(E)._initializationPromise,Or(E,g,!1)})).apply(this,arguments)}function Or(E,g){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,u.Z)(function*(E,g,y=!1){const b=gr(E),x=Ts(b,g),be=yield new rl(b,x,y).execute();return be&&!y&&(delete be.user._redirectEventId,yield b._persistUserIfCurrent(be.user),yield b._setRedirectUser(null,g)),be})).apply(this,arguments)}function td(E){return As.apply(this,arguments)}function As(){return(As=(0,u.Z)(function*(E){const g=Fi(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class nd{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(y=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function wn(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vl(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var b;if(g.error&&!Vl(g)){const x=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";y.onError(Ee(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const b=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jc(g))}saveEventToCache(g){this.cachedEventUids.add(jc(g)),this.lastProcessedEventTime=Date.now()}}function jc(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function Vl({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===g?.code}function Ta(E){return jp.apply(this,arguments)}function jp(){return(jp=(0,u.Z)(function*(E,g={}){return Ne(E,"GET","/v1/projects",g)})).apply(this,arguments)}const Hc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c0=/^https?/;function Ws(){return(Ws=(0,u.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield Ta(E);for(const y of g)try{if(ol(y))return}catch{}re(E,"unauthorized-domain")})).apply(this,arguments)}function ol(E){const g=Ve(),{protocol:y,hostname:b}=new URL(g);if(E.startsWith("chrome-extension://")){const be=new URL(E);return""===be.hostname&&""===b?"chrome-extension:"===y&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&be.hostname===b}if(!c0.test(y))return!1;if(Hc.test(E))return b===E;const x=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(b)}const zr=new Qt(3e4,6e4);function Co(){const E=Br().___jsl;if(E?.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let y=0;y<E.CP.length;y++)E.CP[y]=null}let qs=null;const Ys=new Qt(5e3,15e3),rd="__/auth/iframe",id="emulator/auth/iframe",Sa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sd(E){const g=E.config;K(g.authDomain,E,"auth-domain-config-required");const y=g.emulator?Je(g,id):`https://${E.config.authDomain}/${rd}`,b={apiKey:g.apiKey,appName:E.name,v:N.SDK_VERSION},x=kh.get(E.config.apiHost);x&&(b.eid=x);const B=E._getFrameworks();return B.length&&(b.fw=B.join(",")),`${y}?${(0,U.xO)(b).slice(1)}`}function w(){return w=(0,u.Z)(function*(E){const g=yield function ys(E){return qs=qs||function Ul(E){return new Promise((g,y)=>{var b,x,B;function be(){Co(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Co(),y(Ee(E,"network-request-failed"))},timeout:zr.get()})}if(null!==(x=null===(b=Br().gapi)||void 0===b?void 0:b.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(B=Br().gapi)||void 0===B||!B.load){const We=sr("iframefcb");return Br()[We]=()=>{gapi.load?be():y(Ee(E,"network-request-failed"))},ir(`https://apis.google.com/js/api.js?onload=${We}`).catch(gt=>y(gt))}be()}}).catch(g=>{throw qs=null,g})}(E),qs}(E),y=Br().gapi;return K(y,E,"internal-error"),g.open({where:document.body,url:sd(E),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sa,dontclear:!0},b=>new Promise(function(){var x=(0,u.Z)(function*(B,be){yield b.restyle({setHideOnLeave:!1});const We=Ee(E,"network-request-failed"),gt=Br().setTimeout(()=>{be(We)},Ys.get());function Rt(){Br().clearTimeout(gt),B(b)}b.ping(Rt).then(Rt,()=>{be(We)})});return function(B,be){return x.apply(this,arguments)}}()))}),w.apply(this,arguments)}const T={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ze{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ut="__/auth/handler",mn="emulator/auth/handler",gn=encodeURIComponent("fac");function xi(E,g,y,b,x,B){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(E,g,y,b,x,B){K(E.config.authDomain,E,"auth-domain-config-required"),K(E.config.apiKey,E,"invalid-api-key");const be={apiKey:E.config.apiKey,appName:E.name,authType:y,redirectUrl:b,v:N.SDK_VERSION,eventId:x};if(g instanceof io){g.setDefaultLanguage(E.languageCode),be.providerId=g.providerId||"",(0,U.xb)(g.getCustomParameters())||(be.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Jt,Nn]of Object.entries(B||{}))be[Jt]=Nn}if(g instanceof ga){const Jt=g.getScopes().filter(Nn=>""!==Nn);Jt.length>0&&(be.scopes=Jt.join(","))}E.tenantId&&(be.tid=E.tenantId);const We=be;for(const Jt of Object.keys(We))void 0===We[Jt]&&delete We[Jt];const gt=yield E._getAppCheckToken(),Rt=gt?`#${gn}=${encodeURIComponent(gt)}`:"";return`${function Aa({config:E}){return E.emulator?Je(E,mn):`https://${E.authDomain}/${Ut}`}(E)}?${(0,U.xO)(We).slice(1)}${Rt}`})).apply(this,arguments)}const Do="webStorageSupport",Ui=class al{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jr,this._completeRedirectFn=Or,this._overrideRedirectResult=$i}_openPopup(g,y,b,x){var B=this;return(0,u.Z)(function*(){var be;ve(null===(be=B.eventManagers[g._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const We=yield xi(g,y,b,Ve(),x);return function Ct(E,g,y,b=500,x=600){const B=Math.max((window.screen.availHeight-x)/2,0).toString(),be=Math.max((window.screen.availWidth-b)/2,0).toString();let We="";const gt=Object.assign(Object.assign({},T),{width:b.toString(),height:x.toString(),top:B,left:be}),Rt=(0,U.z$)().toLowerCase();y&&(We=k(Rt)?"_blank":y),L(Rt)&&(g=g||"http://localhost",gt.scrollbars="yes");const Jt=Object.entries(gt).reduce((Ji,[Ma,zp])=>`${Ji}${Ma}=${zp},`,"");if(function sn(E=(0,U.z$)()){var g;return Wt(E)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Rt)&&"_self"!==We)return function _t(E,g){const y=document.createElement("a");y.href=E,y.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(b)}(g||"",We),new Ze(null);const Nn=window.open(g||"",We,Jt);K(Nn,E,"popup-blocked");try{Nn.focus()}catch{}return new Ze(Nn)}(g,We,Fi())})()}_openRedirect(g,y,b,x){var B=this;return(0,u.Z)(function*(){return yield B._originValidation(g),function qu(E){Br().location.href=E}(yield xi(g,y,b,Ve(),x)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:B}=this.eventManagers[y];return x?Promise.resolve(x):(ve(B,"If manager is not set, promise should be"),B)}const b=this.initAndGetManager(g);return this.eventManagers[y]={promise:b},b.catch(()=>{delete this.eventManagers[y]}),b}initAndGetManager(g){var y=this;return(0,u.Z)(function*(){const b=yield function jl(E){return w.apply(this,arguments)}(g),x=new nd(g);return b.register("authEvent",B=>(K(B?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=b,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Do,{type:Do},x=>{var B;const be=null===(B=x?.[0])||void 0===B?void 0:B[Do];void 0!==be&&y(!!be),re(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function $l(E){return Ws.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return fn()||$()||Wt()}};class na{constructor(g){this.factorId=g}_process(g,y,b){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,b);case"signin":return this._finalizeSignIn(g,y.credential);default:return Pe("unexpected MultiFactorSessionType")}}}class Hl extends na{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Hl(g)}_finalizeEnroll(g,y,b){return function _h(E,g){return Ne(E,"POST","/v2/accounts/mfaEnrollment:finalize",ge(E,g))}(g,{idToken:y,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Dh(E,g){return Ne(E,"POST","/v2/accounts/mfaSignIn:finalize",ge(E,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let od=(()=>{class E{constructor(){}static assertion(y){return Hl._fromCredential(y)}}return E.FACTOR_ID="phone",E})();var Gl="@firebase/auth";class u0{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(b=>{g(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,U.Pz)("authIdTokenMaxAge"),function Gp(E){(0,N._registerComponent)(new Ie.wA("auth",(g,{options:y})=>{const b=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),B=g.getProvider("app-check-internal"),{apiKey:be,authDomain:We}=b.options;K(be&&!be.includes(":"),"invalid-api-key",{appName:b.name});const gt={apiKey:be,authDomain:We,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xr(E)},Rt=new Ho(b,x,B,gt);return function da(E,g){const y=g?.persistence||[],b=(Array.isArray(y)?y:[y]).map(br);g?.errorMap&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(b,g?.popupRedirectResolver)}(Rt,y),Rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,b)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new Ie.wA("auth-internal",g=>{const y=gr(g.getProvider("auth").getImmediate());return new u0(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Gl,"0.23.2",function d0(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,N.registerVersion)(Gl,"0.23.2","esm2017")}("Browser")},9058:(It,Fe,R)=>{"use strict";R.d(Fe,{$s:()=>br,BH:()=>ae,DV:()=>tn,Dv:()=>fr,G6:()=>Je,GJ:()=>Ht,L:()=>fe,LL:()=>Ge,Pz:()=>Ee,Sg:()=>ye,UG:()=>Pe,UI:()=>xn,US:()=>Ie,Wj:()=>ln,Wl:()=>Ue,Yr:()=>Qt,ZB:()=>ee,ZR:()=>Ne,aH:()=>re,b$:()=>Ye,cI:()=>pt,dS:()=>mi,eu:()=>J,g5:()=>N,gK:()=>kn,gQ:()=>qt,h$:()=>Ae,hl:()=>z,hu:()=>U,jU:()=>ve,lb:()=>tr,m9:()=>rn,ne:()=>En,p$:()=>H,pd:()=>Lt,r3:()=>zt,ru:()=>Ve,tV:()=>q,uI:()=>K,ug:()=>yi,vZ:()=>$n,w1:()=>xt,w9:()=>mt,xO:()=>er,xb:()=>vn,z$:()=>oe,zI:()=>ce,zd:()=>vt});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},U=function(se,te){if(!se)throw N(te)},N=function(se){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+se)},ue=function(se){const te=[];let L=0;for(let $=0;$<se.length;$++){let k=se.charCodeAt($);k<128?te[L++]=k:k<2048?(te[L++]=k>>6|192,te[L++]=63&k|128):55296==(64512&k)&&$+1<se.length&&56320==(64512&se.charCodeAt($+1))?(k=65536+((1023&k)<<10)+(1023&se.charCodeAt(++$)),te[L++]=k>>18|240,te[L++]=k>>12&63|128,te[L++]=k>>6&63|128,te[L++]=63&k|128):(te[L++]=k>>12|224,te[L++]=k>>6&63|128,te[L++]=63&k|128)}return te},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(se,te){if(!Array.isArray(se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=te?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let k=0;k<se.length;k+=3){const Se=se[k],Xe=k+1<se.length,yt=Xe?se[k+1]:0,Yt=k+2<se.length,Wt=Yt?se[k+2]:0;let zn=(15&yt)<<2|Wt>>6,fn=63&Wt;Yt||(fn=64,Xe||(zn=64)),$.push(L[Se>>2],L[(3&Se)<<4|yt>>4],L[zn],L[fn])}return $.join("")},encodeString(se,te){return this.HAS_NATIVE_SUPPORT&&!te?btoa(se):this.encodeByteArray(ue(se),te)},decodeString(se,te){return this.HAS_NATIVE_SUPPORT&&!te?atob(se):function(se){const te=[];let L=0,$=0;for(;L<se.length;){const k=se[L++];if(k<128)te[$++]=String.fromCharCode(k);else if(k>191&&k<224){const Se=se[L++];te[$++]=String.fromCharCode((31&k)<<6|63&Se)}else if(k>239&&k<365){const Yt=((7&k)<<18|(63&se[L++])<<12|(63&se[L++])<<6|63&se[L++])-65536;te[$++]=String.fromCharCode(55296+(Yt>>10)),te[$++]=String.fromCharCode(56320+(1023&Yt))}else{const Se=se[L++],Xe=se[L++];te[$++]=String.fromCharCode((15&k)<<12|(63&Se)<<6|63&Xe)}}return te.join("")}(this.decodeStringToByteArray(se,te))},decodeStringToByteArray(se,te){this.init_();const L=te?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let k=0;k<se.length;){const Se=L[se.charAt(k++)],yt=k<se.length?L[se.charAt(k)]:0;++k;const Wt=k<se.length?L[se.charAt(k)]:64;++k;const sn=k<se.length?L[se.charAt(k)]:64;if(++k,null==Se||null==yt||null==Wt||null==sn)throw new ne;$.push(Se<<2|yt>>4),64!==Wt&&($.push(yt<<4&240|Wt>>2),64!==sn&&$.push(Wt<<6&192|sn))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let se=0;se<this.ENCODED_VALS.length;se++)this.byteToCharMap_[se]=this.ENCODED_VALS.charAt(se),this.charToByteMap_[this.byteToCharMap_[se]]=se,this.byteToCharMapWebSafe_[se]=this.ENCODED_VALS_WEBSAFE.charAt(se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[se]]=se,se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(se)]=se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(se)]=se)}}};class ne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ae=function(se){const te=ue(se);return Ie.encodeByteArray(te,!0)},fe=function(se){return Ae(se).replace(/\./g,"")},q=function(se){try{return Ie.decodeString(se,!0)}catch(te){console.error("base64Decode failed: ",te)}return null};function H(se){return ee(void 0,se)}function ee(se,te){if(!(te instanceof Object))return te;switch(te.constructor){case Date:return new Date(te.getTime());case Object:void 0===se&&(se={});break;case Array:se=[];break;default:return te}for(const L in te)!te.hasOwnProperty(L)||!ie(L)||(se[L]=ee(se[L],te[L]));return se}function ie(se){return"__proto__"!==se}const Z=()=>{try{return function le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const se=process.env.__FIREBASE_DEFAULTS__;return se?JSON.parse(se):void 0})()||(()=>{if(typeof document>"u")return;let se;try{se=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const te=se&&q(se[1]);return te&&JSON.parse(te)})()}catch(se){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${se}`)}},re=()=>{var se;return null===(se=Z())||void 0===se?void 0:se.config},Ee=se=>{var te;return null===(te=Z())||void 0===te?void 0:te[`_${se}`]};class ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((te,L)=>{this.resolve=te,this.reject=L})}wrapCallback(te){return(L,$)=>{L?this.reject(L):this.resolve($),"function"==typeof te&&(this.promise.catch(()=>{}),1===te.length?te(L):te(L,$))}}}function ye(se,te){if(se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=te||"demo-project",k=se.iat||0,Se=se.sub||se.user_id;if(!Se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Xe=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:k,exp:k+3600,auth_time:k,sub:Se,user_id:Se,firebase:{sign_in_provider:"custom",identities:{}}},se);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Xe)),""].join(".")}function oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function K(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oe())}function Pe(){var se;const te=null===(se=Z())||void 0===se?void 0:se.forceEnvironment;if("node"===te)return!0;if("browser"===te)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function Ve(){const se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof se&&void 0!==se.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xt(){const se=oe();return se.indexOf("MSIE ")>=0||se.indexOf("Trident/")>=0}function Qt(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Je(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){try{return"object"==typeof indexedDB}catch{return!1}}function J(){return new Promise((se,te)=>{try{let L=!0;const $="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open($);k.onsuccess=()=>{k.result.close(),L||self.indexedDB.deleteDatabase($),se(!0)},k.onupgradeneeded=()=>{L=!1},k.onerror=()=>{var Se;te((null===(Se=k.error)||void 0===Se?void 0:Se.message)||"")}}catch(L){te(L)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ne extends Error{constructor(te,L,$){super(L),this.code=te,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(te,L,$){this.service=te,this.serviceName=L,this.errors=$}create(te,...L){const $=L[0]||{},k=`${this.service}/${te}`,Se=this.errors[te],Xe=Se?function ut(se,te){return se.replace(dt,(L,$)=>{const k=te[$];return null!=k?String(k):`<${$}?>`})}(Se,$):"Error";return new Ne(k,`${this.serviceName}: ${Xe} (${k}).`,$)}}const dt=/\{\$([^}]+)}/g;function pt(se){return JSON.parse(se)}function Ue(se){return JSON.stringify(se)}const He=function(se){let te={},L={},$={},k="";try{const Se=se.split(".");te=pt(q(Se[0])||""),L=pt(q(Se[1])||""),k=Se[2],$=L.d||{},delete L.d}catch{}return{header:te,claims:L,data:$,signature:k}},mt=function(se){const L=He(se).claims;return!!L&&"object"==typeof L&&L.hasOwnProperty("iat")},Ht=function(se){const te=He(se).claims;return"object"==typeof te&&!0===te.admin};function zt(se,te){return Object.prototype.hasOwnProperty.call(se,te)}function tn(se,te){if(Object.prototype.hasOwnProperty.call(se,te))return se[te]}function vn(se){for(const te in se)if(Object.prototype.hasOwnProperty.call(se,te))return!1;return!0}function xn(se,te,L){const $={};for(const k in se)Object.prototype.hasOwnProperty.call(se,k)&&($[k]=te.call(L,se[k],k,se));return $}function $n(se,te){if(se===te)return!0;const L=Object.keys(se),$=Object.keys(te);for(const k of L){if(!$.includes(k))return!1;const Se=se[k],Xe=te[k];if(Mn(Se)&&Mn(Xe)){if(!$n(Se,Xe))return!1}else if(Se!==Xe)return!1}for(const k of $)if(!L.includes(k))return!1;return!0}function Mn(se){return null!==se&&"object"==typeof se}function er(se){const te=[];for(const[L,$]of Object.entries(se))Array.isArray($)?$.forEach(k=>{te.push(encodeURIComponent(L)+"="+encodeURIComponent(k))}):te.push(encodeURIComponent(L)+"="+encodeURIComponent($));return te.length?"&"+te.join("&"):""}function vt(se){const te={};return se.replace(/^\?/,"").split("&").forEach($=>{if($){const[k,Se]=$.split("=");te[decodeURIComponent(k)]=decodeURIComponent(Se)}}),te}function Lt(se){const te=se.indexOf("?");if(!te)return"";const L=se.indexOf("#",te);return se.substring(te,L>0?L:void 0)}class qt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let te=1;te<this.blockSize;++te)this.pad_[te]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(te,L){L||(L=0);const $=this.W_;if("string"==typeof te)for(let sn=0;sn<16;sn++)$[sn]=te.charCodeAt(L)<<24|te.charCodeAt(L+1)<<16|te.charCodeAt(L+2)<<8|te.charCodeAt(L+3),L+=4;else for(let sn=0;sn<16;sn++)$[sn]=te[L]<<24|te[L+1]<<16|te[L+2]<<8|te[L+3],L+=4;for(let sn=16;sn<80;sn++){const zn=$[sn-3]^$[sn-8]^$[sn-14]^$[sn-16];$[sn]=4294967295&(zn<<1|zn>>>31)}let Wt,Bt,k=this.chain_[0],Se=this.chain_[1],Xe=this.chain_[2],yt=this.chain_[3],Yt=this.chain_[4];for(let sn=0;sn<80;sn++){sn<40?sn<20?(Wt=yt^Se&(Xe^yt),Bt=1518500249):(Wt=Se^Xe^yt,Bt=1859775393):sn<60?(Wt=Se&Xe|yt&(Se|Xe),Bt=2400959708):(Wt=Se^Xe^yt,Bt=3395469782);const zn=(k<<5|k>>>27)+Wt+Yt+Bt+$[sn]&4294967295;Yt=yt,yt=Xe,Xe=4294967295&(Se<<30|Se>>>2),Se=k,k=zn}this.chain_[0]=this.chain_[0]+k&4294967295,this.chain_[1]=this.chain_[1]+Se&4294967295,this.chain_[2]=this.chain_[2]+Xe&4294967295,this.chain_[3]=this.chain_[3]+yt&4294967295,this.chain_[4]=this.chain_[4]+Yt&4294967295}update(te,L){if(null==te)return;void 0===L&&(L=te.length);const $=L-this.blockSize;let k=0;const Se=this.buf_;let Xe=this.inbuf_;for(;k<L;){if(0===Xe)for(;k<=$;)this.compress_(te,k),k+=this.blockSize;if("string"==typeof te){for(;k<L;)if(Se[Xe]=te.charCodeAt(k),++Xe,++k,Xe===this.blockSize){this.compress_(Se),Xe=0;break}}else for(;k<L;)if(Se[Xe]=te[k],++Xe,++k,Xe===this.blockSize){this.compress_(Se),Xe=0;break}}this.inbuf_=Xe,this.total_+=L}digest(){const te=[];let L=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let k=this.blockSize-1;k>=56;k--)this.buf_[k]=255&L,L/=256;this.compress_(this.buf_);let $=0;for(let k=0;k<5;k++)for(let Se=24;Se>=0;Se-=8)te[$]=this.chain_[k]>>Se&255,++$;return te}}function En(se,te){const L=new dr(se,te);return L.subscribe.bind(L)}class dr{constructor(te,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{te(this)}).catch($=>{this.error($)})}next(te){this.forEachObserver(L=>{L.next(te)})}error(te){this.forEachObserver(L=>{L.error(te)}),this.close(te)}complete(){this.forEachObserver(te=>{te.complete()}),this.close()}subscribe(te,L,$){let k;if(void 0===te&&void 0===L&&void 0===$)throw new Error("Missing Observer.");k=function an(se,te){if("object"!=typeof se||null===se)return!1;for(const L of te)if(L in se&&"function"==typeof se[L])return!0;return!1}(te,["next","error","complete"])?te:{next:te,error:L,complete:$},void 0===k.next&&(k.next=hr),void 0===k.error&&(k.error=hr),void 0===k.complete&&(k.complete=hr);const Se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),Se}unsubscribeOne(te){void 0===this.observers||void 0===this.observers[te]||(delete this.observers[te],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(te){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,te)}sendOne(te,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[te])try{L(this.observers[te])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(te){this.finalized||(this.finalized=!0,void 0!==te&&(this.finalError=te),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hr(){}const fr=function(se,te,L,$){let k;if($<te?k="at least "+te:$>L&&(k=0===L?"none":"no more than "+L),k)throw new Error(se+" failed: Was called with "+$+(1===$?" argument.":" arguments.")+" Expects "+k+".")};function kn(se,te){return`${se} failed: ${te} argument `}function ln(se,te,L,$){if((!$||L)&&"function"!=typeof L)throw new Error(kn(se,te)+"must be a valid function.")}function tr(se,te,L,$){if((!$||L)&&("object"!=typeof L||null===L))throw new Error(kn(se,te)+"must be a valid context object.")}const mi=function(se){const te=[];let L=0;for(let $=0;$<se.length;$++){let k=se.charCodeAt($);if(k>=55296&&k<=56319){const Se=k-55296;$++,U($<se.length,"Surrogate pair missing trail surrogate."),k=65536+(Se<<10)+(se.charCodeAt($)-56320)}k<128?te[L++]=k:k<2048?(te[L++]=k>>6|192,te[L++]=63&k|128):k<65536?(te[L++]=k>>12|224,te[L++]=k>>6&63|128,te[L++]=63&k|128):(te[L++]=k>>18|240,te[L++]=k>>12&63|128,te[L++]=k>>6&63|128,te[L++]=63&k|128)}return te},yi=function(se){let te=0;for(let L=0;L<se.length;L++){const $=se.charCodeAt(L);$<128?te++:$<2048?te+=2:$>=55296&&$<=56319?(te+=4,L++):te+=3}return te},ar=1e3,Zn=2,vr=144e5,nr=.5;function br(se,te=ar,L=Zn){const $=te*Math.pow(L,se),k=Math.round(nr*$*(Math.random()-.5)*2);return Math.min(vr,$+k)}function rn(se){return se&&se._delegate?se._delegate:se}},6506:(It,Fe,R)=>{"use strict";R.d(Fe,{c:()=>Ce});var u=R(7643),U=R(544);let N;const de=pe=>pe.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ie=pe=>(void 0===N&&(N=void 0===pe.style.animationName&&void 0!==pe.style.webkitAnimationName?"-webkit-":""),N),ne=(pe,Z,Re)=>{const je=Z.startsWith("animation")?Ie(pe):"";pe.style.setProperty(je+Z,Re)},Ae=(pe,Z)=>{const Re=Z.startsWith("animation")?Ie(pe):"";pe.style.removeProperty(Re+Z)},H=[],Me=(pe=[],Z)=>{if(void 0!==Z){const Re=Array.isArray(Z)?Z:[Z];return[...pe,...Re]}return pe},Ce=pe=>{let Z,Re,je,re,Ee,ae,ve,z,J,ce,ge,dt,pt,ye=[],oe=[],K=[],Pe=!1,Ve={},Ye=[],Qe=[],xt={},$t=0,Qt=!1,Je=!1,Ne=!0,Ge=!1,ut=!0,Ue=!1;const He=pe,Le=[],ct=[],mt=[],Ht=[],zt=[],tn=[],vn=[],xn=[],$n=[],Mn=[],kr="function"==typeof AnimationEffect||void 0!==u.w&&"function"==typeof u.w.AnimationEffect,er="function"==typeof Element&&"function"==typeof Element.prototype.animate&&kr,Lt=()=>Mn,an=(V,X)=>((X?.oneTimeCallback?ct:Le).push({c:V,o:X}),pt),fr=()=>{if(er)Mn.forEach(V=>{V.cancel()}),Mn.length=0;else{const V=mt.slice();(0,U.r)(()=>{V.forEach(X=>{Ae(X,"animation-name"),Ae(X,"animation-duration"),Ae(X,"animation-timing-function"),Ae(X,"animation-iteration-count"),Ae(X,"animation-delay"),Ae(X,"animation-play-state"),Ae(X,"animation-fill-mode"),Ae(X,"animation-direction")})})}},kn=()=>{zt.forEach(V=>{V?.parentNode&&V.parentNode.removeChild(V)}),zt.length=0},Cr=()=>void 0!==Ee?Ee:ve?ve.getFill():"both",rn=()=>void 0!==J?J:void 0!==ae?ae:ve?ve.getDirection():"normal",se=()=>Qt?"linear":void 0!==je?je:ve?ve.getEasing():"linear",te=()=>Je?0:void 0!==ce?ce:void 0!==Re?Re:ve?ve.getDuration():0,L=()=>void 0!==re?re:ve?ve.getIterations():1,$=()=>void 0!==ge?ge:void 0!==Z?Z:ve?ve.getDelay():0,lt=()=>{0!==$t&&($t--,0===$t&&((()=>{vo(),xn.forEach(Ke=>Ke()),$n.forEach(Ke=>Ke());const V=Ne?1:0,X=Ye,we=Qe,De=xt;mt.forEach(Ke=>{const nt=Ke.classList;X.forEach(it=>nt.add(it)),we.forEach(it=>nt.remove(it));for(const it in De)De.hasOwnProperty(it)&&ne(Ke,it,De[it])}),Le.forEach(Ke=>Ke.c(V,pt)),ct.forEach(Ke=>Ke.c(V,pt)),ct.length=0,ut=!0,Ne&&(Ge=!0),Ne=!0})(),ve&&ve.animationFinish()))},Vt=(V=!0)=>{kn();const X=(pe=>(pe.forEach(Z=>{for(const Re in Z)if(Z.hasOwnProperty(Re)){const je=Z[Re];if("easing"===Re)Z["animation-timing-function"]=je,delete Z[Re];else{const re=de(Re);re!==Re&&(Z[re]=je,delete Z[Re])}}}),pe))(ye);mt.forEach(we=>{if(X.length>0){const De=((pe=[])=>pe.map(Z=>{const Re=Z.offset,je=[];for(const re in Z)Z.hasOwnProperty(re)&&"offset"!==re&&je.push(`${re}: ${Z[re]};`);return`${100*Re}% { ${je.join(" ")} }`}).join(" "))(X);dt=void 0!==pe?pe:(pe=>{let Z=H.indexOf(pe);return Z<0&&(Z=H.push(pe)-1),`ion-animation-${Z}`})(De);const Ke=((pe,Z,Re)=>{var je;const re=(pe=>{const Z=void 0!==pe.getRootNode?pe.getRootNode():pe;return Z.head||Z})(Re),Ee=Ie(Re),ae=re.querySelector("#"+pe);if(ae)return ae;const ye=(null!==(je=Re.ownerDocument)&&void 0!==je?je:document).createElement("style");return ye.id=pe,ye.textContent=`@${Ee}keyframes ${pe} { ${Z} } @${Ee}keyframes ${pe}-alt { ${Z} }`,re.appendChild(ye),ye})(dt,De,we);zt.push(Ke),ne(we,"animation-duration",`${te()}ms`),ne(we,"animation-timing-function",se()),ne(we,"animation-delay",`${$()}ms`),ne(we,"animation-fill-mode",Cr()),ne(we,"animation-direction",rn());const nt=L()===1/0?"infinite":L().toString();ne(we,"animation-iteration-count",nt),ne(we,"animation-play-state","paused"),V&&ne(we,"animation-name",`${Ke.id}-alt`),(0,U.r)(()=>{ne(we,"animation-name",Ke.id||null)})}})},pn=(V=!0)=>{(()=>{tn.forEach(De=>De()),vn.forEach(De=>De());const V=oe,X=K,we=Ve;mt.forEach(De=>{const Ke=De.classList;V.forEach(nt=>Ke.add(nt)),X.forEach(nt=>Ke.remove(nt));for(const nt in we)we.hasOwnProperty(nt)&&ne(De,nt,we[nt])})})(),ye.length>0&&(er?(mt.forEach(V=>{const X=V.animate(ye,{id:He,delay:$(),duration:te(),easing:se(),iterations:L(),fill:Cr(),direction:rn()});X.pause(),Mn.push(X)}),Mn.length>0&&(Mn[0].onfinish=()=>{lt()})):Vt(V)),Pe=!0},bn=V=>{if(V=Math.min(Math.max(V,0),.9999),er)Mn.forEach(X=>{X.currentTime=X.effect.getComputedTiming().delay+te()*V,X.pause()});else{const X=`-${te()*V}ms`;mt.forEach(we=>{ye.length>0&&(ne(we,"animation-delay",X),ne(we,"animation-play-state","paused"))})}},pr=V=>{Mn.forEach(X=>{X.effect.updateTiming({delay:$(),duration:te(),easing:se(),iterations:L(),fill:Cr(),direction:rn()})}),void 0!==V&&bn(V)},ir=(V=!0,X)=>{(0,U.r)(()=>{mt.forEach(we=>{ne(we,"animation-name",dt||null),ne(we,"animation-duration",`${te()}ms`),ne(we,"animation-timing-function",se()),ne(we,"animation-delay",void 0!==X?`-${X*te()}ms`:`${$()}ms`),ne(we,"animation-fill-mode",Cr()||null),ne(we,"animation-direction",rn()||null);const De=L()===1/0?"infinite":L().toString();ne(we,"animation-iteration-count",De),V&&ne(we,"animation-name",`${dt}-alt`),(0,U.r)(()=>{ne(we,"animation-name",dt||null)})})})},sr=(V=!1,X=!0,we)=>(V&&Ht.forEach(De=>{De.update(V,X,we)}),er?pr(we):ir(X,we),pt),Qr=()=>{Pe&&(er?Mn.forEach(V=>{V.pause()}):mt.forEach(V=>{ne(V,"animation-play-state","paused")}),Ue=!0)},Ls=()=>{z=void 0,lt()},vo=()=>{z&&clearTimeout(z)},da=V=>new Promise(X=>{V?.sync&&(Je=!0,an(()=>Je=!1,{oneTimeCallback:!0})),Pe||pn(),Ge&&(er?(bn(0),pr()):ir(),Ge=!1),ut&&($t=Ht.length+1,ut=!1),an(()=>X(),{oneTimeCallback:!0}),Ht.forEach(we=>{we.play()}),er?(Mn.forEach(V=>{V.play()}),(0===ye.length||0===mt.length)&&lt()):(()=>{if(vo(),(0,U.r)(()=>{mt.forEach(V=>{ye.length>0&&ne(V,"animation-play-state","running")})}),0===ye.length||0===mt.length)lt();else{const V=$()||0,X=te()||0,we=L()||1;isFinite(we)&&(z=setTimeout(Ls,V+X*we+100)),((pe,Z)=>{let Re;const je={passive:!0},Ee=ae=>{pe===ae.target&&(Re&&Re(),vo(),(0,U.r)(()=>{mt.forEach(V=>{Ae(V,"animation-duration"),Ae(V,"animation-delay"),Ae(V,"animation-play-state")}),(0,U.r)(lt)}))};pe&&(pe.addEventListener("webkitAnimationEnd",Ee,je),pe.addEventListener("animationend",Ee,je),Re=()=>{pe.removeEventListener("webkitAnimationEnd",Ee,je),pe.removeEventListener("animationend",Ee,je)})})(mt[0])}})(),Ue=!1}),ro=(V,X)=>{const we=ye[0];return void 0===we||void 0!==we.offset&&0!==we.offset?ye=[{offset:0,[V]:X},...ye]:we[V]=X,pt};return pt={parentAnimation:ve,elements:mt,childAnimations:Ht,id:He,animationFinish:lt,from:ro,to:(V,X)=>{const we=ye[ye.length-1];return void 0===we||void 0!==we.offset&&1!==we.offset?ye=[...ye,{offset:1,[V]:X}]:we[V]=X,pt},fromTo:(V,X,we)=>ro(V,X).to(V,we),parent:V=>(ve=V,pt),play:da,pause:()=>(Ht.forEach(V=>{V.pause()}),Qr(),pt),stop:()=>{Ht.forEach(V=>{V.stop()}),Pe&&(fr(),Pe=!1),Qt=!1,Je=!1,ut=!0,J=void 0,ce=void 0,ge=void 0,$t=0,Ge=!1,Ne=!0,Ue=!1},destroy:V=>(Ht.forEach(X=>{X.destroy(V)}),(V=>{fr(),V&&kn()})(V),mt.length=0,Ht.length=0,ye.length=0,Le.length=0,ct.length=0,Pe=!1,ut=!0,pt),keyframes:V=>{const X=ye!==V;return ye=V,X&&(V=>{er?Lt().forEach(X=>{if(X.effect.setKeyframes)X.effect.setKeyframes(V);else{const we=new KeyframeEffect(X.effect.target,V,X.effect.getTiming());X.effect=we}}):Vt()})(ye),pt},addAnimation:V=>{if(null!=V)if(Array.isArray(V))for(const X of V)X.parent(pt),Ht.push(X);else V.parent(pt),Ht.push(V);return pt},addElement:V=>{if(null!=V)if(1===V.nodeType)mt.push(V);else if(V.length>=0)for(let X=0;X<V.length;X++)mt.push(V[X]);else console.error("Invalid addElement value");return pt},update:sr,fill:V=>(Ee=V,sr(!0),pt),direction:V=>(ae=V,sr(!0),pt),iterations:V=>(re=V,sr(!0),pt),duration:V=>(!er&&0===V&&(V=1),Re=V,sr(!0),pt),easing:V=>(je=V,sr(!0),pt),delay:V=>(Z=V,sr(!0),pt),getWebAnimations:Lt,getKeyframes:()=>ye,getFill:Cr,getDirection:rn,getDelay:$,getIterations:L,getEasing:se,getDuration:te,afterAddRead:V=>(xn.push(V),pt),afterAddWrite:V=>($n.push(V),pt),afterClearStyles:(V=[])=>{for(const X of V)xt[X]="";return pt},afterStyles:(V={})=>(xt=V,pt),afterRemoveClass:V=>(Qe=Me(Qe,V),pt),afterAddClass:V=>(Ye=Me(Ye,V),pt),beforeAddRead:V=>(tn.push(V),pt),beforeAddWrite:V=>(vn.push(V),pt),beforeClearStyles:(V=[])=>{for(const X of V)Ve[X]="";return pt},beforeStyles:(V={})=>(Ve=V,pt),beforeRemoveClass:V=>(K=Me(K,V),pt),beforeAddClass:V=>(oe=Me(oe,V),pt),onFinish:an,isRunning:()=>0!==$t&&!Ue,progressStart:(V=!1,X)=>(Ht.forEach(we=>{we.progressStart(V,X)}),Qr(),Qt=V,Pe||pn(),sr(!1,!0,X),pt),progressStep:V=>(Ht.forEach(X=>{X.progressStep(V)}),bn(V),pt),progressEnd:(V,X,we)=>(Qt=!1,Ht.forEach(De=>{De.progressEnd(V,X,we)}),void 0!==we&&(ce=we),Ge=!1,Ne=!0,0===V?(J="reverse"===rn()?"normal":"reverse","reverse"===J&&(Ne=!1),er?(sr(),bn(1-X)):(ge=(1-X)*te()*-1,sr(!1,!1))):1===V&&(er?(sr(),bn(X)):(ge=X*te()*-1,sr(!1,!1))),void 0!==V&&(an(()=>{ce=void 0,J=void 0,ge=void 0},{oneTimeCallback:!0}),ve||da()),pt)}}},1273:(It,Fe,R)=>{"use strict";R.d(Fe,{E:()=>q,a:()=>u,s:()=>Ae});const u=H=>{try{if(H instanceof ne)return H.value;if(!ue()||"string"!=typeof H||""===H)return H;if(H.includes("onload="))return"";const ee=document.createDocumentFragment(),ie=document.createElement("div");ee.appendChild(ie),ie.innerHTML=H,Ie.forEach(pe=>{const Z=ee.querySelectorAll(pe);for(let Re=Z.length-1;Re>=0;Re--){const je=Z[Re];je.parentNode?je.parentNode.removeChild(je):ee.removeChild(je);const re=N(je);for(let Ee=0;Ee<re.length;Ee++)U(re[Ee])}});const le=N(ee);for(let pe=0;pe<le.length;pe++)U(le[pe]);const Me=document.createElement("div");Me.appendChild(ee);const Ce=Me.querySelector("div");return null!==Ce?Ce.innerHTML:Me.innerHTML}catch(ee){return console.error(ee),""}},U=H=>{if(H.nodeType&&1!==H.nodeType)return;if(typeof NamedNodeMap<"u"&&!(H.attributes instanceof NamedNodeMap))return void H.remove();for(let ie=H.attributes.length-1;ie>=0;ie--){const le=H.attributes.item(ie),Me=le.name;if(!de.includes(Me.toLowerCase())){H.removeAttribute(Me);continue}const Ce=le.value,pe=H[Me];(null!=Ce&&Ce.toLowerCase().includes("javascript:")||null!=pe&&pe.toLowerCase().includes("javascript:"))&&H.removeAttribute(Me)}const ee=N(H);for(let ie=0;ie<ee.length;ie++)U(ee[ie])},N=H=>null!=H.children?H.children:H.childNodes,ue=()=>{var H;const ee=window,ie=null===(H=ee?.Ionic)||void 0===H?void 0:H.config;return!ie||(ie.get?ie.get("sanitizerEnabled",!0):!0===ie.sanitizerEnabled||void 0===ie.sanitizerEnabled)},de=["class","id","href","src","name","slot"],Ie=["script","style","iframe","meta","link","object","embed"];class ne{constructor(ee){this.value=ee}}const Ae=H=>{const ee=window,ie=ee.Ionic;if(!ie||!ie.config||"Object"===ie.config.constructor.name)return ee.Ionic=ee.Ionic||{},ee.Ionic.config=Object.assign(Object.assign({},ee.Ionic.config),H),ee.Ionic.config},q=!1},9439:(It,Fe,R)=>{"use strict";R.d(Fe,{C:()=>de,a:()=>N,d:()=>ue});var u=R(5861),U=R(544);const N=function(){var Ie=(0,u.Z)(function*(ne,Ae,fe,q,H,ee){var ie;if(ne)return ne.attachViewToDom(Ae,fe,H,q);if(!(ee||"string"==typeof fe||fe instanceof HTMLElement))throw new Error("framework delegate is missing");const le="string"==typeof fe?null===(ie=Ae.ownerDocument)||void 0===ie?void 0:ie.createElement(fe):fe;return q&&q.forEach(Me=>le.classList.add(Me)),H&&Object.assign(le,H),Ae.appendChild(le),yield new Promise(Me=>(0,U.c)(le,Me)),le});return function(Ae,fe,q,H,ee,ie){return Ie.apply(this,arguments)}}(),ue=(Ie,ne)=>{if(ne){if(Ie)return Ie.removeViewFromDom(ne.parentElement,ne);ne.remove()}return Promise.resolve()},de=()=>{let Ie,ne;return{attachViewToDom:function(){var q=(0,u.Z)(function*(H,ee,ie={},le=[]){var Me,Ce;if(Ie=H,ee){const Z="string"==typeof ee?null===(Me=Ie.ownerDocument)||void 0===Me?void 0:Me.createElement(ee):ee;le.forEach(Re=>Z.classList.add(Re)),Object.assign(Z,ie),Ie.appendChild(Z),yield new Promise(Re=>(0,U.c)(Z,Re))}else if(Ie.children.length>0&&("ION-MODAL"===Ie.tagName||"ION-POPOVER"===Ie.tagName)&&!Ie.children[0].classList.contains("ion-delegate-host")){const Re=null===(Ce=Ie.ownerDocument)||void 0===Ce?void 0:Ce.createElement("div");Re.classList.add("ion-delegate-host"),le.forEach(je=>Re.classList.add(je)),Re.append(...Ie.children),Ie.appendChild(Re)}const pe=document.querySelector("ion-app")||document.body;return ne=document.createComment("ionic teleport"),Ie.parentNode.insertBefore(ne,Ie),pe.appendChild(Ie),Ie});return function(ee,ie){return q.apply(this,arguments)}}(),removeViewFromDom:()=>(Ie&&ne&&(ne.parentNode.insertBefore(Ie,ne),ne.remove()),Promise.resolve())}}},4587:(It,Fe,R)=>{"use strict";R.d(Fe,{G:()=>de});class U{constructor(ne,Ae,fe,q,H){this.id=Ae,this.name=fe,this.disableScroll=H,this.priority=1e6*q+Ae,this.ctrl=ne}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ne=this.ctrl.capture(this.name,this.id,this.priority);return ne&&this.disableScroll&&this.ctrl.disableScroll(this.id),ne}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class N{constructor(ne,Ae,fe,q){this.id=Ae,this.disable=fe,this.disableScroll=q,this.ctrl=ne}block(){if(this.ctrl){if(this.disable)for(const ne of this.disable)this.ctrl.disableGesture(ne,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ne of this.disable)this.ctrl.enableGesture(ne,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ue="backdrop-no-scroll",de=new class u{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ne){var Ae;return new U(this,this.newID(),ne.name,null!==(Ae=ne.priority)&&void 0!==Ae?Ae:0,!!ne.disableScroll)}createBlocker(ne={}){return new N(this,this.newID(),ne.disable,!!ne.disableScroll)}start(ne,Ae,fe){return this.canStart(ne)?(this.requestedStart.set(Ae,fe),!0):(this.requestedStart.delete(Ae),!1)}capture(ne,Ae,fe){if(!this.start(ne,Ae,fe))return!1;const q=this.requestedStart;let H=-1e4;if(q.forEach(ee=>{H=Math.max(H,ee)}),H===fe){this.capturedId=Ae,q.clear();const ee=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ne}});return document.dispatchEvent(ee),!0}return q.delete(Ae),!1}release(ne){this.requestedStart.delete(ne),this.capturedId===ne&&(this.capturedId=void 0)}disableGesture(ne,Ae){let fe=this.disabledGestures.get(ne);void 0===fe&&(fe=new Set,this.disabledGestures.set(ne,fe)),fe.add(Ae)}enableGesture(ne,Ae){const fe=this.disabledGestures.get(ne);void 0!==fe&&fe.delete(Ae)}disableScroll(ne){this.disabledScroll.add(ne),1===this.disabledScroll.size&&document.body.classList.add(ue)}enableScroll(ne){this.disabledScroll.delete(ne),0===this.disabledScroll.size&&document.body.classList.remove(ue)}canStart(ne){return!(void 0!==this.capturedId||this.isDisabled(ne))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ne){const Ae=this.disabledGestures.get(ne);return!!(Ae&&Ae.size>0)}newID(){return this.gestureId++,this.gestureId}}},5421:(It,Fe,R)=>{"use strict";R.r(Fe),R.d(Fe,{MENU_BACK_BUTTON_PRIORITY:()=>de,OVERLAY_BACK_BUTTON_PRIORITY:()=>ue,blockHardwareBackButton:()=>U,startHardwareBackButton:()=>N});var u=R(5861);const U=()=>{document.addEventListener("backbutton",()=>{})},N=()=>{const Ie=document;let ne=!1;Ie.addEventListener("backbutton",()=>{if(ne)return;let Ae=0,fe=[];const q=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ie,le){fe.push({priority:ie,handler:le,id:Ae++})}}});Ie.dispatchEvent(q);const H=function(){var ie=(0,u.Z)(function*(le){try{if(le?.handler){const Me=le.handler(ee);null!=Me&&(yield Me)}}catch(Me){console.error(Me)}});return function(Me){return ie.apply(this,arguments)}}(),ee=()=>{if(fe.length>0){let ie={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};fe.forEach(le=>{le.priority>=ie.priority&&(ie=le)}),ne=!0,fe=fe.filter(le=>le.id!==ie.id),H(ie).then(()=>ne=!1)}};ee()})},ue=100,de=99},544:(It,Fe,R)=>{"use strict";R.d(Fe,{a:()=>Ae,b:()=>fe,c:()=>N,d:()=>Ce,e:()=>Me,f:()=>le,g:()=>q,h:()=>ie,i:()=>ne,j:()=>Ee,k:()=>de,l:()=>pe,m:()=>ue,n:()=>ee,o:()=>Z,p:()=>re,q:()=>ae,r:()=>H,s:()=>ye,t:()=>u,u:()=>Re,v:()=>je});const u=(oe,K=0)=>new Promise(Pe=>{U(oe,K,Pe)}),U=(oe,K=0,Pe)=>{let ve,Ve;const Ye={passive:!0},xt=()=>{ve&&ve()},$t=Qt=>{(void 0===Qt||oe===Qt.target)&&(xt(),Pe(Qt))};return oe&&(oe.addEventListener("webkitTransitionEnd",$t,Ye),oe.addEventListener("transitionend",$t,Ye),Ve=setTimeout($t,K+500),ve=()=>{Ve&&(clearTimeout(Ve),Ve=void 0),oe.removeEventListener("webkitTransitionEnd",$t,Ye),oe.removeEventListener("transitionend",$t,Ye)}),xt},N=(oe,K)=>{oe.componentOnReady?oe.componentOnReady().then(Pe=>K(Pe)):H(()=>K(oe))},ue=oe=>void 0!==oe.componentOnReady,de=(oe,K=[])=>{const Pe={};return K.forEach(ve=>{oe.hasAttribute(ve)&&(null!==oe.getAttribute(ve)&&(Pe[ve]=oe.getAttribute(ve)),oe.removeAttribute(ve))}),Pe},Ie=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ne=(oe,K)=>{let Pe=Ie;return K&&K.length>0&&(Pe=Pe.filter(ve=>!K.includes(ve))),de(oe,Pe)},Ae=(oe,K,Pe,ve)=>{var Ve;if(typeof window<"u"){const Ye=window,Qe=null===(Ve=Ye?.Ionic)||void 0===Ve?void 0:Ve.config;if(Qe){const xt=Qe.get("_ael");if(xt)return xt(oe,K,Pe,ve);if(Qe._ael)return Qe._ael(oe,K,Pe,ve)}}return oe.addEventListener(K,Pe,ve)},fe=(oe,K,Pe,ve)=>{var Ve;if(typeof window<"u"){const Ye=window,Qe=null===(Ve=Ye?.Ionic)||void 0===Ve?void 0:Ve.config;if(Qe){const xt=Qe.get("_rel");if(xt)return xt(oe,K,Pe,ve);if(Qe._rel)return Qe._rel(oe,K,Pe,ve)}}return oe.removeEventListener(K,Pe,ve)},q=(oe,K=oe)=>oe.shadowRoot||K,H=oe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(oe):"function"==typeof requestAnimationFrame?requestAnimationFrame(oe):setTimeout(oe),ee=oe=>!!oe.shadowRoot&&!!oe.attachShadow,ie=oe=>{const K=oe.closest("ion-item");return K?K.querySelector("ion-label"):null},le=oe=>{if(oe.focus(),oe.classList.contains("ion-focusable")){const K=oe.closest("ion-app");K&&K.setFocus([oe])}},Me=(oe,K)=>{let Pe;const ve=oe.getAttribute("aria-labelledby"),Ve=oe.id;let Ye=null!==ve&&""!==ve.trim()?ve:K+"-lbl",Qe=null!==ve&&""!==ve.trim()?document.getElementById(ve):ie(oe);return Qe?(null===ve&&(Qe.id=Ye),Pe=Qe.textContent,Qe.setAttribute("aria-hidden","true")):""!==Ve.trim()&&(Qe=document.querySelector(`label[for="${Ve}"]`),Qe&&(""!==Qe.id?Ye=Qe.id:Qe.id=Ye=`${Ve}-lbl`,Pe=Qe.textContent)),{label:Qe,labelId:Ye,labelText:Pe}},Ce=(oe,K,Pe,ve,Ve)=>{if(oe||ee(K)){let Ye=K.querySelector("input.aux-input");Ye||(Ye=K.ownerDocument.createElement("input"),Ye.type="hidden",Ye.classList.add("aux-input"),K.appendChild(Ye)),Ye.disabled=Ve,Ye.name=Pe,Ye.value=ve||""}},pe=(oe,K,Pe)=>Math.max(oe,Math.min(K,Pe)),Z=(oe,K)=>{if(!oe){const Pe="ASSERT: "+K;throw console.error(Pe),new Error(Pe)}},Re=oe=>oe.timeStamp||Date.now(),je=oe=>{if(oe){const K=oe.changedTouches;if(K&&K.length>0){const Pe=K[0];return{x:Pe.clientX,y:Pe.clientY}}if(void 0!==oe.pageX)return{x:oe.pageX,y:oe.pageY}}return{x:0,y:0}},re=oe=>{const K="rtl"===document.dir;switch(oe){case"start":return K;case"end":return!K;default:throw new Error(`"${oe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ee=(oe,K)=>{const Pe=oe._original||oe;return{_original:oe,emit:ae(Pe.emit.bind(Pe),K)}},ae=(oe,K=0)=>{let Pe;return(...ve)=>{clearTimeout(Pe),Pe=setTimeout(oe,K,...ve)}},ye=(oe,K)=>{if(oe??(oe={}),K??(K={}),oe===K)return!0;const Pe=Object.keys(oe);if(Pe.length!==Object.keys(K).length)return!1;for(const ve of Pe)if(!(ve in K)||oe[ve]!==K[ve])return!1;return!0}},6953:(It,Fe,R)=>{"use strict";R.d(Fe,{B:()=>H,H:()=>xt,a:()=>za,b:()=>Wt,c:()=>Ge,d:()=>Ue,e:()=>Wa,f:()=>pt,g:()=>ut,h:()=>Ye,i:()=>rr,j:()=>ee,p:()=>ls,r:()=>Oe,w:()=>ro});var u=R(5861);let N,ue,de,Ie=!1,ne=!1,Ae=!1,fe=!1,q=!1;const H={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ee=O=>{const W=new URL(O,Rn.$resourcesUrl$);return W.origin!==sr.location.origin?W.href:W.pathname},Re="s-id",je="sty-id",ae="http://www.w3.org/1999/xlink",ye={},ve=O=>"object"==(O=typeof O)||"function"===O;function Ve(O){var W,V,X;return null!==(X=null===(V=null===(W=O.head)||void 0===W?void 0:W.querySelector('meta[name="csp-nonce"]'))||void 0===V?void 0:V.getAttribute("content"))&&void 0!==X?X:void 0}const Ye=(O,W,...V)=>{let X=null,we=null,De=null,Ke=!1,nt=!1;const it=[],Be=wt=>{for(let cn=0;cn<wt.length;cn++)X=wt[cn],Array.isArray(X)?Be(X):null!=X&&"boolean"!=typeof X&&((Ke="function"!=typeof O&&!ve(X))&&(X=String(X)),Ke&&nt?it[it.length-1].$text$+=X:it.push(Ke?Qe(null,X):X),nt=Ke)};if(Be(V),W){W.key&&(we=W.key),W.name&&(De=W.name);{const wt=W.className||W.class;wt&&(W.class="object"!=typeof wt?wt:Object.keys(wt).filter(cn=>wt[cn]).join(" "))}}if("function"==typeof O)return O(null===W?{}:W,it,Qt);const Et=Qe(O,null);return Et.$attrs$=W,it.length>0&&(Et.$children$=it),Et.$key$=we,Et.$name$=De,Et},Qe=(O,W)=>({$flags$:0,$tag$:O,$text$:W,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),xt={},Qt={forEach:(O,W)=>O.map(Je).forEach(W),map:(O,W)=>O.map(Je).map(W).map(z)},Je=O=>({vattrs:O.$attrs$,vchildren:O.$children$,vkey:O.$key$,vname:O.$name$,vtag:O.$tag$,vtext:O.$text$}),z=O=>{if("function"==typeof O.vtag){const V=Object.assign({},O.vattrs);return O.vkey&&(V.key=O.vkey),O.vname&&(V.name=O.vname),Ye(O.vtag,V,...O.vchildren||[])}const W=Qe(O.vtag,O.vtext);return W.$attrs$=O.vattrs,W.$children$=O.vchildren,W.$key$=O.vkey,W.$name$=O.vname,W},ce=(O,W,V,X,we,De,Ke)=>{let nt,it,Be,Et;if(1===De.nodeType){for(nt=De.getAttribute("c-id"),nt&&(it=nt.split("."),(it[0]===Ke||"0"===it[0])&&(Be={$flags$:0,$hostId$:it[0],$nodeId$:it[1],$depth$:it[2],$index$:it[3],$tag$:De.tagName.toLowerCase(),$elm$:De,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},W.push(Be),De.removeAttribute("c-id"),O.$children$||(O.$children$=[]),O.$children$[Be.$index$]=Be,O=Be,X&&"0"===Be.$depth$&&(X[Be.$index$]=Be.$elm$))),Et=De.childNodes.length-1;Et>=0;Et--)ce(O,W,V,X,we,De.childNodes[Et],Ke);if(De.shadowRoot)for(Et=De.shadowRoot.childNodes.length-1;Et>=0;Et--)ce(O,W,V,X,we,De.shadowRoot.childNodes[Et],Ke)}else if(8===De.nodeType)it=De.nodeValue.split("."),(it[1]===Ke||"0"===it[1])&&(nt=it[0],Be={$flags$:0,$hostId$:it[1],$nodeId$:it[2],$depth$:it[3],$index$:it[4],$elm$:De,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===nt?(Be.$elm$=De.nextSibling,Be.$elm$&&3===Be.$elm$.nodeType&&(Be.$text$=Be.$elm$.textContent,W.push(Be),De.remove(),O.$children$||(O.$children$=[]),O.$children$[Be.$index$]=Be,X&&"0"===Be.$depth$&&(X[Be.$index$]=Be.$elm$))):Be.$hostId$===Ke&&("s"===nt?(Be.$tag$="slot",De["s-sn"]=it[5]?Be.$name$=it[5]:"",De["s-sr"]=!0,X&&(Be.$elm$=lr.createElement(Be.$tag$),Be.$name$&&Be.$elm$.setAttribute("name",Be.$name$),De.parentNode.insertBefore(Be.$elm$,De),De.remove(),"0"===Be.$depth$&&(X[Be.$index$]=Be.$elm$)),V.push(Be),O.$children$||(O.$children$=[]),O.$children$[Be.$index$]=Be):"r"===nt&&(X?De.remove():(we["s-cr"]=De,De["s-cn"]=!0))));else if(O&&"style"===O.$tag$){const wt=Qe(null,De.textContent);wt.$elm$=De,wt.$index$="0",O.$children$=[wt]}},ge=(O,W)=>{if(1===O.nodeType){let V=0;for(;V<O.childNodes.length;V++)ge(O.childNodes[V],W);if(O.shadowRoot)for(V=0;V<O.shadowRoot.childNodes.length;V++)ge(O.shadowRoot.childNodes[V],W)}else if(8===O.nodeType){const V=O.nodeValue.split(".");"o"===V[0]&&(W.set(V[1]+"."+V[2],O),O.nodeValue="",O["s-en"]=V[3])}},Ge=O=>ir.push(O),ut=O=>$e(O).$modeName$,pt=O=>$e(O).$hostElement$,Ue=(O,W,V)=>{const X=pt(O);return{emit:we=>He(X,W,{bubbles:!!(4&V),composed:!!(2&V),cancelable:!!(1&V),detail:we})}},He=(O,W,V)=>{const X=Rn.ce(W,V);return O.dispatchEvent(X),X},Le=new WeakMap,ct=(O,W,V)=>{let X=pr.get(O);Ls&&V?(X=X||new CSSStyleSheet,"string"==typeof X?X=W:X.replaceSync(W)):X=W,pr.set(O,X)},mt=(O,W,V,X)=>{var we;let De=zt(W,V);const Ke=pr.get(De);if(O=11===O.nodeType?O:lr,Ke)if("string"==typeof Ke){let it,nt=Le.get(O=O.head||O);if(nt||Le.set(O,nt=new Set),!nt.has(De)){if(O.host&&(it=O.querySelector(`[${je}="${De}"]`)))it.innerHTML=Ke;else{it=lr.createElement("style"),it.innerHTML=Ke;const Be=null!==(we=Rn.$nonce$)&&void 0!==we?we:Ve(lr);null!=Be&&it.setAttribute("nonce",Be),O.insertBefore(it,O.querySelector("link"))}nt&&nt.add(De)}}else O.adoptedStyleSheets.includes(Ke)||(O.adoptedStyleSheets=[...O.adoptedStyleSheets,Ke]);return De},zt=(O,W)=>"sc-"+(W&&32&O.$flags$?O.$tagName$+"-"+W:O.$tagName$),tn=O=>O.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),vn=(O,W,V,X,we,De)=>{if(V!==X){let Ke=Vt(O,W),nt=W.toLowerCase();if("class"===W){const it=O.classList,Be=$n(V),Et=$n(X);it.remove(...Be.filter(wt=>wt&&!Et.includes(wt))),it.add(...Et.filter(wt=>wt&&!Be.includes(wt)))}else if("style"===W){for(const it in V)(!X||null==X[it])&&(it.includes("-")?O.style.removeProperty(it):O.style[it]="");for(const it in X)(!V||X[it]!==V[it])&&(it.includes("-")?O.style.setProperty(it,X[it]):O.style[it]=X[it])}else if("key"!==W)if("ref"===W)X&&X(O);else if(Ke||"o"!==W[0]||"n"!==W[1]){const it=ve(X);if((Ke||it&&null!==X)&&!we)try{if(O.tagName.includes("-"))O[W]=X;else{const Et=X??"";"list"===W?Ke=!1:(null==V||O[W]!=Et)&&(O[W]=Et)}}catch{}let Be=!1;nt!==(nt=nt.replace(/^xlink\:?/,""))&&(W=nt,Be=!0),null==X||!1===X?(!1!==X||""===O.getAttribute(W))&&(Be?O.removeAttributeNS(ae,W):O.removeAttribute(W)):(!Ke||4&De||we)&&!it&&(X=!0===X?"":X,Be?O.setAttributeNS(ae,W,X):O.setAttribute(W,X))}else W="-"===W[2]?W.slice(3):Vt(sr,nt)?nt.slice(2):nt[2]+W.slice(3),V&&Rn.rel(O,W,V,!1),X&&Rn.ael(O,W,X,!1)}},xn=/\s/,$n=O=>O?O.split(xn):[],Mn=(O,W,V,X)=>{const we=11===W.$elm$.nodeType&&W.$elm$.host?W.$elm$.host:W.$elm$,De=O&&O.$attrs$||ye,Ke=W.$attrs$||ye;for(X in De)X in Ke||vn(we,X,De[X],void 0,V,W.$flags$);for(X in Ke)vn(we,X,De[X],Ke[X],V,W.$flags$)},kr=(O,W,V,X)=>{const we=W.$children$[V];let Ke,nt,it,De=0;if(Ie||(Ae=!0,"slot"===we.$tag$&&(N&&X.classList.add(N+"-s"),we.$flags$|=we.$children$?2:1)),null!==we.$text$)Ke=we.$elm$=lr.createTextNode(we.$text$);else if(1&we.$flags$)Ke=we.$elm$=lr.createTextNode("");else{if(fe||(fe="svg"===we.$tag$),Ke=we.$elm$=lr.createElementNS(fe?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&we.$flags$?"slot-fb":we.$tag$),fe&&"foreignObject"===we.$tag$&&(fe=!1),Mn(null,we,fe),(O=>null!=O)(N)&&Ke["s-si"]!==N&&Ke.classList.add(Ke["s-si"]=N),we.$children$)for(De=0;De<we.$children$.length;++De)nt=kr(O,we,De,Ke),nt&&Ke.appendChild(nt);"svg"===we.$tag$?fe=!1:"foreignObject"===Ke.tagName&&(fe=!0)}return Ke["s-hn"]=de,3&we.$flags$&&(Ke["s-sr"]=!0,Ke["s-cr"]=ue,Ke["s-sn"]=we.$name$||"",it=O&&O.$children$&&O.$children$[V],it&&it.$tag$===we.$tag$&&O.$elm$&&er(O.$elm$,!1)),Ke},er=(O,W)=>{Rn.$flags$|=1;const V=O.childNodes;for(let X=V.length-1;X>=0;X--){const we=V[X];we["s-hn"]!==de&&we["s-ol"]&&(Xr(we).insertBefore(we,dr(we)),we["s-ol"].remove(),we["s-ol"]=void 0,Ae=!0),W&&er(we,W)}Rn.$flags$&=-2},vt=(O,W,V,X,we,De)=>{let nt,Ke=O["s-cr"]&&O["s-cr"].parentNode||O;for(Ke.shadowRoot&&Ke.tagName===de&&(Ke=Ke.shadowRoot);we<=De;++we)X[we]&&(nt=kr(null,V,we,O),nt&&(X[we].$elm$=nt,Ke.insertBefore(nt,dr(W))))},Lt=(O,W,V)=>{for(let X=W;X<=V;++X){const we=O[X];if(we){const De=we.$elm$;ln(we),De&&(ne=!0,De["s-ol"]?De["s-ol"].remove():er(De,!0),De.remove())}}},En=(O,W)=>O.$tag$===W.$tag$&&("slot"===O.$tag$?O.$name$===W.$name$:O.$key$===W.$key$),dr=O=>O&&O["s-ol"]||O,Xr=O=>(O["s-ol"]?O["s-ol"]:O).parentNode,an=(O,W)=>{const V=W.$elm$=O.$elm$,X=O.$children$,we=W.$children$,De=W.$tag$,Ke=W.$text$;let nt;null===Ke?(fe="svg"===De||"foreignObject"!==De&&fe,"slot"===De||Mn(O,W,fe),null!==X&&null!==we?((O,W,V,X)=>{let cs,li,we=0,De=0,Ke=0,nt=0,it=W.length-1,Be=W[0],Et=W[it],wt=X.length-1,cn=X[0],On=X[wt];for(;we<=it&&De<=wt;)if(null==Be)Be=W[++we];else if(null==Et)Et=W[--it];else if(null==cn)cn=X[++De];else if(null==On)On=X[--wt];else if(En(Be,cn))an(Be,cn),Be=W[++we],cn=X[++De];else if(En(Et,On))an(Et,On),Et=W[--it],On=X[--wt];else if(En(Be,On))("slot"===Be.$tag$||"slot"===On.$tag$)&&er(Be.$elm$.parentNode,!1),an(Be,On),O.insertBefore(Be.$elm$,Et.$elm$.nextSibling),Be=W[++we],On=X[--wt];else if(En(Et,cn))("slot"===Be.$tag$||"slot"===On.$tag$)&&er(Et.$elm$.parentNode,!1),an(Et,cn),O.insertBefore(Et.$elm$,Be.$elm$),Et=W[--it],cn=X[++De];else{for(Ke=-1,nt=we;nt<=it;++nt)if(W[nt]&&null!==W[nt].$key$&&W[nt].$key$===cn.$key$){Ke=nt;break}Ke>=0?(li=W[Ke],li.$tag$!==cn.$tag$?cs=kr(W&&W[De],V,Ke,O):(an(li,cn),W[Ke]=void 0,cs=li.$elm$),cn=X[++De]):(cs=kr(W&&W[De],V,De,O),cn=X[++De]),cs&&Xr(Be.$elm$).insertBefore(cs,dr(Be.$elm$))}we>it?vt(O,null==X[wt+1]?null:X[wt+1].$elm$,V,X,De,wt):De>wt&&Lt(W,we,it)})(V,X,W,we):null!==we?(null!==O.$text$&&(V.textContent=""),vt(V,null,W,we,0,we.length-1)):null!==X&&Lt(X,0,X.length-1),fe&&"svg"===De&&(fe=!1)):(nt=V["s-cr"])?nt.parentNode.textContent=Ke:O.$text$!==Ke&&(V.data=Ke)},hr=O=>{const W=O.childNodes;let V,X,we,De,Ke,nt;for(X=0,we=W.length;X<we;X++)if(V=W[X],1===V.nodeType){if(V["s-sr"])for(Ke=V["s-sn"],V.hidden=!1,De=0;De<we;De++)if(nt=W[De].nodeType,W[De]["s-hn"]!==V["s-hn"]||""!==Ke){if(1===nt&&Ke===W[De].getAttribute("slot")){V.hidden=!0;break}}else if(1===nt||3===nt&&""!==W[De].textContent.trim()){V.hidden=!0;break}hr(V)}},fr=[],kn=O=>{let W,V,X,we,De,Ke,nt=0;const it=O.childNodes,Be=it.length;for(;nt<Be;nt++){if(W=it[nt],W["s-sr"]&&(V=W["s-cr"])&&V.parentNode)for(X=V.parentNode.childNodes,we=W["s-sn"],Ke=X.length-1;Ke>=0;Ke--)V=X[Ke],!V["s-cn"]&&!V["s-nr"]&&V["s-hn"]!==W["s-hn"]&&(jr(V,we)?(De=fr.find(Et=>Et.$nodeToRelocate$===V),ne=!0,V["s-sn"]=V["s-sn"]||we,De?De.$slotRefNode$=W:fr.push({$slotRefNode$:W,$nodeToRelocate$:V}),V["s-sr"]&&fr.map(Et=>{jr(Et.$nodeToRelocate$,V["s-sn"])&&(De=fr.find(wt=>wt.$nodeToRelocate$===V),De&&!Et.$slotRefNode$&&(Et.$slotRefNode$=De.$slotRefNode$))})):fr.some(Et=>Et.$nodeToRelocate$===V)||fr.push({$nodeToRelocate$:V}));1===W.nodeType&&kn(W)}},jr=(O,W)=>1===O.nodeType?null===O.getAttribute("slot")&&""===W||O.getAttribute("slot")===W:O["s-sn"]===W||""===W,ln=O=>{O.$attrs$&&O.$attrs$.ref&&O.$attrs$.ref(null),O.$children$&&O.$children$.map(ln)},mi=(O,W)=>{W&&!O.$onRenderResolve$&&W["s-p"]&&W["s-p"].push(new Promise(V=>O.$onRenderResolve$=V))},yi=(O,W)=>{if(O.$flags$|=16,!(4&O.$flags$))return mi(O,O.$ancestorComponent$),ro(()=>Hr(O,W));O.$flags$|=512},Hr=(O,W)=>{const X=O.$lazyInstance$;let we;return W&&(O.$flags$|=256,O.$queuedListeners$&&(O.$queuedListeners$.map(([De,Ke])=>rn(X,De,Ke)),O.$queuedListeners$=void 0),we=rn(X,"componentWillLoad")),we=ar(we,()=>rn(X,"componentWillRender")),ar(we,()=>vr(O,X,W))},ar=(O,W)=>Zn(O)?O.then(W):W(),Zn=O=>O instanceof Promise||O&&O.then&&"function"==typeof O.then,vr=function(){var O=(0,u.Z)(function*(W,V,X){var we;const De=W.$hostElement$,nt=De["s-rc"];X&&(O=>{const W=O.$cmpMeta$,V=O.$hostElement$,X=W.$flags$,De=mt(V.shadowRoot?V.shadowRoot:V.getRootNode(),W,O.$modeName$);10&X&&(V["s-sc"]=De,V.classList.add(De+"-h"),2&X&&V.classList.add(De+"-s"))})(W);nr(W,V),nt&&(nt.map(Be=>Be()),De["s-rc"]=void 0);{const Be=null!==(we=De["s-p"])&&void 0!==we?we:[],Et=()=>br(W);0===Be.length?Et():(Promise.all(Be).then(Et),W.$flags$|=4,Be.length=0)}});return function(V,X,we){return O.apply(this,arguments)}}(),nr=(O,W,V)=>{try{W=W.render&&W.render(),O.$flags$&=-17,O.$flags$|=2,((O,W)=>{const V=O.$hostElement$,X=O.$cmpMeta$,we=O.$vnode$||Qe(null,null),De=(O=>O&&O.$tag$===xt)(W)?W:Ye(null,null,W);if(de=V.tagName,X.$attrsToReflect$&&(De.$attrs$=De.$attrs$||{},X.$attrsToReflect$.map(([Ke,nt])=>De.$attrs$[nt]=V[Ke])),De.$tag$=null,De.$flags$|=4,O.$vnode$=De,De.$elm$=we.$elm$=V.shadowRoot||V,N=V["s-sc"],ue=V["s-cr"],Ie=0!=(1&X.$flags$),ne=!1,an(we,De),Rn.$flags$|=1,Ae){kn(De.$elm$);let Ke,nt,it,Be,Et,wt,cn=0;for(;cn<fr.length;cn++)Ke=fr[cn],nt=Ke.$nodeToRelocate$,nt["s-ol"]||(it=lr.createTextNode(""),it["s-nr"]=nt,nt.parentNode.insertBefore(nt["s-ol"]=it,nt));for(cn=0;cn<fr.length;cn++)if(Ke=fr[cn],nt=Ke.$nodeToRelocate$,Ke.$slotRefNode$){for(Be=Ke.$slotRefNode$.parentNode,Et=Ke.$slotRefNode$.nextSibling,it=nt["s-ol"];it=it.previousSibling;)if(wt=it["s-nr"],wt&&wt["s-sn"]===nt["s-sn"]&&Be===wt.parentNode&&(wt=wt.nextSibling,!wt||!wt["s-nr"])){Et=wt;break}(!Et&&Be!==nt.parentNode||nt.nextSibling!==Et)&&nt!==Et&&(!nt["s-hn"]&&nt["s-ol"]&&(nt["s-hn"]=nt["s-ol"].parentNode.nodeName),Be.insertBefore(nt,Et))}else 1===nt.nodeType&&(nt.hidden=!0)}ne&&hr(De.$elm$),Rn.$flags$&=-2,fr.length=0})(O,W)}catch(X){Xt(X,O.$hostElement$)}return null},br=O=>{const V=O.$hostElement$,we=O.$lazyInstance$,De=O.$ancestorComponent$;rn(we,"componentDidRender"),64&O.$flags$?rn(we,"componentDidUpdate"):(O.$flags$|=64,se(V),rn(we,"componentDidLoad"),O.$onReadyResolve$(V),De||Cr()),O.$onInstanceResolve$(V),O.$onRenderResolve$&&(O.$onRenderResolve$(),O.$onRenderResolve$=void 0),512&O.$flags$&&da(()=>yi(O,!1)),O.$flags$&=-517},rr=O=>{{const W=$e(O),V=W.$hostElement$.isConnected;return V&&2==(18&W.$flags$)&&yi(W,!1),V}},Cr=O=>{se(lr.documentElement),da(()=>He(sr,"appload",{detail:{namespace:"ionic"}}))},rn=(O,W,V)=>{if(O&&O[W])try{return O[W](V)}catch(X){Xt(X)}},se=O=>O.classList.add("hydrated"),$=(O,W,V)=>{if(W.$members$){O.watchers&&(W.$watchers$=O.watchers);const X=Object.entries(W.$members$),we=O.prototype;if(X.map(([De,[Ke]])=>{31&Ke||2&V&&32&Ke?Object.defineProperty(we,De,{get(){return((O,W)=>$e(this).$instanceValues$.get(W))(0,De)},set(nt){((O,W,V,X)=>{const we=$e(O),De=we.$hostElement$,Ke=we.$instanceValues$.get(W),nt=we.$flags$,it=we.$lazyInstance$;V=((O,W)=>null==O||ve(O)?O:4&W?"false"!==O&&(""===O||!!O):2&W?parseFloat(O):1&W?String(O):O)(V,X.$members$[W][0]);const Be=Number.isNaN(Ke)&&Number.isNaN(V);if((!(8&nt)||void 0===Ke)&&V!==Ke&&!Be&&(we.$instanceValues$.set(W,V),it)){if(X.$watchers$&&128&nt){const wt=X.$watchers$[W];wt&&wt.map(cn=>{try{it[cn](V,Ke,W)}catch(On){Xt(On,De)}})}2==(18&nt)&&yi(we,!1)}})(this,De,nt,W)},configurable:!0,enumerable:!0}):1&V&&64&Ke&&Object.defineProperty(we,De,{value(...nt){const it=$e(this);return it.$onInstancePromise$.then(()=>it.$lazyInstance$[De](...nt))}})}),1&V){const De=new Map;we.attributeChangedCallback=function(Ke,nt,it){Rn.jmp(()=>{const Be=De.get(Ke);if(this.hasOwnProperty(Be))it=this[Be],delete this[Be];else if(we.hasOwnProperty(Be)&&"number"==typeof this[Be]&&this[Be]==it)return;this[Be]=(null!==it||"boolean"!=typeof this[Be])&&it})},O.observedAttributes=X.filter(([Ke,nt])=>15&nt[0]).map(([Ke,nt])=>{const it=nt[1]||Ke;return De.set(it,Ke),512&nt[0]&&W.$attrsToReflect$.push([Ke,it]),it})}}return O},k=function(){var O=(0,u.Z)(function*(W,V,X,we,De){if(!(32&V.$flags$)){V.$flags$|=32;{if((De=bn(X)).then){const Be=()=>{};De=yield De,Be()}De.isProxied||(X.$watchers$=De.watchers,$(De,X,2),De.isProxied=!0);const it=()=>{};V.$flags$|=8;try{new De(V)}catch(Be){Xt(Be)}V.$flags$&=-9,V.$flags$|=128,it(),Se(V.$lazyInstance$)}if(De.style){let it=De.style;"string"!=typeof it&&(it=it[V.$modeName$=(O=>ir.map(W=>W(O)).find(W=>!!W))(W)]);const Be=zt(X,V.$modeName$);if(!pr.has(Be)){const Et=()=>{};ct(Be,it,!!(1&X.$flags$)),Et()}}}const Ke=V.$ancestorComponent$,nt=()=>yi(V,!0);Ke&&Ke["s-rc"]?Ke["s-rc"].push(nt):nt()});return function(V,X,we,De,Ke){return O.apply(this,arguments)}}(),Se=O=>{rn(O,"connectedCallback")},yt=O=>{const W=O["s-cr"]=lr.createComment("");W["s-cn"]=!0,O.insertBefore(W,O.firstChild)},Wt=(O,W={})=>{var V;const we=[],De=W.exclude||[],Ke=sr.customElements,nt=lr.head,it=nt.querySelector("meta[charset]"),Be=lr.createElement("style"),Et=[],wt=lr.querySelectorAll(`[${je}]`);let cn,On=!0,cs=0;for(Object.assign(Rn,W),Rn.$resourcesUrl$=new URL(W.resourcesUrl||"./",lr.baseURI).href,Rn.$flags$|=2;cs<wt.length;cs++)ct(wt[cs].getAttribute(je),tn(wt[cs].innerHTML),!0);O.map(li=>{li[1].map(us=>{const Ci={$flags$:us[0],$tagName$:us[1],$members$:us[2],$listeners$:us[3]};Ci.$members$=us[2],Ci.$listeners$=us[3],Ci.$attrsToReflect$=[],Ci.$watchers$={};const ha=Ci.$tagName$,Rr=class extends HTMLElement{constructor(Dt){super(Dt),lt(Dt=this,Ci),1&Ci.$flags$&&Dt.attachShadow({mode:"open",delegatesFocus:!!(16&Ci.$flags$)})}connectedCallback(){cn&&(clearTimeout(cn),cn=null),On?Et.push(this):Rn.jmp(()=>(O=>{if(!(1&Rn.$flags$)){const W=$e(O),V=W.$cmpMeta$,X=()=>{};if(1&W.$flags$)Bt(O,W,V.$listeners$),Se(W.$lazyInstance$);else{let we;if(W.$flags$|=1,we=O.getAttribute(Re),we){if(1&V.$flags$){const De=mt(O.shadowRoot,V,O.getAttribute("s-mode"));O.classList.remove(De+"-h",De+"-s")}((O,W,V,X)=>{const De=O.shadowRoot,Ke=[],it=De?[]:null,Be=X.$vnode$=Qe(W,null);Rn.$orgLocNodes$||ge(lr.body,Rn.$orgLocNodes$=new Map),O[Re]=V,O.removeAttribute(Re),ce(Be,Ke,[],it,O,O,V),Ke.map(Et=>{const wt=Et.$hostId$+"."+Et.$nodeId$,cn=Rn.$orgLocNodes$.get(wt),On=Et.$elm$;cn&&Qr&&""===cn["s-en"]&&cn.parentNode.insertBefore(On,cn.nextSibling),De||(On["s-hn"]=W,cn&&(On["s-ol"]=cn,On["s-ol"]["s-nr"]=On)),Rn.$orgLocNodes$.delete(wt)}),De&&it.map(Et=>{Et&&De.appendChild(Et)})})(O,V.$tagName$,we,W)}we||12&V.$flags$&&yt(O);{let De=O;for(;De=De.parentNode||De.host;)if(1===De.nodeType&&De.hasAttribute("s-id")&&De["s-p"]||De["s-p"]){mi(W,W.$ancestorComponent$=De);break}}V.$members$&&Object.entries(V.$members$).map(([De,[Ke]])=>{if(31&Ke&&O.hasOwnProperty(De)){const nt=O[De];delete O[De],O[De]=nt}}),k(O,W,V)}X()}})(this))}disconnectedCallback(){Rn.jmp(()=>(O=>{if(!(1&Rn.$flags$)){const W=$e(this),V=W.$lazyInstance$;W.$rmListeners$&&(W.$rmListeners$.map(X=>X()),W.$rmListeners$=void 0),rn(V,"disconnectedCallback")}})())}componentOnReady(){return $e(this).$onReadyPromise$}};Ci.$lazyBundleId$=li[0],!De.includes(ha)&&!Ke.get(ha)&&(we.push(ha),Ke.define(ha,$(Rr,Ci,1)))})});{Be.innerHTML=we+"{visibility:hidden}.hydrated{visibility:inherit}",Be.setAttribute("data-styles","");const li=null!==(V=Rn.$nonce$)&&void 0!==V?V:Ve(lr);null!=li&&Be.setAttribute("nonce",li),nt.insertBefore(Be,it?it.nextSibling:nt.firstChild)}On=!1,Et.length?Et.map(li=>li.connectedCallback()):Rn.jmp(()=>cn=setTimeout(Cr,30))},Bt=(O,W,V,X)=>{V&&V.map(([we,De,Ke])=>{const nt=zn(O,we),it=sn(W,Ke),Be=fn(we);Rn.ael(nt,De,it,Be),(W.$rmListeners$=W.$rmListeners$||[]).push(()=>Rn.rel(nt,De,it,Be))})},sn=(O,W)=>V=>{try{256&O.$flags$?O.$lazyInstance$[W](V):(O.$queuedListeners$=O.$queuedListeners$||[]).push([W,V])}catch(X){Xt(X)}},zn=(O,W)=>4&W?lr:8&W?sr:16&W?lr.body:O,fn=O=>0!=(2&O),xr=new WeakMap,$e=O=>xr.get(O),Oe=(O,W)=>xr.set(W.$lazyInstance$=O,W),lt=(O,W)=>{const V={$flags$:0,$hostElement$:O,$cmpMeta$:W,$instanceValues$:new Map};return V.$onInstancePromise$=new Promise(X=>V.$onInstanceResolve$=X),V.$onReadyPromise$=new Promise(X=>V.$onReadyResolve$=X),O["s-p"]=[],O["s-rc"]=[],Bt(O,V,W.$listeners$),xr.set(O,V)},Vt=(O,W)=>W in O,Xt=(O,W)=>(0,console.error)(O,W),pn=new Map,bn=(O,W,V)=>{const X=O.$tagName$.replace(/-/g,"_"),we=O.$lazyBundleId$,De=pn.get(we);return De?De[X]:R(863)(`./${we}.entry.js`).then(Ke=>(pn.set(we,Ke),Ke[X]),Xt)},pr=new Map,ir=[],sr=typeof window<"u"?window:{},lr=sr.document||{head:{}},Rn={$flags$:0,$resourcesUrl$:"",jmp:O=>O(),raf:O=>requestAnimationFrame(O),ael:(O,W,V,X)=>O.addEventListener(W,V,X),rel:(O,W,V,X)=>O.removeEventListener(W,V,X),ce:(O,W)=>new CustomEvent(O,W)},za=O=>{Object.assign(Rn,O)},Qr=!0,ls=O=>Promise.resolve(O),Ls=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),vo=[],Ho=[],gr=(O,W)=>V=>{O.push(V),q||(q=!0,W&&4&Rn.$flags$?da(Yi):Rn.raf(Yi))},Tl=O=>{for(let W=0;W<O.length;W++)try{O[W](performance.now())}catch(V){Xt(V)}O.length=0},Yi=()=>{Tl(vo),Tl(Ho),(q=vo.length>0)&&Rn.raf(Yi)},da=O=>ls().then(O),Wa=gr(vo,!1),ro=gr(Ho,!0)},8077:(It,Fe,R)=>{"use strict";R.r(Fe),R.d(Fe,{GESTURE_CONTROLLER:()=>u.G,createGesture:()=>fe});var u=R(4587);const U=(ie,le,Me,Ce)=>{const pe=N(ie)?{capture:!!Ce.capture,passive:!!Ce.passive}:!!Ce.capture;let Z,Re;return ie.__zone_symbol__addEventListener?(Z="__zone_symbol__addEventListener",Re="__zone_symbol__removeEventListener"):(Z="addEventListener",Re="removeEventListener"),ie[Z](le,Me,pe),()=>{ie[Re](le,Me,pe)}},N=ie=>{if(void 0===ue)try{const le=Object.defineProperty({},"passive",{get:()=>{ue=!0}});ie.addEventListener("optsTest",()=>{},le)}catch{ue=!1}return!!ue};let ue;const ne=ie=>ie instanceof Document?ie:ie.ownerDocument,fe=ie=>{let le=!1,Me=!1,Ce=!0,pe=!1;const Z=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ie),Re=Z.canStart,je=Z.onWillStart,re=Z.onStart,Ee=Z.onEnd,ae=Z.notCaptured,ye=Z.onMove,oe=Z.threshold,K=Z.passive,Pe=Z.blurOnStart,ve={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Ve=((ie,le,Me)=>{const Ce=Me*(Math.PI/180),pe="x"===ie,Z=Math.cos(Ce),Re=le*le;let je=0,re=0,Ee=!1,ae=0;return{start(ye,oe){je=ye,re=oe,ae=0,Ee=!0},detect(ye,oe){if(!Ee)return!1;const K=ye-je,Pe=oe-re,ve=K*K+Pe*Pe;if(ve<Re)return!1;const Ve=Math.sqrt(ve),Ye=(pe?K:Pe)/Ve;return ae=Ye>Z?1:Ye<-Z?-1:0,Ee=!1,!0},isGesture:()=>0!==ae,getDirection:()=>ae}})(Z.direction,Z.threshold,Z.maxAngle),Ye=u.G.createGesture({name:ie.gestureName,priority:ie.gesturePriority,disableScroll:ie.disableScroll}),$t=()=>{le&&(pe=!1,ye&&ye(ve))},Qt=()=>!!Ye.capture()&&(le=!0,Ce=!1,ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime,je?je(ve).then(z):z(),!0),z=()=>{Pe&&(()=>{if(typeof document<"u"){const Ge=document.activeElement;Ge?.blur&&Ge.blur()}})(),re&&re(ve),Ce=!0},J=()=>{le=!1,Me=!1,pe=!1,Ce=!0,Ye.release()},ce=Ge=>{const ut=le,dt=Ce;if(J(),dt){if(q(ve,Ge),ut)return void(Ee&&Ee(ve));ae&&ae(ve)}},ge=((ie,le,Me,Ce,pe)=>{let Z,Re,je,re,Ee,ae,ye,oe=0;const K=Je=>{oe=Date.now()+2e3,le(Je)&&(!Re&&Me&&(Re=U(ie,"touchmove",Me,pe)),je||(je=U(Je.target,"touchend",ve,pe)),re||(re=U(Je.target,"touchcancel",ve,pe)))},Pe=Je=>{oe>Date.now()||le(Je)&&(!ae&&Me&&(ae=U(ne(ie),"mousemove",Me,pe)),ye||(ye=U(ne(ie),"mouseup",Ve,pe)))},ve=Je=>{Ye(),Ce&&Ce(Je)},Ve=Je=>{Qe(),Ce&&Ce(Je)},Ye=()=>{Re&&Re(),je&&je(),re&&re(),Re=je=re=void 0},Qe=()=>{ae&&ae(),ye&&ye(),ae=ye=void 0},xt=()=>{Ye(),Qe()},$t=(Je=!0)=>{Je?(Z||(Z=U(ie,"touchstart",K,pe)),Ee||(Ee=U(ie,"mousedown",Pe,pe))):(Z&&Z(),Ee&&Ee(),Z=Ee=void 0,xt())};return{enable:$t,stop:xt,destroy:()=>{$t(!1),Ce=Me=le=void 0}}})(Z.el,Ge=>{const ut=ee(Ge);return!(Me||!Ce||(H(Ge,ve),ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime=ut,ve.velocityX=ve.velocityY=ve.deltaX=ve.deltaY=0,ve.event=Ge,Re&&!1===Re(ve))||(Ye.release(),!Ye.start()))&&(Me=!0,0===oe?Qt():(Ve.start(ve.startX,ve.startY),!0))},Ge=>{le?!pe&&Ce&&(pe=!0,q(ve,Ge),requestAnimationFrame($t)):(q(ve,Ge),Ve.detect(ve.currentX,ve.currentY)&&(!Ve.isGesture()||!Qt())&&Ne())},ce,{capture:!1,passive:K}),Ne=()=>{J(),ge.stop(),ae&&ae(ve)};return{enable(Ge=!0){Ge||(le&&ce(void 0),J()),ge.enable(Ge)},destroy(){Ye.destroy(),ge.destroy()}}},q=(ie,le)=>{if(!le)return;const Me=ie.currentX,Ce=ie.currentY,pe=ie.currentTime;H(le,ie);const Z=ie.currentX,Re=ie.currentY,re=(ie.currentTime=ee(le))-pe;if(re>0&&re<100){const ae=(Re-Ce)/re;ie.velocityX=(Z-Me)/re*.7+.3*ie.velocityX,ie.velocityY=.7*ae+.3*ie.velocityY}ie.deltaX=Z-ie.startX,ie.deltaY=Re-ie.startY,ie.event=le},H=(ie,le)=>{let Me=0,Ce=0;if(ie){const pe=ie.changedTouches;if(pe&&pe.length>0){const Z=pe[0];Me=Z.clientX,Ce=Z.clientY}else void 0!==ie.pageX&&(Me=ie.pageX,Ce=ie.pageY)}le.currentX=Me,le.currentY=Ce},ee=ie=>ie.timeStamp||Date.now()},1767:(It,Fe,R)=>{"use strict";R.d(Fe,{m:()=>H});var u=R(5861),U=R(5421),N=R(544),ue=R(7876),de=R(6506);const Ie=ee=>(0,de.c)().duration(ee?400:300),ne=ee=>{let ie,le;const Me=ee.width+8,Ce=(0,de.c)(),pe=(0,de.c)();ee.isEndSide?(ie=Me+"px",le="0px"):(ie=-Me+"px",le="0px"),Ce.addElement(ee.menuInnerEl).fromTo("transform",`translateX(${ie})`,`translateX(${le})`);const Re="ios"===(0,ue.b)(ee),je=Re?.2:.25;return pe.addElement(ee.backdropEl).fromTo("opacity",.01,je),Ie(Re).addAnimation([Ce,pe])},Ae=ee=>{let ie,le;const Me=(0,ue.b)(ee),Ce=ee.width;ee.isEndSide?(ie=-Ce+"px",le=Ce+"px"):(ie=Ce+"px",le=-Ce+"px");const pe=(0,de.c)().addElement(ee.menuInnerEl).fromTo("transform",`translateX(${le})`,"translateX(0px)"),Z=(0,de.c)().addElement(ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${ie})`),Re=(0,de.c)().addElement(ee.backdropEl).fromTo("opacity",.01,.32);return Ie("ios"===Me).addAnimation([pe,Z,Re])},fe=ee=>{const ie=(0,ue.b)(ee),le=ee.width*(ee.isEndSide?-1:1)+"px",Me=(0,de.c)().addElement(ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${le})`);return Ie("ios"===ie).addAnimation(Me)},H=(()=>{const ee=new Map,ie=[],le=function(){var z=(0,u.Z)(function*(J){const ce=yield re(J);return!!ce&&ce.open()});return function(ce){return z.apply(this,arguments)}}(),Me=function(){var z=(0,u.Z)(function*(J){const ce=yield void 0!==J?re(J):Ee();return void 0!==ce&&ce.close()});return function(ce){return z.apply(this,arguments)}}(),Ce=function(){var z=(0,u.Z)(function*(J){const ce=yield re(J);return!!ce&&ce.toggle()});return function(ce){return z.apply(this,arguments)}}(),pe=function(){var z=(0,u.Z)(function*(J,ce){const ge=yield re(ce);return ge&&(ge.disabled=!J),ge});return function(ce,ge){return z.apply(this,arguments)}}(),Z=function(){var z=(0,u.Z)(function*(J,ce){const ge=yield re(ce);return ge&&(ge.swipeGesture=J),ge});return function(ce,ge){return z.apply(this,arguments)}}(),Re=function(){var z=(0,u.Z)(function*(J){if(null!=J){const ce=yield re(J);return void 0!==ce&&ce.isOpen()}return void 0!==(yield Ee())});return function(ce){return z.apply(this,arguments)}}(),je=function(){var z=(0,u.Z)(function*(J){const ce=yield re(J);return!!ce&&!ce.disabled});return function(ce){return z.apply(this,arguments)}}(),re=function(){var z=(0,u.Z)(function*(J){return yield Je(),"start"===J||"end"===J?Qt(Ne=>Ne.side===J&&!Ne.disabled)||Qt(Ne=>Ne.side===J):null!=J?Qt(ge=>ge.menuId===J):Qt(ge=>!ge.disabled)||(ie.length>0?ie[0].el:void 0)});return function(ce){return z.apply(this,arguments)}}(),Ee=function(){var z=(0,u.Z)(function*(){return yield Je(),Qe()});return function(){return z.apply(this,arguments)}}(),ae=function(){var z=(0,u.Z)(function*(){return yield Je(),xt()});return function(){return z.apply(this,arguments)}}(),ye=function(){var z=(0,u.Z)(function*(){return yield Je(),$t()});return function(){return z.apply(this,arguments)}}(),oe=(z,J)=>{ee.set(z,J)},ve=z=>{const J=z.side;ie.filter(ce=>ce.side===J&&ce!==z).forEach(ce=>ce.disabled=!0)},Ve=function(){var z=(0,u.Z)(function*(J,ce,ge){if($t())return!1;if(ce){const Ne=yield Ee();Ne&&J.el!==Ne&&(yield Ne.setOpen(!1,!1))}return J._setOpen(ce,ge)});return function(ce,ge,Ne){return z.apply(this,arguments)}}(),Qe=()=>Qt(z=>z._isOpen),xt=()=>ie.map(z=>z.el),$t=()=>ie.some(z=>z.isAnimating),Qt=z=>{const J=ie.find(z);if(void 0!==J)return J.el},Je=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(z=>new Promise(J=>(0,N.c)(z,J))));return oe("reveal",fe),oe("push",Ae),oe("overlay",ne),typeof document<"u"&&document.addEventListener("ionBackButton",z=>{const J=Qe();J&&z.detail.register(U.MENU_BACK_BUTTON_PRIORITY,()=>J.close())}),{registerAnimation:oe,get:re,getMenus:ae,getOpen:Ee,isEnabled:je,swipeGesture:Z,isAnimating:ye,isOpen:Re,enable:pe,toggle:Ce,close:Me,open:le,_getOpenSync:Qe,_createAnimation:(z,J)=>{const ce=ee.get(z);if(!ce)throw new Error("animation not registered");return ce(J)},_register:z=>{ie.indexOf(z)<0&&(z.disabled||ve(z),ie.push(z))},_unregister:z=>{const J=ie.indexOf(z);J>-1&&ie.splice(J,1)},_setOpen:Ve,_setActiveMenu:ve}})()},8354:(It,Fe,R)=>{"use strict";R.d(Fe,{L:()=>ue,a:()=>de,b:()=>Ie,c:()=>ne,d:()=>Ae,e:()=>oe,g:()=>ve,l:()=>ae,s:()=>K,t:()=>H,w:()=>ye});var u=R(5861),U=R(6953),N=R(544);const ue="ionViewWillEnter",de="ionViewDidEnter",Ie="ionViewWillLeave",ne="ionViewDidLeave",Ae="ionViewWillUnload",H=Ve=>new Promise((Ye,Qe)=>{(0,U.w)(()=>{ee(Ve),ie(Ve).then(xt=>{xt.animation&&xt.animation.destroy(),le(Ve),Ye(xt)},xt=>{le(Ve),Qe(xt)})})}),ee=Ve=>{const Ye=Ve.enteringEl,Qe=Ve.leavingEl;Pe(Ye,Qe,Ve.direction),Ve.showGoBack?Ye.classList.add("can-go-back"):Ye.classList.remove("can-go-back"),K(Ye,!1),Ye.style.setProperty("pointer-events","none"),Qe&&(K(Qe,!1),Qe.style.setProperty("pointer-events","none"))},ie=function(){var Ve=(0,u.Z)(function*(Ye){const Qe=yield Me(Ye);return Qe&&U.B.isBrowser?Ce(Qe,Ye):pe(Ye)});return function(Qe){return Ve.apply(this,arguments)}}(),le=Ve=>{const Ye=Ve.enteringEl,Qe=Ve.leavingEl;Ye.classList.remove("ion-page-invisible"),Ye.style.removeProperty("pointer-events"),void 0!==Qe&&(Qe.classList.remove("ion-page-invisible"),Qe.style.removeProperty("pointer-events"))},Me=function(){var Ve=(0,u.Z)(function*(Ye){return Ye.leavingEl&&Ye.animated&&0!==Ye.duration?Ye.animationBuilder?Ye.animationBuilder:"ios"===Ye.mode?(yield Promise.resolve().then(R.bind(R,8899))).iosTransitionAnimation:(yield Promise.resolve().then(R.bind(R,5298))).mdTransitionAnimation:void 0});return function(Qe){return Ve.apply(this,arguments)}}(),Ce=function(){var Ve=(0,u.Z)(function*(Ye,Qe){yield Z(Qe,!0);const xt=Ye(Qe.baseEl,Qe);re(Qe.enteringEl,Qe.leavingEl);const $t=yield je(xt,Qe);return Qe.progressCallback&&Qe.progressCallback(void 0),$t&&Ee(Qe.enteringEl,Qe.leavingEl),{hasCompleted:$t,animation:xt}});return function(Qe,xt){return Ve.apply(this,arguments)}}(),pe=function(){var Ve=(0,u.Z)(function*(Ye){const Qe=Ye.enteringEl,xt=Ye.leavingEl;return yield Z(Ye,!1),re(Qe,xt),Ee(Qe,xt),{hasCompleted:!0}});return function(Qe){return Ve.apply(this,arguments)}}(),Z=function(){var Ve=(0,u.Z)(function*(Ye,Qe){(void 0!==Ye.deepWait?Ye.deepWait:Qe)&&(yield Promise.all([oe(Ye.enteringEl),oe(Ye.leavingEl)])),yield Re(Ye.viewIsReady,Ye.enteringEl)});return function(Qe,xt){return Ve.apply(this,arguments)}}(),Re=function(){var Ve=(0,u.Z)(function*(Ye,Qe){Ye&&(yield Ye(Qe))});return function(Qe,xt){return Ve.apply(this,arguments)}}(),je=(Ve,Ye)=>{const Qe=Ye.progressCallback,xt=new Promise($t=>{Ve.onFinish(Qt=>$t(1===Qt))});return Qe?(Ve.progressStart(!0),Qe(Ve)):Ve.play(),xt},re=(Ve,Ye)=>{ae(Ye,Ie),ae(Ve,ue)},Ee=(Ve,Ye)=>{ae(Ve,de),ae(Ye,ne)},ae=(Ve,Ye)=>{if(Ve){const Qe=new CustomEvent(Ye,{bubbles:!1,cancelable:!1});Ve.dispatchEvent(Qe)}},ye=()=>new Promise(Ve=>(0,N.r)(()=>(0,N.r)(()=>Ve()))),oe=function(){var Ve=(0,u.Z)(function*(Ye){const Qe=Ye;if(Qe){if(null!=Qe.componentOnReady){if(null!=(yield Qe.componentOnReady()))return}else if(null!=Qe.__registerHost)return void(yield new Promise($t=>(0,N.r)($t)));yield Promise.all(Array.from(Qe.children).map(oe))}});return function(Qe){return Ve.apply(this,arguments)}}(),K=(Ve,Ye)=>{Ye?(Ve.setAttribute("aria-hidden","true"),Ve.classList.add("ion-page-hidden")):(Ve.hidden=!1,Ve.removeAttribute("aria-hidden"),Ve.classList.remove("ion-page-hidden"))},Pe=(Ve,Ye,Qe)=>{void 0!==Ve&&(Ve.style.zIndex="back"===Qe?"99":"101"),void 0!==Ye&&(Ye.style.zIndex="100")},ve=Ve=>Ve.classList.contains("ion-page")?Ve:Ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ve},7643:(It,Fe,R)=>{"use strict";R.d(Fe,{d:()=>U,w:()=>u});const u=typeof window<"u"?window:void 0,U=typeof document<"u"?document:void 0},7690:(It,Fe,R)=>{"use strict";R.d(Fe,{a:()=>U,b:()=>N,p:()=>u});const u=(ue,...de)=>console.warn(`[Ionic Warning]: ${ue}`,...de),U=(ue,...de)=>console.error(`[Ionic Error]: ${ue}`,...de),N=(ue,...de)=>console.error(`<${ue.tagName.toLowerCase()}> must be used inside ${de.join(" or ")}.`)},7876:(It,Fe,R)=>{"use strict";R.d(Fe,{a:()=>H,b:()=>$t,c:()=>N,g:()=>q,i:()=>Qt});var u=R(6953);class U{constructor(){this.m=new Map}reset(z){this.m=new Map(Object.entries(z))}get(z,J){const ce=this.m.get(z);return void 0!==ce?ce:J}getBoolean(z,J=!1){const ce=this.m.get(z);return void 0===ce?J:"string"==typeof ce?"true"===ce:!!ce}getNumber(z,J){const ce=parseFloat(this.m.get(z));return isNaN(ce)?void 0!==J?J:NaN:ce}set(z,J){this.m.set(z,J)}}const N=new U,fe="ionic-persist-config",q=Je=>ee(Je),H=(Je,z)=>("string"==typeof Je&&(z=Je,Je=void 0),q(Je).includes(z)),ee=(Je=window)=>{if(typeof Je>"u")return[];Je.Ionic=Je.Ionic||{};let z=Je.Ionic.platforms;return null==z&&(z=Je.Ionic.platforms=ie(Je),z.forEach(J=>Je.document.documentElement.classList.add(`plt-${J}`))),z},ie=Je=>{const z=N.get("platform");return Object.keys(Qe).filter(J=>{const ce=z?.[J];return"function"==typeof ce?ce(Je):Qe[J](Je)})},Me=Je=>!!(Ve(Je,/iPad/i)||Ve(Je,/Macintosh/i)&&Ee(Je)),Z=Je=>Ve(Je,/android|sink/i),Ee=Je=>Ye(Je,"(any-pointer:coarse)"),ye=Je=>oe(Je)||K(Je),oe=Je=>!!(Je.cordova||Je.phonegap||Je.PhoneGap),K=Je=>{const z=Je.Capacitor;return!!z?.isNative},Ve=(Je,z)=>z.test(Je.navigator.userAgent),Ye=(Je,z)=>{var J;return null===(J=Je.matchMedia)||void 0===J?void 0:J.call(Je,z).matches},Qe={ipad:Me,iphone:Je=>Ve(Je,/iPhone/i),ios:Je=>Ve(Je,/iPhone|iPod/i)||Me(Je),android:Z,phablet:Je=>{const z=Je.innerWidth,J=Je.innerHeight,ce=Math.min(z,J),ge=Math.max(z,J);return ce>390&&ce<520&&ge>620&&ge<800},tablet:Je=>{const z=Je.innerWidth,J=Je.innerHeight,ce=Math.min(z,J),ge=Math.max(z,J);return Me(Je)||(Je=>Z(Je)&&!Ve(Je,/mobile/i))(Je)||ce>460&&ce<820&&ge>780&&ge<1400},cordova:oe,capacitor:K,electron:Je=>Ve(Je,/electron/i),pwa:Je=>{var z;return!!(null!==(z=Je.matchMedia)&&void 0!==z&&z.call(Je,"(display-mode: standalone)").matches||Je.navigator.standalone)},mobile:Ee,mobileweb:Je=>Ee(Je)&&!ye(Je),desktop:Je=>!Ee(Je),hybrid:ye};let xt;const $t=Je=>Je&&(0,u.g)(Je)||xt,Qt=(Je={})=>{if(typeof window>"u")return;const z=window.document,J=window,ce=J.Ionic=J.Ionic||{},ge={};Je._ael&&(ge.ael=Je._ael),Je._rel&&(ge.rel=Je._rel),Je._ce&&(ge.ce=Je._ce),(0,u.a)(ge);const Ne=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Je=>{try{const z=Je.sessionStorage.getItem(fe);return null!==z?JSON.parse(z):{}}catch{return{}}})(J)),{persistConfig:!1}),ce.config),(Je=>{const z={};return Je.location.search.slice(1).split("&").map(J=>J.split("=")).map(([J,ce])=>[decodeURIComponent(J),decodeURIComponent(ce)]).filter(([J])=>((Je,z)=>Je.substr(0,z.length)===z)(J,"ionic:")).map(([J,ce])=>[J.slice(6),ce]).forEach(([J,ce])=>{z[J]=ce}),z})(J)),Je);N.reset(Ne),N.getBoolean("persistConfig")&&((Je,z)=>{try{Je.sessionStorage.setItem(fe,JSON.stringify(z))}catch{return}})(J,Ne),ee(J),ce.config=N,ce.mode=xt=N.get("mode",z.documentElement.getAttribute("mode")||(H(J,"ios")?"ios":"md")),N.set("mode",xt),z.documentElement.setAttribute("mode",xt),z.documentElement.classList.add(xt),N.getBoolean("_testing")&&N.set("animated",!1);const Ge=dt=>{var pt;return null===(pt=dt.tagName)||void 0===pt?void 0:pt.startsWith("ION-")},ut=dt=>["ios","md"].includes(dt);(0,u.c)(dt=>{for(;dt;){const pt=dt.mode||dt.getAttribute("mode");if(pt){if(ut(pt))return pt;Ge(dt)&&console.warn('Invalid ionic mode: "'+pt+'", expected: "ios" or "md"')}dt=dt.parentElement}return xt})}},8899:(It,Fe,R)=>{"use strict";R.r(Fe),R.d(Fe,{iosTransitionAnimation:()=>ie,shadow:()=>ne});var u=R(6506),U=R(8354);R(7643),R(6953);const Ie=le=>document.querySelector(`${le}.ion-cloned-element`),ne=le=>le.shadowRoot||le,Ae=le=>{const Me="ION-TABS"===le.tagName?le:le.querySelector("ion-tabs"),Ce="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Me){const pe=Me.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=pe?pe.querySelector(Ce):null}return le.querySelector(Ce)},fe=(le,Me)=>{const Ce="ION-TABS"===le.tagName?le:le.querySelector("ion-tabs");let pe=[];if(null!=Ce){const Z=Ce.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Z&&(pe=Z.querySelectorAll("ion-buttons"))}else pe=le.querySelectorAll("ion-buttons");for(const Z of pe){const Re=Z.closest("ion-header"),je=Re&&!Re.classList.contains("header-collapse-condense-inactive"),re=Z.querySelector("ion-back-button"),Ee=Z.classList.contains("buttons-collapse");if(null!==re&&("start"===Z.slot||""===Z.slot)&&(Ee&&je&&Me||!Ee))return re}return null},H=(le,Me,Ce,pe,Z,Re)=>{const je=Me?`calc(100% - ${Re.right+4}px)`:Re.left-4+"px",re=Me?"7px":"-7px",Ee=Me?"-4px":"4px",ae=Me?"-4px":"4px",ye=Me?"right":"left",oe=Me?"left":"right",ve=Ce?[{offset:0,opacity:1,transform:`translate3d(${Ee}, ${Re.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${re}, ${Z.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${re}, ${Z.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Ee}, ${Re.top-46}px, 0) scale(1)`}],Qe=Ce?[{offset:0,opacity:1,transform:`translate3d(${ae}, ${Re.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${ae}, ${Re.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${ae}, ${Re.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${ae}, ${Re.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${ae}, ${Re.top-46}px, 0) scale(1)`}],xt=(0,u.c)(),$t=(0,u.c)(),Qt=Ie("ion-back-button"),Je=ne(Qt).querySelector(".button-text"),z=ne(Qt).querySelector("ion-icon");Qt.text=pe.text,Qt.mode=pe.mode,Qt.icon=pe.icon,Qt.color=pe.color,Qt.disabled=pe.disabled,Qt.style.setProperty("display","block"),Qt.style.setProperty("position","fixed"),$t.addElement(z),xt.addElement(Je),xt.beforeStyles({"transform-origin":`${ye} center`}).beforeAddWrite(()=>{pe.style.setProperty("display","none"),Qt.style.setProperty(ye,je)}).afterAddWrite(()=>{pe.style.setProperty("display",""),Qt.style.setProperty("display","none"),Qt.style.removeProperty(ye)}).keyframes(ve),$t.beforeStyles({"transform-origin":`${oe} center`}).keyframes(Qe),le.addAnimation([xt,$t])},ee=(le,Me,Ce,pe,Z,Re)=>{const je=Me?`calc(100% - ${Z.right}px)`:`${Z.left}px`,re=Me?"-18px":"18px",Ee=Me?"right":"left",oe=Ce?[{offset:0,opacity:0,transform:`translate3d(${re}, ${Re.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Z.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Z.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${re}, ${Re.top-4}px, 0) scale(0.5)`}],K=Ie("ion-title"),Pe=(0,u.c)();K.innerText=pe.innerText,K.size=pe.size,K.color=pe.color,Pe.addElement(K),Pe.beforeStyles({"transform-origin":`${Ee} center`,height:"46px",display:"",position:"relative",[Ee]:je}).beforeAddWrite(()=>{pe.style.setProperty("display","none")}).afterAddWrite(()=>{pe.style.setProperty("display",""),K.style.setProperty("display","none")}).keyframes(oe),le.addAnimation(Pe)},ie=(le,Me)=>{var Ce;try{const pe="cubic-bezier(0.32,0.72,0,1)",Z="opacity",Re="transform",je="0%",Ee="rtl"===le.ownerDocument.dir,ae=Ee?"-99.5%":"99.5%",ye=Ee?"33%":"-33%",oe=Me.enteringEl,K=Me.leavingEl,Pe="back"===Me.direction,ve=oe.querySelector(":scope > ion-content"),Ve=oe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ye=oe.querySelectorAll(":scope > ion-header > ion-toolbar"),Qe=(0,u.c)(),xt=(0,u.c)();if(Qe.addElement(oe).duration((null!==(Ce=Me.duration)&&void 0!==Ce?Ce:0)||540).easing(Me.easing||pe).fill("both").beforeRemoveClass("ion-page-invisible"),K&&null!=le){const z=(0,u.c)();z.addElement(le),Qe.addAnimation(z)}if(ve||0!==Ye.length||0!==Ve.length?(xt.addElement(ve),xt.addElement(Ve)):xt.addElement(oe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Qe.addAnimation(xt),Pe?xt.beforeClearStyles([Z]).fromTo("transform",`translateX(${ye})`,`translateX(${je})`).fromTo(Z,.8,1):xt.beforeClearStyles([Z]).fromTo("transform",`translateX(${ae})`,`translateX(${je})`),ve){const z=ne(ve).querySelector(".transition-effect");if(z){const J=z.querySelector(".transition-cover"),ce=z.querySelector(".transition-shadow"),ge=(0,u.c)(),Ne=(0,u.c)(),Ge=(0,u.c)();ge.addElement(z).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ne.addElement(J).beforeClearStyles([Z]).fromTo(Z,0,.1),Ge.addElement(ce).beforeClearStyles([Z]).fromTo(Z,.03,.7),ge.addAnimation([Ne,Ge]),xt.addAnimation([ge])}}const $t=oe.querySelector("ion-header.header-collapse-condense"),{forward:Qt,backward:Je}=((le,Me,Ce,pe,Z)=>{const Re=fe(pe,Ce),je=Ae(Z),re=Ae(pe),Ee=fe(Z,Ce),ae=null!==Re&&null!==je&&!Ce,ye=null!==re&&null!==Ee&&Ce;if(ae){const oe=je.getBoundingClientRect(),K=Re.getBoundingClientRect();ee(le,Me,Ce,je,oe,K),H(le,Me,Ce,Re,oe,K)}else if(ye){const oe=re.getBoundingClientRect(),K=Ee.getBoundingClientRect();ee(le,Me,Ce,re,oe,K),H(le,Me,Ce,Ee,oe,K)}return{forward:ae,backward:ye}})(Qe,Ee,Pe,oe,K);if(Ye.forEach(z=>{const J=(0,u.c)();J.addElement(z),Qe.addAnimation(J);const ce=(0,u.c)();ce.addElement(z.querySelector("ion-title"));const ge=(0,u.c)(),Ne=Array.from(z.querySelectorAll("ion-buttons,[menuToggle]")),Ge=z.closest("ion-header"),ut=Ge?.classList.contains("header-collapse-condense-inactive");let dt;dt=Ne.filter(Pe?ct=>{const mt=ct.classList.contains("buttons-collapse");return mt&&!ut||!mt}:ct=>!ct.classList.contains("buttons-collapse")),ge.addElement(dt);const pt=(0,u.c)();pt.addElement(z.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ue=(0,u.c)();Ue.addElement(ne(z).querySelector(".toolbar-background"));const He=(0,u.c)(),Le=z.querySelector("ion-back-button");if(Le&&He.addElement(Le),J.addAnimation([ce,ge,pt,Ue,He]),ge.fromTo(Z,.01,1),pt.fromTo(Z,.01,1),Pe)ut||ce.fromTo("transform",`translateX(${ye})`,`translateX(${je})`).fromTo(Z,.01,1),pt.fromTo("transform",`translateX(${ye})`,`translateX(${je})`),He.fromTo(Z,.01,1);else if($t||ce.fromTo("transform",`translateX(${ae})`,`translateX(${je})`).fromTo(Z,.01,1),pt.fromTo("transform",`translateX(${ae})`,`translateX(${je})`),Ue.beforeClearStyles([Z,"transform"]),Ge?.translucent?Ue.fromTo("transform",Ee?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ue.fromTo(Z,.01,"var(--opacity)"),Qt||He.fromTo(Z,.01,1),Le&&!Qt){const mt=(0,u.c)();mt.addElement(ne(Le).querySelector(".button-text")).fromTo("transform",Ee?"translateX(-100px)":"translateX(100px)","translateX(0px)"),J.addAnimation(mt)}}),K){const z=(0,u.c)(),J=K.querySelector(":scope > ion-content"),ce=K.querySelectorAll(":scope > ion-header > ion-toolbar"),ge=K.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(J||0!==ce.length||0!==ge.length?(z.addElement(J),z.addElement(ge)):z.addElement(K.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Qe.addAnimation(z),Pe){z.beforeClearStyles([Z]).fromTo("transform",`translateX(${je})`,Ee?"translateX(-100%)":"translateX(100%)");const Ne=(0,U.g)(K);Qe.afterAddWrite(()=>{"normal"===Qe.getDirection()&&Ne.style.setProperty("display","none")})}else z.fromTo("transform",`translateX(${je})`,`translateX(${ye})`).fromTo(Z,1,.8);if(J){const Ne=ne(J).querySelector(".transition-effect");if(Ne){const Ge=Ne.querySelector(".transition-cover"),ut=Ne.querySelector(".transition-shadow"),dt=(0,u.c)(),pt=(0,u.c)(),Ue=(0,u.c)();dt.addElement(Ne).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),pt.addElement(Ge).beforeClearStyles([Z]).fromTo(Z,.1,0),Ue.addElement(ut).beforeClearStyles([Z]).fromTo(Z,.7,.03),dt.addAnimation([pt,Ue]),z.addAnimation([dt])}}ce.forEach(Ne=>{const Ge=(0,u.c)();Ge.addElement(Ne);const ut=(0,u.c)();ut.addElement(Ne.querySelector("ion-title"));const dt=(0,u.c)(),pt=Ne.querySelectorAll("ion-buttons,[menuToggle]"),Ue=Ne.closest("ion-header"),He=Ue?.classList.contains("header-collapse-condense-inactive"),Le=Array.from(pt).filter(vn=>{const xn=vn.classList.contains("buttons-collapse");return xn&&!He||!xn});dt.addElement(Le);const ct=(0,u.c)(),mt=Ne.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");mt.length>0&&ct.addElement(mt);const Ht=(0,u.c)();Ht.addElement(ne(Ne).querySelector(".toolbar-background"));const zt=(0,u.c)(),tn=Ne.querySelector("ion-back-button");if(tn&&zt.addElement(tn),Ge.addAnimation([ut,dt,ct,zt,Ht]),Qe.addAnimation(Ge),zt.fromTo(Z,.99,0),dt.fromTo(Z,.99,0),ct.fromTo(Z,.99,0),Pe){if(He||ut.fromTo("transform",`translateX(${je})`,Ee?"translateX(-100%)":"translateX(100%)").fromTo(Z,.99,0),ct.fromTo("transform",`translateX(${je})`,Ee?"translateX(-100%)":"translateX(100%)"),Ht.beforeClearStyles([Z,"transform"]),Ue?.translucent?Ht.fromTo("transform","translateX(0px)",Ee?"translateX(-100%)":"translateX(100%)"):Ht.fromTo(Z,"var(--opacity)",0),tn&&!Je){const xn=(0,u.c)();xn.addElement(ne(tn).querySelector(".button-text")).fromTo("transform",`translateX(${je})`,`translateX(${(Ee?-124:124)+"px"})`),Ge.addAnimation(xn)}}else He||ut.fromTo("transform",`translateX(${je})`,`translateX(${ye})`).fromTo(Z,.99,0).afterClearStyles([Re,Z]),ct.fromTo("transform",`translateX(${je})`,`translateX(${ye})`).afterClearStyles([Re,Z]),zt.afterClearStyles([Z]),ut.afterClearStyles([Z]),dt.afterClearStyles([Z])})}return Qe}catch(pe){throw pe}}},5298:(It,Fe,R)=>{"use strict";R.r(Fe),R.d(Fe,{mdTransitionAnimation:()=>de});var u=R(6506),U=R(8354);R(7643),R(6953);const de=(Ie,ne)=>{var Ae,fe,q;const H="40px",ie="back"===ne.direction,Me=ne.leavingEl,Ce=(0,U.g)(ne.enteringEl),pe=Ce.querySelector("ion-toolbar"),Z=(0,u.c)();if(Z.addElement(Ce).fill("both").beforeRemoveClass("ion-page-invisible"),ie?Z.duration((null!==(Ae=ne.duration)&&void 0!==Ae?Ae:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Z.duration((null!==(fe=ne.duration)&&void 0!==fe?fe:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${H})`,"translateY(0px)").fromTo("opacity",.01,1),pe){const Re=(0,u.c)();Re.addElement(pe),Z.addAnimation(Re)}if(Me&&ie){Z.duration((null!==(q=ne.duration)&&void 0!==q?q:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Re=(0,u.c)();Re.addElement((0,U.g)(Me)).onFinish(je=>{1===je&&Re.elements.length>0&&Re.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${H})`).fromTo("opacity",1,0),Z.addAnimation(Re)}return Z}},645:(It,Fe,R)=>{"use strict";R.d(Fe,{B:()=>Ge,G:()=>ut,a:()=>H,b:()=>ee,c:()=>Ce,d:()=>dt,e:()=>pt,f:()=>Qe,g:()=>$t,h:()=>z,i:()=>ce,j:()=>Z,k:()=>Re,m:()=>le,n:()=>fe,o:()=>Ee,q:()=>Ve,s:()=>Ne});var u=R(5861),U=R(7876),N=R(9439),ue=R(5421),de=R(544),Ie=R(7690);let ne=0,Ae=0;const fe=new WeakMap,q=Ue=>({create:He=>je(Ue,He),dismiss:(He,Le,ct)=>Pe(document,He,Le,Ue,ct),getTop:()=>(0,u.Z)(function*(){return Ve(document,Ue)})()}),H=q("ion-alert"),ee=q("ion-action-sheet"),le=q("ion-modal"),Ce=q("ion-popover"),Z=Ue=>{typeof document<"u"&&K(document);const He=ne++;Ue.overlayIndex=He},Re=Ue=>(Ue.hasAttribute("id")||(Ue.id="ion-overlay-"+ ++Ae),Ue.id),je=(Ue,He)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Ue).then(()=>{const Le=document.createElement(Ue);return Le.classList.add("overlay-hidden"),Object.assign(Le,Object.assign(Object.assign({},He),{hasController:!0})),Qt(document).appendChild(Le),new Promise(ct=>(0,de.c)(Le,ct))}):Promise.resolve(),re='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Ee=(Ue,He)=>{let Le=Ue.querySelector(re);const ct=Le?.shadowRoot;ct&&(Le=ct.querySelector(re)||Le),Le?(0,de.f)(Le):He.focus()},ye=(Ue,He)=>{const Le=Array.from(Ue.querySelectorAll(re));let ct=Le.length>0?Le[Le.length-1]:null;const mt=ct?.shadowRoot;mt&&(ct=mt.querySelector(re)||ct),ct?ct.focus():He.focus()},K=Ue=>{0===ne&&(ne=1,Ue.addEventListener("focus",He=>{((Ue,He)=>{const Le=Ve(He,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),ct=Ue.target;Le&&ct&&!Le.classList.contains("ion-disable-focus-trap")&&(Le.shadowRoot?(()=>{if(Le.contains(ct))Le.lastFocus=ct;else{const zt=Le.lastFocus;Ee(Le,Le),zt===He.activeElement&&ye(Le,Le),Le.lastFocus=He.activeElement}})():(()=>{if(Le===ct)Le.lastFocus=void 0;else{const zt=(0,de.g)(Le);if(!zt.contains(ct))return;const tn=zt.querySelector(".ion-overlay-wrapper");if(!tn)return;if(tn.contains(ct))Le.lastFocus=ct;else{const vn=Le.lastFocus;Ee(tn,Le),vn===He.activeElement&&ye(tn,Le),Le.lastFocus=He.activeElement}}})())})(He,Ue)},!0),Ue.addEventListener("ionBackButton",He=>{const Le=Ve(Ue);Le?.backdropDismiss&&He.detail.register(ue.OVERLAY_BACK_BUTTON_PRIORITY,()=>Le.dismiss(void 0,Ge))}),Ue.addEventListener("keydown",He=>{if("Escape"===He.key){const Le=Ve(Ue);Le?.backdropDismiss&&Le.dismiss(void 0,Ge)}}))},Pe=(Ue,He,Le,ct,mt)=>{const Ht=Ve(Ue,ct,mt);return Ht?Ht.dismiss(He,Le):Promise.reject("overlay does not exist")},Ve=(Ue,He,Le)=>{const ct=((Ue,He)=>(void 0===He&&(He="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ue.querySelectorAll(He)).filter(Le=>Le.overlayIndex>0)))(Ue,He).filter(mt=>!(Ue=>Ue.classList.contains("overlay-hidden"))(mt));return void 0===Le?ct[ct.length-1]:ct.find(mt=>mt.id===Le)},Ye=(Ue=!1)=>{const Le=Qt(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Le&&(Ue?Le.setAttribute("aria-hidden","true"):Le.removeAttribute("aria-hidden"))},Qe=function(){var Ue=(0,u.Z)(function*(He,Le,ct,mt,Ht){var zt,tn;if(He.presented)return;Ye(!0),He.presented=!0,He.willPresent.emit(),null===(zt=He.willPresentShorthand)||void 0===zt||zt.emit();const vn=(0,U.b)(He),xn=He.enterAnimation?He.enterAnimation:U.c.get(Le,"ios"===vn?ct:mt);(yield Je(He,xn,He.el,Ht))&&(He.didPresent.emit(),null===(tn=He.didPresentShorthand)||void 0===tn||tn.emit()),"ION-TOAST"!==He.el.tagName&&xt(He.el),He.keyboardClose&&(null===document.activeElement||!He.el.contains(document.activeElement))&&He.el.focus()});return function(Le,ct,mt,Ht,zt){return Ue.apply(this,arguments)}}(),xt=function(){var Ue=(0,u.Z)(function*(He){let Le=document.activeElement;if(!Le)return;const ct=Le?.shadowRoot;ct&&(Le=ct.querySelector(re)||Le),yield He.onDidDismiss(),Le.focus()});return function(Le){return Ue.apply(this,arguments)}}(),$t=function(){var Ue=(0,u.Z)(function*(He,Le,ct,mt,Ht,zt,tn){var vn,xn;if(!He.presented)return!1;Ye(!1),He.presented=!1;try{He.el.style.setProperty("pointer-events","none"),He.willDismiss.emit({data:Le,role:ct}),null===(vn=He.willDismissShorthand)||void 0===vn||vn.emit({data:Le,role:ct});const $n=(0,U.b)(He),Mn=He.leaveAnimation?He.leaveAnimation:U.c.get(mt,"ios"===$n?Ht:zt);ct!==ut&&(yield Je(He,Mn,He.el,tn)),He.didDismiss.emit({data:Le,role:ct}),null===(xn=He.didDismissShorthand)||void 0===xn||xn.emit({data:Le,role:ct}),fe.delete(He),He.el.classList.add("overlay-hidden"),He.el.style.removeProperty("pointer-events"),void 0!==He.el.lastFocus&&(He.el.lastFocus=void 0)}catch($n){console.error($n)}return He.el.remove(),!0});return function(Le,ct,mt,Ht,zt,tn,vn){return Ue.apply(this,arguments)}}(),Qt=Ue=>Ue.querySelector("ion-app")||Ue.body,Je=function(){var Ue=(0,u.Z)(function*(He,Le,ct,mt){ct.classList.remove("overlay-hidden");const zt=Le(He.el,mt);(!He.animated||!U.c.getBoolean("animated",!0))&&zt.duration(0),He.keyboardClose&&zt.beforeAddWrite(()=>{const vn=ct.ownerDocument.activeElement;vn?.matches("input,ion-input, ion-textarea")&&vn.blur()});const tn=fe.get(He)||[];return fe.set(He,[...tn,zt]),yield zt.play(),!0});return function(Le,ct,mt,Ht){return Ue.apply(this,arguments)}}(),z=(Ue,He)=>{let Le;const ct=new Promise(mt=>Le=mt);return J(Ue,He,mt=>{Le(mt.detail)}),ct},J=(Ue,He,Le)=>{const ct=mt=>{(0,de.b)(Ue,He,ct),Le(mt)};(0,de.a)(Ue,He,ct)},ce=Ue=>"cancel"===Ue||Ue===Ge,ge=Ue=>Ue(),Ne=(Ue,He)=>{if("function"==typeof Ue)return U.c.get("_zoneGate",ge)(()=>{try{return Ue(He)}catch(ct){throw ct}})},Ge="backdrop",ut="gesture",dt=Ue=>{let Le,He=!1;const ct=(0,N.C)(),mt=(tn=!1)=>{if(Le&&!tn)return{delegate:Le,inline:He};const{el:vn,hasController:xn,delegate:$n}=Ue;return He=null!==vn.parentNode&&!xn,Le=He?$n||ct:$n,{inline:He,delegate:Le}};return{attachViewToDom:function(){var tn=(0,u.Z)(function*(vn){const{delegate:xn}=mt(!0);if(xn)return yield xn.attachViewToDom(Ue.el,vn);const{hasController:$n}=Ue;if($n&&void 0!==vn)throw new Error("framework delegate is missing");return null});return function(xn){return tn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:tn}=mt();tn&&void 0!==Ue.el&&tn.removeViewFromDom(Ue.el.parentElement,Ue.el)}}},pt=()=>{let Ue;const He=()=>{Ue&&(Ue(),Ue=void 0)};return{addClickListener:(ct,mt)=>{He();const Ht=void 0!==mt?document.getElementById(mt):null;Ht?Ue=((tn,vn)=>{const xn=()=>{vn.present()};return tn.addEventListener("click",xn),()=>{tn.removeEventListener("click",xn)}})(Ht,ct):(0,Ie.p)(`A trigger element with the ID "${mt}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,ct)},removeClickListener:He}}},7672:(It,Fe,R)=>{"use strict";var u=R(5879);let U=null;function N(){return U}class de{}const Ie=new u.OlP("DocumentToken");let ne=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(fe)},providedIn:"platform"}),n})();const Ae=new u.OlP("Location Initialized");let fe=(()=>{class n extends ne{constructor(){super(),this._doc=(0,u.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function q(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function H(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ee(n){return n&&"?"!==n[0]?"?"+n:n}let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Me)},providedIn:"root"}),n})();const le=new u.OlP("appBaseHref");let Me=(()=>{class n extends ie{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return q(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ee(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+ee(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+ee(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne),u.LFG(le,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ce=(()=>{class n extends ie{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=q(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+ee(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+ee(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne),u.LFG(le,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),pe=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function re(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(H(je(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ee(r))}normalize(t){return n.stripTrailingSlash(function Re(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ee(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ee(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ee,n.joinWithSlash=q,n.stripTrailingSlash=H,n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Z(){return new pe((0,u.LFG)(ie))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}let Yi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new da,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Wa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Wa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class da{constructor(){this.$implicit=null,this.ngIf=null}}function Wa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}let Vs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function $s(n){return"server"===n}let ga=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ds((0,u.LFG)(Ie),window)}),n})();class ds{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ya(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ma(this.window.history)||ma(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ma(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qa extends de{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ai extends Qa{static makeCurrent(){!function ue(n){U||(U=n)}(new Ai)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ph(){return Ja=Ja||document.querySelector("base"),Ja?Ja.getAttribute("href"):null}();return null==t?null:function Cs(n){Ko=Ko||document.createElement("a"),Ko.setAttribute("href",n);const e=Ko.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ja=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function lr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ko,Ja=null,gh=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const mh=new u.OlP("EventManagerPlugins");let oo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(mh),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class yh{constructor(e){this._doc=e}}const Hu="ng-app-id";let Mc=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$s(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Hu}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Hu),a;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Hu,this.appId),c}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,c=a.get(r)?.elements;c?c.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ie),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const el={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ds=/%COMP%/g,Vm=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ol(n,e){return e.map(t=>t.replace(Ds,n))}let Hs=(()=>{class n{constructor(t,r,i,a,c,f,m,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=f,this.ngZone=m,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=$s(f),this.defaultRenderer=new Rc(t,c,m,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===u.ifc.ShadowDom&&(r={...r,encapsulation:u.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Fn?i.applyToHost(t):i instanceof ot&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.doc,f=this.ngZone,m=this.eventManager,v=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,S=this.platformIsServer;switch(r.encapsulation){case u.ifc.Emulated:a=new Fn(m,v,r,this.appId,D,c,f,S);break;case u.ifc.ShadowDom:return new kp(m,v,t,r,c,f,this.nonce,S);default:a=new ot(m,v,r,D,c,f,S)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oo),u.LFG(Mc),u.LFG(u.AFp),u.LFG(Vm),u.LFG(Ie),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Rc{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(el[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(vh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new u.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=el[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=el[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=N().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function vh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class kp extends Rc{constructor(e,t,r,i,a,c,f,m){super(e,a,c,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=Ol(i.id,i.styles);for(const D of v){const S=document.createElement("style");f&&S.setAttribute("nonce",f),S.textContent=D,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ot extends Rc{constructor(e,t,r,i,a,c,f,m){super(e,a,c,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.rendererUsageCount=0,this.styles=m?Ol(m,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestroy&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Fn extends ot{constructor(e,t,r,i,a,c,f,m){const v=i+"-"+r.id;super(e,t,r,a,c,f,m,v),this.contentAttr=function zu(n){return"_ngcontent-%COMP%".replace(Ds,n)}(v),this.hostAttr=function Op(n){return"_nghost-%COMP%".replace(Ds,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Wu=(()=>{class n extends yh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Nc=["alt","control","meta","shift"],Jr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Oc=(()=>{class n extends yh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),Nc.forEach(v=>{const D=r.indexOf(v);D>-1&&(r.splice(D,1),c+=v+".")}),c+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=c,m}static matchEventFullKeyCode(t,r){let i=Jr[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Nc.forEach(c=>{c!==i&&(0,Fp[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Pc=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Eh(){Ai.makeCurrent()},multi:!0},{provide:Ie,useFactory:function Ei(){return(0,u.RDi)(document),document},deps:[]}]),Tr=new u.OlP(""),lo=[{provide:u.rWj,useClass:class Np{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new u.vHH(5103,!1);return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(m){c=c||m,a--,0==a&&r(c)};i.forEach(m=>{m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],ei=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function wh(){return new u.qLn},deps:[]},{provide:mh,useClass:Wu,multi:!0,deps:[Ie,u.R0b,u.Lbi]},{provide:mh,useClass:Oc,multi:!0,deps:[Ie]},Hs,Mc,oo,{provide:u.FYo,useExisting:Hs},{provide:class Di{},useClass:gh,deps:[]},[]];let Yu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Tr,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...ei,...lo],imports:[Vs,u.hGG]}),n})(),Fc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ie))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Fl(){return new Fc((0,u.LFG)(Ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Li=R(5592),Bi=R(4674),Un=R(2459),Zt=R(2096),Vi=R(5619);const{isArray:Uc}=Array,{getPrototypeOf:wa,prototype:Ju,keys:Vp}=Object;function nl(n){if(1===n.length){const e=n[0];if(Uc(e))return{args:e,keys:null};if(function jm(n){return n&&"object"==typeof n&&wa(n)===Ju}(e)){const t=Vp(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ts=R(2737),dn=R(7398);const{isArray:fs}=Array;function Ia(n){return(0,dn.U)(e=>function Rh(n,e){return fs(e)?n(...e):n(e)}(n,e))}var ps=R(4564);function ba(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Mi=R(8251),Gs=R(7103);function Jo(...n){const e=(0,ps.yG)(n),t=(0,ps.jO)(n),{args:r,keys:i}=nl(n);if(0===r.length)return(0,Un.D)([],e);const a=new Li.y(function Hm(n,e,t=Ts.y){return r=>{gs(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let m=0;m<i;m++)gs(e,()=>{const v=(0,Un.D)(n[m],e);let D=!1;v.subscribe((0,Mi.x)(r,S=>{a[m]=S,D||(D=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>ba(i,c):Ts.y));return t?a.pipe(Ia(t)):a}function gs(n,e,t){n?(0,Gs.f)(t,n,e):e()}const ea=(0,R(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var wo=R(7537);function zs(...n){return function Nh(){return(0,wo.J)(1)}()((0,Un.D)(n,(0,ps.yG)(n)))}var rl=R(4829);function Up(n){return new Li.y(e=>{(0,rl.Xf)(n()).subscribe(e)})}var il=R(8407);function Ca(n,e){const t=(0,Bi.m)(n)?n:()=>n,r=i=>i.error(t());return new Li.y(e?i=>e.schedule(r,0,i):r)}var co=R(6232),Oh=R(7394),$i=R(9360);function Da(){return(0,$i.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Mi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ta extends Li.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$i.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Mi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oh.w0.EMPTY)}return e}refCount(){return Da()(this)}}var Xi=R(8645),Sr=R(4664);function Io(n){return n<=0?()=>co.E:(0,$i.e)((e,t)=>{let r=0;e.subscribe((0,Mi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function bo(...n){const e=(0,ps.yG)(n);return(0,$i.e)((t,r)=>{(e?zs(n,t,e):zs(n,t)).subscribe(r)})}function ms(n,e){return(0,$i.e)((t,r)=>{let i=0;t.subscribe((0,Mi.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var ti=R(1631);function sl(n){return(0,$i.e)((e,t)=>{let r=!1;e.subscribe((0,Mi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ph(n=ed){return(0,$i.e)((e,t)=>{let r=!1;e.subscribe((0,Mi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ed(){return new ea}function uo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ms((i,a)=>n(i,a,r)):Ts.y,Io(1),t?sl(e):Ph(()=>new ea))}function Ss(n,e){return(0,Bi.m)(e)?(0,ti.z)(n,e,1):(0,ti.z)(n,1)}var Or=R(9397);function Qi(n){return(0,$i.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Mi.x)(t,void 0,void 0,c=>{a=(0,rl.Xf)(n(c,Qi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function As(n,e){return(0,$i.e)(function td(n,e,t,r,i){return(a,c)=>{let f=t,m=e,v=0;a.subscribe((0,Mi.x)(c,D=>{const S=v++;m=f?n(m,D,S):(f=!0,D),r&&c.next(m)},i&&(()=>{f&&c.next(m),c.complete()})))}}(n,e,arguments.length>=2,!0))}function ho(n){return n<=0?()=>co.E:(0,$i.e)((e,t)=>{let r=[];e.subscribe((0,Mi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vl(n){return(0,$i.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const wn="primary",Ta=Symbol("RouteTitle");class jp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hc(n){return new jp(n)}function c0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ws(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!ol(n[i],e[i]))return!1;return!0}function ol(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function zr(n){return n.length>0?n[n.length-1]:null}function Co(n){return function Qu(n){return!!n&&(n instanceof Li.y||(0,Bi.m)(n.lift)&&(0,Bi.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,Un.D)(Promise.resolve(n)):(0,Zt.of)(n)}const Ul={exact:function rd(n,e,t){if(!G(n.segments,e.segments)||!sd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!rd(n.children[r],e.children[r],t))return!1;return!0},subset:Sa},qs={exact:function Ys(n,e){return Ws(n,e)},subset:function id(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ol(n[t],e[t]))},ignored:()=>!0};function ys(n,e,t){return Ul[t.paths](n.root,e.root,t.matrixParams)&&qs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Sa(n,e,t){return kh(n,e,e.segments,t)}function kh(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!G(i,t)||e.hasChildren()||!sd(i,t,r))}if(n.segments.length===t.length){if(!G(n.segments,t)||!sd(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Sa(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(G(n.segments,i)&&sd(n.segments,i,r)&&n.children[wn])&&kh(n.children[wn],e,a,r)}}function sd(n,e,t){return e.every((r,i)=>qs[t](n[i].parameters,r.parameters))}class jl{constructor(e=new w([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hc(this.queryParams)),this._queryParamMap}toString(){return Ct.serialize(this)}}class w{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _t(this)}}class T{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hc(this.parameters)),this._parameterMap}toString(){return al(this)}}function G(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new Ze},providedIn:"root"}),n})();class Ze{parse(e){const t=new u0(e);return new jl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ut(e.root,!0)}`,r=function na(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gn(t)}=${gn(i)}`).join("&"):`${gn(t)}=${gn(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function xi(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ct=new Ze;function _t(n){return n.segments.map(e=>al(e)).join("/")}function Ut(n,e){if(!n.hasChildren())return _t(n);if(e){const t=n.children[wn]?Ut(n.children[wn],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==wn&&r.push(`${i}:${Ut(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function he(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===wn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==wn&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===wn?[Ut(n.children[wn],!1)]:[`${i}:${Ut(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[wn]?`${_t(n)}/${t[0]}`:`${_t(n)}/(${t.join("//")})`}}function mn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gn(n){return mn(n).replace(/%3B/gi,";")}function Ar(n){return mn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Aa(n){return decodeURIComponent(n)}function Do(n){return Aa(n.replace(/\+/g,"%20"))}function al(n){return`${Ar(n.path)}${function Ui(n){return Object.keys(n).map(e=>`;${Ar(e)}=${Ar(n[e])}`).join("")}(n.parameters)}`}const Hl=/^[^\/()?;#]+/;function od(n){const e=n.match(Hl);return e?e[0]:""}const Hp=/^[^\/()?;=#]+/,Gm=/^[^=?&#]+/,Gl=/^[^&#]+/;class u0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new w([],{}):new w([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[wn]=new w(e,t)),r}parseSegment(){const e=od(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new T(Aa(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Fh(n){const e=n.match(Hp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=od(this.remaining);i&&(r=i,this.capture(r))}e[Aa(t)]=Aa(r)}parseQueryParam(e){const t=function Lh(n){const e=n.match(Gm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Gc(n){const e=n.match(Gl);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Do(t),a=Do(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=od(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=wn);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[wn]:new w([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function d0(n){return n.segments.length>0?new w([],{[wn]:n}):n}function Gp(n){const e={};for(const r of Object.keys(n.children)){const a=Gp(n.children[r]);if(r===wn&&0===a.segments.length&&a.hasChildren())for(const[c,f]of Object.entries(a.children))e[c]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function h0(n){if(1===n.numberOfChildren&&n.children[wn]){const e=n.children[wn];return new w(n.segments.concat(e.segments),e.children)}return n}(new w(n.segments,e))}function zc(n){return n instanceof jl}function Wm(n){let e;const i=d0(function t(a){const c={};for(const m of a.children){const v=t(m);c[m.outlet]=v}const f=new w(a.url,c);return a===n&&(e=f),f}(n.root));return e??i}function f0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return y(i,i,i,t,r);const a=function B(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new x(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([m,v])=>{f[m]="string"==typeof v?v.split("/"):v}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new x(t,e,r)}(e);if(a.toRoot())return y(i,i,new w([],{}),t,r);const c=function We(n,e,t){if(n.isAbsolute)return new be(e,!0,0);if(!t)return new be(e,!1,NaN);if(null===t.parent)return new be(t,!0,0);const r=E(n.commands[0])?0:1;return function gt(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new be(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=c.processChildren?Nn(c.segmentGroup,c.index,a.commands):Jt(c.segmentGroup,c.index,a.commands);return y(i,c.segmentGroup,f,t,r)}function E(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function g(n){return"object"==typeof n&&null!=n&&n.outlets}function y(n,e,t,r,i){let c,a={};r&&Object.entries(r).forEach(([m,v])=>{a[m]=Array.isArray(v)?v.map(D=>`${D}`):`${v}`}),c=n===e?t:b(n,e,t);const f=d0(Gp(c));return new jl(f,a,i)}function b(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:b(a,e,t)}),new w(n.segments,r)}class x{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&E(r[0]))throw new u.vHH(4003,!1);const i=r.find(g);if(i&&i!==zr(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class be{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Jt(n,e,t){if(n||(n=new w([],{})),0===n.segments.length&&n.hasChildren())return Nn(n,e,t);const r=function Ji(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(g(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Wp(m,v,c))return a;r+=2}else{if(!Wp(m,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new w(n.segments.slice(0,r.pathIndex),{});return a.children[wn]=new w(n.segments.slice(r.pathIndex),n.children),Nn(a,0,i)}return r.match&&0===i.length?new w(n.segments,{}):r.match&&!n.hasChildren()?Ma(n,e,t):r.match?Nn(n,0,i):Ma(n,e,t)}function Nn(n,e,t){if(0===t.length)return new w(n.segments,{});{const r=function Rt(n){return g(n[0])?n[0].outlets:{[wn]:n}}(t),i={};if(!r[wn]&&n.children[wn]&&1===n.numberOfChildren&&0===n.children[wn].segments.length){const a=Nn(n.children[wn],e,t);return new w(n.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[a]=Jt(n.children[a],e,c))}),Object.entries(n.children).forEach(([a,c])=>{void 0===r[a]&&(i[a]=c)}),new w(n.segments,i)}}function Ma(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(g(a)){const m=zp(a.outlets);return new w(r,m)}if(0===i&&E(t[0])){r.push(new T(n.segments[e].path,qm(t[0]))),i++;continue}const c=g(a)?a.outlets[wn]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&E(f)?(r.push(new T(c,qm(f))),i+=2):(r.push(new T(c,{})),i++)}return new w(r,{})}function zp(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Ma(new w([],{}),0,r))}),e}function qm(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Wp(n,e,t){return n==t.path&&Ws(e,t.parameters)}const ad="imperative";class To{constructor(e,t){this.id=e,this.url=t}}class xa extends To{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ra extends To{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wc extends To{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ll extends To{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class ld extends To{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qc extends To{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bh extends To{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ym extends To{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Km extends To{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zm extends To{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cl{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yA{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _A{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vA{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tb{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nb{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class EA{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Yc,this.attachRef=null}}let Yc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new EA,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=g0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=g0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ms(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ms(e,this._root).map(t=>t.value)}}function g0(n,e){if(n===e.value)return e;for(const t of e.children){const r=g0(n,t);if(r)return r}return null}function Ms(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ms(n,t);if(r.length)return r.unshift(e),r}return[]}class Ra{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function cd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Xm extends rb{constructor(e,t){super(e),this.snapshot=t,Qm(this,e)}toString(){return this.snapshot.toString()}}function _s(n,e){const t=function qp(n,e){const c=new Yp([],{},{},"",{},wn,e,null,{});return new ib("",new Ra(c,[]))}(0,e),r=new Vi.X([new T("",{})]),i=new Vi.X({}),a=new Vi.X({}),c=new Vi.X({}),f=new Vi.X(""),m=new ul(r,i,c,f,a,wn,e,t.root);return m.snapshot=t.root,new Xm(new Ra(m,[]),t)}class ul{constructor(e,t,r,i,a,c,f,m){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=f,this._futureSnapshot=m,this.title=this.dataSubject?.pipe((0,dn.U)(v=>v[Ta]))??(0,Zt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dn.U)(e=>Hc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dn.U)(e=>Hc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function m0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function wA(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Yp{get title(){return this.data?.[Ta]}constructor(e,t,r,i,a,c,f,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=m,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ib extends rb{constructor(e,t){super(t),this.url=e,Qm(this,t)}toString(){return sb(this._root)}}function Qm(n,e){e.value._routerState=n,e.children.forEach(t=>Qm(n,t))}function sb(n){const e=n.children.length>0?` { ${n.children.map(sb).join(", ")} } `:"";return`${n.value}${e}`}function Jm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ws(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ws(e.params,t.params)||n.paramsSubject.next(t.params),function $l(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ws(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ws(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function y0(n,e){const t=Ws(n.params,e.params)&&function M(n,e){return G(n,e)&&n.every((t,r)=>Ws(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||y0(n.parent,e.parent))}let _0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=wn,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(Yc),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(Vh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new v0(t,f,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),n})();class v0{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ul?this.route:e===Yc?this.childContexts:this.parent.get(e,t)}}const Vh=new u.OlP("");let ob=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Jo([r.queryParams,r.params,r.data]).pipe((0,Sr.w)(([a,c,f],m)=>(f={...a,...c,...f},0===m?(0,Zt.of)(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,u.qFp)(r.component);if(c)for(const{templateName:f}of c.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Zp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function IA(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zp(n,r,i);return Zp(n,r)})}(n,e,t);return new Ra(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Zp(n,f)),c}}const r=function ab(n){return new ul(new Vi.X(n.url),new Vi.X(n.params),new Vi.X(n.queryParams),new Vi.X(n.fragment),new Vi.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Zp(n,a));return new Ra(r,i)}}const ey="ngNavigationCancelingError";function E0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=zc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ud(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ud(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ey]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Xp(n){return w0(n)&&zc(n.url)}function w0(n){return n&&n[ey]}let ty=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[_0],encapsulation:2}),n})();function ry(n){const e=n.children&&n.children.map(ry),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==wn&&(t.component=ty),t}function So(n){return n.outlet||wn}function Qp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class dd{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Jm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=cd(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=cd(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=cd(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=cd(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new p0(a.value.snapshot))}),e.children.length&&this.forwardEvent(new vA(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Jm(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Jm(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=Qp(i.snapshot);c.attachRef=null,c.route=i,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class b0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Jp{constructor(e,t){this.component=e,this.route=t}}function DA(n,e,t){const r=n._root;return eg(r,e?e._root:null,t,[r.value])}function zl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function eg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=cd(e);return n.children.forEach(c=>{(function db(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const m=function hb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!G(n.url,e.url);case"pathParamsOrQueryParamsChange":return!G(n.url,e.url)||!Ws(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!y0(n,e)||!Ws(n.queryParams,e.queryParams);default:return!y0(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new b0(r)):(a.data=c.data,a._resolvedData=c._resolvedData),eg(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Jp(f.outlet.component,c))}else c&&$h(e,f,i),i.canActivateChecks.push(new b0(r)),eg(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,f])=>$h(f,t.getContext(c),i)),i}function $h(n,e,t){const r=cd(n),i=n.value;Object.entries(r).forEach(([a,c])=>{$h(c,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new Jp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function hd(n){return"function"==typeof n}function Uh(n){return n instanceof ea||"EmptyError"===n?.name}const oy=Symbol("INITIAL_VALUE");function fd(){return(0,Sr.w)(n=>Jo(n.map(e=>e.pipe(Io(1),bo(oy)))).pipe((0,dn.U)(e=>{for(const t of e)if(!0!==t){if(t===oy)return oy;if(!1===t||t instanceof jl)return t}return!0}),ms(e=>e!==oy),Io(1)))}function yb(n){return(0,il.z)((0,Or.b)(e=>{if(zc(e))throw E0(0,e)}),(0,dn.U)(e=>!0===e))}class ly{constructor(e){this.segmentGroup=e||null}}class cy{constructor(e){this.urlTree=e}}function Hh(n){return Ca(new ly(n))}function Gh(n){return Ca(new cy(n))}class _b{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new u.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Zt.of)(r);if(i.numberOfChildren>1||!i.children[wn])return Ca(new u.vHH(4e3,!1));i=i.children[wn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new jl(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([f,m])=>{c[f]=this.createSegmentGroup(e,m,r,i)}),new w(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const dy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vb(n,e,t,r,i){const a=hy(n,e,t);return a.matched?(r=function ny(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function RO(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,Zt.of)(!0);const a=i.map(c=>{const f=zl(c,n);return Co(function sy(n){return n&&hd(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,Zt.of)(a).pipe(fd(),yb())}(r,e,t).pipe((0,dn.U)(c=>!0===c?a:{...dy}))):(0,Zt.of)(a)}function hy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...dy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||c0)(t,n,e);if(!i)return{...dy};const a={};Object.entries(i.posParams??{}).forEach(([f,m])=>{a[f]=m.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Eb(n,e,t,r){return t.length>0&&function OA(n,e,t){return t.some(r=>Na(n,e,r)&&So(r)!==wn)}(n,t,r)?{segmentGroup:new w(e,NA(r,new w(t,n.children))),slicedSegments:[]}:0===t.length&&function PA(n,e,t){return t.some(r=>Na(n,e,r))}(n,t,r)?{segmentGroup:new w(n.segments,RA(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new w(n.segments,n.children),slicedSegments:t}}function RA(n,e,t,r,i){const a={};for(const c of r)if(Na(n,t,c)&&!i[So(c)]){const f=new w([],{});a[So(c)]=f}return{...i,...a}}function NA(n,e){const t={};t[wn]=e;for(const r of n)if(""===r.path&&So(r)!==wn){const i=new w([],{});t[So(r)]=i}return t}function Na(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class OO{constructor(e,t,r,i,a,c,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new _b(this.urlSerializer,this.urlTree)}noMatchError(e){return new u.vHH(4002,!1)}recognize(){const e=Eb(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,wn).pipe(Qi(t=>{if(t instanceof cy)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof ly?this.noMatchError(t):t}),(0,dn.U)(t=>{const r=new Yp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wn,this.rootComponentType,null,{}),i=new Ra(r,t),a=new ib("",i),c=function zm(n,e,t=null,r=null){return f0(Wm(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(a._root),{state:a,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,wn).pipe(Qi(r=>{throw r instanceof ly?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=m0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Un.D)(i).pipe(Ss(a=>{const c=r.children[a],f=function CA(n,e){const t=n.filter(r=>So(r)===e);return t.push(...n.filter(r=>So(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,c,a)}),As((a,c)=>(a.push(...c),a)),sl(null),function nd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ms((i,a)=>n(i,a,r)):Ts.y,ho(1),t?sl(e):Ph(()=>new ea))}(),(0,ti.z)(a=>{if(null===a)return Hh(r);const c=FA(a);return function PO(n){n.sort((e,t)=>e.value.outlet===wn?-1:t.value.outlet===wn?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,Zt.of)(c)}))}processSegment(e,t,r,i,a,c){return(0,Un.D)(t).pipe(Ss(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,c).pipe(Qi(m=>{if(m instanceof ly)return(0,Zt.of)(null);throw m}))),uo(f=>!!f),Qi(f=>{if(Uh(f))return function kA(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,Zt.of)([]):Hh(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,c,f){return function ng(n,e,t,r){return!!(So(n)===r||r!==wn&&Na(e,t,n))&&("**"===n.path||hy(e,n,t).matched)}(r,i,a,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,c,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,c):Hh(i):Hh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Gh(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,ti.z)(c=>{const f=new w(c,{});return this.processSegment(e,t,f,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=hy(t,i,a);if(!f)return Hh(t);const S=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?Gh(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,ti.z)(F=>this.processSegment(e,r,t,F.concat(v),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,c){let f;if("**"===r.path){const m=i.length>0?zr(i).parameters:{},v=new Yp(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wb(r),So(r),r.component??r._loadedComponent??null,r,Ib(r));f=(0,Zt.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=vb(t,r,i,e).pipe((0,dn.U)(({matched:m,consumedSegments:v,remainingSegments:D,parameters:S})=>m?{snapshot:new Yp(v,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wb(r),So(r),r.component??r._loadedComponent??null,r,Ib(r)),consumedSegments:v,remainingSegments:D}:null));return f.pipe((0,Sr.w)(m=>null===m?Hh(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Sr.w)(({routes:v})=>{const D=r._loadedInjector??e,{snapshot:S,consumedSegments:F,remainingSegments:Q}=m,{segmentGroup:me,slicedSegments:qe}=Eb(t,F,Q,v);if(0===qe.length&&me.hasChildren())return this.processChildren(D,v,me).pipe((0,dn.U)(Mt=>null===Mt?null:[new Ra(S,Mt)]));if(0===v.length&&0===qe.length)return(0,Zt.of)([new Ra(S,[])]);const et=So(r)===a;return this.processSegment(D,v,me,qe,et?wn:a,!0).pipe((0,dn.U)(Mt=>[new Ra(S,Mt)]))}))))}getChildConfig(e,t,r){return t.children?(0,Zt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Zt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function xA(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,Zt.of)(!0);const a=i.map(c=>{const f=zl(c,n);return Co(function iy(n){return n&&hd(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,Zt.of)(a).pipe(fd(),yb())}(e,t,r).pipe((0,ti.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Or.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function S0(n){return Ca(ud(!1,3))}())):(0,Zt.of)({routes:[],injector:e})}}function kO(n){const e=n.value.routeConfig;return e&&""===e.path}function FA(n){const e=[],t=new Set;for(const r of n){if(!kO(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=FA(r.children);e.push(new Ra(r.value,i))}return e.filter(r=>!t.has(r))}function wb(n){return n.data||{}}function Ib(n){return n.resolve||{}}function M0(n){return"string"==typeof n.title||null===n.title}function fy(n){return(0,Sr.w)(e=>{const t=n(e);return t?(0,Un.D)(t).pipe((0,dn.U)(()=>e)):(0,Zt.of)(e)})}const ig=new u.OlP("ROUTES");let Cb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Zt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Co(t.loadComponent()).pipe((0,dn.U)(py),(0,Or.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Vl(()=>{this.componentLoaders.delete(t)})),i=new ta(r,()=>new Xi.x).pipe(Da());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Zt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,dn.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v;return Array.isArray(f)?v=f:(m=f.create(t).injector,v=m.get(ig,[],u.XFs.Self|u.XFs.Optional).flat()),{routes:v.map(ry),injector:m}}),Vl(()=>{this.childrenLoaders.delete(r)})),c=new ta(a,()=>new Xi.x).pipe(Da());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Co(t()).pipe((0,dn.U)(py),(0,ti.z)(r=>r instanceof u.YKP||Array.isArray(r)?(0,Zt.of)(r):(0,Un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function py(n){return function FO(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let zh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Xi.x,this.configLoader=(0,u.f3M)(Cb),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(Te),this.rootContexts=(0,u.f3M)(Yc),this.inputBindingEnabled=null!==(0,u.f3M)(Vh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Zt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new yA(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new cl(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Vi.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ad,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ms(r=>0!==r.id),(0,dn.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,Sr.w)(r=>{let i=!1,a=!1;return(0,Zt.of)(r).pipe((0,Or.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Sr.w)(c=>{const f=t.browserUrlTree.toString(),m=!t.navigated||c.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!m&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new ll(c.id,t.serializeUrl(r.rawUrl),D,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),co.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return $A(c.source)&&(t.browserUrlTree=c.extractedUrl),(0,Zt.of)(c).pipe((0,Sr.w)(D=>{const S=this.transitions?.getValue();return this.events.next(new xa(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),S!==this.transitions?.getValue()?co.E:Promise.resolve(D)}),function BA(n,e,t,r,i,a){return(0,ti.z)(c=>function NO(n,e,t,r,i,a,c="emptyOnly"){return new OO(n,e,t,r,i,c,a).recognize()}(n,e,t,r,c.extractedUrl,i,a).pipe((0,dn.U)(({state:f,tree:m})=>({...c,targetSnapshot:f,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Or.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,r.urlAfterRedirects=D.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!D.extras.skipLocationChange){const F=t.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);t.setBrowserUrl(F,D)}t.browserUrlTree=D.urlAfterRedirects}const S=new qc(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:D,extractedUrl:S,source:F,restoredState:Q,extras:me}=c,qe=new xa(D,this.urlSerializer.serialize(S),F,Q);this.events.next(qe);const et=_s(0,this.rootComponentType).snapshot;return r={...c,targetSnapshot:et,urlAfterRedirects:S,extras:{...me,skipLocationChange:!1,replaceUrl:!1}},(0,Zt.of)(r)}{const D="";return this.events.next(new ll(c.id,t.serializeUrl(r.extractedUrl),D,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),co.E}}),(0,Or.b)(c=>{const f=new Bh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),(0,dn.U)(c=>r={...c,guards:DA(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function SA(n,e){return(0,ti.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?(0,Zt.of)({...t,guardsResult:!0}):function AA(n,e,t,r){return(0,Un.D)(n).pipe((0,ti.z)(i=>function jh(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,Zt.of)(!0);const c=a.map(f=>{const m=Qp(e)??i,v=zl(f,m);return Co(function C0(n){return n&&hd(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(uo())});return(0,Zt.of)(c).pipe(fd())}(i.component,i.route,t,e,r)),uo(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ti.z)(f=>f&&function fb(n){return"boolean"==typeof n}(f)?function MA(n,e,t,r){return(0,Un.D)(e).pipe(Ss(i=>zs(function mb(n,e){return null!==n&&e&&e(new _A(n)),(0,Zt.of)(!0)}(i.route.parent,r),function gb(n,e){return null!==n&&e&&e(new tb(n)),(0,Zt.of)(!0)}(i.route,r),function T0(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function xO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Up(()=>{const f=c.guards.map(m=>{const v=Qp(c.node)??t,D=zl(m,v);return Co(function pb(n){return n&&hd(n.canActivateChild)}(D)?D.canActivateChild(r,n):v.runInContext(()=>D(r,n))).pipe(uo())});return(0,Zt.of)(f).pipe(fd())}));return(0,Zt.of)(a).pipe(fd())}(n,i.path,t),function ay(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Zt.of)(!0);const i=r.map(a=>Up(()=>{const c=Qp(e)??t,f=zl(a,c);return Co(function tg(n){return n&&hd(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(uo())}));return(0,Zt.of)(i).pipe(fd())}(n,i.route,t))),uo(i=>!0!==i,!0))}(r,a,n,e):(0,Zt.of)(f)),(0,dn.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,c=>this.events.next(c)),(0,Or.b)(c=>{if(r.guardsResult=c.guardsResult,zc(c.guardsResult))throw E0(0,c.guardsResult);const f=new Ym(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(f)}),ms(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),fy(c=>{if(c.guards.canActivateChecks.length)return(0,Zt.of)(c).pipe((0,Or.b)(f=>{const m=new Km(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),(0,Sr.w)(f=>{let m=!1;return(0,Zt.of)(f).pipe(function VA(n,e){return(0,ti.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Zt.of)(t);let a=0;return(0,Un.D)(i).pipe(Ss(c=>function A0(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!M0(i)&&(a[Ta]=i.title),function Wl(n,e,t,r){const i=function rg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,Zt.of)({});const a={};return(0,Un.D)(i).pipe((0,ti.z)(c=>function bb(n,e,t,r){const i=Qp(e)??r,a=zl(n,i);return Co(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(uo(),(0,Or.b)(f=>{a[c]=f}))),ho(1),function jc(n){return(0,dn.U)(()=>n)}(a),Qi(c=>Uh(c)?co.E:Ca(c)))}(a,n,e,r).pipe((0,dn.U)(c=>(n._resolvedData=c,n.data=m0(n,t).resolve,i&&M0(i)&&(n.data[Ta]=i.title),null)))}(c.route,r,n,e)),(0,Or.b)(()=>a++),ho(1),(0,ti.z)(c=>a===i.length?(0,Zt.of)(t):co.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Or.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,Or.b)(f=>{const m=new Zm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),fy(c=>{const f=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,Or.b)(D=>{m.component=D}),(0,dn.U)(()=>{})));for(const D of m.children)v.push(...f(D));return v};return Jo(f(c.targetSnapshot.root)).pipe(sl(),Io(1))}),fy(()=>this.afterPreactivation()),(0,dn.U)(c=>{const f=function Kp(n,e,t){const r=Zp(n,e._root,t?t._root:void 0);return new Xm(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:f}}),(0,Or.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t,r)=>(0,dn.U)(i=>(new dd(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Io(1),(0,Or.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ra(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),Vl(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Qi(c=>{if(a=!0,w0(c)){Xp(c)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new Wc(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(f),Xp(c)){const m=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||$A(r.source)};t.scheduleNavigation(m,ad,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new ld(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(c))}catch(m){r.reject(m)}}return co.E}))}))}cancelNavigationTransition(t,r,i){const a=new Wc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $A(n){return n!==ad}let UA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===wn);return r}getResolvedTitleForRoute(t){return t.data[Ta]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Db)},providedIn:"root"}),n})(),Db=(()=>{class n extends UA{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(GA)},providedIn:"root"}),n})();class HA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let GA=(()=>{class n extends HA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gy=new u.OlP("",{providedIn:"root",factory:()=>({})});let Tb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(my)},providedIn:"root"}),n})(),my=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ao=(()=>((Ao=Ao||{})[Ao.COMPLETE=0]="COMPLETE",Ao[Ao.FAILED=1]="FAILED",Ao[Ao.REDIRECTING=2]="REDIRECTING",Ao))();function yy(n,e){n.events.pipe(ms(t=>t instanceof ra||t instanceof Wc||t instanceof ld||t instanceof ll),(0,dn.U)(t=>t instanceof ra||t instanceof ll?Ao.COMPLETE:t instanceof Wc&&(0===t.code||1===t.code)?Ao.REDIRECTING:Ao.FAILED),ms(t=>t!==Ao.REDIRECTING),Io(1)).subscribe(()=>{e()})}function zA(n){throw n}function Ri(n,e,t){return e.parse("/")}const WA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ni=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(gy,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||zA,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ri,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(Tb),this.routeReuseStrategy=(0,u.f3M)(jA),this.titleStrategy=(0,u.f3M)(UA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(ig,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(zh),this.urlSerializer=(0,u.f3M)(Te),this.location=(0,u.f3M)(pe),this.componentInputBindingEnabled=!!(0,u.f3M)(Vh,{optional:!0}),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new jl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=_s(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ad,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ry),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:c;let S,D=null;switch(f){case"merge":D={...this.currentUrlTree.queryParams,...a};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}null!==D&&(D=this.removeEmptyProps(D));try{S=Wm(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return f0(S,t,D,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=zc(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,ad,null,r)}navigate(t,r={skipLocationChange:!1}){return function Sb(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new u.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...WA}:!1===r?{...qA}:r,zc(t))return ys(this.currentUrlTree,t,i);const a=this.parseUrl(t);return ys(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,m,v;c?(f=c.resolve,m=c.reject,v=c.promise):v=new Promise((S,F)=>{f=S,m=F});const D=this.pendingTasks.add();return yy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kc=(()=>{class n{constructor(t,r,i,a,c,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new Xi.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const m=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof ra&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ni),u.Y36(ul),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(ie))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&u.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&u.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]}),n})();class Ab{}let LO=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(ms(t=>t instanceof ra),Ss(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,u.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,f=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Un.D)(i).pipe((0,wo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Zt.of)(null);const a=i.pipe((0,ti.z)(c=>null===c?(0,Zt.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Un.D)([a,c]).pipe((0,wo.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ni),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(Ab),u.LFG(Cb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pd=new u.OlP("");let or=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ra?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ll&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function dl(n,e){return{\u0275kind:n,\u0275providers:e}}function R0(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(Ni),i=n.get(vy);1===n.get(xb)&&r.initialNavigation(),n.get(O0,null,u.XFs.Optional)?.setUpPreloading(),n.get(pd,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const vy=new u.OlP("",{factory:()=>new Xi.x}),xb=new u.OlP("",{providedIn:"root",factory:()=>1}),O0=new u.OlP("");function Nb(n){return dl(0,[{provide:O0,useExisting:LO},{provide:Ab,useExisting:n}])}const wy=new u.OlP("ROUTER_FORROOT_GUARD"),Iy=[pe,{provide:Te,useClass:Ze},Ni,Yc,{provide:ul,useFactory:function x0(n){return n.routerState.root},deps:[Ni]},Cb,[]];function gd(){return new u.PXZ("Router",Ni)}let by=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Iy,[],{provide:ig,multi:!0,useValue:t},{provide:wy,useFactory:Pb,deps:[[Ni,new u.FiY,new u.tp0]]},{provide:gy,useValue:r||{}},r?.useHash?{provide:ie,useClass:Ce}:{provide:ie,useClass:Me},{provide:pd,useFactory:()=>{const n=(0,u.f3M)(ga),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(gy),r=(0,u.f3M)(zh),i=(0,u.f3M)(Te);return t.scrollOffset&&n.setOffset(t.scrollOffset),new or(i,r,n,e,t)}},r?.preloadingStrategy?Nb(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:gd},r?.initialNavigation?qh(r):[],r?.bindToComponentInputs?dl(8,[ob,{provide:Vh,useExisting:ob}]).\u0275providers:[],[{provide:kb,useFactory:R0},{provide:u.tb,multi:!0,useExisting:kb}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ig,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wy,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Pb(n){return"guarded"}function qh(n){return["disabled"===n.initialNavigation?dl(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(Ni);return()=>{e.setUpLocationChangeListener()}}},{provide:xb,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?dl(2,[{provide:xb,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(Ae,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ni),a=e.get(vy);yy(i,()=>{r(!0)}),e.get(zh).afterPreactivation=()=>(r(!0),a.closed?(0,Zt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const kb=new u.OlP("");var HO=R(6878),j=R(9058),Ks=R(534),Oa=R(7879),hl=R(4537),Bb=R(3019),md=R(3093),sM=R(4552);class k0 extends Xi.x{constructor(e=1/0,t=1/0,r=sM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)f=m;f&&r.splice(0,f+1)}}}var Cy=R(3020);function Yh(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Cy.B)({connector:()=>new k0(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Dy(n,e){return(0,Bi.m)(e)?(0,Sr.w)(()=>n,e):(0,Sr.w)(()=>n)}var sg=R(5137),Wn=R(8186),ui=R(6304);R(3182);var tt=R(5861);const Ty=new Map,Sy={activated:!1,tokenObservers:[]},Ay={initialized:!1,enabled:!1};function di(n){return Ty.get(n)||Object.assign({},Sy)}function My(){return Ay}const xy="https://content-firebaseappcheck.googleapis.com/v1",Ry="exchangeDebugToken",Hb={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class lg{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,tt.Z)(function*(){t.stop();try{t.pending=new j.BH,yield function hM(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new j.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vs=new j.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function B0(n){if(!di(n).activated)throw vs.create("use-before-activation",{appName:n.name})}function Xh(n,e){return yd.apply(this,arguments)}function yd(){return(yd=(0,tt.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,a)}catch(S){throw vs.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==c.status)throw vs.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(S){throw vs.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),D=Date.now();return{token:f.token,expireTimeMillis:D+v,issuedAtTimeMillis:D}})).apply(this,arguments)}function Py(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${xy}/projects/${t}/apps/${r}:${Ry}?key=${i}`,body:{debug_token:e}}}const Qh="firebase-app-check-database",ky=1,Jh="firebase-app-check-store";let Fy=null;function Zc(){return(Zc=(0,tt.Z)(function*(n,e){const r=(yield function Wb(){return Fy||(Fy=new Promise((n,e)=>{try{const t=indexedDB.open(Qh,ky);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(vs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Jh,{keyPath:"compositeKey"})}}catch(t){e(vs.create("storage-open",{originalErrorMessage:t?.message}))}}),Fy)}()).transaction(Jh,"readwrite"),a=r.objectStore(Jh).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=m=>{c()},r.onerror=m=>{var v;f(vs.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const ug=new Oa.Yd("@firebase/app-check");function By(n,e){return(0,j.hl)()?function pM(n,e){return function $0(n,e){return Zc.apply(this,arguments)}(function yM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ug.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Vy(){return My().enabled}function ef(){return $y.apply(this,arguments)}function $y(){return($y=(0,tt.Z)(function*(){const n=My();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Xb={error:"UNKNOWN_ERROR"};function Sn(n){return j.US.encodeString(JSON.stringify(n),!1)}function dg(n){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,tt.Z)(function*(n,e=!1){const t=n.app;B0(t);const r=di(t);let a,i=r.token;if(i&&!_d(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(_d(m)?i=m:yield By(t,void 0))}if(!e&&i&&_d(i))return{token:i.token};let f,c=!1;if(Vy()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Xh(Py(t,yield ef()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const m=yield r.exchangeTokenPromise;return yield By(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield di(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?ug.warn(m.message):ug.error(m),a=m}return i?a?f=_d(i)?{token:i.token,internalError:a}:tC(a):(f={token:i.token},r.token=i,yield By(t,i)):f=tC(a),c&&function eC(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f})).apply(this,arguments)}function _M(n){return U0.apply(this,arguments)}function U0(){return(U0=(0,tt.Z)(function*(n){const e=n.app;B0(e);const{provider:t}=di(e);if(Vy()){const r=yield ef(),{token:i}=yield Xh(Py(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function j0(n,e){const t=di(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Qb(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function Jb(n){const{app:e}=n;return new lg((0,tt.Z)(function*(){let r;if(r=di(e).token?yield dg(n,!0):yield dg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Hb.RETRIAL_MIN_WAIT,Hb.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _d(n){return n.expireTimeMillis-Date.now()>0}function tC(n){return{token:Sn(Xb),error:n}}class vM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)j0(this.app,t.next);return Promise.resolve()}}const lC="app-check-internal";!function Mo(){(0,Ks._registerComponent)(new hl.wA("app-check",n=>function XO(n,e){return new vM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lC).initialize()})),(0,Ks._registerComponent)(new hl.wA(lC,n=>function nC(n){return{getToken:e=>dg(n,e),getLimitedUseToken:()=>_M(n),addTokenListener:e=>function jy(n,e,t,r){const{app:i}=n,a=di(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&_d(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Qb(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Qb(n))}(n,"INTERNAL",e),removeTokenListener:e=>j0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ks.registerVersion)("@firebase/app-check","0.8.0")}();class qy{constructor(){return(0,Wn.vb)("app-check")}}typeof window<"u"&&window;var rf=R(7142);const Ky=new u.OlP("angularfire2.auth.use-emulator"),K0=new u.OlP("angularfire2.auth.settings"),Zy=new u.OlP("angularfire2.auth.tenant-id"),Xy=new u.OlP("angularfire2.auth.langugage-code"),sf=new u.OlP("angularfire2.auth.use-device-language"),hg=new u.OlP("angularfire.auth.persistence"),fC=(n,e,t,r,i,a,c,f)=>(0,ui.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),c)for(const[v,D]of Object.entries(c))m.settings[v]=D;return f&&m.setPersistence(f),m},[t,r,i,a,c,f]);let af=(()=>{class n{constructor(t,r,i,a,c,f,m,v,D,S,F,Q){const me=new Xi.x,qe=(0,Zt.of)(void 0).pipe((0,md.Q)(c.outsideAngular),(0,Sr.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,6365)))),(0,dn.U)(()=>(0,ui.on)(t,a,r)),(0,dn.U)(et=>fC(et,a,f,v,D,S,m,F)),Yh({bufferSize:1,refCount:!1}));if($s(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Zt.of)(null);else{qe.pipe(uo()).subscribe();const Mt=qe.pipe((0,Sr.w)(Gt=>Gt.getRedirectResult().then(In=>In,()=>null)),Wn.iC,Yh({bufferSize:1,refCount:!1})),jt=qe.pipe((0,Sr.w)(Gt=>new Li.y(In=>({unsubscribe:a.runOutsideAngular(()=>Gt.onAuthStateChanged(Ln=>In.next(Ln),Ln=>In.error(Ln),()=>In.complete()))})))),Nt=qe.pipe((0,Sr.w)(Gt=>new Li.y(In=>({unsubscribe:a.runOutsideAngular(()=>Gt.onIdTokenChanged(Ln=>In.next(Ln),Ln=>In.error(Ln),()=>In.complete()))}))));this.authState=Mt.pipe(Dy(jt),(0,sg.R)(c.outsideAngular),(0,md.Q)(c.insideAngular)),this.user=Mt.pipe(Dy(Nt),(0,sg.R)(c.outsideAngular),(0,md.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Sr.w)(Gt=>Gt?(0,Un.D)(Gt.getIdToken()):(0,Zt.of)(null))),this.idTokenResult=this.user.pipe((0,Sr.w)(Gt=>Gt?(0,Un.D)(Gt.getIdTokenResult()):(0,Zt.of)(null))),this.credential=(0,Bb.T)(Mt,me,this.authState.pipe(ms(Gt=>!Gt))).pipe((0,dn.U)(Gt=>Gt?.user?Gt:null),(0,sg.R)(c.outsideAngular),(0,md.Q)(c.insideAngular))}return(0,ui.pX)(this,qe,a,{spy:{apply:(et,Mt,jt)=>{(et.startsWith("signIn")||et.startsWith("createUser"))&&jt.then(Nt=>me.next(Nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ui.Dh),u.LFG(ui.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Wn.HU),u.LFG(Ky,8),u.LFG(K0,8),u.LFG(Zy,8),u.LFG(Xy,8),u.LFG(sf,8),u.LFG(hg,8),u.LFG(qy,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pC=(()=>{class n{constructor(){rf.Z.registerVersion("angularfire",Wn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[af]}),n})();var Qy=R(6321);function Jy(){return(0,$i.e)((n,e)=>{let t,r=!1;n.subscribe((0,Mi.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var kt,fg=R(3997),Z0=(R(6365),R(3106)),xM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xo={},X0=X0||{},Tn=xM||self;function Q0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function lf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cf="closure_uid_"+(1e9*Math.random()>>>0),pg=0;function e_(n,e,t){return n.call.apply(n.bind,arguments)}function aP(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function xs(n,e,t){return(xs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e_:aP).apply(null,arguments)}function gg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ji(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Jc(){this.s=this.s,this.o=this.o}Jc.prototype.s=!1,Jc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function RM(n){Object.prototype.hasOwnProperty.call(n,cf)&&n[cf]||(n[cf]=++pg)}(this)},Jc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const J0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function t_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uf(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Q0(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function Rs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Rs.prototype.h=function(){this.defaultPrevented=!0};var gC=function(){if(!Tn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tn.addEventListener("test",()=>{},e),Tn.removeEventListener("test",()=>{},e)}catch{}return n}();function df(n){return/^[\s\xa0]*$/.test(n)}function n_(){var n=Tn.navigator;return n&&(n=n.userAgent)?n:""}function pl(n){return-1!=n_().indexOf(n)}function vd(n){return vd[" "](n),n}vd[" "]=function(){};var tE,n,lP=pl("Opera"),hf=pl("Trident")||pl("MSIE"),mC=pl("Edge"),eE=mC||hf,yC=pl("Gecko")&&!(-1!=n_().toLowerCase().indexOf("webkit")&&!pl("Edge"))&&!(pl("Trident")||pl("MSIE"))&&!pl("Edge"),PM=-1!=n_().toLowerCase().indexOf("webkit")&&!pl("Edge");function _C(){var n=Tn.document;return n?n.documentMode:void 0}e:{var r_="",mg=(n=n_(),yC?/rv:([^\);]+)(\)|;)/.exec(n):mC?/Edge\/([\d\.]+)/.exec(n):hf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):PM?/WebKit\/(\S+)/.exec(n):lP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(mg&&(r_=mg?mg[1]:""),hf){var nE=_C();if(null!=nE&&nE>parseFloat(r_)){tE=String(nE);break e}}tE=r_}var kM=Tn.document&&hf&&(_C()||parseInt(tE,10))||void 0;function yg(n,e){if(Rs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yC){e:{try{vd(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:FM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yg.$.h.call(this)}}ji(yg,Rs);var FM={2:"touch",3:"pen",4:"mouse"};yg.prototype.h=function(){yg.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _g="closure_listenable_"+(1e6*Math.random()|0),LM=0;function BM(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++LM,this.fa=this.ia=!1}function vg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function i_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function $M(n){const e={};for(const t in n)e[t]=n[t];return e}const rE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<rE.length;a++)t=rE[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sE(n){this.src=n,this.g={},this.h=0}function pf(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=J0(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(vg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function oE(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}sE.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=oE(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new BM(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var aE="closure_lm_"+(1e6*Math.random()|0),Eg={};function EC(n,e,t,r,i){if(r&&r.once)return Es(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)EC(n,e[a],t,r,i);return null}return t=ru(t),n&&n[_g]?n.O(e,t,lf(r)?!!r.capture:!!r,i):Pa(n,e,t,!1,r,i)}function Pa(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=lf(i)?!!i.capture:!!i,f=tu(n);if(f||(n[aE]=f=new sE(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function wg(){const e=lE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)gC||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Ro(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Es(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Es(n,e[a],t,r,i);return null}return t=ru(t),n&&n[_g]?n.P(e,t,lf(r)?!!r.capture:!!r,i):Pa(n,e,t,!0,r,i)}function eu(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)eu(n,e[a],t,r,i);else r=lf(r)?!!r.capture:!!r,t=ru(t),n&&n[_g]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=oE(a=n.g[e],t,r,i))&&(vg(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=tu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=oE(e,t,r,i)),(t=-1<n?e[n]:null)&&gf(t))}function gf(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[_g])pf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ro(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=tu(e))?(pf(t,n),0==t.h&&(t.src=null,e[aE]=null)):vg(n)}}}function Ro(n){return n in Eg?Eg[n]:Eg[n]="on"+n}function lE(n,e){if(n.fa)n=!0;else{e=new yg(e,this);var t=n.listener,r=n.la||n.src;n.ia&&gf(n),n=t.call(r,e)}return n}function tu(n){return(n=n[aE])instanceof sE?n:null}var nu="__closure_events_fn_"+(1e9*Math.random()>>>0);function ru(n){return"function"==typeof n?n:(n[nu]||(n[nu]=function(e){return n.handleEvent(e)}),n[nu])}function ni(){Jc.call(this),this.i=new sE(this),this.S=this,this.J=null}function hi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Rs(e,n);else if(e instanceof Rs)e.target=e.target||n;else{var i=e;iE(e=new Rs(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=Kl(c,r,!0,e)&&i}if(i=Kl(c=e.g=n,r,!0,e)&&i,i=Kl(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Kl(c=e.g=t[a],r,!1,e)&&i}function Kl(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var f=c.listener,m=c.la||c.src;c.ia&&pf(n.i,c),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}ji(ni,Jc),ni.prototype[_g]=!0,ni.prototype.removeEventListener=function(n,e,t,r){eu(this,n,e,t,r)},ni.prototype.N=function(){if(ni.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)vg(t[r]);delete n.g[e],n.h--}}this.J=null},ni.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ni.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var iu=Tn.JSON.stringify;function yf(){var n=s_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cE=new class mf{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new IC,n=>n.reset());class IC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function CC(n){Tn.setTimeout(()=>{throw n},0)}let _f,vf=!1,s_=new class wC{constructor(){this.h=this.g=null}add(e,t){const r=cE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},uE=()=>{const n=Tn.Promise.resolve(void 0);_f=()=>{n.then(dE)}};var dE=()=>{for(var n;n=yf();){try{n.h.call(n.g)}catch(t){CC(t)}var e=cE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vf=!1};function o_(n,e){ni.call(this),this.h=n||1,this.g=e||Tn,this.j=xs(this.qb,this),this.l=Date.now()}function DC(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function TC(n,e,t){if("function"==typeof n)t&&(n=xs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=xs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tn.setTimeout(n,e||0)}function SC(n){n.g=TC(()=>{n.g=null,n.i&&(n.i=!1,SC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ji(o_,ni),(kt=o_.prototype).ga=!1,kt.T=null,kt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hi(this,"tick"),this.ga&&(DC(this),this.start()))}},kt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kt.N=function(){o_.$.N.call(this),DC(this),delete this.g};class UM extends Jc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:SC(this)}N(){super.N(),this.g&&(Tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function a_(n){Jc.call(this),this.h=n,this.g={}}ji(a_,Jc);var AC=[];function jM(n,e,t,r){Array.isArray(t)||(t&&(AC[0]=t.toString()),t=AC);for(var i=0;i<t.length;i++){var a=EC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function MC(n){i_(n.g,function(e,t){this.g.hasOwnProperty(t)&&gf(e)},n),n.g={}}function l_(){this.g=!0}function gl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function c_(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return iu(t)}catch{return e}}(n,t)+(r?" "+r:"")})}a_.prototype.N=function(){a_.$.N.call(this),MC(this)},a_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},l_.prototype.Ea=function(){this.g=!1},l_.prototype.info=function(){};var su={},Ef=null;function Ig(){return Ef=Ef||new ni}function xC(n){Rs.call(this,su.Ta,n)}function Zl(n){const e=Ig();hi(e,new xC(e))}function RC(n,e){Rs.call(this,su.STAT_EVENT,n),this.stat=e}function Zs(n){const e=Ig();hi(e,new RC(e,n))}function NC(n,e){Rs.call(this,su.Ua,n),this.size=e}function bg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tn.setTimeout(function(){n()},e)}su.Ta="serverreachability",ji(xC,Rs),su.STAT_EVENT="statevent",ji(RC,Rs),su.Ua="timingevent",ji(NC,Rs);var wf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Cg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function If(){}function OC(){}If.prototype.h=null;var u_,Dg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tg(){Rs.call(this,"d")}function pE(){Rs.call(this,"c")}function d_(){}function Sg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new a_(this),this.P=PC,this.V=new o_(n=eE?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gE}function gE(){this.i=null,this.g="",this.h=!1}ji(Tg,Rs),ji(pE,Rs),ji(d_,If),d_.prototype.g=function(){return new XMLHttpRequest},d_.prototype.i=function(){return{}},u_=new d_;var PC=45e3,h_={},f_={};function mE(n,e,t){n.L=1,n.v=bf(Xl(e)),n.s=t,n.S=!0,kC(n,null)}function kC(n,e){n.G=Date.now(),Ag(n),n.A=Xl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),bE(t.i,"t",r),n.C=0,t=n.l.J,n.h=new gE,n.g=Lg(n.l,t?e:null,!n.s),0<n.O&&(n.M=new UM(xs(n.Pa,n,n.g),n.O)),jM(n.U,n.g,"readystatechange",n.nb),e=n.I?$M(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Zl(),function HM(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");c=2<=S.length&&"type"==S[1]?c+(D+"=")+v+"&":c+(D+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function yE(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function p_(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=_E(n,t),i==f_){4==e&&(n.o=4,Zs(14),r=!1),gl(n.j,n.m,null,"[Incomplete Response]");break}if(i==h_){n.o=4,Zs(15),gl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}gl(n.j,n.m,i,null),vE(n,i)}yE(n)&&i!=f_&&i!=h_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Fg(e),e.M=!0,Zs(11))):(gl(n.j,n.m,t,"[Invalid Chunked Response]"),ou(n),wd(n))}function _E(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?f_:(t=Number(e.substring(t,r)),isNaN(t)?h_:(r+=1)+t>e.length?f_:(e=e.slice(r,r+t),n.C=r+t,e))}function Ag(n){n.Y=Date.now()+n.P,Mg(n,n.P)}function Mg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bg(xs(n.lb,n),e)}function Ed(n){n.B&&(Tn.clearTimeout(n.B),n.B=null)}function wd(n){0==n.l.H||n.J||VE(n.l,n)}function ou(n){Ed(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,DC(n.V),MC(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function vE(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||yl(t.i,n)))if(!n.K&&yl(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;C_(t),No(t)}BE(t),Zs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=bg(xs(t.ib,t),6e3));if(1>=Ng(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Dd(t,11)}else if((n.K||t.g==n)&&C_(t),!df(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const D=v[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const S=v[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const F=v[5];null!=F&&"number"==typeof F&&0<F&&(t.L=r=1.5*F,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const me=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(me){var a=r.i;a.g||-1==me.indexOf("spdy")&&-1==me.indexOf("quic")&&-1==me.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(TE(a,a.h),a.h=null))}if(r.F){const qe=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;qe&&(r.Da=qe,Vr(r.I,r.F,qe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=UE(r,r.J?r.pa:null,r.Y),c.K){HC(r.i,c);var f=c,m=r.L;m&&f.setTimeout(m),f.B&&(Ed(f),Ag(f)),r.g=c}else QC(r);0<t.j.length&&po(t)}else"stop"!=v[0]&&"close"!=v[0]||Dd(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Dd(t,7):FE(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}Zl()}catch{}}function g_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Q0(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function WM(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Q0(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function zM(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Q0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(kt=Sg.prototype).setTimeout=function(n){this.P=n},kt.nb=function(n){n=n.target;const e=this.M;e&&3==_l(n)?e.l():this.Pa(n)},kt.Pa=function(n){try{if(n==this.g)e:{const D=_l(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||eE||this.g&&(this.h.h||this.g.ja()||PE(this.g)))){this.J||4!=D||7==e||Zl(),Ed(this);var t=this.g.da();this.ca=t;t:if(yE(this)){var r=PE(this.g);n="";var i=r.length,a=4==_l(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ou(this),wd(this);var c="";break t}this.h.i=new Tn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function hE(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!df(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Zs(12),ou(this),wd(this);break e}gl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vE(this,t)}this.S?(p_(this,D,c),eE&&this.i&&3==D&&(jM(this.U,this.V,"tick",this.mb),this.V.start())):(gl(this.j,this.m,c,null),vE(this,c)),4==D&&ou(this),this.i&&!this.J&&(4==D?VE(this.l,this):(this.i=!1,Ag(this)))}else(function cP(n){const e={};n=(n.g&&2<=_l(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(df(n[r]))continue;var t=bC(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function VM(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Zs(12)):(this.o=0,Zs(13)),ou(this),wd(this)}}}catch{}},kt.mb=function(){if(this.g){var n=_l(this.g),e=this.g.ja();this.C<e.length&&(Ed(this),p_(this,n,e),this.i&&4!=n&&Ag(this))}},kt.cancel=function(){this.J=!0,ou(this)},kt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function fE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Zl(),Zs(17)),ou(this),this.o=2,wd(this)):Mg(this,this.Y-n)};var m_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function au(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof au){this.h=n.h,y_(this,n.j),this.s=n.s,this.g=n.g,xg(this,n.m),this.l=n.l;var e=n.i,t=new Df;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),__(this,t),this.o=n.o}else n&&(e=String(n).match(m_))?(this.h=!1,y_(this,e[1]||"",!0),this.s=Cf(e[2]||""),this.g=Cf(e[3]||"",!0),xg(this,e[4]),this.l=Cf(e[5]||"",!0),__(this,e[6]||"",!0),this.o=Cf(e[7]||"")):(this.h=!1,this.i=new Df(null,this.h))}function Xl(n){return new au(n)}function y_(n,e,t){n.j=t?Cf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function xg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function __(n,e,t){e instanceof Df?(n.i=e,function $C(n,e){e&&!n.j&&(ml(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(v_(this,r),bE(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Rg(e,qM)),n.i=new Df(e,n.h))}function Vr(n,e,t){n.i.set(e,t)}function bf(n){return Vr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Cf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,FC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function FC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}au.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rg(e,wE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rg(e,wE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rg(t,"/"==t.charAt(0)?BC:LC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rg(t,VC)),n.join("")};var wE=/[#\/\?@]/g,LC=/[#\?:]/g,BC=/[#\?]/g,qM=/[#\?@]/g,VC=/#/g;function Df(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ml(n){n.g||(n.g=new Map,n.h=0,n.i&&function EE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function v_(n,e){ml(n),e=Id(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function IE(n,e){return ml(n),e=Id(n,e),n.g.has(e)}function bE(n,e,t){v_(n,e),0<t.length&&(n.i=null,n.g.set(Id(n,e),t_(t)),n.h+=t.length)}function Id(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function CE(n){this.l=n||jC,n=Tn.PerformanceNavigationTiming?0<(n=Tn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tn.g&&Tn.g.Ka&&Tn.g.Ka()&&Tn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(kt=Df.prototype).add=function(n,e){ml(this),this.i=null,n=Id(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},kt.forEach=function(n,e){ml(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},kt.ta=function(){ml(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},kt.Z=function(n){ml(this);let e=[];if("string"==typeof n)IE(this,n)&&(e=e.concat(this.g.get(Id(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},kt.set=function(n,e){return ml(this),this.i=null,IE(this,n=Id(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},kt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var jC=10;function DE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Ng(n){return n.h?1:n.g?n.g.size:0}function yl(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function TE(n,e){n.g?n.g.add(e):n.h=e}function HC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function E_(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return t_(n.i)}CE.prototype.cancel=function(){if(this.i=E_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var bd=class{stringify(n){return Tn.JSON.stringify(n,void 0)}parse(n){return Tn.JSON.parse(n,void 0)}};function SE(){this.g=new bd}function YM(n,e,t){const r=t||"";try{g_(n,function(i,a){let c=i;lf(i)&&(c=iu(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ME(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function w_(n){this.l=n.fc||null,this.j=n.ob||!1}function I_(n,e){ni.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=xE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ji(w_,If),w_.prototype.g=function(){return new I_(this.l,this.j)},w_.prototype.i=function(n){return function(){return n}}({}),ji(I_,ni);var xE=0;function RE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Og(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ri(n)}function ri(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(kt=I_.prototype).open=function(n,e){if(this.readyState!=xE)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ri(this)},kt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Tn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Og(this)),this.readyState=xE},kt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Tn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},kt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Og(this):ri(this),3==this.readyState&&RE(this)}},kt.Za=function(n){this.g&&(this.response=this.responseText=n,Og(this))},kt.Ya=function(n){this.g&&(this.response=n,Og(this))},kt.ka=function(){this.g&&Og(this)},kt.setRequestHeader=function(n,e){this.v.append(n,e)},kt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},kt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(I_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GC=Tn.JSON.parse;function fi(n){ni.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zC,this.L=this.M=!1}ji(fi,ni);var zC="",WC=/^https?$/i,KM=["POST","PUT"];function NE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cd(n),b_(n)}function Cd(n){n.F||(n.F=!0,hi(n,"complete"),hi(n,"error"))}function YC(n){if(n.h&&typeof X0<"u"&&(!n.C[1]||4!=_l(n)||2!=n.da()))if(n.v&&4==_l(n))TC(n.La,0,n);else if(hi(n,"readystatechange"),4==_l(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(m_)[1]||null;!i&&Tn.self&&Tn.self.location&&(i=Tn.self.location.protocol.slice(0,-1)),r=!WC.test(i?i.toLowerCase():"")}t=r}if(t)hi(n,"complete"),hi(n,"success");else{n.m=6;try{var a=2<_l(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",Cd(n)}}finally{b_(n)}}}function b_(n,e){if(n.g){OE(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||hi(n,"ready");try{t.onreadystatechange=r}catch{}}}function OE(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Tn.clearTimeout(n.A),n.A=null)}function _l(n){return n.g?n.g.readyState:0}function PE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case zC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function kE(n){let e="";return i_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Pg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=kE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vr(n,e,t))}function fo(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function KC(n){this.Ga=0,this.j=[],this.l=new l_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fo("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fo("baseRetryDelayMs",5e3,n),this.hb=fo("retryDelaySeedMs",1e4,n),this.eb=fo("forwardChannelMaxRetries",2,n),this.xa=fo("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new CE(n&&n.concurrentRequestLimit),this.Ja=new SE,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function FE(n){if(ia(n),3==n.H){var e=n.W++,t=Xl(n.I);if(Vr(t,"SID",n.K),Vr(t,"RID",e),Vr(t,"TYPE","terminate"),kg(n,t),(e=new Sg(n,n.l,e)).L=2,e.v=bf(Xl(t)),t=!1,Tn.navigator&&Tn.navigator.sendBeacon)try{t=Tn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Tn.Image&&((new Image).src=e.v,t=!0),t||(e.g=Lg(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ag(e)}$E(n)}function No(n){n.g&&(Fg(n),n.g.cancel(),n.g=null)}function ia(n){No(n),n.u&&(Tn.clearTimeout(n.u),n.u=null),C_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tn.clearTimeout(n.m),n.m=null)}function po(n){if(!DE(n.i)&&!n.m){n.m=!0;var e=n.Na;_f||uE(),vf||(_f(),vf=!0),s_.add(e,n),n.C=0}}function LE(n,e){var t;t=e?e.m:n.W++;const r=Xl(n.I);Vr(r,"SID",n.K),Vr(r,"RID",t),Vr(r,"AID",n.V),kg(n,r),n.o&&n.s&&Pg(r,n.o,n.s),t=new Sg(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=XC(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),TE(n.i,t),mE(t,r,e)}function kg(n,e){n.na&&i_(n.na,function(t,r){Vr(e,r,t)}),n.h&&g_({},function(t,r){Vr(e,r,t)})}function XC(n,e,t){t=Math.min(n.j.length,t);var r=n.h?xs(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].g;const D=i[m].map;if(v-=a,0>v)a=Math.max(0,i[m].g-100),f=!1;else try{YM(D,c,"req"+v+"_")}catch{r&&r(D)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function QC(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;_f||uE(),vf||(_f(),vf=!0),s_.add(e,n),n.A=0}}function BE(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=bg(xs(n.Ma,n),JC(n,n.A)),n.A++,0))}function Fg(n){null!=n.B&&(Tn.clearTimeout(n.B),n.B=null)}function Tf(n){n.g=new Sg(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Xl(n.wa);Vr(e,"RID","rpc"),Vr(e,"SID",n.K),Vr(e,"AID",n.V),Vr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Vr(e,"TO",n.qa),Vr(e,"TYPE","xmlhttp"),kg(n,e),n.o&&n.s&&Pg(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=bf(Xl(e)),t.s=null,t.S=!0,kC(t,n)}function C_(n){null!=n.v&&(Tn.clearTimeout(n.v),n.v=null)}function VE(n,e){var t=null;if(n.g==e){C_(n),Fg(n),n.g=null;var r=2}else{if(!yl(n.i,e))return;t=e.F,HC(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;hi(r=Ig(),new NC(r,t)),po(n)}else QC(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function ZC(n,e){return!(Ng(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=bg(xs(n.Na,n,e),JC(n,n.C)),n.C++,0)))}(n,e)||2==r&&BE(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Dd(n,5);break;case 4:Dd(n,10);break;case 3:Dd(n,6);break;default:Dd(n,2)}}function JC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Dd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=xs(n.pb,n);t||(t=new au("//www.google.com/images/cleardot.gif"),Tn.location&&"http"==Tn.location.protocol||y_(t,"https"),bf(t)),function AE(n,e){const t=new l_;if(Tn.Image){const r=new Image;r.onload=gg(ME,t,r,"TestLoadImage: loaded",!0,e),r.onerror=gg(ME,t,r,"TestLoadImage: error",!1,e),r.onabort=gg(ME,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=gg(ME,t,r,"TestLoadImage: timeout",!1,e),Tn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zs(2);n.H=0,n.h&&n.h.za(e),$E(n),ia(n)}function $E(n){if(n.H=0,n.ma=[],n.h){const e=E_(n.i);(0!=e.length||0!=n.j.length)&&(uf(n.ma,e),uf(n.ma,n.j),n.i.i.length=0,t_(n.j),n.j.length=0),n.h.ya()}}function UE(n,e,t){var r=t instanceof au?Xl(t):new au(t);if(""!=r.g)e&&(r.g=e+"."+r.g),xg(r,r.m);else{var i=Tn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new au(null);r&&y_(a,r),e&&(a.g=e),i&&xg(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Vr(r,t,e),Vr(r,"VER",n.ra),kg(n,r),r}function Lg(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fi(t&&n.Ha&&!n.va?new w_({ob:!0}):n.va)).Oa(n.J),e}function eD(){}function Bg(){if(hf&&!(10<=Number(kM)))throw Error("Environmental error: no available transport.")}function go(n,e){ni.call(this),this.g=new KC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!df(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!df(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Sf(this)}function jE(n){Tg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tD(){pE.call(this),this.status=1}function Sf(n){this.g=n}function Oo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function D_(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function yr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(kt=fi.prototype).Oa=function(n){this.M=n},kt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():u_.g(),this.C=function GM(n){return n.h||(n.h=n.i())}(this.u?this.u:u_),this.g.onreadystatechange=xs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void NE(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Tn.FormData&&n instanceof Tn.FormData,!(0<=J0(KM,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{OE(this),0<this.B&&((this.L=function qC(n){return hf&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xs(this.ua,this)):this.A=TC(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){NE(this,a)}},kt.ua=function(){typeof X0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hi(this,"timeout"),this.abort(8))},kt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,hi(this,"complete"),hi(this,"abort"),b_(this))},kt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),b_(this,!0)),fi.$.N.call(this)},kt.La=function(){this.s||(this.G||this.v||this.l?YC(this):this.kb())},kt.kb=function(){YC(this)},kt.isActive=function(){return!!this.g},kt.da=function(){try{return 2<_l(this)?this.g.status:-1}catch{return-1}},kt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},kt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),GC(e)}},kt.Ia=function(){return this.m},kt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(kt=KC.prototype).ra=8,kt.H=1,kt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Sg(this,this.l,n);let a=this.s;if(this.U&&(a?(a=$M(a),iE(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=XC(this,i,e),Vr(t=Xl(this.I),"RID",n),Vr(t,"CVER",22),this.F&&Vr(t,"X-HTTP-Session-Id",this.F),kg(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(kE(a)))+"&"+e:this.o&&Pg(t,this.o,a)),TE(this.i,i),this.bb&&Vr(t,"TYPE","init"),this.P?(Vr(t,"$req",e),Vr(t,"SID","null"),i.aa=!0,mE(i,t,null)):mE(i,t,e),this.H=2}}else 3==this.H&&(n?LE(this,n):0==this.j.length||DE(this.i)||LE(this))},kt.Ma=function(){if(this.u=null,Tf(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=bg(xs(this.jb,this),n)}},kt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zs(10),No(this),Tf(this))},kt.ib=function(){null!=this.v&&(this.v=null,No(this),BE(this),Zs(19))},kt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Zs(2)):(this.l.info("Failed to ping google.com"),Zs(1))},kt.isActive=function(){return!!this.h&&this.h.isActive(this)},(kt=eD.prototype).Ba=function(){},kt.Aa=function(){},kt.za=function(){},kt.ya=function(){},kt.isActive=function(){return!0},kt.Va=function(){},Bg.prototype.g=function(n,e){return new go(n,e)},ji(go,ni),go.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Zs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=UE(n,null,n.Y),po(n)},go.prototype.close=function(){FE(this.g)},go.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=iu(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&po(e)},go.prototype.N=function(){this.g.h=null,delete this.j,FE(this.g),delete this.g,go.$.N.call(this)},ji(jE,Tg),ji(tD,pE),ji(Sf,eD),Sf.prototype.Ba=function(){hi(this.g,"a")},Sf.prototype.Aa=function(n){hi(this.g,new jE(n))},Sf.prototype.za=function(n){hi(this.g,new tD)},Sf.prototype.ya=function(){hi(this.g,"b")},ji(Oo,function HE(){this.blockSize=-1}),Oo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Oo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)D_(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){D_(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){D_(this,r),i=0;break}}this.h=i,this.i+=e},Oo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var nD={};function T_(n){return-128<=n&&128>n?function OM(n,e){var t=nD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yr([0|e],0>e?-1:0)}):new yr([0|n],0>n?-1:0)}function ka(n){if(isNaN(n)||!isFinite(n))return Td;if(0>n)return ws(ka(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=S_;return new yr(e,0)}var S_=4294967296,Td=T_(0),zE=T_(1),rD=T_(16777216);function Ql(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function sa(n){return-1==n.h}function ws(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yr(t,~n.h).add(zE)}function A_(n,e){return n.add(ws(e))}function M_(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Vg(n,e){this.g=n,this.h=e}function x_(n,e){if(Ql(e))throw Error("division by zero");if(Ql(n))return new Vg(Td,Td);if(sa(n))return e=x_(ws(n),e),new Vg(ws(e.g),ws(e.h));if(sa(e))return e=x_(n,ws(e)),new Vg(ws(e.g),e.h);if(30<n.g.length){if(sa(n)||sa(e))throw Error("slowDivide_ only works with positive integers.");for(var t=zE,r=e;0>=r.X(n);)t=iD(t),r=iD(r);var i=Af(t,1),a=Af(r,1);for(r=Af(r,2),t=Af(t,2);!Ql(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=Af(r,1),t=Af(t,1)}return e=A_(n,i.R(e)),new Vg(i,e)}for(i=Td;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=ka(t)).R(e);sa(c)||0<c.X(n);)c=(a=ka(t-=r)).R(e);Ql(a)&&(a=zE),i=i.add(a),n=A_(n,c)}return new Vg(i,n)}function iD(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yr(t,n.h)}function Af(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new yr(i,n.h)}(kt=yr.prototype).ea=function(){if(sa(this))return-ws(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:S_+r)*e,e*=S_}return n},kt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ql(this))return"0";if(sa(this))return"-"+ws(this).toString(n);for(var e=ka(Math.pow(n,6)),t=this,r="";;){var i=x_(t,e).g,a=((0<(t=A_(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ql(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},kt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},kt.X=function(n){return sa(n=A_(this,n))?-1:Ql(n)?0:1},kt.abs=function(){return sa(this)?ws(this):this},kt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new yr(t,-2147483648&t[t.length-1]?-1:0)},kt.R=function(n){if(Ql(this)||Ql(n))return Td;if(sa(this))return sa(n)?ws(this).R(ws(n)):ws(ws(this).R(n));if(sa(n))return ws(this.R(ws(n)));if(0>this.X(rD)&&0>n.X(rD))return ka(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=c*m,M_(t,2*r+2*i),t[2*r+2*i+1]+=a*m,M_(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,M_(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,M_(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yr(t,0)},kt.gb=function(n){return x_(this,n).h},kt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yr(t,this.h&n.h)},kt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yr(t,this.h|n.h)},kt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yr(t,this.h^n.h)},Bg.prototype.createWebChannel=Bg.prototype.g,go.prototype.send=go.prototype.u,go.prototype.open=go.prototype.m,go.prototype.close=go.prototype.close,wf.NO_ERROR=0,wf.TIMEOUT=8,wf.HTTP_ERROR=6,Cg.COMPLETE="complete",OC.EventType=Dg,Dg.OPEN="a",Dg.CLOSE="b",Dg.ERROR="c",Dg.MESSAGE="d",ni.prototype.listen=ni.prototype.O,fi.prototype.listenOnce=fi.prototype.P,fi.prototype.getLastError=fi.prototype.Sa,fi.prototype.getLastErrorCode=fi.prototype.Ia,fi.prototype.getStatus=fi.prototype.da,fi.prototype.getResponseJson=fi.prototype.Wa,fi.prototype.getResponseText=fi.prototype.ja,fi.prototype.send=fi.prototype.ha,fi.prototype.setWithCredentials=fi.prototype.Oa,Oo.prototype.digest=Oo.prototype.l,Oo.prototype.reset=Oo.prototype.reset,Oo.prototype.update=Oo.prototype.j,yr.prototype.add=yr.prototype.add,yr.prototype.multiply=yr.prototype.R,yr.prototype.modulo=yr.prototype.gb,yr.prototype.compare=yr.prototype.X,yr.prototype.toNumber=yr.prototype.ea,yr.prototype.toString=yr.prototype.toString,yr.prototype.getBits=yr.prototype.D,yr.fromNumber=ka,yr.fromString=function GE(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ws(GE(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ka(Math.pow(e,8)),r=Td,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=ka(Math.pow(e,a)),r=r.R(a).add(ka(c))):r=(r=r.R(t)).add(ka(c))}return r};var ZM=xo.createWebChannelTransport=function(){return new Bg},XM=xo.getStatEventTarget=function(){return Ig()},WE=xo.ErrorCode=wf,QM=xo.EventType=Cg,JM=xo.Event=su,sD=xo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ex=xo.FetchXmlHttpFactory=w_,$g=xo.WebChannel=OC,oD=xo.XhrIo=fi,aD=xo.Md5=Oo,Sd=xo.Integer=yr;const qE="@firebase/firestore";class Hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hi.UNAUTHENTICATED=new Hi(null),Hi.GOOGLE_CREDENTIALS=new Hi("google-credentials-uid"),Hi.FIRST_PARTY=new Hi("first-party-uid"),Hi.MOCK_USER=new Hi("mock-user");let Ad="9.23.0";const Jl=new Oa.Yd("@firebase/firestore");function R_(){return Jl.logLevel}function ft(n,...e){if(Jl.logLevel<=Oa.in.DEBUG){const t=e.map(YE);Jl.debug(`Firestore (${Ad}): ${n}`,...t)}}function Pr(n,...e){if(Jl.logLevel<=Oa.in.ERROR){const t=e.map(YE);Jl.error(`Firestore (${Ad}): ${n}`,...t)}}function oa(n,...e){if(Jl.logLevel<=Oa.in.WARN){const t=e.map(YE);Jl.warn(`Firestore (${Ad}): ${n}`,...t)}}function YE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ft(n="Unexpected state"){const e=`FIRESTORE (${Ad}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function nn(n,e){n||Ft()}function Pt(n,e){return n}const ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends j.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class es{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Hi.UNAUTHENTICATED))}shutdown(){}}class nx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rx{constructor(e){this.t=e,this.currentUser=Hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let c=new es;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new es,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=c;e.enqueueRetryable((0,tt.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new es)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn("string"==typeof r.accessToken),new hn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nn(null===e||"string"==typeof e),new Hi(e)}}class Mf{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Hi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ix{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Mf(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ug{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N_{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,ft("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nn("string"==typeof t.token),this.T=t.token,new Ug(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ZE{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=uP(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Cn(n,e){return n<e?-1:n>e?1:0}function xf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function XE(n){return n+"\0"}class Wr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new at(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new at(ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new at(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new at(ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wr.fromMillis(Date.now())}static fromDate(e){return Wr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Wr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Cn(this.nanoseconds,e.nanoseconds):Cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class en{constructor(e){this.timestamp=e}static fromTimestamp(e){return new en(e)}static min(){return new en(new Wr(0,0))}static max(){return new en(new Wr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ft(),void 0===r?r=e.length-t:r>e.length-t&&Ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xn extends Rf{construct(e,t,r){return new Xn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new at(ze.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Xn(t)}static emptyPath(){return new Xn([])}}const sx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends Rf{construct(e,t,r){return new pi(e,t,r)}static isValidIdentifier(e){return sx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new at(ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new at(ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new at(ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new at(ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(t)}static emptyPath(){return new pi([])}}class bt{constructor(e){this.path=e}static fromPath(e){return new bt(Xn.fromString(e))}static fromName(e){return new bt(Xn.fromString(e).popFirst(5))}static empty(){return new bt(Xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new Xn(e.slice()))}}class O_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function QE(n){return n.fields.find(e=>2===e.kind)}function Md(n){return n.fields.filter(e=>2!==e.kind)}O_.UNKNOWN_ID=-1;class jg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Nf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Nf(0,Is.min())}}function uD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=en.fromTimestamp(1e9===r?new Wr(t+1,0):new Wr(t,r));return new Is(i,bt.empty(),e)}function Of(n){return new Is(n.readTime,n.key,-1)}class Is{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Is(en.min(),bt.empty(),-1)}static max(){return new Is(en.max(),bt.empty(),-1)}}function JE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=bt.comparator(n.documentKey,e.documentKey),0!==t?t:Cn(n.largestBatchId,e.largestBatchId))}const dD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ec(n){return k_.apply(this,arguments)}function k_(){return k_=(0,tt.Z)(function*(n){if(n.code!==ze.FAILED_PRECONDITION||n.message!==dD)throw n;ft("LocalStore","Unexpectedly lost primary lease")}),k_.apply(this,arguments)}class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ke((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ke?t:ke.resolve(t)}catch(t){return ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.reject(t)}static resolve(e){return new ke((t,r)=>{t(e)})}static reject(e){return new ke((t,r)=>{r(e)})}static waitFor(e){return new ke((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},m=>r(m))}),c=!0,a===i&&t()})}static or(e){let t=ke.resolve(!1);for(const r of e)t=t.next(i=>i?ke.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ke((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(D=>{c[v]=D,++f,f===a&&r(c)},D=>i(D))}})}static doWhile(e,t){return new ke((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class F_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new es,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Hg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=L_(r.target.error);this.v.reject(new Hg(e,i))}}static open(e,t,r,i){try{return new F_(t,e.transaction(i,r))}catch(a){throw new Hg(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ft("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new dP(t)}}class aa{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===aa.S((0,j.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ft("SimpleDb","Removing database:",e),Pf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,j.hl)())return!1;if(aa.C())return!0;const e=(0,j.z$)(),t=aa.S(e),r=0<t&&t<10,i=aa.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,tt.Z)(function*(){return t.db||(ft("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Hg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new at(ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new at(ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Hg(e,f))},a.onupgradeneeded=c=>{ft("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{ft("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,tt.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const m=F_.open(a.db,e,c?"readonly":"readwrite",r),v=i(m).next(D=>(m.P(),D)).catch(D=>(m.abort(D),ke.reject(D))).toPromise();return v.catch(()=>{}),yield m.R,v}catch(m){const v=m,D="FirebaseError"!==v.name&&f<3;if(ft("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),a.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ox{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Pf(this.L.delete())}}class Hg extends at{constructor(e,t){super(ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xd(n){return"IndexedDbTransactionError"===n.name}class dP{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ft("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ft("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Pf(r)}add(e){return ft("SimpleDb","ADD",this.store.name,e,e),Pf(this.store.add(e))}get(e){return Pf(this.store.get(e)).next(t=>(void 0===t&&(t=null),ft("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ft("SimpleDb","DELETE",this.store.name,e),Pf(this.store.delete(e))}count(){return ft("SimpleDb","COUNT",this.store.name),Pf(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ke((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ke((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){ft("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ke((r,i)=>{t.onerror=a=>{const c=L_(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new ke((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const m=new ox(f),v=t(f.primaryKey,f.value,m);if(v instanceof ke){const D=v.catch(S=>(m.done(),ke.reject(S)));r.push(D)}m.isDone?i():null===m.K?f.continue():f.continue(m.K)}}).next(()=>ke.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Pf(n){return new ke((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=L_(r.target.error);t(i)}})}let ax=!1;function L_(n){const e=aa.S((0,j.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new at("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ax||(ax=!0,setTimeout(()=>{throw r},0)),r}}return n}class B_{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ft("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,tt.Z)(function*(){t.task=null;try{ft("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){xd(r)?ft("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ec(r)}yield t.et(6e4)}))}}class lx{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,tt.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ke.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ft("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(f=>(ft("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=Of(a);JE(c,r)>0&&(r=c)}),new Is(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Po=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function kf(n){return null==n}function tc(n){return 0===n&&1/n==-1/0}function fD(n){return"number"==typeof n&&Number.isInteger(n)&&!tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ns(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pD(e)),e=cx(n.get(t),e);return pD(e)}function cx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function pD(n){return n+"\x01\x01"}function nc(n){const e=n.length;if(nn(e>=2),2===e)return nn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&Ft(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:Ft()}a=c+2}return new Xn(r)}const gD=["userId","batchId"];function Gg(n,e){return[n,Ns(e)]}function mD(n,e,t){return[n,Ns(e),t]}const ux={},zg=["prefixPath","collectionGroup","readTime","documentId"],dx=["prefixPath","collectionGroup","documentId"],yD=["collectionGroup","readTime","prefixPath","documentId"],hx=["canonicalId","targetId"],_D=["targetId","path"],fx=["path","targetId"],vD=["collectionId","parent"],px=["indexId","uid"],ew=["uid","sequenceNumber"],gx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ED=["indexId","uid","orderedDocumentKey"],wD=["userId","collectionPath","documentId"],mx=["userId","collectionPath","largestBatchId"],yx=["userId","collectionGroup","largestBatchId"],ID=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tw=[...ID,"documentOverlays"],bD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nw=bD,_x=[...nw,"indexConfiguration","indexState","indexEntries"];class rw extends hD{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ts(n,e){const t=Pt(n);return aa.M(t.ht,e)}function CD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class $r{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new $r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new $r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new V_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new V_(this.root,e,this.comparator,!1)}getReverseIterator(){return new V_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new V_(this.root,e,this.comparator,!0)}}class V_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ns.RED,this.left=i??ns.EMPTY,this.right=a??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ns(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ns.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ft();const e=this.left.check();if(e!==this.right.check())throw Ft();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft()}get value(){throw Ft()}get color(){throw Ft()}get left(){throw Ft()}get right(){throw Ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ns(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ur{constructor(e){this.comparator=e,this.data=new $r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TD(this.data.getIterator())}getIteratorFrom(e){return new TD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ur)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ur(this.comparator);return t.data=e,t}}class TD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ff(n){return n.hasNext()?n.getNext():void 0}class Xs{constructor(e){this.fields=e,e.sort(pi.comparator)}static empty(){return new Xs([])}unionWith(e){let t=new Ur(pi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class SD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new SD("Invalid base64 string: "+i):i}}(e);return new Gi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Gi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gi.EMPTY_BYTE_STRING=new Gi("");const iw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vl(n){if(nn(!!n),"string"==typeof n){let e=0;const t=iw.exec(n);if(nn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ii(n.seconds),nanos:ii(n.nanos)}}function ii(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fa(n){return"string"==typeof n?Gi.fromBase64String(n):Gi.fromUint8Array(n)}function $_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function U_(n){const e=n.mapValue.fields.__previous_value__;return $_(e)?U_(e):e}function Rd(n){const e=vl(n.mapValue.fields.__local_write_time__.timestampValue);return new Wr(e.seconds,e.nanos)}class Ex{constructor(e,t,r,i,a,c,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v}}class rc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}const ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wg={nullValue:"NULL_VALUE"};function cu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$_(n)?4:MD(n)?9007199254740991:10:Ft()}function ic(n,e){if(n===e)return!0;const t=cu(n);if(t!==cu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rd(n).isEqual(Rd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=vl(r.timestampValue),c=vl(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Fa(n.bytesValue).isEqual(Fa(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ii(r.geoPointValue.latitude)===ii(i.geoPointValue.latitude)&&ii(r.geoPointValue.longitude)===ii(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ii(r.integerValue)===ii(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=ii(r.doubleValue),c=ii(i.doubleValue);return a===c?tc(a)===tc(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return xf(n.arrayValue.values||[],e.arrayValue.values||[],ic);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(CD(a)!==CD(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!ic(a[f],c[f])))return!1;return!0}(n,e);default:return Ft()}var i}function Nd(n,e){return void 0!==(n.values||[]).find(t=>ic(t,e))}function El(n,e){if(n===e)return 0;const t=cu(n),r=cu(e);if(t!==r)return Cn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Cn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=ii(i.integerValue||i.doubleValue),f=ii(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return AD(n.timestampValue,e.timestampValue);case 4:return AD(Rd(n),Rd(e));case 5:return Cn(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Fa(i),f=Fa(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let m=0;m<c.length&&m<f.length;m++){const v=Cn(c[m],f[m]);if(0!==v)return v}return Cn(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Cn(ii(i.latitude),ii(a.latitude));return 0!==c?c:Cn(ii(i.longitude),ii(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let m=0;m<c.length&&m<f.length;++m){const v=El(c[m],f[m]);if(v)return v}return Cn(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===ko.mapValue&&a===ko.mapValue)return 0;if(i===ko.mapValue)return 1;if(a===ko.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let D=0;D<f.length&&D<v.length;++D){const S=Cn(f[D],v[D]);if(0!==S)return S;const F=El(c[f[D]],m[v[D]]);if(0!==F)return F}return Cn(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Ft()}}function AD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Cn(n,e);const t=vl(n),r=vl(e),i=Cn(t.seconds,r.seconds);return 0!==i?i:Cn(t.nanos,r.nanos)}function Od(n){return j_(n)}function j_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=vl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Fa(n.bytesValue).toBase64():"referenceValue"in n?bt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=j_(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${j_(r.fields[f])}`;return a+"}"}(n.mapValue):Ft();var e}function uu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qg(n){return!!n&&"integerValue"in n}function Lf(n){return!!n&&"arrayValue"in n}function sw(n){return!!n&&"nullValue"in n}function ow(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yg(n){return!!n&&"mapValue"in n}function Kg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return lu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function wx(n){return"nullValue"in n?Wg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?uu(rc.empty(),bt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ft()}function Ix(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?uu(rc.empty(),bt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ko:Ft()}function aw(n,e){const t=El(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bx(n,e){const t=El(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class rs{constructor(e){this.value=e}static empty(){return new rs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kg(t)}setAll(e){let t=pi.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Kg(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Yg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ic(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Yg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lu(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new rs(Kg(this.value))}}function xD(n){const e=[];return lu(n.fields,(t,r)=>{const i=new pi([t]);if(Yg(r)){const a=xD(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Xs(e)}class qr{constructor(e,t,r,i,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new qr(e,0,en.min(),en.min(),en.min(),rs.empty(),0)}static newFoundDocument(e,t,r,i){return new qr(e,1,t,en.min(),r,i,0)}static newNoDocument(e,t){return new qr(e,2,t,en.min(),en.min(),rs.empty(),0)}static newUnknownDocument(e,t){return new qr(e,3,t,en.min(),en.min(),rs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(en.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pd{constructor(e,t){this.position=e,this.inclusive=t}}function RD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?bt.comparator(bt.fromName(c.referenceValue),t.key):El(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ND(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ic(n.position[t],e.position[t]))return!1;return!0}class Bf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Cx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class OD{}class qn extends OD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new kD(e,t,r):"array-contains"===t?new Dx(e,r):"in"===t?new Tx(e,r):"not-in"===t?new Sx(e,r):"array-contains-any"===t?new Ax(e,r):new qn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new FD(e,r):new LD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(El(t,this.value)):null!==t&&cu(this.value)===cu(t)&&this.matchesComparison(El(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wr extends OD{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new wr(e,t)}matches(e){return Vf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Vf(n){return"and"===n.op}function lw(n){return"or"===n.op}function cw(n){return PD(n)&&Vf(n)}function PD(n){for(const e of n.filters)if(e instanceof wr)return!1;return!0}function uw(n){if(n instanceof qn)return n.field.canonicalString()+n.op.toString()+Od(n.value);if(cw(n))return n.filters.map(e=>uw(e)).join(",");{const e=n.filters.map(t=>uw(t)).join(",");return`${n.op}(${e})`}}function $f(n,e){return n instanceof qn?(t=n,(r=e)instanceof qn&&t.op===r.op&&t.field.isEqual(r.field)&&ic(t.value,r.value)):n instanceof wr?function(t,r){return r instanceof wr&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&$f(a,r.filters[c]),!0)}(n,e):void Ft();var t,r}function dw(n,e){const t=n.filters.concat(e);return wr.create(t,n.op)}function hw(n){return n instanceof qn?`${(e=n).field.canonicalString()} ${e.op} ${Od(e.value)}`:n instanceof wr?function(e){return e.op.toString()+" {"+e.getFilters().map(hw).join(" ,")+"}"}(n):"Filter";var e}class kD extends qn{constructor(e,t,r){super(e,t,r),this.key=bt.fromName(r.referenceValue)}matches(e){const t=bt.comparator(e.key,this.key);return this.matchesComparison(t)}}class FD extends qn{constructor(e,t){super(e,"in",t),this.keys=BD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class LD extends qn{constructor(e,t){super(e,"not-in",t),this.keys=BD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>bt.fromName(r.referenceValue))}class Dx extends qn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lf(t)&&Nd(t.arrayValue,this.value)}}class Tx extends qn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Nd(this.value.arrayValue,t)}}class Sx extends qn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Nd(this.value.arrayValue,t)}}class Ax extends qn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nd(this.value.arrayValue,r))}}class Mx{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.dt=null}}function fw(n,e=null,t=[],r=[],i=null,a=null,c=null){return new Mx(n,e,t,r,i,a,c)}function kd(n){const e=Pt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>uw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),kf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Od(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Od(r)).join(",")),e.dt=t}return e.dt}function sc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Cx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$f(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ND(n.startAt,e.startAt)&&ND(n.endAt,e.endAt)}function G_(n){return bt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Uf(n,e){return n.filters.filter(t=>t instanceof qn&&t.field.isEqual(e))}function La(n,e,t){let r=Wg,i=!0;for(const a of Uf(n,e)){let c=Wg,f=!0;switch(a.op){case"<":case"<=":c=wx(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=Wg}aw({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];aw({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function VD(n,e,t){let r=ko,i=!0;for(const a of Uf(n,e)){let c=ko,f=!0;switch(a.op){case">=":case">":c=Ix(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=ko}bx({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];bx({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ba{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=m,this.wt=null,this._t=null}}function jf(n,e,t,r,i,a,c,f){return new Ba(n,e,t,r,i,a,c,f)}function Hf(n){return new Ba(n)}function $D(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Fd(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function z_(n){return null!==n.collectionGroup}function Ld(n){const e=Pt(n);if(null===e.wt){e.wt=[];const t=Fd(e),r=pw(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Bf(t)),e.wt.push(new Bf(pi.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Bf(pi.keyField(),a))}}}return e.wt}function Qs(n){const e=Pt(n);if(!e._t)if("F"===e.limitType)e._t=fw(e.path,e.collectionGroup,Ld(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Ld(e))t.push(new Bf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Pd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Pd(e.startAt.position,e.startAt.inclusive):null;e._t=fw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Zg(n,e){e.getFirstInequalityField(),Fd(n);const t=n.filters.concat([e]);return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function W_(n,e,t){return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xg(n,e){return sc(Qs(n),Qs(e))&&n.limitType===e.limitType}function gw(n){return`${kd(Qs(n))}|lt:${n.limitType}`}function mw(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>hw(r)).join(", ")}]`),kf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Od(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Od(r)).join(",")),`Target(${t})`}(Qs(n))}; limitType=${n.limitType})`}function Qg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):bt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ld(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=RD(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,Ld(t),r)||t.endAt&&!function(i,a,c){const f=RD(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,Ld(t),r)));var t,r}function yw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jg(n){return(e,t)=>{let r=!1;for(const i of Ld(n)){const a=xx(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function xx(n,e,t){const r=n.field.isKeyField()?bt.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),m=c.data.field(i);return null!==f&&null!==m?El(f,m):Ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ft()}}class oc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lu(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return DD(this.inner)}size(){return this.innerSize}}const UD=new $r(bt.comparator);function Js(){return UD}const q_=new $r(bt.comparator);function Gf(...n){let e=q_;for(const t of n)e=e.insert(t.key,t);return e}function jD(n){let e=q_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Va(){return em()}function _w(){return em()}function em(){return new oc(n=>n.toString(),(n,e)=>n.isEqual(e))}const Rx=new $r(bt.comparator),vw=new Ur(bt.comparator);function An(...n){let e=vw;for(const t of n)e=e.add(t);return e}const HD=new Ur(Cn);function tm(){return HD}function Y_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function GD(n){return{integerValue:""+n}}function zD(n,e){return fD(e)?GD(e):Y_(n,e)}class K_{constructor(){this._=void 0}}function Nx(n,e,t){return n instanceof Bd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&$_(i)&&(i=U_(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof du?Ew(n,e):n instanceof hu?qD(n,e):function(r,i){const a=Z_(r,i),c=ww(a)+ww(r.gt);return qg(a)&&qg(r.gt)?GD(c):Y_(r.serializer,c)}(n,e)}function WD(n,e,t){return n instanceof du?Ew(n,e):n instanceof hu?qD(n,e):t}function Z_(n,e){return n instanceof Vd?qg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bd extends K_{}class du extends K_{constructor(e){super(),this.elements=e}}function Ew(n,e){const t=YD(e);for(const r of n.elements)t.some(i=>ic(i,r))||t.push(r);return{arrayValue:{values:t}}}class hu extends K_{constructor(e){super(),this.elements=e}}function qD(n,e){let t=YD(e);for(const r of n.elements)t=t.filter(i=>!ic(i,r));return{arrayValue:{values:t}}}class Vd extends K_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ww(n){return ii(n.integerValue||n.doubleValue)}function YD(n){return Lf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zf{constructor(e,t){this.field=e,this.transform=t}}class eo{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function X_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Q_{}function Px(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kf(n.key,Ir.none()):new Yf(n.key,n.data,Ir.none());{const t=n.data,r=rs.empty();let i=new Ur(pi.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new $a(n.key,r,new Xs(i.toArray()),Ir.none())}}function hP(n,e,t){n instanceof Yf?function(r,i,a){const c=r.value.clone(),f=bw(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof $a?function(r,i,a){if(!X_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=bw(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(KD(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wf(n,e,t,r){return n instanceof Yf?function(i,a,c,f){if(!X_(i.precondition,a))return c;const m=i.value.clone(),v=ZD(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof $a?function(i,a,c,f){if(!X_(i.precondition,a))return c;const m=ZD(i.fieldTransforms,f,a),v=a.data;return v.setAll(KD(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(c=t,X_(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function Iw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Z_(r.transform,i||null);null!=a&&(null===t&&(t=rs.empty()),t.set(r.field,a))}return t||null}function qf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&xf(t,r,(i,a)=>function Ox(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof du&&r instanceof du||t instanceof hu&&r instanceof hu?xf(t.elements,r.elements,ic):t instanceof Vd&&r instanceof Vd?ic(t.gt,r.gt):t instanceof Bd&&r instanceof Bd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Yf extends Q_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $a extends Q_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function KD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function bw(n,e,t){const r=new Map;nn(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,WD(c,f,t[i]))}return r}function ZD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,Nx(a,c,e))}return r}class Kf extends Q_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cw extends Q_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nm{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&hP(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_w();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const m=Px(c,f);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(en.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&xf(this.mutations,e.mutations,(t,r)=>qf(t,r))&&xf(this.baseMutations,e.baseMutations,(t,r)=>qf(t,r))}}class J_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nn(e.mutations.length===r.length);let i=Rx;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new J_(e,t,r,i)}}class Dw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Tw{constructor(e,t){this.count=e,this.unchangedNames=t}}var zi,Kn;function XD(n){switch(n){default:return Ft();case ze.CANCELLED:case ze.UNKNOWN:case ze.DEADLINE_EXCEEDED:case ze.RESOURCE_EXHAUSTED:case ze.INTERNAL:case ze.UNAVAILABLE:case ze.UNAUTHENTICATED:return!1;case ze.INVALID_ARGUMENT:case ze.NOT_FOUND:case ze.ALREADY_EXISTS:case ze.PERMISSION_DENIED:case ze.FAILED_PRECONDITION:case ze.ABORTED:case ze.OUT_OF_RANGE:case ze.UNIMPLEMENTED:case ze.DATA_LOSS:return!0}}function Sw(n){if(void 0===n)return Pr("GRPC error has no .code"),ze.UNKNOWN;switch(n){case zi.OK:return ze.OK;case zi.CANCELLED:return ze.CANCELLED;case zi.UNKNOWN:return ze.UNKNOWN;case zi.DEADLINE_EXCEEDED:return ze.DEADLINE_EXCEEDED;case zi.RESOURCE_EXHAUSTED:return ze.RESOURCE_EXHAUSTED;case zi.INTERNAL:return ze.INTERNAL;case zi.UNAVAILABLE:return ze.UNAVAILABLE;case zi.UNAUTHENTICATED:return ze.UNAUTHENTICATED;case zi.INVALID_ARGUMENT:return ze.INVALID_ARGUMENT;case zi.NOT_FOUND:return ze.NOT_FOUND;case zi.ALREADY_EXISTS:return ze.ALREADY_EXISTS;case zi.PERMISSION_DENIED:return ze.PERMISSION_DENIED;case zi.FAILED_PRECONDITION:return ze.FAILED_PRECONDITION;case zi.ABORTED:return ze.ABORTED;case zi.OUT_OF_RANGE:return ze.OUT_OF_RANGE;case zi.UNIMPLEMENTED:return ze.UNIMPLEMENTED;case zi.DATA_LOSS:return ze.DATA_LOSS;default:return Ft()}}(Kn=zi||(zi={}))[Kn.OK=0]="OK",Kn[Kn.CANCELLED=1]="CANCELLED",Kn[Kn.UNKNOWN=2]="UNKNOWN",Kn[Kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kn[Kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kn[Kn.NOT_FOUND=5]="NOT_FOUND",Kn[Kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kn[Kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kn[Kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kn[Kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kn[Kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kn[Kn.ABORTED=10]="ABORTED",Kn[Kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kn[Kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kn[Kn.INTERNAL=13]="INTERNAL",Kn[Kn.UNAVAILABLE=14]="UNAVAILABLE",Kn[Kn.DATA_LOSS=15]="DATA_LOSS";class fu{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return tv}static getOrCreateInstance(){return null===tv&&(tv=new fu),tv}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let tv=null;function Aw(){return new TextEncoder}const Mw=new Sd([4294967295,4294967295],0);function kx(n){const e=Aw().encode(n),t=new aD;return t.update(e),new Uint8Array(t.digest())}function QD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Sd([t,r],0),new Sd([i,a],0)]}class JD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new rm(`Invalid padding: ${t}`);if(r<0)throw new rm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new rm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new rm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Sd.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Sd.fromNumber(r)));return 1===i.compare(Mw)&&(i=new Sd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=kx(e),[r,i]=QD(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new JD(a,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=kx(e),[r,i]=QD(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class rm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class im{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,sm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new im(en.min(),i,new $r(Cn),Js(),An())}}class sm{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sm(r,t,An(),An(),An())}}class om{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class xw{constructor(e,t){this.targetId=e,this.Vt=t}}class eT{constructor(e,t,r=Gi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Rw{constructor(){this.St=0,this.Dt=rT(),this.Ct=Gi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=An(),t=An(),r=An();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ft()}}),new sm(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=rT()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class tT{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Js(),this.zt=nT(),this.Wt=new $r(Cn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(G_(c))if(0===i){const f=new bt(c.path);this.Yt(r,f,qr.newNoDocument(f,en.min()))}else nn(1===i);else{const f=this.ie(r);if(f!==i){const m=this.re(e,f);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=fu.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,D,S){var F,Q,me,qe,et,Mt;const jt={localCacheCount:D,existenceFilterCount:S.count},Nt=S.unchangedNames;return Nt&&(jt.bloomFilter={applied:0===v,hashCount:null!==(F=Nt?.hashCount)&&void 0!==F?F:0,bitmapLength:null!==(qe=null===(me=null===(Q=Nt?.bits)||void 0===Q?void 0:Q.bitmap)||void 0===me?void 0:me.length)&&void 0!==qe?qe:0,padding:null!==(Mt=null===(et=Nt?.bits)||void 0===et?void 0:et.padding)&&void 0!==Mt?Mt:0}),jt}(m,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=r;let m,v;try{m=Fa(a).toUint8Array()}catch(D){if(D instanceof SD)return oa("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{v=new JD(m,c,f)}catch(D){return oa(D instanceof rm?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const f=this.se(c);if(f){if(a.current&&G_(f.target)){const m=new bt(f.target.path);null!==this.jt.get(m)||this.ae(c,m)||this.Yt(c,m,qr.newNoDocument(m,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=An();this.zt.forEach((a,c)=>{let f=!0;c.forEachWhile(m=>{const v=this.se(m);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const i=new im(e,t,this.Wt,this.jt,r);return this.jt=Js(),this.zt=nT(),this.Wt=new $r(Cn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Rw,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ur(Cn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ft("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Rw),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function nT(){return new $r(bt.comparator)}function rT(){return new $r(bt.comparator)}const iT={asc:"ASCENDING",desc:"DESCENDING"},Fx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sT={and:"AND",or:"OR"};class oT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nv(n,e){return n.useProto3Json||kf(e)?e:{value:e}}function $d(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Lx(n,e){return $d(n,e.toTimestamp())}function Oi(n){return nn(!!n),en.fromTimestamp(function(e){const t=vl(e);return new Wr(t.seconds,t.nanos)}(n))}function rv(n,e){return(t=n,new Xn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Bx(n){const e=Xn.fromString(n);return nn(qx(e)),e}function iv(n,e){return rv(n.databaseId,e.path)}function ac(n,e){const t=Bx(e);if(t.get(1)!==n.databaseId.projectId)throw new at(ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new at(ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new bt($x(t))}function lT(n,e){return rv(n.databaseId,e)}function Vx(n){const e=Bx(n);return 4===e.length?Xn.emptyPath():$x(e)}function sv(n){return new Xn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $x(n){return nn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ux(n,e,t){return{name:iv(n,e),fields:t.value.mapValue.fields}}function jx(n,e,t){const r=ac(n,e.name),i=Oi(e.updateTime),a=e.createTime?Oi(e.createTime):en.min(),c=new rs({mapValue:{fields:e.fields}}),f=qr.newFoundDocument(r,i,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Zf(n,e){let t;if(e instanceof Yf)t={update:Ux(n,e.key,e.value)};else if(e instanceof Kf)t={delete:iv(n,e.key)};else if(e instanceof $a)t={update:Ux(n,e.key,e.data),updateMask:hT(e.fieldMask)};else{if(!(e instanceof Cw))return Ft();t={verify:iv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Bd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof du)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof hu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Vd)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw Ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Lx(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ft()),t;var i}function Ow(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ir.updateTime(Oi(i.updateTime)):void 0!==i.exists?Ir.exists(i.exists):Ir.none():Ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(nn("REQUEST_TIME"===c.setToServerValue),f=new Bd):"appendMissingElements"in c?f=new du(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new hu(c.removeAllFromArray.values||[]):"increment"in c?f=new Vd(a,c.increment):Ft();const m=pi.fromServerFormat(c.fieldPath);return new zf(m,f)}(n,i)):[];var i;if(e.update){const i=ac(n,e.update.name),a=new rs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Xs((e.updateMask.fieldPaths||[]).map(v=>pi.fromServerFormat(v)));return new $a(i,a,c,t,r)}return new Yf(i,a,t,r)}if(e.delete){const i=ac(n,e.delete);return new Kf(i,t)}if(e.verify){const i=ac(n,e.verify);return new Cw(i,t)}return Ft()}function uT(n,e){return{documents:[lT(n,e.path)]}}function dT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=lT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=lT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return kw(wr.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Ud((D=v).field),direction:Gx(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=nv(n,e.limit);var f,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Hx(n){let e=Vx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nn(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=function(D){const S=Pw(D);return S instanceof wr&&cw(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new Bf(Xf((S=D).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(D){let S;return S="object"==typeof D?D.value:D,kf(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new Pd((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new Pd(D.values||[],!D.before)}(t.endAt)),jf(e,i,c,a,f,"F",m,v)}function Pw(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xf(e.unaryFilter.field);return qn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Xf(e.unaryFilter.field);return qn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xf(e.unaryFilter.field);return qn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Xf(e.unaryFilter.field);return qn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ft()}}(n):void 0!==n.fieldFilter?qn.create(Xf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ft()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wr.create(e.compositeFilter.filters.map(t=>Pw(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ft()}}(e.compositeFilter.op))}(n):Ft();var e}function Gx(n){return iT[n]}function zx(n){return Fx[n]}function Wx(n){return sT[n]}function Ud(n){return{fieldPath:n.canonicalString()}}function Xf(n){return pi.fromServerFormat(n.fieldPath)}function kw(n){return n instanceof qn?function(e){if("=="===e.op){if(ow(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NAN"}};if(sw(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ow(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NOT_NAN"}};if(sw(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ud(e.field),op:zx(e.op),value:e.value}}}(n):n instanceof wr?function(e){const t=e.getFilters().map(r=>kw(r));return 1===t.length?t[0]:{compositeFilter:{op:Wx(e.op),filters:t}}}(n):Ft()}function hT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Wi{constructor(e,t,r,i,a=en.min(),c=en.min(),f=Gi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Fw{constructor(e){this.fe=e}}function Kx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:is(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:iv(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:$d(i,a.version.toTimestamp()),createTime:$d(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jd(e.version)};else{if(!e.isUnknownDocument())return Ft();r.unknownDocument={path:t.path.toArray(),version:jd(e.version)}}var i,a;return r}function is(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lc(n){const e=new Wr(n.seconds,n.nanoseconds);return en.fromTimestamp(e)}function Hd(n,e){const t=(e.baseMutations||[]).map(a=>Ow(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>Ow(n.fe,a)),i=Wr.fromMillis(e.localWriteTimeMs);return new nm(e.batchId,i,t,r)}function am(n){const e=lc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lc(n.lastLimboFreeSnapshotVersion):en.min();let r;var i;return void 0!==n.query.documents?(nn(1===(i=n.query).documents.length),r=Qs(Hf(Vx(i.documents[0])))):r=Qs(Hx(n.query)),new Wi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Gi.fromBase64String(n.resumeToken))}function av(n,e){const t=jd(e.snapshotVersion),r=jd(e.lastLimboFreeSnapshotVersion);let i;i=G_(e.target)?uT(n.fe,e.target):dT(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kd(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lv(n){const e=Hx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?W_(e,e.limit,"L"):e}function cv(n,e){return new Dw(e.largestBatchId,Ow(n.fe,e.overlayMutation))}function fT(n,e){const t=e.path.lastSegment();return[n,Ns(e.path.popLast()),t]}function Lw(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:jd(r.readTime),documentKey:Ns(r.documentKey.path),largestBatchId:r.largestBatchId}}class pT{getBundleMetadata(e,t){return Bw(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:lc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Bw(e).put({bundleId:(r=t).id,createTime:jd(Oi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Vw(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:lv(i.bundledQuery),readTime:lc(i.readTime)};var i})}saveNamedQuery(e,t){return Vw(e).put({name:(r=t).name,readTime:jd(Oi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Bw(n){return ts(n,"bundles")}function Vw(n){return ts(n,"namedQueries")}class uv{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new uv(e,t.uid||"")}getOverlay(e,t){return Qf(e).get(fT(this.userId,t)).next(r=>r?cv(this.serializer,r):null)}getOverlays(e,t){const r=Va();return ke.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new Dw(t,c);i.push(this.we(e,f))}),ke.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ns(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(Qf(e).J("collectionPathOverlayIndex",f))}),ke.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Va(),a=Ns(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Qf(e).j("collectionPathOverlayIndex",c).next(f=>{for(const m of f){const v=cv(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Va();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qf(e).X({index:"collectionGroupOverlayIndex",range:f},(m,v,D)=>{const S=cv(this.serializer,v);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):D.done()}).next(()=>a)}we(e,t){return Qf(e).put(function(r,i,a){const[c,f,m]=fT(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Zf(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function Qf(n){return ts(n,"documentOverlays")}class Gd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ii(e.integerValue));else if("doubleValue"in e){const r=ii(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),tc(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Fa(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?MD(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ft()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),bt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function $w(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function cc(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=$w(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Gd.Ve=new Gd;class gT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=cc(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=cc(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Uw{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class jw{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class lm{constructor(){this.je=new gT,this.ze=new Uw(this.je),this.We=new jw(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Jf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Jf(this.indexId,this.documentKey,this.arrayValue,r)}}function uc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mT(n.arrayValue,e.arrayValue),0!==t?t:(t=mT(n.directionalValue,e.directionalValue),0!==t?t:bt.comparator(n.documentKey,e.documentKey)))}function mT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Zx{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){nn(e.collectionGroup===this.collectionId);const t=QE(e);if(void 0!==t&&!this.en(t))return!1;const r=Md(e);let i=new Set,a=0,c=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++a}for(;a<r.length;++a)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function yT(n){var e,t;if(nn(n instanceof qn||n instanceof wr),n instanceof qn){if(n instanceof Tx){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>qn.create(n.field,"==",a)))||[];return wr.create(i,"or")}return n}const r=n.filters.map(i=>yT(i));return wr.create(r,n.op)}function Xx(n){if(0===n.getFilters().length)return[];const e=Gw(yT(n));return nn(Hw(e)),dv(e)||_T(e)?[e]:e.getFilters()}function dv(n){return n instanceof qn}function _T(n){return n instanceof wr&&cw(n)}function Hw(n){return dv(n)||_T(n)||function(e){if(e instanceof wr&&lw(e)){for(const t of e.getFilters())if(!dv(t)&&!_T(t))return!1;return!0}return!1}(n)}function Gw(n){if(nn(n instanceof qn||n instanceof wr),n instanceof qn)return n;if(1===n.filters.length)return Gw(n.filters[0]);const e=n.filters.map(r=>Gw(r));let t=wr.create(e,n.op);return t=ep(t),Hw(t)?t:(nn(t instanceof wr),nn(Vf(t)),nn(t.filters.length>1),t.filters.reduce((r,i)=>hv(r,i)))}function hv(n,e){let t;return nn(n instanceof qn||n instanceof wr),nn(e instanceof qn||e instanceof wr),t=n instanceof qn?e instanceof qn?wr.create([n,e],"and"):Qx(n,e):e instanceof qn?Qx(e,n):function(r,i){if(nn(r.filters.length>0&&i.filters.length>0),Vf(r)&&Vf(i))return dw(r,i.getFilters());const a=lw(r)?r:i,c=lw(r)?i:r,f=a.filters.map(m=>hv(m,c));return wr.create(f,"or")}(n,e),ep(t)}function Qx(n,e){if(Vf(e))return dw(e,n.getFilters());{const t=e.filters.map(r=>hv(n,r));return wr.create(t,"or")}}function ep(n){if(nn(n instanceof qn||n instanceof wr),n instanceof qn)return n;const e=n.getFilters();if(1===e.length)return ep(e[0]);if(PD(n))return n;const t=e.map(i=>ep(i)),r=[];return t.forEach(i=>{i instanceof qn?r.push(i):i instanceof wr&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:wr.create(r,n.op)}class vT{constructor(){this.rn=new fv}addToCollectionParentIndex(e,t){return this.rn.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ke.resolve()}deleteFieldIndex(e,t){return ke.resolve()}getDocumentsMatchingTarget(e,t){return ke.resolve(null)}getIndexType(e,t){return ke.resolve(0)}getFieldIndexes(e,t){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,t){return ke.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return ke.resolve(Is.min())}updateCollectionGroup(e,t,r){return ke.resolve()}updateIndexEntries(e,t){return ke.resolve()}}class fv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ur(Xn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ur(Xn.comparator)).toArray()}}const pv=new Uint8Array(0);class ET{constructor(e,t){this.user=e,this.databaseId=t,this.on=new fv,this.un=new oc(r=>kd(r),(r,i)=>sc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Ns(i)};return zw(e).put(a)}return ke.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[XE(t),""],!1,!0);return zw(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(nc(c.parent))}return r})}addFieldIndex(e,t){const r=zd(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=tp(e);return a.next(f=>{c.put(Lw(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=zd(e),i=tp(e),a=wl(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=wl(e);let i=!0;const a=new Map;return ke.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=An();const f=[];return ke.forEach(a,(m,v)=>{var D;ft("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(Nt=>`${Nt.fieldPath}:${Nt.kind}`).join(",")}`} to execute ${kd(t)}`);const S=function(Nt,Gt){const In=QE(Gt);if(void 0===In)return null;for(const Ln of Uf(Nt,In.fieldPath))switch(Ln.op){case"array-contains-any":return Ln.value.arrayValue.values||[];case"array-contains":return[Ln.value]}return null}(v,m),F=function(Nt,Gt){const In=new Map;for(const Ln of Md(Gt))for(const as of Uf(Nt,Ln.fieldPath))switch(as.op){case"==":case"in":In.set(Ln.fieldPath.canonicalString(),as.value);break;case"not-in":case"!=":return In.set(Ln.fieldPath.canonicalString(),as.value),Array.from(In.values())}return null}(v,m),Q=function(Nt,Gt){const In=[];let Ln=!0;for(const as of Md(Gt)){const Ga=0===as.kind?La(Nt,as.fieldPath,Nt.startAt):VD(Nt,as.fieldPath,Nt.startAt);In.push(Ga.value),Ln&&(Ln=Ga.inclusive)}return new Pd(In,Ln)}(v,m),me=function(Nt,Gt){const In=[];let Ln=!0;for(const as of Md(Gt)){const Ga=0===as.kind?VD(Nt,as.fieldPath,Nt.endAt):La(Nt,as.fieldPath,Nt.endAt);In.push(Ga.value),Ln&&(Ln=Ga.inclusive)}return new Pd(In,Ln)}(v,m),qe=this.hn(m,v,Q),et=this.hn(m,v,me),Mt=this.ln(m,v,F),jt=this.fn(m.indexId,S,qe,Q.inclusive,et,me.inclusive,Mt);return ke.forEach(jt,Nt=>r.H(Nt,t.limit).next(Gt=>{Gt.forEach(In=>{const Ln=bt.fromSegments(In.documentKey);c.has(Ln)||(c=c.add(Ln),f.push(Ln))})}))}).next(()=>f)}return ke.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Xx(wr.create(e.filters,"and")).map(r=>fw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,c,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),D=[];for(let S=0;S<m;++S){const F=t?this.dn(t[S/v]):pv,Q=this.wn(e,F,r[S%v],i),me=this._n(e,F,a[S%v],c),qe=f.map(et=>this.wn(e,F,et,!0));D.push(...this.createRange(Q,me,qe))}return D}wn(e,t,r,i){const a=new Jf(e,bt.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Jf(e,bt.empty(),t,r);return i?a.Je():a}an(e,t){const r=new Zx(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return ke.forEach(i,a=>this.an(e,a).next(c=>{c?0!==r&&c.fields.length<function(f){let m=new Ur(pi.comparator),v=!1;for(const D of f.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field));for(const D of f.orderBy)D.field.isKeyField()||(m=m.add(D.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new lm;for(const i of Md(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.He(i.kind);Gd.Ve._e(a,c)}return r.Qe()}dn(e){const t=new lm;return Gd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new lm;return Gd.Ve._e(uu(this.databaseId,t),r.He(function(i){const a=Md(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new lm);let a=0;for(const c of Md(e)){const f=r[a++];for(const m of i)if(this.yn(t,c.fieldPath)&&Lf(f))i=this.pn(i,c,f);else{const v=m.He(c.kind);Gd.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const m=new lm;m.seed(f.Qe()),Gd.Ve._e(c,m.He(t.kind)),a.push(m)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof qn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zd(e),i=tp(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return ke.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{c.push(function(v,D){const S=D?new Nf(D.sequenceNumber,new Is(lc(D.readTime),new bt(nc(D.documentKey)),D.largestBatchId)):Nf.empty(),F=v.fields.map(([Q,me])=>new jg(pi.fromServerFormat(Q),me));return new O_(v.indexId,v.collectionGroup,F,S)}(f,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Cn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zd(e),a=tp(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ke.forEach(f,m=>a.put(Lw(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ke.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ke.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ke.forEach(f,m=>this.En(e,i,m).next(v=>{const D=this.An(a,m);return v.isEqual(D)?ke.resolve():this.vn(e,a,m,v,D)}))))})}Rn(e,t,r,i){return wl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return wl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=wl(e);let a=new Ur(uc);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{a=a.add(new Jf(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new Ur(uc);const i=this.mn(t,e);if(null==i)return r;const a=QE(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Lf(c))for(const f of c.arrayValue.values||[])r=r.add(new Jf(t.indexId,e.key,this.dn(f),i))}else r=r.add(new Jf(t.indexId,e.key,pv,i));return r}vn(e,t,r,i,a){ft("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,m,v,D,S){const F=f.getIterator(),Q=m.getIterator();let me=Ff(F),qe=Ff(Q);for(;me||qe;){let et=!1,Mt=!1;if(me&&qe){const jt=v(me,qe);jt<0?Mt=!0:jt>0&&(et=!0)}else null!=me?Mt=!0:et=!0;et?(D(qe),qe=Ff(Q)):Mt?(S(me),me=Ff(F)):(me=Ff(F),qe=Ff(Q))}}(i,a,uc,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),ke.waitFor(c)}Tn(e){let t=1;return tp(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>uc(c,f)).filter((c,f,m)=>!f||0!==uc(c,m[f-1]));const i=[];i.push(e);for(const c of r){const f=uc(c,e),m=uc(c,t);if(0===f)i[0]=e.Je();else if(f>0&&m<0)i.push(c),i.push(c.Je());else if(m>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,pv,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,pv,[]]))}return a}bn(e,t){return uc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ww)}getMinOffset(e,t){return ke.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||Ft())).next(Ww)}}function zw(n){return ts(n,"collectionParents")}function wl(n){return ts(n,"indexEntries")}function zd(n){return ts(n,"indexConfiguration")}function tp(n){return ts(n,"indexState")}function Ww(n){nn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;JE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Is(e.readTime,e.documentKey,t)}const wT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Os{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Os(e,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Jx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.X({range:c},(D,S,F)=>(f++,F.delete()));a.push(m.next(()=>{nn(1===f)}));const v=[];for(const D of t.mutations){const S=mD(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return ke.waitFor(a).next(()=>v)}function cm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ft();e=n.noDocument}return JSON.stringify(e).length}Os.DEFAULT_COLLECTION_PERCENTILE=10,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Os.DEFAULT=new Os(41943040,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Os.DISABLED=new Os(-1,0,0);class gv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){nn(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new gv(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wd(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=um(e),c=Wd(e);return c.add({}).next(f=>{nn("number"==typeof f);const m=new nm(f,t,r,i),v=function(F,Q,me){const qe=me.baseMutations.map(Mt=>Zf(F.fe,Mt)),et=me.mutations.map(Mt=>Zf(F.fe,Mt));return{userId:Q,batchId:me.batchId,localWriteTimeMs:me.localWriteTime.toMillis(),baseMutations:qe,mutations:et}}(this.serializer,this.userId,m),D=[];let S=new Ur((F,Q)=>Cn(F.canonicalString(),Q.canonicalString()));for(const F of i){const Q=mD(this.userId,F.key.path,f);S=S.add(F.key.path.popLast()),D.push(c.put(v)),D.push(a.put(Q,ux))}return S.forEach(F=>{D.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.Vn[f]=m.keys()}),ke.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return Wd(e).get(t).next(r=>r?(nn(r.userId===this.userId),Hd(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ke.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Wd(e).X({index:"userMutationsIndex",range:i},(c,f,m)=>{f.userId===this.userId&&(nn(f.batchId>=r),a=Hd(this.serializer,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wd(e).j("userMutationsIndex",t).next(r=>r.map(i=>Hd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return um(e).X({range:i},(c,f,m)=>{const[v,D,S]=c,F=nc(D);if(v===this.userId&&t.path.isEqual(F))return Wd(e).get(S).next(Q=>{if(!Q)throw Ft();nn(Q.userId===this.userId),a.push(Hd(this.serializer,Q))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ur(Cn);const i=[];return t.forEach(a=>{const c=Gg(this.userId,a.path),f=IDBKeyRange.lowerBound(c),m=um(e).X({range:f},(v,D,S)=>{const[F,Q,me]=v,qe=nc(Q);F===this.userId&&a.path.isEqual(qe)?r=r.add(me):S.done()});i.push(m)}),ke.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Gg(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new Ur(Cn);return um(e).X({range:c},(m,v,D)=>{const[S,F,Q]=m,me=nc(F);S===this.userId&&r.isPrefixOf(me)?me.length===i&&(f=f.add(Q)):D.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Wd(e).get(a).next(c=>{if(null===c)throw Ft();nn(c.userId===this.userId),r.push(Hd(this.serializer,c))}))}),ke.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Jx(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ke.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ke.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return um(e).X({range:r},(a,c,f)=>{if(a[0]===this.userId){const m=nc(a[1]);i.push(m)}else f.done()}).next(()=>{nn(0===i.length)})})}containsKey(e,t){return IT(e,this.userId,t)}xn(e){return eR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function IT(n,e,t){const r=Gg(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return um(n).X({range:a,Y:!0},(f,m,v)=>{const[D,S,F]=f;D===e&&S===i&&(c=!0),v.done()}).next(()=>c)}function Wd(n){return ts(n,"mutations")}function um(n){return ts(n,"documentMutations")}function eR(n){return ts(n,"mutationQueues")}class pu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new pu(0)}static Mn(){return new pu(-1)}}class tR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new pu(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>en.fromTimestamp(new Wr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>np(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(nn(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return np(e).X((c,f)=>{const m=am(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ke.waitFor(a)).next(()=>i)}forEachTarget(e,t){return np(e).X((r,i)=>{const a=am(i);t(a)})}$n(e){return bT(e).get("targetGlobalKey").next(t=>(nn(null!==t),t))}On(e,t){return bT(e).put("targetGlobalKey",t)}Fn(e,t){return np(e).put(av(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=kd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return np(e).X({range:i,index:"queryTargetsIndex"},(c,f,m)=>{const v=am(f);sc(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=qd(e);return t.forEach(c=>{const f=Ns(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ke.waitFor(i)}removeMatchingKeys(e,t,r){const i=qd(e);return ke.forEach(t,a=>{const c=Ns(a.path);return ke.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=qd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qd(e);let a=An();return i.X({range:r,Y:!0},(c,f,m)=>{const v=nc(c[1]),D=new bt(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Ns(t.path),i=IDBKeyRange.bound([r],[XE(r)],!1,!0);let a=0;return qd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],m,v)=>{0!==c&&(a++,v.done())}).next(()=>a>0)}le(e,t){return np(e).get(t).next(r=>r?am(r):null)}}function np(n){return ts(n,"targets")}function bT(n){return ts(n,"targetGlobal")}function qd(n){return ts(n,"targetDocuments")}function nR([n,e],[t,r]){const i=Cn(n,t);return 0===i?Cn(e,r):i}class pP{constructor(e){this.Ln=e,this.buffer=new Ur(nR),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ft("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,tt.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){xd(r)?ft("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ec(r)}yield t.Qn(3e5)}))}}class gP{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ke.resolve(Po.ct);const r=new pP(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(wT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wT):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,c,f,m,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),R_()<=Oa.in.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-D}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class mv{constructor(e,t){this.db=e,this.garbageCollector=function CT(n,e){return new gP(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return yv(e,r)}removeReference(e,t,r){return yv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return yv(e,t)}Xn(e,t){return function(r,i){let a=!1;return eR(r).Z(c=>IT(r,c,i).next(f=>(f&&(a=!0),ke.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(c,f)=>{if(f<=t){const m=this.Xn(e,c).next(v=>{if(!v)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,en.min()),qd(e).delete([0,Ns(c.path)])))});i.push(m)}}).next(()=>ke.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return yv(e,t)}Yn(e,t){const r=qd(e);let i,a=Po.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:m,sequenceNumber:v})=>{0===c?(a!==Po.ct&&t(new bt(nc(i)),a),a=v,i=m):a=Po.ct}).next(()=>{a!==Po.ct&&t(new bt(nc(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yv(n,e){return qd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ns(e.path),sequenceNumber:r}));var r}class DT{constructor(){this.changes=new oc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ke.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TT{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return dc(e).put(r)}removeEntry(e,t,r){return dc(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],is(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=qr.newInvalidDocument(t);return dc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(dm(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:qr.newInvalidDocument(t)};return dc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(dm(t))},(i,a)=>{r={document:this.ts(t,a),size:cm(a)}}).next(()=>r)}getEntries(e,t){let r=Js();return this.ns(e,t,(i,a)=>{const c=this.ts(i,a);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Js(),i=new $r(bt.comparator);return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);r=r.insert(a,f),i=i.insert(a,cm(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ke.resolve();let i=new Ur(Ev);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(dm(i.first()),dm(i.last())),c=i.getIterator();let f=c.getNext();return dc(e).X({index:"documentKeyIndex",range:a},(m,v,D)=>{const S=bt.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&Ev(f,S)<0;)r(f,null),f=c.getNext();f&&f.isEqual(S)&&(r(f,v),f=c.hasNext()?c.getNext():null),f?D.G(dm(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),is(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dc(e).j(IDBKeyRange.bound(c,f,!0)).next(m=>{let v=Js();for(const D of m){const S=this.ts(bt.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(Qg(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=Js();const c=vv(t,r),f=vv(t,Is.max());return dc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(m,v,D)=>{const S=this.ts(bt.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new ST(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _v(e).get("remoteDocumentGlobalKey").next(t=>(nn(!!t),t))}Zn(e,t){return _v(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function Yx(n,e){let t;if(e.document)t=jx(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=bt.fromSegments(e.noDocument.path),i=lc(e.noDocument.readTime);t=qr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ft();{const r=bt.fromSegments(e.unknownDocument.path),i=lc(e.unknownDocument.version);t=qr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Wr(r[0],r[1]);return en.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(en.min()))return r}return qr.newInvalidDocument(e)}}function gu(n){return new TT(n)}class ST extends DT{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new oc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ur((a,c)=>Cn(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),c.isValidDocument()){const m=Kx(this.os.serializer,c);i=i.add(a.path.popLast());const v=cm(m);r+=v-f.size,t.push(this.os.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=Kx(this.os.serializer,c.convertToNoDocument(en.min()));t.push(this.os.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ke.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,c)=>{this.us.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function _v(n){return ts(n,"remoteDocumentGlobal")}function dc(n){return ts(n,"remoteDocumentsV14")}function dm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vv(n,e){const t=e.documentKey.path.toArray();return[n,is(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ev(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Cn(t[a],r[a]),i)return i;return i=Cn(t.length,r.length),i||(i=Cn(t[t.length-2],r[r.length-2]),i||Cn(t[t.length-1],r[r.length-1]))}class wv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iR{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Wf(r.mutation,i,Xs.empty(),Wr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,An()).next(()=>r))}getLocalViewOfDocuments(e,t,r=An()){const i=Va();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Gf();return a.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Va();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,An()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=Js();const c=em(),f=em();return t.forEach((m,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof $a)?a=a.insert(v.key,v):void 0!==D?(c.set(v.key,D.mutation.getFieldMask()),Wf(D.mutation,v,D.mutation.getFieldMask(),Wr.now())):c.set(v.key,Xs.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,D)=>c.set(v,D)),t.forEach((v,D)=>{var S;return f.set(v,new wv(D,null!==(S=c.get(v))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=em();let i=new $r((c,f)=>c-f),a=An();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let D=r.get(m)||Xs.empty();D=f.applyToLocalView(v,D),r.set(m,D);const S=(i.get(f.batchId)||An()).add(m);i=i.insert(f.batchId,S)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,D=m.value,S=_w();D.forEach(F=>{if(!a.has(F)){const Q=Px(t.get(F),r.get(F));null!==Q&&S.set(F,Q),a=a.add(F)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ke.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return bt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):z_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ke.resolve(Va());let f=-1,m=a;return c.next(v=>ke.forEach(v,(D,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(D)?ke.resolve():this.remoteDocumentCache.getEntry(e,D).next(F=>{m=m.insert(D,F)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,An())).next(D=>({batchId:f,changes:jD(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new bt(t)).next(r=>{let i=Gf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Gf();return this.indexManager.getCollectionParents(e,i).next(c=>ke.forEach(c,f=>{const m=(v=t,D=f.child(i),new Ba(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,qr.newInvalidDocument(v)))});let c=Gf();return a.forEach((f,m)=>{const v=i.get(f);void 0!==v&&Wf(v.mutation,m,Xs.empty(),Wr.now()),Qg(t,m)&&(c=c.insert(f,m))}),c})}}class mP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ke.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Oi(r.createTime)}),ke.resolve()}getNamedQuery(e,t){return ke.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:lv(r.bundledQuery),readTime:Oi(r.readTime)}),ke.resolve();var r}}class yP{constructor(){this.overlays=new $r(bt.comparator),this.ls=new Map}getOverlay(e,t){return ke.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Va();return ke.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ke.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ke.resolve()}getOverlaysForCollection(e,t,r){const i=Va(),a=t.length+1,c=new bt(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new $r((v,D)=>v-D);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=Va(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const f=Va(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>f.set(v,D)),!(f.size()>=i)););return ke.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Dw(t,r));let a=this.ls.get(t);void 0===a&&(a=An(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class Iv{constructor(){this.fs=new Ur(ss.ds),this.ws=new Ur(ss._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ss(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ss(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new bt(new Xn([])),r=new ss(t,e),i=new ss(t,e+1),a=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new bt(new Xn([])),r=new ss(t,e),i=new ss(t,e+1);let a=An();return this.ws.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new ss(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ss{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return bt.comparator(e.key,t.key)||Cn(e.As,t.As)}static _s(e,t){return Cn(e.As,t.As)||bt.comparator(e.key,t.key)}}class sR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ur(ss.ds)}checkEmpty(e){return ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const c=new nm(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new ss(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ke.resolve(c)}lookupMutationBatch(e,t){return ke.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ke.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ss(t,0),i=new ss(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);a.push(f)}),ke.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ur(Cn);return t.forEach(i=>{const a=new ss(i,0),c=new ss(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],f=>{r=r.add(f.As)})}),ke.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;bt.isDocumentKey(a)||(a=a.child(""));const c=new ss(new bt(a),0);let f=new Ur(Cn);return this.Rs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.As)),!0)},c),ke.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){nn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ke.forEach(t.mutations,i=>{const a=new ss(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ss(t,0),i=this.Rs.firstAfterOrEqual(r);return ke.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ke.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oR{constructor(e){this.Ds=e,this.docs=new $r(bt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ke.resolve(r?r.document.mutableCopy():qr.newInvalidDocument(t))}getEntries(e,t){let r=Js();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():qr.newInvalidDocument(i))}),ke.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Js();const c=t.path,f=new bt(c.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:D}}=m.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||JE(Of(D),r)<=0||(i.has(D.key)||Qg(t,D))&&(a=a.insert(D.key,D.mutableCopy()))}return ke.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Ft()}Cs(e,t){return ke.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aR(this)}getSize(e){return ke.resolve(this.size)}}class aR extends DT{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ke.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class AT{constructor(e){this.persistence=e,this.xs=new oc(t=>kd(t),sc),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Iv,this.targetCount=0,this.Ms=pu.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ke.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new pu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.Fn(t),ke.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ke.waitFor(a).next(()=>i)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ke.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ke.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ke.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ke.resolve(r)}containsKey(e,t){return ke.resolve(this.ks.containsKey(t))}}class bv{constructor(e,t){this.$s={},this.overlays={},this.Os=new Po(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new AT(this),this.indexManager=new vT,this.remoteDocumentCache=new oR(r=>this.referenceDelegate.Ls(r)),this.serializer=new Fw(t),this.qs=new mP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new sR(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ft("MemoryPersistence","Starting transaction:",e);const i=new MT(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ke.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class MT extends hD{constructor(e){super(),this.currentSequenceNumber=e}}class Cv{constructor(e){this.persistence=e,this.Qs=new Iv,this.js=null}static zs(e){return new Cv(e)}get Ws(){if(this.js)return this.js;throw Ft()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ke.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Ws,r=>{const i=bt.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,en.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ke.or([()=>ke.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class xT{constructor(e){this.serializer=e}O(e,t,r,i){const a=new F_("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gD,{unique:!0}),f.createObjectStore("documentMutations"),Tv(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ke.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Tv(e)),c=c.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:en.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,m){return m.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gD,{unique:!0});const D=m.store("mutations"),S=v.map(F=>D.put(F));return ke.waitFor(S)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(a))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:wD});m.createIndex("collectionPathOverlayIndex",mx,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",yx,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:zg});m.createIndex("documentKeyIndex",dx),m.createIndex("collectionGroupIndex",yD)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:px}).createIndex("sequenceNumberIndex",ew,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:gx}).createIndex("documentKeyIndex",ED,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=cm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ke.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>ke.forEach(f,m=>{nn(m.userId===a.userId);const v=Hd(this.serializer,m);return Jx(e,a.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,f)=>{const m=new Xn(c),v=[0,Ns(m)];a.push(t.get(v).next(D=>D?ke.resolve():t.put({targetId:0,path:Ns(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ke.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:vD});const r=t.store("collectionParents"),i=new fv,a=c=>{if(i.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:Ns(m)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const m=new Xn(c);return a(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,m],v)=>{const D=nc(f);return a(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=am(i),c=av(this.serializer,a);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const f=t.store("remoteDocumentsV14"),m=(v=c,v.document?new bt(Xn.fromString(v.document.name).popFirst(5)):v.noDocument?bt.fromSegments(v.noDocument.path):v.unknownDocument?bt.fromSegments(v.unknownDocument.path):Ft()).path.toArray();var v;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(D))}).next(()=>ke.waitFor(i))}si(e,t){const r=t.store("mutations"),i=gu(this.serializer),a=new bv(Cv.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(m=>{var v;let D=null!==(v=f.get(m.userId))&&void 0!==v?v:An();Hd(this.serializer,m).keys().forEach(S=>D=D.add(S)),f.set(m.userId,D)}),ke.forEach(f,(m,v)=>{const D=new Hi(v),S=uv.de(this.serializer,D),F=a.getIndexManager(D),Q=gv.de(D,this.serializer,F,a.referenceDelegate);return new iR(i,Q,S,F).recalculateAndSaveOverlaysForDocumentKeys(new rw(t,Po.ct),m).next()})})}}function Tv(n){n.createObjectStore("targetDocuments",{keyPath:_D}).createIndex("documentTargetsIndex",fx,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hx,{unique:!0}),n.createObjectStore("targetGlobal")}const RT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sv{constructor(e,t,r,i,a,c,f,m,v,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=c,this.document=f,this.ri=v,this.oi=D,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=F=>Promise.resolve(),!Sv.D())throw new at(ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mv(this,i),this.di=t+"main",this.serializer=new Fw(m),this.wi=new aa(this.di,this.ui,new xT(this.serializer)),this.Bs=new tR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gu(this.serializer),this.qs=new pT,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new at(ze.FAILED_PRECONDITION,RT);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Po(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,tt.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,tt.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,tt.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Av(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(xd(e))return ft("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ft("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Yd(e).get("owner").next(t=>ke.resolve(this.Ri(t)))}Pi(e){return Av(e).delete(this.clientId)}bi(){var e=this;return(0,tt.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ts(r,"clientMetadata");return i.j().next(a=>{const c=e.Si(a,18e5),f=a.filter(m=>-1===c.indexOf(m));return ke.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ke.resolve(!0):Yd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new at(ze.FAILED_PRECONDITION,RT);return!1}}return!(!this.networkEnabled||!this.inForeground)||Av(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ft("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,tt.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new rw(t,Po.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Av(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return gv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ET(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return uv.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ft("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ui)?_x:14===c?nw:13===c?bD:12===c?tw:11===c?ID:void Ft();var c;let f;return this.wi.runTransaction(e,i,a,m=>(f=new rw(m,this.Os?this.Os.next():Po.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new at(ze.FAILED_PRECONDITION,dD);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Oi(e){return Yd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new at(ze.FAILED_PRECONDITION,RT)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yd(e).put("owner",t)}static D(){return aa.D()}Ai(e){const t=Yd(e);return t.get("owner").next(r=>this.Ri(r)?(ft("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ke.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,j.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ft("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yd(n){return ts(n,"owner")}function Av(n){return ts(n,"clientMetadata")}function qw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class NT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=An(),i=An();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new NT(e,t.fromCache,r,i)}}class lR{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if($D(t))return ke.resolve(null);let r=Qs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=W_(t,null,"F"),r=Qs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=An(...a);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.ji(t,f);return this.zi(t,v,c,m.readTime)?this.Ki(e,W_(t,null,"F")):this.Wi(e,v,t,m)}))})))}Gi(e,t,r,i){return $D(t)||i.isEqual(en.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,i)?this.Qi(e,t):(R_()<=Oa.in.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mw(t)),this.Wi(e,c,t,uD(i,-1)))})}ji(e,t){let r=new Ur(Jg(e));return t.forEach((i,a)=>{Qg(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return R_()<=Oa.in.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",mw(t)),this.Ui.getDocumentsMatchingQuery(e,t,Is.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class cR{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new $r(Cn),this.Yi=new oc(a=>kd(a),sc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iR(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function OT(n,e,t,r){return new cR(n,e,t,r)}function PT(n,e){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,tt.Z)(function*(n,e){const t=Pt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let m=An();for(const v of i){c.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of a){f.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(v=>({er:v,removedBatchIds:c,addedBatchIds:f}))})})}),Yw.apply(this,arguments)}function Kw(n){const e=Pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function FT(n,e,t){let r=An(),i=An();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Js();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(en.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):ft("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{nr:c,sr:i}})}function Zw(n,e){const t=Pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kd(n,e){const t=Pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ke.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new Wi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Zd(n,e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,tt.Z)(function*(n,e,t){const r=Pt(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!xd(c))throw c;ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),Xw.apply(this,arguments)}function rp(n,e,t){const r=Pt(n);let i=en.min(),a=An();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,m,v){const D=Pt(f),S=D.Yi.get(v);return void 0!==S?ke.resolve(D.Ji.get(S)):D.Bs.getTargetData(m,v)}(r,c,Qs(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(m=>{a=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:en.min(),t?a:An())).next(f=>(Qw(r,yw(e),f),{documents:f,ir:a})))}function LT(n,e){const t=Pt(n),r=Pt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(c=>c?c.target:null))}function BT(n,e){const t=Pt(n),r=t.Xi.get(e)||en.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,uD(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Qw(t,e,i),i))}function Qw(n,e,t){let r=n.Xi.get(e)||en.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function $T(){return $T=(0,tt.Z)(function*(n,e,t,r){const i=Pt(n);let a=An(),c=Js();for(const v of t){const D=e.rr(v.metadata.name);v.document&&(a=a.add(D));const S=e.ur(v);S.setReadTime(e.cr(v.metadata.readTime)),c=c.insert(D,S)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield Kd(i,(v=r,Qs(Hf(Xn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>FT(v,f,c).next(D=>(f.apply(v),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Bs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,D.nr,D.sr)).next(()=>D.nr)))}),$T.apply(this,arguments)}function uR(n,e){return ip.apply(this,arguments)}function ip(){return ip=(0,tt.Z)(function*(n,e,t=An()){const r=yield Kd(n,Qs(lv(e.bundledQuery))),i=Pt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Oi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(Gi.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),ip.apply(this,arguments)}function dR(n,e){return`firestore_clients_${n}_${e}`}function UT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jT(n,e){return`firestore_targets_${n}_${e}`}class Jw{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new at(i.error.code,i.error.message))),c?new Jw(e,t,i.state,a):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new at(r.error.code,r.error.message))),a?new hm(e,r.state,i):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=tm();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=fD(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new eI(e,a):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class HT{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new HT(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class GT{constructor(){this.activeTargetIds=tm()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zT{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new $r(Cn),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=dR(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new GT),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,tt.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(dR(e.persistenceKey,i));if(a){const c=eI.ar(i,a);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jT(this.persistenceKey,e));if(r){const i=hm.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jT(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ft("SharedClientState","READ",e,t),t}setItem(e,t){ft("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ft("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ft("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,tt.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let c=Po.ct;if(null!=a)try{const f=JSON.parse(a);nn("number"==typeof f),c=f}catch(f){Pr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Po.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new Jw(this.currentUser,e,t,r),a=UT(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=UT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=jT(this.persistenceKey,e),a=new hm(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return eI.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return Jw.ar(new Hi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return hm.ar(i,t)}br(e){return HT.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,tt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ft("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),c=[],f=[];return a.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=tm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class hR{constructor(){this.Hr=new GT,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new GT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fR{Yr(e){}shutdown(){}}class pR{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tI=null;function WT(){return null===tI?tI=268435456+Math.round(2147483648*Math.random()):tI++,"0x"+tI.toString(16)}const vP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gR{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ps="WebChannelConnection";class EP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const c=WT(),f=this.To(e,t);ft("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const m={};return this.Eo(m,i,a),this.Ao(e,f,m,r).then(v=>(ft("RestConnection",`Received RPC '${e}' ${c}: `,v),v),v=>{throw oa("RestConnection",`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,a,c){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ad,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${vP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=WT();return new Promise((c,f)=>{const m=new oD;m.setWithCredentials(!0),m.listenOnce(QM.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case WE.NO_ERROR:const D=m.getResponseJson();ft(Ps,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(D)),c(D);break;case WE.TIMEOUT:ft(Ps,`RPC '${e}' ${a} timed out`),f(new at(ze.DEADLINE_EXCEEDED,"Request time out"));break;case WE.HTTP_ERROR:const S=m.getStatus();if(ft(Ps,`RPC '${e}' ${a} failed with status:`,S,"response text:",m.getResponseText()),S>0){let F=m.getResponseJson();Array.isArray(F)&&(F=F[0]);const Q=F?.error;if(Q&&Q.status&&Q.message){const me=function(qe){const et=qe.toLowerCase().replace(/_/g,"-");return Object.values(ze).indexOf(et)>=0?et:ze.UNKNOWN}(Q.status);f(new at(me,Q.message))}else f(new at(ze.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new at(ze.UNAVAILABLE,"Connection failed."));break;default:Ft()}}finally{ft(Ps,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);ft(Ps,`RPC '${e}' ${a} sending request:`,i),m.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=WT(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ZM(),f=XM(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.xmlHttpFactory=new ex({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const D=a.join("");ft(Ps,`Creating RPC '${e}' stream ${i}: ${D}`,m);const S=c.createWebChannel(D,m);let F=!1,Q=!1;const me=new gR({ro:et=>{Q?ft(Ps,`Not sending because RPC '${e}' stream ${i} is closed:`,et):(F||(ft(Ps,`Opening RPC '${e}' stream ${i} transport.`),S.open(),F=!0),ft(Ps,`RPC '${e}' stream ${i} sending:`,et),S.send(et))},oo:()=>S.close()}),qe=(et,Mt,jt)=>{et.listen(Mt,Nt=>{try{jt(Nt)}catch(Gt){setTimeout(()=>{throw Gt},0)}})};return qe(S,$g.EventType.OPEN,()=>{Q||ft(Ps,`RPC '${e}' stream ${i} transport opened.`)}),qe(S,$g.EventType.CLOSE,()=>{Q||(Q=!0,ft(Ps,`RPC '${e}' stream ${i} transport closed`),me.wo())}),qe(S,$g.EventType.ERROR,et=>{Q||(Q=!0,oa(Ps,`RPC '${e}' stream ${i} transport errored:`,et),me.wo(new at(ze.UNAVAILABLE,"The operation could not be completed")))}),qe(S,$g.EventType.MESSAGE,et=>{var Mt;if(!Q){const jt=et.data[0];nn(!!jt);const Gt=jt.error||(null===(Mt=jt[0])||void 0===Mt?void 0:Mt.error);if(Gt){ft(Ps,`RPC '${e}' stream ${i} received error:`,Gt);const In=Gt.status;let Ln=function(Ga){const o0=zi[Ga];if(void 0!==o0)return Sw(o0)}(In),as=Gt.message;void 0===Ln&&(Ln=ze.INTERNAL,as="Unknown error status: "+In+" with message "+Gt.message),Q=!0,me.wo(new at(Ln,as)),S.close()}else ft(Ps,`RPC '${e}' stream ${i} received:`,jt),me._o(jt)}}),qe(f,JM.STAT_EVENT,et=>{et.stat===sD.PROXY?ft(Ps,`RPC '${e}' stream ${i} detected buffering proxy`):et.stat===sD.NOPROXY&&ft(Ps,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{me.fo()},0),me}}function s(){return typeof window<"u"?window:null}function o(){return typeof document<"u"?document:null}function l(n){return new oT(n,!0)}class d{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class h{constructor(e,t,r,i,a,c,f,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new d(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,tt.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,tt.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,tt.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ze.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ze.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new at(ze.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,tt.Z)(function*(){e.state=0,e.start()}))}tu(e){return ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p extends h{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Nw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:Ft(),i=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(nn(void 0===v||"string"==typeof v),Gi.fromBase64String(v||"")):(nn(void 0===v||v instanceof Uint8Array),Gi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(m){const v=void 0===m.code?ze.UNKNOWN:Sw(m.code);return new at(v,m.message||"")}(c);t=new eT(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=ac(n,r.document.name),a=Oi(r.document.updateTime),c=r.document.createTime?Oi(r.document.createTime):en.min(),f=new rs({mapValue:{fields:r.document.fields}}),m=qr.newFoundDocument(i,a,c,f);t=new om(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=ac(n,r.document),a=r.readTime?Oi(r.readTime):en.min(),c=qr.newNoDocument(i,a);t=new om([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ac(n,r.document);t=new om([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ft();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new Tw(i,a);t=new xw(r.targetId,c)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return en.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?en.min():a.readTime?Oi(a.readTime):en.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=sv(this.serializer),t.addTarget=function(i,a){let c;const f=a.target;if(c=G_(f)?{documents:uT(i,f)}:{query:dT(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=aT(i,a.resumeToken);const m=nv(i,a.expectedCount);null!==m&&(c.expectedCount=m)}else if(a.snapshotVersion.compareTo(en.min())>0){c.readTime=$d(i,a.snapshotVersion.toTimestamp());const m=nv(i,a.expectedCount);null!==m&&(c.expectedCount=m)}return c}(this.serializer,e);const r=function fP(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=sv(this.serializer),t.removeTarget=e,this.Wo(t)}}class _ extends h{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(nn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function ov(n,e){return n&&n.length>0?(nn(void 0!==e),n.map(t=>function(r,i){let a=Oi(r.updateTime?r.updateTime:i);return a.isEqual(en.min())&&(a=Oi(i)),new eo(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Oi(e.commitTime);return this.listener.cu(r,t)}return nn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=sv(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Zf(this.serializer,r))};this.Wo(t)}}class I extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new at(ze.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new at(ze.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new at(ze.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class P{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Pr(t),this.mu=!1):ft("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Y{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,tt.Z)(function*(){var m;si(c)&&(ft("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,tt.Z)(function*(v){const D=Pt(v);D.vu.add(4),yield rt(D),D.bu.set("Unknown"),D.vu.delete(4),yield _e(D)}),function(v){return m.apply(this,arguments)})(c))}))}),this.bu=new P(r,i)}}function _e(n){return xe.apply(this,arguments)}function xe(){return xe=(0,tt.Z)(function*(n){if(si(n))for(const e of n.Ru)yield e(!0)}),xe.apply(this,arguments)}function rt(n){return ht.apply(this,arguments)}function ht(){return ht=(0,tt.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),ht.apply(this,arguments)}function Tt(n,e){const t=Pt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),jn(t)?Bn(t):xv(t).Ko()&&st(t,e))}function Kt(n,e){const t=Pt(n),r=xv(t);t.Au.delete(e),r.Ko()&&Dn(t,e),0===t.Au.size&&(r.Ko()?r.jo():si(t)&&t.bu.set("Unknown"))}function st(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(en.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xv(n).su(e)}function Dn(n,e){n.Vu.qt(e),xv(n).iu(e)}function Bn(n){n.Vu=new tT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),xv(n).start(),n.bu.gu()}function jn(n){return si(n)&&!xv(n).Uo()&&n.Au.size>0}function si(n){return 0===Pt(n).vu.size}function fm(n){n.Vu=void 0}function mR(n){return nI.apply(this,arguments)}function nI(){return nI=(0,tt.Z)(function*(n){n.Au.forEach((e,t)=>{st(n,e)})}),nI.apply(this,arguments)}function CV(n,e){return yR.apply(this,arguments)}function yR(){return yR=(0,tt.Z)(function*(n,e){fm(n),jn(n)?(n.bu.Iu(e),Bn(n)):n.bu.set("Unknown")}),yR.apply(this,arguments)}function DV(n,e,t){return _R.apply(this,arguments)}function _R(){return _R=(0,tt.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof eT&&2===e.state&&e.cause)try{yield(r=(0,tt.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qT(n,r)}else if(e instanceof om?n.Vu.Ht(e):e instanceof xw?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(en.min()))try{const r=yield Kw(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Vu.ce(a);return c.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(m);v&&i.Au.set(m,v.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach((f,m)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(Gi.EMPTY_BYTE_STRING,v.snapshotVersion)),Dn(i,f);const D=new Wi(v.target,f,m,v.sequenceNumber);st(i,D)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ft("RemoteStore","Failed to raise snapshot:",r),yield qT(n,r)}var r}),_R.apply(this,arguments)}function qT(n,e,t){return vR.apply(this,arguments)}function vR(){return vR=(0,tt.Z)(function*(n,e,t){if(!xd(e))throw e;n.vu.add(1),yield rt(n),n.bu.set("Offline"),t||(t=()=>Kw(n.localStore)),n.asyncQueue.enqueueRetryable((0,tt.Z)(function*(){ft("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield _e(n)}))}),vR.apply(this,arguments)}function wP(n,e){return e().catch(t=>qT(n,t,e))}function Mv(n){return ER.apply(this,arguments)}function ER(){return ER=(0,tt.Z)(function*(n){const e=Pt(n),t=sp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;TV(e);)try{const i=yield Zw(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,SV(e,i)}catch(i){yield qT(e,i)}IP(e)&&bP(e)}),ER.apply(this,arguments)}function TV(n){return si(n)&&n.Eu.length<10}function SV(n,e){n.Eu.push(e);const t=sp(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function IP(n){return si(n)&&!sp(n).Uo()&&n.Eu.length>0}function bP(n){sp(n).start()}function AV(n){return wR.apply(this,arguments)}function wR(){return wR=(0,tt.Z)(function*(n){sp(n).hu()}),wR.apply(this,arguments)}function MV(n){return IR.apply(this,arguments)}function IR(){return IR=(0,tt.Z)(function*(n){const e=sp(n);for(const t of n.Eu)e.uu(t.mutations)}),IR.apply(this,arguments)}function xV(n,e,t){return bR.apply(this,arguments)}function bR(){return bR=(0,tt.Z)(function*(n,e,t){const r=n.Eu.shift(),i=J_.from(r,e,t);yield wP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Mv(n)}),bR.apply(this,arguments)}function RV(n,e){return CR.apply(this,arguments)}function CR(){return CR=(0,tt.Z)(function*(n,e){var t;e&&sp(n).ou&&(yield(t=(0,tt.Z)(function*(r,i){if(XD(a=i.code)&&a!==ze.ABORTED){const c=r.Eu.shift();sp(r).Qo(),yield wP(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Mv(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),IP(n)&&bP(n)}),CR.apply(this,arguments)}function CP(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,tt.Z)(function*(n,e){const t=Pt(n);t.asyncQueue.verifyOperationInProgress(),ft("RemoteStore","RemoteStore received new credentials");const r=si(t);t.vu.add(3),yield rt(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield _e(t)}),DR.apply(this,arguments)}function TR(n,e){return SR.apply(this,arguments)}function SR(){return SR=(0,tt.Z)(function*(n,e){const t=Pt(n);e?(t.vu.delete(2),yield _e(t)):e||(t.vu.add(2),yield rt(t),t.bu.set("Unknown"))}),SR.apply(this,arguments)}function xv(n){return n.Su||(n.Su=function(e,t,r){const i=Pt(e);return i.fu(),new p(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:mR.bind(null,n),ao:CV.bind(null,n),nu:DV.bind(null,n)}),n.Ru.push(function(){var e=(0,tt.Z)(function*(t){t?(n.Su.Qo(),jn(n)?Bn(n):n.bu.set("Unknown")):(yield n.Su.stop(),fm(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function sp(n){return n.Du||(n.Du=function(e,t,r){const i=Pt(e);return i.fu(),new _(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:AV.bind(null,n),ao:RV.bind(null,n),au:MV.bind(null,n),cu:xV.bind(null,n)}),n.Ru.push(function(){var e=(0,tt.Z)(function*(t){t?(n.Du.Qo(),yield Mv(n)):(yield n.Du.stop(),n.Eu.length>0&&(ft("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class AR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new AR(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new at(ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rv(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),xd(n))return new at(ze.UNAVAILABLE,`${e}: ${n}`);throw n}class Nv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||bt.comparator(t.key,r.key):(t,r)=>bt.comparator(t.key,r.key),this.keyedMap=Gf(),this.sortedSet=new $r(this.comparator)}static emptySet(e){return new Nv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Nv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DP{constructor(){this.Cu=new $r(bt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ft():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ov{constructor(e,t,r,i,a,c,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Ov(e,t,Nv.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class NV{constructor(){this.Nu=void 0,this.listeners=[]}}class OV{constructor(){this.queries=new oc(e=>gw(e),Xg),this.onlineState="Unknown",this.ku=new Set}}function MR(n,e){return xR.apply(this,arguments)}function xR(){return xR=(0,tt.Z)(function*(n,e){const t=Pt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new NV),i)try{a.Nu=yield t.onListen(r)}catch(c){const f=Rv(c,`Initialization of query '${mw(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&OR(t)}),xR.apply(this,arguments)}function RR(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,tt.Z)(function*(n,e){const t=Pt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),NR.apply(this,arguments)}function PV(n,e){const t=Pt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&OR(t)}function kV(n,e,t){const r=Pt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function OR(n){n.ku.forEach(e=>{e.next()})}class PR{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ov(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ov.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class FV{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class TP{constructor(e){this.serializer=e}rr(e){return ac(this.serializer,e)}ur(e){return e.metadata.exists?jx(this.serializer,e.document,!1):qr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Oi(e)}}class LV{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SP(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Xn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new TP(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||An()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,tt.Z)(function*(){const t=yield function VT(n,e,t,r){return $T.apply(this,arguments)}(e.localStore,new TP(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield uR(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function SP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class AP{constructor(e){this.key=e}}class MP{constructor(e){this.key=e}}class xP{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=An(),this.mutatedKeys=An(),this.tc=Jg(e),this.ec=new Nv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new DP,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const F=i.get(D),Q=Qg(this.query,S)?S:null,me=!!F&&this.mutatedKeys.has(F.key),qe=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let et=!1;F&&Q?F.data.isEqual(Q.data)?me!==qe&&(r.track({type:3,doc:Q}),et=!0):this.rc(F,Q)||(r.track({type:2,doc:Q}),et=!0,(m&&this.tc(Q,m)>0||v&&this.tc(Q,v)<0)&&(f=!0)):!F&&Q?(r.track({type:0,doc:Q}),et=!0):F&&!Q&&(r.track({type:1,doc:F}),et=!0,(m||v)&&(f=!0)),et&&(Q?(c=c.add(Q),a=qe?a.add(D):a.delete(D)):(c=c.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{ec:c,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,D)=>function(S,F){const Q=me=>{switch(me){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft()}};return Q(S)-Q(F)}(v.type,D.type)||this.tc(v.doc,D.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,m=f!==this.Xu;return this.Xu=f,0!==a.length||m?{snapshot:new Ov(this.query,e.ec,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new DP,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=An(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new MP(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new AP(r))}),t}hc(e){this.Yu=e.ir,this.Zu=An();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ov.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class BV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VV{constructor(e){this.key=e,this.fc=!1}}class $V{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new oc(f=>gw(f),Xg),this._c=new Map,this.mc=new Set,this.gc=new $r(bt.comparator),this.yc=new Map,this.Ic=new Iv,this.Tc={},this.Ec=new Map,this.Ac=pu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function UV(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,tt.Z)(function*(n,e){const t=i1(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const c=yield Kd(t.localStore,Qs(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield FR(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&Tt(t.remoteStore,c)}return i}),kR.apply(this,arguments)}function FR(n,e,t,r,i){return LR.apply(this,arguments)}function LR(){return LR=(0,tt.Z)(function*(n,e,t,r,i){n.Rc=(S,F,Q)=>{return(me=(0,tt.Z)(function*(qe,et,Mt,jt){let Nt=et.view.sc(Mt);Nt.zi&&(Nt=yield rp(qe.localStore,et.query,!1).then(({documents:Ln})=>et.view.sc(Ln,Nt)));const Gt=jt&&jt.targetChanges.get(et.targetId),In=et.view.applyChanges(Nt,qe.isPrimaryClient,Gt);return qR(qe,et.targetId,In.cc),In.snapshot}),function(qe,et,Mt,jt){return me.apply(this,arguments)})(n,S,F,Q);var me};const a=yield rp(n.localStore,e,!0),c=new xP(e,a.ir),f=c.sc(a.documents),m=sm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=c.applyChanges(f,n.isPrimaryClient,m);qR(n,t,v.cc);const D=new BV(e,t,c);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),LR.apply(this,arguments)}function jV(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,tt.Z)(function*(n,e){const t=Pt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!Xg(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Zd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Kt(t.remoteStore,r.targetId),Pv(t,r.targetId)}).catch(ec))):(Pv(t,r.targetId),yield Zd(t.localStore,r.targetId,!0))}),BR.apply(this,arguments)}function VR(){return VR=(0,tt.Z)(function*(n,e,t){const r=s1(n);try{const i=yield function(a,c){const f=Pt(a),m=Wr.now(),v=c.reduce((F,Q)=>F.add(Q.key),An());let D,S;return f.persistence.runTransaction("Locally write mutations","readwrite",F=>{let Q=Js(),me=An();return f.Zi.getEntries(F,v).next(qe=>{Q=qe,Q.forEach((et,Mt)=>{Mt.isValidDocument()||(me=me.add(et))})}).next(()=>f.localDocuments.getOverlayedDocuments(F,Q)).next(qe=>{D=qe;const et=[];for(const Mt of c){const jt=Iw(Mt,D.get(Mt.key).overlayedDocument);null!=jt&&et.push(new $a(Mt.key,jt,xD(jt.value.mapValue),Ir.exists(!0)))}return f.mutationQueue.addMutationBatch(F,m,et,c)}).next(qe=>{S=qe;const et=qe.applyToLocalDocumentSet(D,me);return f.documentOverlayCache.saveOverlays(F,qe.batchId,et)})}).then(()=>({batchId:S.batchId,changes:jD(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let m=a.Tc[a.currentUser.toKey()];m||(m=new $r(Cn)),m=m.insert(c,f),a.Tc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Xd(r,i.changes),yield Mv(r.remoteStore)}catch(i){const a=Rv(i,"Failed to persist write");t.reject(a)}}),VR.apply(this,arguments)}function RP(n,e){return $R.apply(this,arguments)}function $R(){return $R=(0,tt.Z)(function*(n,e){const t=Pt(n);try{const r=yield function _P(n,e){const t=Pt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((D,S)=>{const F=i.get(S);if(!F)return;f.push(t.Bs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(a,D.addedDocuments,S)));let Q=F.withSequenceNumber(a.currentSequenceNumber);var me,qe,et;null!==e.targetMismatches.get(S)?Q=Q.withResumeToken(Gi.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):D.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(D.resumeToken,r)),i=i.insert(S,Q),qe=Q,et=D,(0===(me=F).resumeToken.approximateByteSize()||qe.snapshotVersion.toMicroseconds()-me.snapshotVersion.toMicroseconds()>=3e8||et.addedDocuments.size+et.modifiedDocuments.size+et.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,Q))});let m=Js(),v=An();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),f.push(FT(a,c,e.documentUpdates).next(D=>{m=D.nr,v=D.sr})),!r.isEqual(en.min())){const D=t.Bs.getLastRemoteSnapshotVersion(a).next(S=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(D)}return ke.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.yc.get(a);c&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?nn(c.fc):i.removedDocuments.size>0&&(nn(c.fc),c.fc=!1))}),yield Xd(t,r,e)}catch(r){yield ec(r)}}),$R.apply(this,arguments)}function NP(n,e,t){const r=Pt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=Pt(a);f.onlineState=c;let m=!1;f.queries.forEach((v,D)=>{for(const S of D.listeners)S.Mu(c)&&(m=!0)}),m&&OR(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function GV(n,e,t){return UR.apply(this,arguments)}function UR(){return UR=(0,tt.Z)(function*(n,e,t){const r=Pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let c=new $r(bt.comparator);c=c.insert(a,qr.newNoDocument(a,en.min()));const f=An().add(a),m=new im(en.min(),new Map,new $r(Cn),c,f);yield RP(r,m),r.gc=r.gc.remove(a),r.yc.delete(e),YR(r)}else yield Zd(r.localStore,e,!1).then(()=>Pv(r,e,t)).catch(ec)}),UR.apply(this,arguments)}function zV(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,tt.Z)(function*(n,e){const t=Pt(n),r=e.batch.batchId;try{const i=yield function kT(n,e){const t=Pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,m,v){const D=m.batch,S=D.keys();let F=ke.resolve();return S.forEach(Q=>{F=F.next(()=>v.getEntry(f,Q)).next(me=>{const qe=m.docVersions.get(Q);nn(null!==qe),me.version.compareTo(qe)<0&&(D.applyToRemoteDocument(me,m),me.isValidDocument()&&(me.setReadTime(m.commitVersion),v.addEntry(me)))})}),F.next(()=>c.mutationQueue.removeMutationBatch(f,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=An();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(f=f.add(c.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);WR(t,r,null),zR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xd(t,i)}catch(i){yield ec(i)}}),jR.apply(this,arguments)}function WV(n,e,t){return HR.apply(this,arguments)}function HR(){return HR=(0,tt.Z)(function*(n,e,t){const r=Pt(n);try{const i=yield function(a,c){const f=Pt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,c).next(D=>(nn(null!==D),v=D.keys(),f.mutationQueue.removeMutationBatch(m,D))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);WR(r,e,t),zR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xd(r,i)}catch(i){yield ec(i)}}),HR.apply(this,arguments)}function GR(){return GR=(0,tt.Z)(function*(n,e){const t=Pt(n);si(t.remoteStore)||ft("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Pt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Rv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),GR.apply(this,arguments)}function zR(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function WR(n,e,t){const r=Pt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Pv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||OP(n,r)})}function OP(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Kt(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),YR(n))}function qR(n,e,t){for(const r of t)r instanceof AP?(n.Ic.addReference(r.key,e),YV(n,r)):r instanceof MP?(ft("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||OP(n,r.key)):Ft()}function YV(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ft("SyncEngine","New document in limbo: "+t),n.mc.add(r),YR(n))}function YR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new bt(Xn.fromString(e)),r=n.Ac.next();n.yc.set(r,new VV(t)),n.gc=n.gc.insert(t,r),Tt(n.remoteStore,new Wi(Qs(Hf(t.path)),r,"TargetPurposeLimboResolution",Po.ct))}}function Xd(n,e,t){return KR.apply(this,arguments)}function KR(){return KR=(0,tt.Z)(function*(n,e,t){const r=Pt(n),i=[],a=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,m)=>{c.push(r.Rc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const D=NT.Li(m.targetId,v);a.push(D)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,tt.Z)(function*(m,v){const D=Pt(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ke.forEach(v,F=>ke.forEach(F.Fi,Q=>D.persistence.referenceDelegate.addReference(S,F.targetId,Q)).next(()=>ke.forEach(F.Bi,Q=>D.persistence.referenceDelegate.removeReference(S,F.targetId,Q)))))}catch(S){if(!xd(S))throw S;ft("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const F=S.targetId;if(!S.fromCache){const Q=D.Ji.get(F),qe=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);D.Ji=D.Ji.insert(F,qe)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),KR.apply(this,arguments)}function KV(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,tt.Z)(function*(n,e){const t=Pt(n);if(!t.currentUser.isEqual(e)){ft("SyncEngine","User change. New user:",e.toKey());const r=yield PT(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new at(ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xd(t,r.er)}var i}),ZR.apply(this,arguments)}function ZV(n,e){const t=Pt(n),r=t.yc.get(e);if(r&&r.fc)return An().add(r.key);{let i=An();const a=t._c.get(e);if(!a)return i;for(const c of a){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function XV(n,e){return XR.apply(this,arguments)}function XR(){return XR=(0,tt.Z)(function*(n,e){const t=Pt(n),r=yield rp(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&qR(t,e.targetId,i.cc),i}),XR.apply(this,arguments)}function QV(n,e){return QR.apply(this,arguments)}function QR(){return QR=(0,tt.Z)(function*(n,e){const t=Pt(n);return BT(t.localStore,e).then(r=>Xd(t,r))}),QR.apply(this,arguments)}function JV(n,e,t,r){return JR.apply(this,arguments)}function JR(){return JR=(0,tt.Z)(function*(n,e,t,r){const i=Pt(n),a=yield function(c,f){const m=Pt(c),v=Pt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.Sn(D,f).next(S=>S?m.localDocuments.getDocuments(D,S):ke.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Mv(i.remoteStore):"acknowledged"===t||"rejected"===t?(WR(i,e,r||null),zR(i,e),f=e,Pt(Pt(i.localStore).mutationQueue).Cn(f)):Ft(),yield Xd(i,a)):ft("SyncEngine","Cannot apply mutation batch with id: "+e)}),JR.apply(this,arguments)}function e1(){return e1=(0,tt.Z)(function*(n,e){const t=Pt(n);if(i1(t),s1(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield PP(t,r.toArray());t.vc=!0,yield TR(t.remoteStore,!0);for(const a of i)Tt(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Pv(t,c),Zd(t.localStore,c,!0))),Kt(t.remoteStore,c)}),yield i,yield PP(t,r),function(a){const c=Pt(a);c.yc.forEach((f,m)=>{Kt(c.remoteStore,m)}),c.Ic.Ts(),c.yc=new Map,c.gc=new $r(bt.comparator)}(t),t.vc=!1,yield TR(t.remoteStore,!1)}}),e1.apply(this,arguments)}function PP(n,e,t){return t1.apply(this,arguments)}function t1(){return t1=(0,tt.Z)(function*(n,e,t){const r=Pt(n),i=[],a=[];for(const c of e){let f;const m=r._c.get(c);if(m&&0!==m.length){f=yield Kd(r.localStore,Qs(m[0]));for(const v of m){const D=r.wc.get(v),S=yield XV(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield LT(r.localStore,c);f=yield Kd(r.localStore,v),yield FR(r,kP(v),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),t1.apply(this,arguments)}function kP(n){return jf(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function t$(n){const e=Pt(n);return Pt(Pt(e.localStore).persistence).$i()}function n$(n,e,t,r){return n1.apply(this,arguments)}function n1(){return n1=(0,tt.Z)(function*(n,e,t,r){const i=Pt(n);if(i.vc)return void ft("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield BT(i.localStore,yw(a[0])),f=im.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Gi.EMPTY_BYTE_STRING);yield Xd(i,c,f);break}case"rejected":yield Zd(i.localStore,e,!0),Pv(i,e,r);break;default:Ft()}}),n1.apply(this,arguments)}function r$(n,e,t){return r1.apply(this,arguments)}function r1(){return r1=(0,tt.Z)(function*(n,e,t){const r=i1(n);if(r.vc){for(const i of e){if(r._c.has(i)){ft("SyncEngine","Adding an already active target "+i);continue}const a=yield LT(r.localStore,i),c=yield Kd(r.localStore,a);yield FR(r,kP(a),c.targetId,!1,c.resumeToken),Tt(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield Zd(r.localStore,i,!1).then(()=>{Kt(r.remoteStore,i),Pv(r,i)}).catch(ec))}}),r1.apply(this,arguments)}function i1(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GV.bind(null,e),e.dc.nu=PV.bind(null,e.eventManager),e.dc.Pc=kV.bind(null,e.eventManager),e}function s1(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WV.bind(null,e),e}class rI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,tt.Z)(function*(){t.serializer=l(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return OT(this.persistence,new lR,e.initialUser,this.serializer)}createPersistence(e){return new bv(Cv.zs,this.serializer)}createSharedClientState(e){return new hR}terminate(){var e=this;return(0,tt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class o1 extends rI{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,tt.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield s1(r.Vc.syncEngine),yield Mv(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return OT(this.persistence,new lR,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new rR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new lx(t,this.persistence);return new B_(e.asyncQueue,r)}createPersistence(e){const t=qw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Os.withCacheSize(this.cacheSizeBytes):Os.DEFAULT;return new Sv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,s(),o(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new hR}}class FP extends o1{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,tt.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof zT&&(r.sharedClientState.syncEngine={jr:JV.bind(null,i),zr:n$.bind(null,i),Wr:r$.bind(null,i),$i:t$.bind(null,i),Qr:QV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,tt.Z)(function*(c){yield function e$(n,e){return e1.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=s();if(!zT.D(t))throw new at(ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kv{initialize(e,t){var r=this;return(0,tt.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>NP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=KV.bind(null,r.syncEngine),yield TR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OV}createDatastore(e){const t=l(e.databaseInfo.databaseId),r=new EP(e.databaseInfo);return new I(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>NP(this.syncEngine,f,0),c=pR.D()?new pR:new fR,new Y(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,m,v){const D=new $V(r,i,a,c,f,m);return v&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,tt.Z)(function*(t){const r=Pt(t);ft("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield rt(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function LP(n,e=10240){let t=0;return{read:()=>(0,tt.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,tt.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class YT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class o${constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new es,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,tt.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,tt.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,tt.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new FV(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,tt.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,tt.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,tt.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class a${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,tt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new at(ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,tt.Z)(function*(a,c){const f=Pt(a),m=sv(f.serializer)+"/documents",v={documents:c.map(Q=>iv(f.serializer,Q))},D=yield f.vo("BatchGetDocuments",m,v,c.length),S=new Map;D.forEach(Q=>{const me=function cT(n,e){return"found"in e?function(t,r){nn(!!r.found);const i=ac(t,r.found.name),a=Oi(r.found.updateTime),c=r.found.createTime?Oi(r.found.createTime):en.min(),f=new rs({mapValue:{fields:r.found.fields}});return qr.newFoundDocument(i,a,c,f)}(n,e):"missing"in e?function(t,r){nn(!!r.missing),nn(!!r.readTime);const i=ac(t,r.missing),a=Oi(r.readTime);return qr.newNoDocument(i,a)}(n,e):Ft()}(f.serializer,Q);S.set(me.key.toString(),me)});const F=[];return c.forEach(Q=>{const me=S.get(Q.toString());nn(!!me),F.push(me)}),F}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,tt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=bt.fromPath(i);e.mutations.push(new Cw(a,e.precondition(a)))}),yield(r=(0,tt.Z)(function*(i,a){const c=Pt(i),f=sv(c.serializer)+"/documents",m={writes:a.map(v=>Zf(c.serializer,v))};yield c.Io("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ft();t=en.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new at(ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(en.min())?Ir.exists(!1):Ir.updateTime(t):Ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(en.min()))throw new at(ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ir.updateTime(t)}return Ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class l${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new d(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,tt.Z)(function*(){const t=new a$(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!kf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!XD(t)}return!1}}class c${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Hi.UNAUTHENTICATED,this.clientId=ZE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,tt.Z)(function*(f){ft("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ft("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,tt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new at(ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,tt.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Rv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function KT(n,e){return a1.apply(this,arguments)}function a1(){return a1=(0,tt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ft("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,tt.Z)(function*(a){r.isEqual(a)||(yield PT(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),a1.apply(this,arguments)}function l1(n,e){return c1.apply(this,arguments)}function c1(){return c1=(0,tt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield u1(n);ft("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>CP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>CP(e.remoteStore,a)),n._onlineComponents=e}),c1.apply(this,arguments)}function BP(n){return"FirebaseError"===n.name?n.code===ze.FAILED_PRECONDITION||n.code===ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function u1(n){return d1.apply(this,arguments)}function d1(){return d1=(0,tt.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft("FirestoreClient","Using user provided OfflineComponentProvider");try{yield KT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!BP(t))throw t;oa("Error using user provided cache. Falling back to memory cache: "+t),yield KT(n,new rI)}}else ft("FirestoreClient","Using default OfflineComponentProvider"),yield KT(n,new rI);return n._offlineComponents}),d1.apply(this,arguments)}function ZT(n){return h1.apply(this,arguments)}function h1(){return h1=(0,tt.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft("FirestoreClient","Using user provided OnlineComponentProvider"),yield l1(n,n._uninitializedComponentsProvider._online)):(ft("FirestoreClient","Using default OnlineComponentProvider"),yield l1(n,new kv))),n._onlineComponents}),h1.apply(this,arguments)}function VP(n){return u1(n).then(e=>e.persistence)}function XT(n){return u1(n).then(e=>e.localStore)}function $P(n){return ZT(n).then(e=>e.remoteStore)}function f1(n){return ZT(n).then(e=>e.syncEngine)}function Fv(n){return p1.apply(this,arguments)}function p1(){return p1=(0,tt.Z)(function*(n){const e=yield ZT(n),t=e.eventManager;return t.onListen=UV.bind(null,e.syncEngine),t.onUnlisten=jV.bind(null,e.syncEngine),t}),p1.apply(this,arguments)}function jP(n,e,t={}){const r=new es;return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return function(i,a,c,f,m){const v=new YT({next:S=>{a.enqueueAndForget(()=>RR(i,D));const F=S.docs.has(c);!F&&S.fromCache?m.reject(new at(ze.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&S.fromCache&&f&&"server"===f.source?m.reject(new at(ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new PR(Hf(c.path),v,{includeMetadataChanges:!0,Ku:!0});return MR(i,D)}(yield Fv(n),n.asyncQueue,e,t,r)})),r.promise}function HP(n,e,t={}){const r=new es;return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return function(i,a,c,f,m){const v=new YT({next:S=>{a.enqueueAndForget(()=>RR(i,D)),S.fromCache&&"server"===f.source?m.reject(new at(ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new PR(c,v,{includeMetadataChanges:!0,Ku:!0});return MR(i,D)}(yield Fv(n),n.asyncQueue,e,t,r)})),r.promise}function GP(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const zP=new Map;function g1(n,e,t){if(!t)throw new at(ze.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WP(n,e,t,r){if(!0===e&&!0===r)throw new at(ze.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qP(n){if(!bt.isDocumentKey(n))throw new at(ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YP(n){if(bt.isDocumentKey(n))throw new at(ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ft()}function Qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new at(ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=QT(n);throw new at(ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function KP(n,e){if(e<=0)throw new at(ze.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ZP{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new at(ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new at(ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=GP(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new at(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new at(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new at(ze.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new at(ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new at(ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new tx;switch(t.type){case"firstParty":return new ix(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new at(ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zP.get(e);t&&(ft("ComponentProvider","Removing Datastore"),zP.delete(e),t.terminate())}(this),Promise.resolve()}}class oi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oi(this.firestore,e,this._key)}}class to{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new to(this.firestore,e,this._query)}}class mu extends to{constructor(e,t,r){super(e,t,Hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oi(this.firestore,null,new bt(e))}withConverter(e){return new mu(this.firestore,e,this._path)}}function QP(n,e,...t){if(n=(0,j.m9)(n),g1("collection","path",e),n instanceof iI){const r=Xn.fromString(e,...t);return YP(r),new mu(n,null,r)}{if(!(n instanceof oi||n instanceof mu))throw new at(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xn.fromString(e,...t));return YP(r),new mu(n.firestore,null,r)}}function JT(n,e,...t){if(n=(0,j.m9)(n),1===arguments.length&&(e=ZE.A()),g1("doc","path",e),n instanceof iI){const r=Xn.fromString(e,...t);return qP(r),new oi(n,null,new bt(r))}{if(!(n instanceof oi||n instanceof mu))throw new at(ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xn.fromString(e,...t));return qP(r),new oi(n.firestore,n instanceof mu?n.converter:null,new bt(r))}}function JP(n,e){return n=(0,j.m9)(n),e=(0,j.m9)(e),(n instanceof oi||n instanceof mu)&&(e instanceof oi||e instanceof mu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function m1(n,e){return n=(0,j.m9)(n),e=(0,j.m9)(e),n instanceof to&&e instanceof to&&n.firestore===e.firestore&&Xg(n._query,e._query)&&n.converter===e.converter}class v${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new d(this,"async_queue_retry"),this.Xc=()=>{const t=o();t&&ft("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=o();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=o();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new es;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,tt.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!xd(t))throw t;ft("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=AR.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&Ft()}verifyOperationInProgress(){}sa(){var e=this;return(0,tt.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function y1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class E${constructor(){this._progressObserver={},this._taskCompletionResolver=new es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ai extends iI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new v$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ek(this),this._firestoreClient.terminate()}}function qi(n){return n._firestoreClient||ek(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ek(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ex(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,GP(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new c$(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function tk(n,e,t){const r=new es;return n.asyncQueue.enqueue((0,tt.Z)(function*(){try{yield KT(n,t),yield l1(n,e),r.resolve()}catch(i){const a=i;if(!BP(a))throw a;oa("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function nk(n){if(n._initialized||n._terminated)throw new at(ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yu(Gi.fromBase64String(e))}catch(t){throw new at(ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yu(Gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new at(ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pm{constructor(e){this._methodName=e}}class eS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new at(ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new at(ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Cn(this._lat,e._lat)||Cn(this._long,e._long)}}const R$=/^__.*__$/;class N${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $a(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yf(e,this.data,t,this.fieldTransforms)}}class rk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ik(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft()}}class tS{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new tS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return iS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(ik(this.ca)&&R$.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class O${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||l(e)}ya(e,t,r,i=!1){return new tS({ca:e,methodName:t,ga:r,path:pi.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gm(n){const e=n._freezeSettings(),t=l(n._databaseId);return new O$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nS(n,e,t,r,i,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,i);w1("Data must be an object, but it was:",c,r);const f=ak(r,c);let m,v;if(a.merge)m=new Xs(c.fieldMask),v=c.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const F=aI(e,S,t);if(!c.contains(F))throw new at(ze.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);ck(D,F)||D.push(F)}m=new Xs(D),v=c.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=c.fieldTransforms;return new N$(new rs(f),m,v)}class oI extends pm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oI}}function sk(n,e,t){return new tS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _1 extends pm{_toFieldTransform(e){return new zf(e.path,new Bd)}isEqual(e){return e instanceof _1}}class P$ extends pm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=sk(this,e,!0),r=this.pa.map(a=>mm(a,t)),i=new du(r);return new zf(e.path,i)}isEqual(e){return this===e}}class k$ extends pm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=sk(this,e,!0),r=this.pa.map(a=>mm(a,t)),i=new hu(r);return new zf(e.path,i)}isEqual(e){return this===e}}class F$ extends pm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Vd(e.serializer,zD(e.serializer,this.Ia));return new zf(e.path,t)}isEqual(e){return this===e}}function v1(n,e,t,r){const i=n.ya(1,e,t);w1("Data must be an object, but it was:",i,r);const a=[],c=rs.empty();lu(r,(m,v)=>{const D=rS(e,m,t);v=(0,j.m9)(v);const S=i.da(D);if(v instanceof oI)a.push(D);else{const F=mm(v,S);null!=F&&(a.push(D),c.set(D,F))}});const f=new Xs(a);return new rk(c,f,i.fieldTransforms)}function E1(n,e,t,r,i,a){const c=n.ya(1,e,t),f=[aI(e,r,t)],m=[i];if(a.length%2!=0)throw new at(ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<a.length;F+=2)f.push(aI(e,a[F])),m.push(a[F+1]);const v=[],D=rs.empty();for(let F=f.length-1;F>=0;--F)if(!ck(v,f[F])){const Q=f[F];let me=m[F];me=(0,j.m9)(me);const qe=c.da(Q);if(me instanceof oI)v.push(Q);else{const et=mm(me,qe);null!=et&&(v.push(Q),D.set(Q,et))}}const S=new Xs(v);return new rk(D,S,c.fieldTransforms)}function ok(n,e,t,r=!1){return mm(t,n.ya(r?4:3,e))}function mm(n,e){if(lk(n=(0,j.m9)(n)))return w1("Unsupported field value:",e,n),ak(n,e);if(n instanceof pm)return function(t,r){if(!ik(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=mm(c,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,j.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zD(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Wr.fromDate(t);return{timestampValue:$d(r.serializer,i)}}if(t instanceof Wr){const i=new Wr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$d(r.serializer,i)}}if(t instanceof eS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yu)return{bytesValue:aT(r.serializer,t._byteString)};if(t instanceof oi){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${QT(t)}`)}(n,e)}function ak(n,e){const t={};return DD(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lu(n,(r,i)=>{const a=mm(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function lk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wr||n instanceof eS||n instanceof yu||n instanceof oi||n instanceof pm)}function w1(n,e,t){if(!lk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=QT(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function aI(n,e,t){if((e=(0,j.m9)(e))instanceof Qd)return e._internalPath;if("string"==typeof e)return rS(n,e);throw iS("Field path arguments must be of type string or ",n,!1,void 0,t)}const L$=new RegExp("[~\\*/\\[\\]]");function rS(n,e,t){if(e.search(L$)>=0)throw iS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qd(...e.split("."))._internalPath}catch{throw iS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iS(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new at(ze.INVALID_ARGUMENT,f+n+m)}function ck(n,e){return n.some(t=>t.isEqual(e))}class lI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new oi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new B$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class B$ extends lI{data(){return super.data()}}function sS(n,e){return"string"==typeof e?rS(n,e):e instanceof Qd?e._internalPath:e._delegate._internalPath}function uk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new at(ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class I1{}class cI extends I1{}function op(n,e,...t){let r=[];e instanceof I1&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Lv).length,c=i.filter(f=>f instanceof uI).length;if(a>1||a>0&&c>0)throw new at(ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class uI extends cI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new uI(e,t,r)}_apply(e){const t=this._parse(e);return pk(e._query,t),new to(e.firestore,e.converter,Zg(e._query,t))}_parse(e){const t=gm(e.firestore);return function(i,a,c,f,m,v,D){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new at(ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){fk(D,v);const F=[];for(const Q of D)F.push(hk(f,i,Q));S={arrayValue:{values:F}}}else S=hk(f,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||fk(D,v),S=ok(c,"where",D,"in"===v||"not-in"===v);return qn.create(m,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Lv extends I1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:wr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const f of c)pk(a,f),a=Zg(a,f)}(e._query,t),new to(e.firestore,e.converter,Zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class b1 extends cI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new b1(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new at(ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new at(ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Bf(i,a);return function(f,m){if(null===pw(f)){const v=Fd(f);null!==v&&gk(0,v,m.field)}}(r,c),c}(e._query,this._field,this._direction);return new to(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Ba(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class oS extends cI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new oS(e,t,r)}_apply(e){return new to(e.firestore,e.converter,W_(e._query,this._limit,this._limitType))}}class aS extends cI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aS(e,t,r)}_apply(e){const t=dk(e,this.type,this._docOrFields,this._inclusive);return new to(e.firestore,e.converter,(i=t,new Ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class lS extends cI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new lS(e,t,r)}_apply(e){const t=dk(e,this.type,this._docOrFields,this._inclusive);return new to(e.firestore,e.converter,(i=t,new Ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function dk(n,e,t,r){if(t[0]=(0,j.m9)(t[0]),t[0]instanceof lI)return function(i,a,c,f,m){if(!f)throw new at(ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const D of Ld(i))if(D.field.isKeyField())v.push(uu(a,f.key));else{const S=f.data.field(D.field);if($_(S))throw new at(ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const F=D.field.canonicalString();throw new at(ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}v.push(S)}return new Pd(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=gm(n.firestore);return function(a,c,f,m,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new at(ze.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let Q=0;Q<v.length;Q++){const me=v[Q];if(S[Q].field.isKeyField()){if("string"!=typeof me)throw new at(ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof me}`);if(!z_(a)&&-1!==me.indexOf("/"))throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${me}' contains a slash.`);const qe=a.path.child(Xn.fromString(me));if(!bt.isDocumentKey(qe))throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${qe}' is not because it contains an odd number of segments.`);const et=new bt(qe);F.push(uu(c,et))}else{const qe=ok(f,m,me);F.push(qe)}}return new Pd(F,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function hk(n,e,t){if("string"==typeof(t=(0,j.m9)(t))){if(""===t)throw new at(ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z_(e)&&-1!==t.indexOf("/"))throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xn.fromString(t));if(!bt.isDocumentKey(r))throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uu(n,new bt(r))}if(t instanceof oi)return uu(n,t._key);throw new at(ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QT(t)}.`)}function fk(n,e){if(!Array.isArray(n)||0===n.length)throw new at(ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pk(n,e){if(e.isInequality()){const r=Fd(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new at(ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=pw(n);null!==a&&gk(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new at(ze.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function gk(n,e,t){if(!t.isEqual(e))throw new at(ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class C1{convertValue(e,t="none"){switch(cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ft()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return lu(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new eS(ii(e.latitude),ii(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=U_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rd(e));default:return null}}convertTimestamp(e){const t=vl(e);return new Wr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xn.fromString(e);nn(qx(r));const i=new rc(r.get(1),r.get(3)),a=new bt(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function cS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class q$ extends C1{constructor(e){super(),this.firestore=e}convertBytes(e){return new yu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,t)}}class ym{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jd extends lI{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class dI extends Jd{data(e={}){return super.data(e)}}class ap{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ym(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dI(this._firestore,this._userDataWriter,r.key,r,new ym(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new at(ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new dI(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ym(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new dI(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ym(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==c.type&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),v=a.indexOf(c.doc.key)),{type:K$(c.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function K$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft()}}function yk(n,e){return n instanceof Jd&&e instanceof Jd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ap&&e instanceof ap&&n._firestore===e._firestore&&m1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class lp extends C1{constructor(e){super(),this.firestore=e}convertBytes(e){return new yu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,t)}}function _k(n,e,t){n=Qn(n,oi);const r=Qn(n.firestore,ai),i=cS(n.converter,e,t);return Bv(r,[nS(gm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ir.none())])}function vk(n,e,t,...r){n=Qn(n,oi);const i=Qn(n.firestore,ai),a=gm(i);let c;return c="string"==typeof(e=(0,j.m9)(e))||e instanceof Qd?E1(a,"updateDoc",n._key,e,t,r):v1(a,"updateDoc",n._key,e),Bv(i,[c.toMutation(n._key,Ir.exists(!0))])}function Ek(n,...e){var t,r,i;n=(0,j.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||y1(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(y1(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,D;if(n instanceof oi)v=Qn(n.firestore,ai),D=Hf(n._key.path),m={next:S=>{e[c]&&e[c](D1(v,n,S))},error:e[c+1],complete:e[c+2]};else{const S=Qn(n,to);v=Qn(S.firestore,ai),D=S._query;const F=new lp(v);m={next:Q=>{e[c]&&e[c](new ap(v,F,S,Q))},error:e[c+1],complete:e[c+2]},uk(n._query)}return function(S,F,Q,me){const qe=new YT(me),et=new PR(F,qe,Q);return S.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return MR(yield Fv(S),et)})),()=>{qe.Dc(),S.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return RR(yield Fv(S),et)}))}}(qi(v),D,f,m)}function Bv(n,e){return function(t,r){const i=new es;return t.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return function HV(n,e,t){return VR.apply(this,arguments)}(yield f1(t),r,i)})),i.promise}(qi(n),e)}function D1(n,e,t){const r=t.docs.get(e._key),i=new lp(n);return new Jd(n,i,e._key,r,new ym(t.hasPendingWrites,t.fromCache),e.converter)}const fU={maxAttempts:5};class wk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gm(e)}set(e,t,r){this._verifyNotCommitted();const i=cp(e,this._firestore),a=cS(i.converter,t,r),c=nS(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=cp(e,this._firestore);let c;return c="string"==typeof(t=(0,j.m9)(t))||t instanceof Qd?E1(this._dataReader,"WriteBatch.update",a._key,t,r,i):v1(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cp(e,this._firestore);return this._mutations=this._mutations.concat(new Kf(t._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new at(ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cp(n,e){if((n=(0,j.m9)(n)).firestore!==e)throw new at(ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gm(e)}get(e){const t=cp(e,this._firestore),r=new q$(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Ft();const a=i[0];if(a.isFoundDocument())return new lI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new lI(this._firestore,r,t._key,null,t.converter);throw Ft()})}set(e,t,r){const i=cp(e,this._firestore),a=cS(i.converter,t,r),c=nS(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=cp(e,this._firestore);let c;return c="string"==typeof(t=(0,j.m9)(t))||t instanceof Qd?E1(this._dataReader,"Transaction.update",a._key,t,r,i):v1(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=cp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cp(e,this._firestore),r=new lp(this._firestore);return super.get(e).then(i=>new Jd(this._firestore,r,t._key,i._document,new ym(!1,!1),t.converter))}}function T1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new at("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bk(){if(typeof Uint8Array>"u")throw new at("unimplemented","Uint8Arrays are not available in this environment.")}function Ck(){if(!function vx(){return typeof atob<"u"}())throw new at("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ad=Ks.SDK_VERSION,(0,Ks._registerComponent)(new hl.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new ai(new rx(t.getProvider("auth-internal")),new N_(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new at(ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Ks.registerVersion)(qE,"3.13.0",n),(0,Ks.registerVersion)(qE,"3.13.0","esm2017")}();class hI{constructor(e){this._delegate=e}static fromBase64String(e){return Ck(),new hI(yu.fromBase64String(e))}static fromUint8Array(e){return bk(),new hI(yu.fromUint8Array(e))}toBase64(){return Ck(),this._delegate.toBase64()}toUint8Array(){return bk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function S1(n){return function bU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class CU{enableIndexedDbPersistence(e,t){return function I$(n,e){nk(n=Qn(n,ai));const t=qi(n);if(t._uninitializedComponentsProvider)throw new at(ze.FAILED_PRECONDITION,"SDK cache is already specified.");oa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new kv;return tk(t,i,new o1(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function b$(n){nk(n=Qn(n,ai));const e=qi(n);if(e._uninitializedComponentsProvider)throw new at(ze.FAILED_PRECONDITION,"SDK cache is already specified.");oa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new kv;return tk(e,r,new FP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function C$(n){if(n._initialized&&!n._terminated)throw new at(ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new es;return n._queue.enqueueAndForgetEvenWhileRestricted((0,tt.Z)(function*(){try{yield(t=(0,tt.Z)(function*(r){if(!aa.D())return Promise.resolve();const i=r+"main";yield aa.delete(i)}),function(r){return t.apply(this,arguments)})(qw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Dk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof rc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function XP(n,e,t,r={}){var i;const a=(n=Qn(n,iI))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let f,m;if("string"==typeof r.mockUserToken)f=r.mockUserToken,m=Hi.MOCK_USER;else{f=(0,j.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new at(ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Hi(v)}n._authCredentials=new nx(new hn(f,m))}}(this._delegate,e,t,r)}enableNetwork(){return function T$(n){return function u$(n){return n.asyncQueue.enqueue((0,tt.Z)(function*(){const e=yield VP(n),t=yield $P(n);return e.setNetworkEnabled(!0),function(r){const i=Pt(r);return i.vu.delete(0),_e(i)}(t)}))}(qi(n=Qn(n,ai)))}(this._delegate)}disableNetwork(){return function S$(n){return function d$(n){return n.asyncQueue.enqueue((0,tt.Z)(function*(){const e=yield VP(n),t=yield $P(n);return e.setNetworkEnabled(!1),(r=(0,tt.Z)(function*(i){const a=Pt(i);a.vu.add(0),yield rt(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qi(n=Qn(n,ai)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function D$(n){return function(e){const t=new es;return e.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return function qV(n,e){return GR.apply(this,arguments)}(yield f1(e),t)})),t.promise}(qi(n=Qn(n,ai)))}(this._delegate)}onSnapshotsInSync(e){return function iU(n,e){return function p$(n,e){const t=new YT(e);return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return r=yield Fv(n),i=t,Pt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return r=yield Fv(n),i=t,void Pt(r).ku.delete(i);var r,i}))}}(qi(n=Qn(n,ai)),y1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new at("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vv(this,QP(this._delegate,e))}catch(t){throw Fo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Il(this,JT(this._delegate,e))}catch(t){throw Fo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lo(this,function _$(n,e){if(n=Qn(n,iI),g1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new at(ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new to(n,null,(t=e,new Ba(Xn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Fo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gU(n,e,t){n=Qn(n,ai);const r=Object.assign(Object.assign({},fU),t);return function(i){if(i.maxAttempts<1)throw new at(ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const f=new es;return i.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){const m=yield function UP(n){return ZT(n).then(e=>e.datastore)}(i);new l$(i.asyncQueue,m,c,a,f).run()})),f.promise}(qi(n),i=>e(new pU(n,i)),r)}(this._delegate,t=>e(new Tk(this,t)))}batch(){return qi(this._delegate),new Sk(new wk(this._delegate,e=>Bv(this._delegate,e)))}loadBundle(e){return function A$(n,e){const t=qi(n=Qn(n,ai)),r=new E$;return function g$(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?Aw().encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return LP(m,v);if(m instanceof ArrayBuffer)return LP(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new o$(m,c);var m}(t,l(e));n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){!function i$(n,e,t){const r=Pt(n);var i;(i=(0,tt.Z)(function*(a,c,f){try{const m=yield c.getMetadata();if(yield function(F,Q){const me=Pt(F),qe=Oi(Q.createTime);return me.persistence.runTransaction("hasNewerBundle","readonly",et=>me.qs.getBundleMetadata(et,Q.id)).then(et=>!!et&&et.createTime.compareTo(qe)>=0)}(a.localStore,m))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=m).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(SP(m));const v=new LV(m,a.localStore,c.serializer);let D=yield c.bc();for(;D;){const F=yield v.zu(D);F&&f._updateProgress(F),D=yield c.bc()}const S=yield v.complete();return yield Xd(a,S.Ju,void 0),yield function(F,Q){const me=Pt(F);return me.persistence.runTransaction("Save bundle","readwrite",qe=>me.qs.saveBundleMetadata(qe,Q))}(a.localStore,m),f._completeWith(S.progress),Promise.resolve(S.Hu)}catch(m){return oa("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var F}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield f1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function M$(n,e){return function m$(n,e){return n.asyncQueue.enqueue((0,tt.Z)(function*(){return function(t,r){const i=Pt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield XT(n),e)}))}(qi(n=Qn(n,ai)),e).then(t=>t?new to(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Lo(this,t):null)}}class uS extends C1{constructor(e){super(),this.firestore=e}convertBytes(e){return new hI(new yu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Il.forKey(t,this.firestore,null)}}class Tk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uS(e)}get(e){const t=vm(e);return this._delegate.get(t).then(r=>new fI(this._firestore,new Jd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=vm(e);return r?(T1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=vm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=vm(e);return this._delegate.delete(t),this}}class Sk{constructor(e){this._delegate=e}set(e,t,r){const i=vm(e);return r?(T1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=vm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=vm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _m{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new dI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=_m.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new _m(e,new uS(e),t),i.set(t,a)),a}}_m.INSTANCES=new WeakMap;class Il{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new at("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Il(t,new oi(t._delegate,r,new bt(e)))}static forKey(e,t,r){return new Il(t,new oi(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vv(this.firestore,QP(this._delegate,e))}catch(t){throw Fo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,j.m9)(e))instanceof oi&&JP(this._delegate,e)}set(e,t){t=T1("DocumentReference.set",t);try{return t?_k(this._delegate,e,t):_k(this._delegate,e)}catch(r){throw Fo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vk(this._delegate,e):vk(this._delegate,e,t,...r)}catch(i){throw Fo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nU(n){return Bv(Qn(n.firestore,ai),[new Kf(n._key,Ir.none())])}(this._delegate)}onSnapshot(...e){const t=Ak(e),r=Mk(e,i=>new fI(this.firestore,new Jd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Ek(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function X$(n){n=Qn(n,oi);const e=Qn(n.firestore,ai),t=qi(e),r=new lp(e);return function h$(n,e){const t=new es;return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return(r=(0,tt.Z)(function*(i,a,c){try{const f=yield function(m,v){const D=Pt(m);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,v))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new at(ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Rv(f,`Failed to get document '${a} from cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield XT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Jd(e,r,n._key,i,new ym(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Q$(n){n=Qn(n,oi);const e=Qn(n.firestore,ai);return jP(qi(e),n._key,{source:"server"}).then(t=>D1(e,n,t))}(this._delegate):function Z$(n){n=Qn(n,oi);const e=Qn(n.firestore,ai);return jP(qi(e),n._key).then(t=>D1(e,n,t))}(this._delegate),t.then(r=>new fI(this.firestore,new Jd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Il(this.firestore,this._delegate.withConverter(e?_m.getInstance(this.firestore,e):null))}}function Fo(n,e,t){return n.message=n.message.replace(e,t),n}function Ak(n){for(const e of n)if("object"==typeof e&&!S1(e))return e;return{}}function Mk(n,e){var t,r;let i;return i=S1(n[0])?n[0]:S1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class fI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Il(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yk(this._delegate,e._delegate)}}class pI extends fI{data(e){const t=this._delegate.data(e);return function KE(n,e){n||Ft()}(void 0!==t),t}}class Lo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uS(e)}where(e,t,r){try{return new Lo(this.firestore,op(this._delegate,function V$(n,e,t){const r=e,i=sS("where",n);return uI._create(i,r,t)}(e,t,r)))}catch(i){throw Fo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Lo(this.firestore,op(this._delegate,function $$(n,e="asc"){const t=e,r=sS("orderBy",n);return b1._create(r,t)}(e,t)))}catch(r){throw Fo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lo(this.firestore,op(this._delegate,function U$(n){return KP("limit",n),oS._create("limit",n,"F")}(e)))}catch(t){throw Fo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Lo(this.firestore,op(this._delegate,function j$(n){return KP("limitToLast",n),oS._create("limitToLast",n,"L")}(e)))}catch(t){throw Fo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Lo(this.firestore,op(this._delegate,function H$(...n){return aS._create("startAt",n,!0)}(...e)))}catch(t){throw Fo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Lo(this.firestore,op(this._delegate,function G$(...n){return aS._create("startAfter",n,!1)}(...e)))}catch(t){throw Fo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Lo(this.firestore,op(this._delegate,function z$(...n){return lS._create("endBefore",n,!1)}(...e)))}catch(t){throw Fo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Lo(this.firestore,op(this._delegate,function W$(...n){return lS._create("endAt",n,!0)}(...e)))}catch(t){throw Fo(t,"endAt()","Query.endAt()")}}isEqual(e){return m1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function eU(n){n=Qn(n,to);const e=Qn(n.firestore,ai),t=qi(e),r=new lp(e);return function f$(n,e){const t=new es;return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return(r=(0,tt.Z)(function*(i,a,c){try{const f=yield rp(i,a,!0),m=new xP(a,f.ir),v=m.sc(f.documents),D=m.applyChanges(v,!1);c.resolve(D.snapshot)}catch(f){const m=Rv(f,`Failed to execute query '${a} against cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield XT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ap(e,r,n,i))}(this._delegate):"server"===e?.source?function tU(n){n=Qn(n,to);const e=Qn(n.firestore,ai),t=qi(e),r=new lp(e);return HP(t,n._query,{source:"server"}).then(i=>new ap(e,r,n,i))}(this._delegate):function J$(n){n=Qn(n,to);const e=Qn(n.firestore,ai),t=qi(e),r=new lp(e);return uk(n._query),HP(t,n._query).then(i=>new ap(e,r,n,i))}(this._delegate),t.then(r=>new A1(this.firestore,new ap(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ak(e),r=Mk(e,i=>new A1(this.firestore,new ap(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Ek(this._delegate,t,r)}withConverter(e){return new Lo(this.firestore,this._delegate.withConverter(e?_m.getInstance(this.firestore,e):null))}}class TU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class A1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Lo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new pI(this._firestore,r))})}isEqual(e){return yk(this._delegate,e._delegate)}}class Vv extends Lo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Il(this.firestore,e):null}doc(e){try{return new Il(this.firestore,void 0===e?JT(this._delegate):JT(this._delegate,e))}catch(t){throw Fo(t,"doc()","CollectionReference.doc()")}}add(e){return function rU(n,e){const t=Qn(n.firestore,ai),r=JT(n),i=cS(n.converter,e);return Bv(t,[nS(gm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Il(this.firestore,t))}isEqual(e){return JP(this._delegate,e._delegate)}withConverter(e){return new Vv(this.firestore,this._delegate.withConverter(e?_m.getInstance(this.firestore,e):null))}}function vm(n){return Qn(n,oi)}class M1{constructor(...e){this._delegate=new Qd(...e)}static documentId(){return new M1(pi.keyField().canonicalString())}isEqual(e){return(e=(0,j.m9)(e))instanceof Qd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Em{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yU(){return new _1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Em(e)}static delete(){const e=function mU(){return new oI("deleteField")}();return e._methodName="FieldValue.delete",new Em(e)}static arrayUnion(...e){const t=function _U(...n){return new P$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Em(t)}static arrayRemove(...e){const t=function vU(...n){return new k$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Em(t)}static increment(e){const t=function EU(n){return new F$("increment",n)}(e);return t._methodName="FieldValue.increment",new Em(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SU={Firestore:Dk,GeoPoint:eS,Timestamp:Wr,Blob:hI,Transaction:Tk,WriteBatch:Sk,DocumentReference:Il,DocumentSnapshot:fI,Query:Lo,QueryDocumentSnapshot:pI,QuerySnapshot:A1,CollectionReference:Vv,FieldPath:M1,FieldValue:Em,setLogLevel:function DU(n){!function lD(n){Jl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function xk(n,e){return function xU(n,e=Qy.z){return new Li.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function x1(n,e){return xk(n,e).pipe((0,dn.U)(t=>({payload:t,type:"query"})))}function dS(n,e){return x1(n,e).pipe(bo(void 0),Jy(),(0,dn.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const m=i.find(D=>D.doc.ref.isEqual(c.ref)),v=t?.payload.docs.find(D=>D.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function Rk(n,e,t){return dS(n,t).pipe(As((r,i)=>function NU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function OU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return R1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return R1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return R1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,fg.x)(),(0,dn.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function R1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Nk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function MU(n){(function AU(n,e){n.INTERNAL.registerComponent(new hl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SU)))})(n,(e,t)=>new Dk(e,t,new CU)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Z0.Z);class Ok{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dn.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(bo(void 0),Jy(),ms(([r,i])=>i.length>0||!r),(0,dn.U)(([r,i])=>i),Wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(As((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Nk(e);return Rk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return x1(this.query,this.afs.schedulers.outsideAngular).pipe((0,dn.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Wn.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(Wn.iC)}add(e){return this.ref.add(e)}doc(e){return new Pk(this.ref.doc(e),this.afs)}}class Pk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Lk(r,t);return new Ok(i,a,this.afs)}snapshotChanges(){return function RU(n,e){return xk(n,e).pipe(bo(void 0),Jy(),(0,dn.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Un.D)(this.ref.get(e)).pipe(Wn.iC)}}class PU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dS(this.query,this.afs.schedulers.outsideAngular).pipe((0,dn.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ms(t=>t.length>0),Wn.iC):dS(this.query,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(As((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Nk(e);return Rk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return x1(this.query,this.afs.schedulers.outsideAngular).pipe((0,dn.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Wn.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(Wn.iC)}}const kk=new u.OlP("angularfire2.enableFirestorePersistence"),Fk=new u.OlP("angularfire2.firestore.persistenceSettings"),kU=new u.OlP("angularfire2.firestore.settings"),FU=new u.OlP("angularfire2.firestore.use-emulator");function Lk(n,e=(t=>t)){return{query:e(n),ref:n}}let N1=(()=>{class n{constructor(t,r,i,a,c,f,m,v,D,S,F,Q,me,qe,et,Mt,jt){this.schedulers=m;const Nt=(0,ui.on)(t,f,r),Gt=D;S&&fC(Nt,f,F,me,qe,et,Q,Mt),[this.firestore,this.persistenceEnabled$]=(0,ui.cc)(`${Nt.name}.firestore`,"AngularFirestore",Nt.name,()=>{const In=f.runOutsideAngular(()=>Nt.firestore());if(a&&In.settings(a),Gt&&In.useEmulator(...Gt),i&&!$s(c)){const Ln=()=>{try{return(0,Un.D)(In.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(as){return typeof console<"u"&&console.warn(as),(0,Zt.of)(!1)}};return[In,f.runOutsideAngular(Ln)]}return[In,(0,Zt.of)(!1)]},[a,Gt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=Lk(i,r),f=this.schedulers.ngZone.run(()=>a);return new Ok(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new PU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Pk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ui.Dh),u.LFG(ui.xv,8),u.LFG(kk,8),u.LFG(kU,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Wn.HU),u.LFG(Fk,8),u.LFG(FU,8),u.LFG(af,8),u.LFG(Ky,8),u.LFG(K0,8),u.LFG(Zy,8),u.LFG(Xy,8),u.LFG(sf,8),u.LFG(hg,8),u.LFG(qy,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LU=(()=>{class n{constructor(){rf.Z.registerVersion("angularfire",Wn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kk,useValue:!0},{provide:Fk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[N1]}),n})(),wm=(()=>{class n{constructor(){this.afs=(0,u.f3M)(N1),this.afAuth=(0,u.f3M)(af),this.ngZone=(0,u.f3M)(u.R0b),this.router=(0,u.f3M)(Ni),this.afAuth.authState.subscribe(t=>{t?(this.userData=t,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.setUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}signUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.sendVerificationMail(),this.setUserData(i.user)}).catch(i=>{window.alert(i.message)})}sendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}googleAuth(){return this.authLogin(new HO.V).then(t=>{this.router.navigate(["dashboard"])})}authLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.setUserData(r.user)}).catch(r=>{window.alert(r)})}setUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BU(n,e){if(1&n&&(u.TgZ(0,"div",4)(1,"div",18)(2,"div",19),u._UZ(3,"img",20),u.TgZ(4,"div",21)(5,"h1"),u._uU(6,"Hello: "),u.TgZ(7,"strong"),u._uU(8),u.qZA()(),u.TgZ(9,"p"),u._uU(10,"User ID: "),u.TgZ(11,"strong"),u._uU(12),u.qZA()(),u.TgZ(13,"p"),u._uU(14,"Email: "),u.TgZ(15,"strong"),u._uU(16),u.qZA()(),u.TgZ(17,"p"),u._uU(18,"Email Verified: "),u.TgZ(19,"strong"),u._uU(20),u.qZA()()()()()()),2&n){const t=e.ngIf;u.xp6(3),u.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",u.LSH),u.s9C("alt",t.displayName),u.xp6(5),u.Oqu(t.displayName?t.displayName:"User"),u.xp6(4),u.Oqu(t.uid),u.xp6(4),u.Oqu(t.email),u.xp6(4),u.Oqu(t.emailVerified)}}let VU=(()=>{class n{constructor(){this.authService=(0,u.f3M)(wm)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(u.TgZ(0,"nav",0)(1,"a",1),u._UZ(2,"img",2),u.qZA()(),u.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),u._UZ(10,"i",10),u._uU(11,"User Profile "),u.qZA()(),u.TgZ(12,"li",8)(13,"a",11),u.NdJ("click",function(){return r.authService.signOut()}),u._UZ(14,"i",12),u._uU(15,"Log out "),u.qZA()()()()(),u.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),u._uU(20,"User Profile"),u.qZA()(),u.YNc(21,BU,21,6,"div",17),u.qZA()()()()),2&t&&(u.xp6(21),u.Q6J("ngIf",r.authService.userData))},dependencies:[Yi]}),n})(),Bk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Im=(()=>{class n extends Bk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Bo=new u.OlP("NgValueAccessor"),jU={provide:Bo,useExisting:(0,u.Gpc)(()=>O1),multi:!0},GU=new u.OlP("CompositionEventMode");let O1=(()=>{class n extends Bk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function HU(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(GU,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([jU]),u.qOj]}),n})();const mo=new u.OlP("NgValidators"),dp=new u.OlP("NgAsyncValidators");function Hk(n){return function up(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function hS(n){return null}function Kk(n){return null!=n}function Zk(n){return(0,u.QGY)(n)?(0,Un.D)(n):n}function Xk(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Qk(n,e){return e.map(t=>t(n))}function Jk(n){return n.map(e=>function WU(n){return!n.validate}(e)?e:t=>e.validate(t))}function P1(n){return null!=n?function eF(n){if(!n)return null;const e=n.filter(Kk);return 0==e.length?null:function(t){return Xk(Qk(t,e))}}(Jk(n)):null}function k1(n){return null!=n?function tF(n){if(!n)return null;const e=n.filter(Kk);return 0==e.length?null:function(t){return function $U(...n){const e=(0,ps.jO)(n),{args:t,keys:r}=nl(n),i=new Li.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let m=c,v=c;for(let D=0;D<c;D++){let S=!1;(0,rl.Xf)(t[D]).subscribe((0,Mi.x)(a,F=>{S||(S=!0,v--),f[D]=F},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?ba(r,f):f),a.complete())}))}});return e?i.pipe(Ia(e)):i}(Qk(t,e).map(Zk)).pipe((0,dn.U)(Xk))}}(Jk(n)):null}function nF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function rF(n){return n._rawValidators}function iF(n){return n._rawAsyncValidators}function F1(n){return n?Array.isArray(n)?n:[n]:[]}function fS(n,e){return Array.isArray(n)?n.includes(e):n===e}function sF(n,e){const t=F1(e);return F1(n).forEach(i=>{fS(t,i)||t.push(i)}),t}function oF(n,e){return F1(e).filter(t=>!fS(n,t))}class aF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=P1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=k1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vo extends aF{get formDirective(){return null}get path(){return null}}class eh extends aF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lF{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cF=(()=>{class n extends lF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(eh,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u.qOj]}),n})(),uF=(()=>{class n extends lF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vo,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u.qOj]}),n})();const gI="VALID",gS="INVALID",$v="PENDING",mI="DISABLED";function V1(n){return(mS(n)?n.validators:n)||null}function $1(n,e){return(mS(e)?e.asyncValidators:n)||null}function mS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class pF{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gI}get invalid(){return this.status===gS}get pending(){return this.status==$v}get disabled(){return this.status===mI}get enabled(){return this.status!==mI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oF(e,this._rawAsyncValidators))}hasValidator(e){return fS(this._rawValidators,e)}hasAsyncValidator(e){return fS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$v,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mI,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gI,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gI||this.status===$v)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mI:gI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$v,this._hasOwnPendingAsyncValidator=!0;const t=Zk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?mI:this.errors?gS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($v)?$v:this._anyControlsHaveStatus(gS)?gS:gI}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function ZU(n){return Array.isArray(n)?P1(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function XU(n){return Array.isArray(n)?k1(n):n||null}(this._rawAsyncValidators)}}class yS extends pF{constructor(e,t,r){super(V1(t),$1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function fF(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function hF(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Uv=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>_S}),_S="always";function yI(n,e,t=_S){U1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function e3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gF(n,e)})}(n,e),function n3(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function t3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function JU(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ES(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),IS(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function U1(n,e){const t=rF(n);null!==e.validator?n.setValidators(nF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=iF(n);null!==e.asyncValidator?n.setAsyncValidators(nF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wS(e._rawValidators,i),wS(e._rawAsyncValidators,i)}function IS(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=rF(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=iF(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return wS(e._rawValidators,r),wS(e._rawAsyncValidators,r),t}function gF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _F(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function vF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const bS=class extends pF{constructor(e=null,t,r){super(V1(t),$1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_F(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_F(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let CF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),TF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const W1=new u.OlP("NgModelWithFormControlWarning"),m3={provide:Vo,useExisting:(0,u.Gpc)(()=>CS)};let CS=(()=>{class n extends Vo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(IS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return yI(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ES(t.control||null,t,!1),function o3(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function yF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ES(r||null,t),(n=>n instanceof bS)(i)&&(yI(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function mF(n,e){U1(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function r3(n,e){return IS(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){U1(this.form,this),this._oldForm&&IS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(mo,10),u.Y36(dp,10),u.Y36(Uv,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([m3]),u.qOj,u.TTD]}),n})();const v3={provide:eh,useExisting:(0,u.Gpc)(()=>K1)};let K1=(()=>{class n extends eh{set isDisabled(t){}constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function G1(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===O1?t=a:function s3(n){return Object.getPrototypeOf(n.constructor)===Im}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function H1(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function vS(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(Vo,13),u.Y36(mo,10),u.Y36(dp,10),u.Y36(Bo,10),u.Y36(W1,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([v3]),u.qOj,u.TTD]}),n})(),bm=(()=>{class n{constructor(){this._validator=hS}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):hS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const A3={provide:mo,useExisting:(0,u.Gpc)(()=>DS),multi:!0};let DS=(()=>{class n extends bm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=u.VuI,this.createValidator=t=>Hk}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([A3]),u.qOj]}),n})(),P3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[TF]}),n})(),F3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:W1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Uv,useValue:t.callSetDisabledState??_S}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[P3]}),n})(),L3=(()=>{class n{constructor(){this.firestore=(0,u.f3M)(N1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var St=R(7582),B3=R(4266);const V3=["addListener","removeListener"],$3=["addEventListener","removeEventListener"],U3=["on","off"];function Q1(n,e,t,r){if((0,Bi.m)(t)&&(r=t,t=void 0),r)return Q1(n,e,t).pipe(Ia(r));const[i,a]=function G3(n){return(0,Bi.m)(n.addEventListener)&&(0,Bi.m)(n.removeEventListener)}(n)?$3.map(c=>f=>n[c](e,f,t)):function j3(n){return(0,Bi.m)(n.addListener)&&(0,Bi.m)(n.removeListener)}(n)?V3.map(jF(n,e)):function H3(n){return(0,Bi.m)(n.on)&&(0,Bi.m)(n.off)}(n)?U3.map(jF(n,e)):[];if(!i&&(0,B3.z)(n))return(0,ti.z)(c=>Q1(c,e,t))((0,rl.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Li.y(c=>{const f=(...m)=>c.next(1<m.length?m:m[0]);return i(f),()=>a(f)})}function jF(n,e){return t=>r=>n[t](e,r)}R(6506),R(8899),R(5298),R(8077);var J1=R(7876),W3=(R(544),R(1273)),vI=R(8354),HF=(R(1767),R(645)),GF=(R(7643),R(4587),R(6953));const Y3=J1.i,Ot=["*"],zF=n=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(n):"function"==typeof requestAnimationFrame?requestAnimationFrame(n):setTimeout(n);let EI=(()=>{class n{constructor(t,r){this.injector=t,this.el=r,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(t){this.el.nativeElement.value=this.lastValue=t,jv(this.el)}handleValueChange(t,r){t===this.el.nativeElement&&(r!==this.lastValue&&(this.lastValue=r,this.onChange(r)),jv(this.el))}_handleBlurEvent(t){t===this.el.nativeElement&&(this.onTouched(),jv(this.el))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.el.nativeElement.disabled=t}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let t;try{t=this.injector.get(eh)}catch{}if(!t)return;t.statusChanges&&(this.statusChanges=t.statusChanges.subscribe(()=>jv(this.el)));const r=t.control;r&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(a=>{if(typeof r[a]<"u"){const c=r[a].bind(r);r[a]=(...f)=>{c(...f),jv(this.el)}}})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,hostBindings:function(t,r){1&t&&u.NdJ("ionBlur",function(a){return r._handleBlurEvent(a.target)})}}),n})();const jv=n=>{zF(()=>{const e=n.nativeElement,t=null!=e.value&&e.value.toString().length>0,r=rj(e);eN(e,r);const i=e.closest("ion-item");i&&eN(i,t?[...r,"item-has-value"]:r)})},rj=n=>{const e=n.classList,t=[];for(let r=0;r<e.length;r++){const i=e.item(r);null!==i&&ij(i,"ng-")&&t.push(`ion-${i.substring(3)}`)}return t},eN=(n,e)=>{const t=n.classList;t.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),t.add(...e)},ij=(n,e)=>n.substring(0,e.length)===e;let WF=(()=>{class n extends EI{constructor(t,r){super(t,r)}_handleInputEvent(t){this.handleValueChange(t,t.value)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(t,r){1&t&&u.NdJ("ionInput",function(a){return r._handleInputEvent(a.target)})},features:[u._Bn([{provide:Bo,useExisting:n,multi:!0}]),u.qOj]}),n})();const cj=(n,e)=>{const t=n.prototype;e.forEach(r=>{Object.defineProperty(t,r,{get(){return this.el[r]},set(i){this.z.runOutsideAngular(()=>this.el[r]=i)}})})},uj=(n,e)=>{const t=n.prototype;e.forEach(r=>{t[r]=function(){const i=arguments;return this.z.runOutsideAngular(()=>this.el[r].apply(this.el,i))}})},Jn=(n,e,t)=>{t.forEach(r=>n[r]=Q1(e,r))};function At(n){return function(t){const{defineCustomElementFn:r,inputs:i,methods:a}=n;return void 0!==r&&r(),i&&cj(t,i),a&&uj(t,a),t}}let qF=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-app"]],ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({})],n),n})(),YF=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,Jn(this,this.el,["ionFocus","ionBlur"])}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],n),n})(),KF=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],n),n})(),ZF=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["mode"]})],n),n})(),XF=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["color","mode","translucent"]})],n),n})(),QF=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["color","mode"]})],n),n})(),JF=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],n),n})(),eL=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,Jn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],n),n})(),tL=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["fixed"]})],n),n})(),nL=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,Jn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],n),n})(),rL=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],n),n})(),iL=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],n),n})(),sL=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ion-row"]],ngContentSelectors:Ot,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,St.gn)([At({})],n),n})();const aL=new u.OlP("USERCONFIG");let IH=(()=>{class n{constructor(t,r){this.doc=t,this.backButton=new Xi.x,this.keyboardDidShow=new Xi.x,this.keyboardDidHide=new Xi.x,this.pause=new Xi.x,this.resume=new Xi.x,this.resize=new Xi.x,r.run(()=>{let i;this.win=t.defaultView,this.backButton.subscribeWithPriority=function(a,c){return this.subscribe(f=>f.register(a,m=>r.run(()=>c(m))))},Hv(this.pause,t,"pause"),Hv(this.resume,t,"resume"),Hv(this.backButton,t,"ionBackButton"),Hv(this.resize,this.win,"resize"),Hv(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Hv(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(a=>{i=a}),this.win?.cordova?t.addEventListener("deviceready",()=>{i("cordova")},{once:!0}):i("dom")})}is(t){return(0,J1.a)(this.win,t)}platforms(){return(0,J1.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(t){return bH(this.win.location.href,t)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia?.("(orientation: portrait)").matches}testUserAgent(t){const r=this.win.navigator;return!!(r?.userAgent&&r.userAgent.indexOf(t)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ie),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bH=(n,e)=>{e=e.replace(/[[\]\\]/g,"\\$&");const r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null},Hv=(n,e,t)=>{e&&e.addEventListener(t,r=>{const i=r?.detail;n.next(i)})};let wI=(()=>{class n{constructor(t,r,i,a){this.location=r,this.serializer=i,this.router=a,this.direction=lL,this.animated=cL,this.guessDirection="forward",this.lastNavId=-1,a&&a.events.subscribe(c=>{if(c instanceof xa){const f=c.restoredState?c.restoredState.navigationId:c.id;this.guessDirection=f<this.lastNavId?"back":"forward",this.guessAnimation=c.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?c.id:f}}),t.backButton.subscribeWithPriority(0,c=>{this.pop(),c()})}navigateForward(t,r={}){return this.setDirection("forward",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}navigateBack(t,r={}){return this.setDirection("back",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}navigateRoot(t,r={}){return this.setDirection("root",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}back(t={animated:!0,animationDirection:"back"}){return this.setDirection("back",t.animated,t.animationDirection,t.animation),this.location.back()}pop(){var t=this;return(0,tt.Z)(function*(){let r=t.topOutlet;for(;r;){if(yield r.pop())return!0;r=r.parentOutlet}return!1})()}setDirection(t,r,i,a){this.direction=t,this.animated=CH(t,r,i),this.animationBuilder=a}setTopOutlet(t){this.topOutlet=t}consumeTransition(){let r,t="root";const i=this.animationBuilder;return"auto"===this.direction?(t=this.guessDirection,r=this.guessAnimation):(r=this.animated,t=this.direction),this.direction=lL,this.animated=cL,this.animationBuilder=void 0,{direction:t,animation:r,animationBuilder:i}}navigate(t,r){if(Array.isArray(t))return this.router.navigate(t,r);{const i=this.serializer.parse(t.toString());return void 0!==r.queryParams&&(i.queryParams={...r.queryParams}),void 0!==r.fragment&&(i.fragment=r.fragment),this.router.navigateByUrl(i,r)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(IH),u.LFG(pe),u.LFG(Te),u.LFG(Ni,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CH=(n,e,t)=>{if(!1!==e){if(void 0!==t)return t;if("forward"===n||"back"===n)return n;if("root"===n&&!0===e)return"forward"}},lL="auto",cL=void 0;class uL{constructor(e={}){this.data=e}get(e){return this.data[e]}}let TS=(()=>{class n{constructor(){this.zone=(0,u.f3M)(u.R0b),this.applicationRef=(0,u.f3M)(u.z2F)}create(t,r,i){return new DH(t,r,this.applicationRef,this.zone,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class DH{constructor(e,t,r,i,a){this.environmentInjector=e,this.injector=t,this.applicationRef=r,this.zone=i,this.elementReferenceKey=a,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,t,r,i){return this.zone.run(()=>new Promise(a=>{const c={...r};void 0!==this.elementReferenceKey&&(c[this.elementReferenceKey]=e),a(TH(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,e,t,c,i,this.elementReferenceKey))}))}removeViewFromDom(e,t){return this.zone.run(()=>new Promise(r=>{const i=this.elRefMap.get(t);if(i){i.destroy(),this.elRefMap.delete(t);const a=this.elEventsMap.get(t);a&&(a(),this.elEventsMap.delete(t))}r()}))}}const TH=(n,e,t,r,i,a,c,f,m,v,D)=>{const S=u.zs3.create({providers:AH(m),parent:t}),F=(0,u.LMc)(f,{environmentInjector:e,elementInjector:S}),Q=F.instance,me=F.location.nativeElement;if(m&&(D&&void 0!==Q[D]&&console.error(`[Ionic Error]: ${D} is a reserved property when using ${c.tagName.toLowerCase()}. Rename or remove the "${D}" property from ${f.name}.`),Object.assign(Q,m)),v)for(const et of v)me.classList.add(et);const qe=dL(n,Q,me);return c.appendChild(me),r.attachView(F.hostView),i.set(me,F),a.set(me,qe),me},SH=[vI.L,vI.a,vI.b,vI.c,vI.d],dL=(n,e,t)=>n.run(()=>{const r=SH.filter(i=>"function"==typeof e[i]).map(i=>{const a=c=>e[i](c.detail);return t.addEventListener(i,a),()=>t.removeEventListener(i,a)});return()=>r.forEach(i=>i())}),hL=new u.OlP("NavParamsToken"),AH=n=>[{provide:hL,useValue:n},{provide:uL,useFactory:MH,deps:[hL]}],MH=n=>new uL(n);let AS=(()=>{class n{constructor(t,r,i,a,c){this.locationStrategy=t,this.navCtrl=r,this.elementRef=i,this.router=a,this.routerLink=c,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const t=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=t}}onClick(t){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ie),u.Y36(wI),u.Y36(u.SBq),u.Y36(Ni),u.Y36(Kc,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(a){return r.onClick(a)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[u.TTD]}),n})();class yL{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,t,r){return this.ctrl.dismiss(e,t,r)}getTop(){return this.ctrl.getTop()}}let GH=(()=>{class n extends yL{constructor(){super(HF.m),this.angularDelegate=(0,u.f3M)(TS),this.injector=(0,u.f3M)(u.zs3),this.environmentInjector=(0,u.f3M)(u.lqb)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),zH=(()=>{class n extends yL{constructor(){super(HF.c),this.angularDelegate=(0,u.f3M)(TS),this.injector=(0,u.f3M)(u.zs3),this.environmentInjector=(0,u.f3M)(u.lqb)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const WH=(n,e,t)=>()=>{if(e.defaultView&&typeof window<"u"){(0,W3.s)({...n,_zoneGate:a=>t.run(a)});const i="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function q3(){var n=[];if(typeof window<"u"){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&n.push(R.e(6748).then(R.t.bind(R,3342,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var r=new URL("b","http://a");return r.pathname="c%20d","http://a/c%20d"===r.href&&r.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&n.push(R.e(2214).then(R.t.bind(R,2668,23)))}return Promise.all(n)}().then(()=>((n,e)=>typeof window>"u"?Promise.resolve():(0,GF.p)().then(()=>(Y3(),(0,GF.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),e))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:zF,jmp:a=>t.runOutsideAngular(a),ael(a,c,f,m){a[i](c,f,m)},rel(a,c,f,m){a.removeEventListener(c,f,m)}}))}};let qH=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:aL,useValue:t},{provide:u.ip1,useFactory:WH,multi:!0,deps:[aL,Ie,u.R0b]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[TS,GH,zH],imports:[Vs]}),n})(),YH=(()=>{class n{constructor(){this.userServices=(0,u.f3M)(L3),this.authService=(0,u.f3M)(wm),this.loginForm=new yS({email:new bS,password:new bS})}onSubmit(){this.authService.signIn(this.loginForm.get("email")?.value,this.loginForm.get("password")?.value)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login"]],decls:16,vars:1,consts:[[3,"formGroup"],["type","email","formControlName","email","required",""],["type","password","formControlName","password","required",""],["offset","4"],[3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),u._uU(3,"Mileage Calculator"),u.qZA()(),u.TgZ(4,"ion-card-content")(5,"form",0)(6,"ion-list")(7,"ion-item"),u._UZ(8,"ion-input",1),u.qZA(),u.TgZ(9,"ion-item"),u._UZ(10,"ion-input",2),u.qZA()(),u.TgZ(11,"ion-grid")(12,"ion-row")(13,"ion-col",3)(14,"ion-button",4),u.NdJ("click",function(){return r.onSubmit()}),u._uU(15," Log in"),u.qZA()()()()()()()),2&t&&(u.xp6(5),u.Q6J("formGroup",r.loginForm))},dependencies:[YF,KF,ZF,XF,QF,JF,tL,nL,rL,iL,sL,WF,CF,cF,uF,DS,CS,K1],styles:[".text-space[_ngcontent-%COMP%]{letter-spacing:calc(10vw - 16px);padding-left:calc(10vw - 16px);text-align:center}.login-grid[_ngcontent-%COMP%]{margin-top:50%}"]}),n})(),KH=(()=>{class n{constructor(){this.authService=(0,u.f3M)(wm)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Sign Up"),u.qZA(),u.TgZ(5,"div",3),u._UZ(6,"input",4,5),u.qZA(),u.TgZ(8,"div",3),u._UZ(9,"input",6,7),u.qZA(),u.TgZ(11,"div",3)(12,"input",8),u.NdJ("click",function(){u.CHM(i);const c=u.MAs(7),f=u.MAs(10);return u.KtG(r.authService.signUp(c.value,f.value))}),u.qZA()(),u.TgZ(13,"div",3)(14,"span",9)(15,"span",10),u._uU(16,"Or"),u.qZA()()(),u.TgZ(17,"div",3)(18,"button",11),u.NdJ("click",function(){return r.authService.googleAuth()}),u._UZ(19,"i",12),u._uU(20," Continue with Google "),u.qZA()()(),u.TgZ(21,"div",13)(22,"span"),u._uU(23,"Already have an account? "),u.TgZ(24,"span",14),u._uU(25,"Log In"),u.qZA()()()()()}},dependencies:[Kc,AS]}),n})(),ZH=(()=>{class n{constructor(){this.authService=(0,u.f3M)(wm)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Reset Password"),u.qZA(),u.TgZ(5,"p",3),u._uU(6,"Please enter your email address to request a password reset."),u.qZA(),u.TgZ(7,"div",4),u._UZ(8,"input",5,6),u.qZA(),u.TgZ(10,"div",4)(11,"input",7),u.NdJ("click",function(){u.CHM(i);const c=u.MAs(9);return u.KtG(r.authService.forgotPassword(c.value))}),u.qZA()()(),u.TgZ(12,"div",8)(13,"span"),u._uU(14,"Go back to ? "),u.TgZ(15,"span",9),u._uU(16,"Log In"),u.qZA()()()()()}},dependencies:[Kc,AS]}),n})();function XH(n,e){if(1&n&&(u.TgZ(0,"div",4)(1,"p",9),u._uU(2,"We have sent a confirmation email to "),u.TgZ(3,"strong"),u._uU(4),u.qZA(),u._uU(5,"."),u.qZA(),u.TgZ(6,"p",9),u._uU(7,"Please check your email and click on the link to verfiy your email address."),u.qZA()()),2&n){const t=e.ngIf;u.xp6(4),u.Oqu(t.email)}}const QH=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:YH},{path:"register-user",component:KH},{path:"dashboard",component:VU,canActivate:[(n,e)=>{const t=(0,u.f3M)(wm),r=(0,u.f3M)(Ni);return!0!==t.isLoggedIn&&r.navigate(["login"]),!0}]},{path:"forgot-password",component:ZH},{path:"verify-email-address",component:(()=>{class n{constructor(){this.authService=(0,u.f3M)(wm)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Thank You for Registering"),u.qZA(),u.YNc(5,XH,8,1,"div",3),u.TgZ(6,"div",4)(7,"button",5),u.NdJ("click",function(){return r.authService.sendVerificationMail()}),u._UZ(8,"i",6),u._uU(9," Resend Verification Email "),u.qZA()()(),u.TgZ(10,"div",7)(11,"span"),u._uU(12,"Go back to?"),u.TgZ(13,"span",8),u._uU(14," Sign in"),u.qZA()()()()()),2&t&&(u.xp6(5),u.Q6J("ngIf",r.authService.userData))},dependencies:[Yi,Kc,AS]}),n})()}];let JH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[by.forRoot(QH),by]}),n})(),e6=(()=>{class n{constructor(){this.title="mileageCalculator"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&(u.TgZ(0,"ion-app")(1,"ion-content"),u._UZ(2,"router-outlet"),u.qZA()())},dependencies:[_0,qF,eL]}),n})();const _L="firebasestorage.googleapis.com",vL="storageBucket";class Ii extends j.ZR{constructor(e,t,r=0){super(iN(e),`Firebase Storage: ${t} (${iN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ii.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var _n=(()=>((_n=_n||{}).UNKNOWN="unknown",_n.OBJECT_NOT_FOUND="object-not-found",_n.BUCKET_NOT_FOUND="bucket-not-found",_n.PROJECT_NOT_FOUND="project-not-found",_n.QUOTA_EXCEEDED="quota-exceeded",_n.UNAUTHENTICATED="unauthenticated",_n.UNAUTHORIZED="unauthorized",_n.UNAUTHORIZED_APP="unauthorized-app",_n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",_n.INVALID_CHECKSUM="invalid-checksum",_n.CANCELED="canceled",_n.INVALID_EVENT_NAME="invalid-event-name",_n.INVALID_URL="invalid-url",_n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",_n.NO_DEFAULT_BUCKET="no-default-bucket",_n.CANNOT_SLICE_BLOB="cannot-slice-blob",_n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",_n.NO_DOWNLOAD_URL="no-download-url",_n.INVALID_ARGUMENT="invalid-argument",_n.INVALID_ARGUMENT_COUNT="invalid-argument-count",_n.APP_DELETED="app-deleted",_n.INVALID_ROOT_OPERATION="invalid-root-operation",_n.INVALID_FORMAT="invalid-format",_n.INTERNAL_ERROR="internal-error",_n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",_n))();function iN(n){return"storage/"+n}function sN(){return new Ii(_n.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function EL(){return new Ii(_n.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wL(){return new Ii(_n.CANCELED,"User canceled the upload/download.")}function IL(){return new Ii(_n.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gv(n){return new Ii(_n.INVALID_ARGUMENT,n)}function bL(){return new Ii(_n.APP_DELETED,"The Firebase app was deleted.")}function CL(n){return new Ii(_n.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function II(n,e){return new Ii(_n.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function bI(n){throw new Ii(_n.INTERNAL_ERROR,"Internal error: "+n)}class yo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=yo.makeFromUrl(e,t)}catch{return new yo(e,"")}if(""===r.path)return r;throw function d6(n){return new Ii(_n.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Gt){Gt.path_=decodeURIComponent(Gt.path)}const S=t.replace(/[.]/g,"\\."),Nt=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Gt){"/"===Gt.path.charAt(Gt.path.length-1)&&(Gt.path_=Gt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===_L?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Gt=0;Gt<Nt.length;Gt++){const In=Nt[Gt],Ln=In.regex.exec(e);if(Ln){let Ga=Ln[In.indices.path];Ga||(Ga=""),r=new yo(Ln[In.indices.bucket],Ga),In.postModify(r);break}}if(null==r)throw function u6(n){return new Ii(_n.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class m6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function MS(n){return"string"==typeof n||n instanceof String}function DL(n){return oN()&&n instanceof Blob}function oN(){return typeof Blob<"u"&&!(0,j.UG)()}function aN(n,e,t,r){if(r<e)throw Gv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Gv(`Invalid value for '${n}'. Expected ${t} or less.`)}function th(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function TL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var la=(()=>((la=la||{})[la.NO_ERROR=0]="NO_ERROR",la[la.NETWORK_ERROR=1]="NETWORK_ERROR",la[la.ABORT=2]="ABORT",la))();function SL(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class I6{constructor(e,t,r,i,a,c,f,m,v,D,S,F=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.retry=F,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,me)=>{this.resolve_=Q,this.reject_=me,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function v6(n){return void 0!==n}(m)?a():a(m)}catch(m){c(m)}else if(null!==f){const m=sN();m.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,m):m)}else c(i.canceled?this.appDelete_?bL():wL():EL())};this.canceled_?t(0,new xS(!1,null,!0)):this.backoffId_=function y6(n,e,t){let r=1,i=null,a=null,c=!1,f=0;function m(){return 2===f}let v=!1;function D(...et){v||(v=!0,e.apply(null,et))}function S(et){i=setTimeout(()=>{i=null,n(Q,m())},et)}function F(){a&&clearTimeout(a)}function Q(et,...Mt){if(v)return void F();if(et)return F(),void D.call(null,et,...Mt);if(m()||c)return F(),void D.call(null,et,...Mt);let Nt;r<64&&(r*=2),1===f?(f=2,Nt=0):Nt=1e3*(r+Math.random()),S(Nt)}let me=!1;function qe(et){me||(me=!0,F(),!v&&(null!==i?(et||(f=2),clearTimeout(i),S(0)):et||(f=1)))}return S(0),a=setTimeout(()=>{c=!0,qe(!0)},t),qe}((r,i)=>{if(i)return void r(!1,new xS(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const f=a.getErrorCode()===la.NO_ERROR,m=a.getStatus();if(!f||SL(m,this.additionalRetryCodes_)&&this.retry){const D=a.getErrorCode()===la.ABORT;return void r(!1,new xS(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new xS(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function _6(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function M6(...n){const e=function A6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(oN())return new Blob(n);throw new Ii(_n.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ua={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lN{constructor(e,t){this.data=e,this.contentType=t||null}}function cN(n,e){switch(n){case Ua.RAW:return new lN(AL(e));case Ua.BASE64:case Ua.BASE64URL:return new lN(ML(n,e));case Ua.DATA_URL:return new lN(function O6(n){const e=new xL(n);return e.base64?ML(Ua.BASE64,e.rest):function N6(n){let e;try{e=decodeURIComponent(n)}catch{throw II(Ua.DATA_URL,"Malformed data URL.")}return AL(e)}(e.rest)}(e),function P6(n){return new xL(n).contentType}(e))}throw sN()}function AL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ML(n,e){switch(n){case Ua.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw II(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ua.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw II(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function R6(n){if(typeof atob>"u")throw function g6(n){return new Ii(_n.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:II(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class xL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw II(Ua.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function k6(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class _u{constructor(e,t){let r=0,i="";DL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(DL(this.data_)){const i=function x6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new _u(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new _u(r,!0)}}static getBlob(...e){if(oN()){const t=e.map(r=>r instanceof _u?r.data_:r);return new _u(M6.apply(null,t))}{const t=e.map(c=>MS(c)?cN(Ua.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[a++]=c[f]}),new _u(i,!0)}}uploadData(){return this.data_}}function uN(n){let e;try{e=JSON.parse(n)}catch{return null}return function w6(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function RL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function B6(n,e){return e}class $o{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||B6}}let RS=null;function CI(){if(RS)return RS;const n=[];n.push(new $o("bucket")),n.push(new $o("generation")),n.push(new $o("metageneration")),n.push(new $o("name","fullPath",!0));const t=new $o("name");t.xform=function e(a,c){return function V6(n){return!MS(n)||n.length<2?n:RL(n)}(c)},n.push(t);const i=new $o("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new $o("timeCreated")),n.push(new $o("updated")),n.push(new $o("md5Hash",null,!0)),n.push(new $o("cacheControl",null,!0)),n.push(new $o("contentDisposition",null,!0)),n.push(new $o("contentEncoding",null,!0)),n.push(new $o("contentLanguage",null,!0)),n.push(new $o("contentType",null,!0)),n.push(new $o("metadata","customMetadata",!0)),RS=n,RS}function NL(n,e,t){const r=uN(e);return null===r?null:function U6(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function $6(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new yo(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function dN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const OL="prefixes",PL="items";class vu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Eu(n){if(!n)throw sN()}function NS(n,e){return function t(r,i){const a=NL(n,i,e);return Eu(null!==a),a}}function zv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function l6(){return new Ii(_n.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function a6(){return new Ii(_n.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function o6(n){return new Ii(_n.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function c6(n){return new Ii(_n.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function DI(n){const e=zv(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function s6(n){return new Ii(_n.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function kL(n,e,t){const i=th(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new vu(i,"GET",NS(n,t),c);return f.errorHandler=DI(e),f}function q6(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=th(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new vu(f,"GET",function z6(n,e){return function t(r,i){const a=function G6(n,e,t){const r=uN(t);return null===r?null:function H6(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[OL])for(const i of t[OL]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new yo(e,a));r.prefixes.push(c)}if(t[PL])for(const i of t[PL]){const a=n._makeStorageReference(new yo(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Eu(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=zv(e),D}function LL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function X6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class OS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function hN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Eu(!1)}return Eu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const t4={STATE_CHANGED:"state_changed"},Uo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fN(n){switch(n){case"running":case"pausing":case"canceling":return Uo.RUNNING;case"paused":return Uo.PAUSED;case"success":return Uo.SUCCESS;case"canceled":return Uo.CANCELED;default:return Uo.ERROR}}class n4{constructor(e,t,r){if(function E6(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Wv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let $L=null;class r4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=la.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=la.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=la.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw bI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class i4 extends r4{initXhr(){this.xhr_.responseType="text"}}function hc(){return $L?$L():new i4}class UL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=CI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(_n.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(SL(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=EL()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(_n.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Q6(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=LL(e,r,i),f={name:c.fullPath},m=th(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=dN(c,t),me=new vu(m,"POST",function Q(qe){let et;hN(qe);try{et=qe.getResponseHeader("X-Goog-Upload-URL")}catch{Eu(!1)}return Eu(MS(et)),et},n.maxUploadRetryTime);return me.urlParams=f,me.headers=D,me.body=S,me.errorHandler=zv(e),me}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hc,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function J6(n,e,t,r){const m=new vu(t,"POST",function a(v){const D=hN(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Eu(!1)}S||Eu(!1);const F=Number(S);return Eu(!isNaN(F)),new OS(F,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=zv(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,hc,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new OS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function e4(n,e,t,r,i,a,c,f){const m=new OS(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function f6(){return new Ii(_n.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let D=v;i>0&&(D=Math.min(D,i));const S=m.current;let Q="";Q=0===D?"finalize":v===D?"upload, finalize":"upload";const me={"X-Goog-Upload-Command":Q,"X-Goog-Upload-Offset":`${m.current}`},qe=r.slice(S,S+D);if(null===qe)throw IL();const Nt=new vu(t,"POST",function et(Gt,In){const Ln=hN(Gt,["active","final"]),as=m.current+D,Ga=r.size();let o0;return o0="final"===Ln?NS(e,a)(Gt,In):null,new OS(as,Ga,"final"===Ln,o0)},e.maxUploadRetryTime);return Nt.headers=me,Nt.body=qe.uploadData(),Nt.progressCallback=f||null,Nt.errorHandler=zv(n),Nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(c,hc,i,a,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=kL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,hc,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function BL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let Nt="";for(let Gt=0;Gt<2;Gt++)Nt+=Math.random().toString().slice(2);return Nt}();c["Content-Type"]="multipart/related; boundary="+m;const v=LL(e,r,i),D=dN(v,t),Q=_u.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===Q)throw IL();const me={name:v.fullPath},qe=th(a,n.host,n._protocol),Mt=n.maxUploadRetryTime,jt=new vu(qe,"POST",NS(n,t),Mt);return jt.urlParams=me,jt.headers=c,jt.body=Q.uploadData(),jt.errorHandler=zv(e),jt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hc,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=wL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=fN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new n4(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(fN(this._state)){case Uo.SUCCESS:Wv(this._resolve.bind(null,this.snapshot))();break;case Uo.CANCELED:case Uo.ERROR:Wv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(fN(this._state)){case Uo.RUNNING:case Uo.PAUSED:e.next&&Wv(e.next.bind(e,this.snapshot))();break;case Uo.SUCCESS:e.complete&&Wv(e.complete.bind(e))();break;default:e.error&&Wv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Cm{constructor(e,t){this._service=e,this._location=t instanceof yo?t:yo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Cm(e,t)}get root(){const e=new yo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RL(this._location.path)}get storage(){return this._service}get parent(){const e=function F6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new yo(this._location.bucket,e);return new Cm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw CL(e)}}function HL(n,e,t){return pN.apply(this,arguments)}function pN(){return pN=(0,tt.Z)(function*(n,e,t){const i=yield GL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield HL(n,e,i.nextPageToken))}),pN.apply(this,arguments)}function GL(n,e){null!=e&&"number"==typeof e.maxResults&&aN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=q6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,hc)}function m4(n){n._throwIfRoot("getDownloadURL");const e=function Y6(n,e,t){const i=th(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new vu(i,"GET",function W6(n,e){return function t(r,i){const a=NL(n,i,e);return Eu(null!==a),function j6(n,e,t,r){const i=uN(e);if(null===i||!MS(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return th("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+TL({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=DI(e),f}(n.storage,n._location,CI());return n.storage.makeRequestWithTokens(e,hc).then(t=>{if(null===t)throw function p6(){return new Ii(_n.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function zL(n,e){const t=function L6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new yo(n._location.bucket,t);return new Cm(n.storage,r)}function WL(n,e){if(n instanceof gN){const t=n;if(null==t._bucket)throw function h6(){return new Ii(_n.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vL+"' property when initializing the app?")}();const r=new Cm(t,t._bucket);return null!=e?WL(r,e):r}return void 0!==e?zL(n,e):n}function E4(n,e){if(e&&function _4(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof gN)return function v4(n,e){return new Cm(n,e)}(n,e);throw Gv("To use ref(service, url), the first argument must be a Storage instance.")}return WL(n,e)}function qL(n,e){const t=e?.[vL];return null==t?null:yo.makeFromBucketSpec(t,n)}class gN{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=_L,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?yo.makeFromBucketSpec(i,this._host):qL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?yo.makeFromBucketSpec(this._url,e):qL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,tt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,tt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Cm(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new m6(bL());{const c=function S6(n,e,t,r,i,a,c=!0){const f=TL(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function D6(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function b6(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function C6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function T6(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new I6(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,tt.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const YL="@firebase/storage";function XL(n,e){return E4(n=(0,j.m9)(n),e)}function x4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new gN(t,r,i,e,Ks.SDK_VERSION)}!function R4(){(0,Ks._registerComponent)(new hl.wA("storage",x4,"PUBLIC").setMultipleInstances(!0)),(0,Ks.registerVersion)(YL,"0.11.2",""),(0,Ks.registerVersion)(YL,"0.11.2","esm2017")}();class PS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class JL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new PS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new PS(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new PS(c,this,this._ref)):{next:t.next?c=>t.next(new PS(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class e2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new nh(e,this._service))}get items(){return this._delegate.items.map(e=>new nh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function M4(n,e){return zL(n,e)}(this._delegate,e);return new nh(t,this.storage)}get root(){return new nh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new JL(function I4(n,e,t){return function d4(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new UL(n,new _u(e),t)}(n=(0,j.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ua.RAW,r){this._throwIfRoot("putString");const i=cN(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new JL(new UL(this._delegate,new _u(i.data,!0),a),this)}listAll(){return function T4(n){return function f4(n){const e={prefixes:[],items:[]};return HL(n,e).then(()=>e)}(n=(0,j.m9)(n))}(this._delegate).then(e=>new e2(e,this.storage))}list(e){return function D4(n,e){return GL(n=(0,j.m9)(n),e)}(this._delegate,e||void 0).then(t=>new e2(t,this.storage))}getMetadata(){return function b4(n){return function p4(n){n._throwIfRoot("getMetadata");const e=kL(n.storage,n._location,CI());return n.storage.makeRequestWithTokens(e,hc)}(n=(0,j.m9)(n))}(this._delegate)}updateMetadata(e){return function C4(n,e){return function g4(n,e){n._throwIfRoot("updateMetadata");const t=function K6(n,e,t,r){const a=th(e.fullServerUrl(),n.host,n._protocol),f=dN(t,r),v=n.maxOperationRetryTime,D=new vu(a,"PATCH",NS(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=f,D.errorHandler=DI(e),D}(n.storage,n._location,e,CI());return n.storage.makeRequestWithTokens(t,hc)}(n=(0,j.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function S4(n){return m4(n=(0,j.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function A4(n){return function y4(n){n._throwIfRoot("deleteObject");const e=function Z6(n,e){const r=th(e.fullServerUrl(),n.host,n._protocol),f=new vu(r,"DELETE",function c(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=DI(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,hc)}(n=(0,j.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw CL(e)}}class t2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(n2(e))throw Gv("ref() expected a child path but got a URL, use refFromURL instead.");return new nh(XL(this._delegate,e),this)}refFromURL(e){if(!n2(e))throw Gv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yo.makeFromUrl(e,this._delegate.host)}catch{throw Gv("refFromUrl() expected a valid full URL but got an invalid one.")}return new nh(XL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function QL(n,e,t,r={}){!function w4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,j.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function n2(n){return/^[A-Za-z]+:\/\//.test(n)}function k4(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new t2(t,r)}function r2(n){const e=function L4(n){return new Li.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function t6(n,e=Qy.z){return(0,$i.e)((t,r)=>{let i=null,a=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=c+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);f()}t.subscribe((0,Mi.x)(r,v=>{a=v,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,dn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function kS(n){return{getDownloadURL:()=>(0,Zt.of)(void 0).pipe(Wn.fc,(0,Sr.w)(()=>n.getDownloadURL()),Wn.iC),getMetadata:()=>(0,Zt.of)(void 0).pipe(Wn.fc,(0,Sr.w)(()=>n.getMetadata()),Wn.iC),delete:()=>(0,Un.D)(n.delete()),child:e=>kS(n.child(e)),updateMetadata:e=>(0,Un.D)(n.updateMetadata(e)),put:(e,t)=>r2(n.put(e,t)),putString:(e,t,r)=>r2(n.putString(e,t,r)),list:e=>(0,Un.D)(n.list(e)),listAll:()=>(0,Un.D)(n.listAll())}}!function F4(n){const e={TaskState:Uo,TaskEvent:t4,StringFormat:Ua,Storage:t2,Reference:nh};n.INTERNAL.registerComponent(new hl.wA("storage-compat",k4,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Z0.Z);const B4=new u.OlP("angularfire2.storageBucket"),V4=new u.OlP("angularfire2.storage.maxUploadRetryTime"),$4=new u.OlP("angularfire2.storage.maxOperationRetryTime"),U4=new u.OlP("angularfire2.storage.use-emulator");let j4=(()=>{class n{constructor(t,r,i,a,c,f,m,v,D,S){const F=(0,ui.on)(t,c,r);this.storage=(0,ui.cc)(`${F.name}.storage.${i}`,"AngularFireStorage",F.name,()=>{const Q=c.runOutsideAngular(()=>F.storage(i||void 0)),me=D;return me&&Q.useEmulator(...me),m&&Q.setMaxUploadRetryTime(m),v&&Q.setMaxOperationRetryTime(v),Q},[m,v])}ref(t){return kS(this.storage.ref(t))}refFromURL(t){return kS(this.storage.refFromURL(t))}upload(t,r,i){return kS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ui.Dh),u.LFG(ui.xv,8),u.LFG(B4,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Wn.HU),u.LFG(V4,8),u.LFG($4,8),u.LFG(U4,8),u.LFG(qy,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),H4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),G4=(()=>{class n{constructor(){rf.Z.registerVersion("angularfire",Wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[j4],imports:[H4]}),n})();var z4=R(2420);const i2="@firebase/database";let mN="";function o2(n){mN=n}class Y4{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,j.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,j.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class K4{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,j.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const a2=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Y4(e)}}catch{}return new K4},Dm=a2("localStorage"),yN=a2("sessionStorage"),qv=new Oa.Yd("@firebase/database"),l2=function(){let n=1;return function(){return n++}}(),c2=function(n){const e=(0,j.dS)(n),t=new j.gQ;t.update(e);const r=t.digest();return j.US.encodeByteArray(r)},TI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=TI.apply(null,r):e+="object"==typeof r?(0,j.Wl)(r):r,e+=" "}return e};let Tm=null,u2=!0;const d2=function(n,e){(0,j.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(qv.logLevel=Oa.in.VERBOSE,Tm=qv.log.bind(qv),e&&yN.set("logging_enabled",!0)):"function"==typeof n?Tm=n:(Tm=null,yN.remove("logging_enabled"))},ks=function(...n){if(!0===u2&&(u2=!1,null===Tm&&!0===yN.get("logging_enabled")&&d2(!0)),Tm){const e=TI.apply(null,n);Tm(e)}},SI=function(n){return function(...e){ks(n,...e)}},_N=function(...n){const e="FIREBASE INTERNAL ERROR: "+TI(...n);qv.error(e)},wu=function(...n){const e=`FIREBASE FATAL ERROR: ${TI(...n)}`;throw qv.error(e),new Error(e)},_o=function(...n){const e="FIREBASE WARNING: "+TI(...n);qv.warn(e)},FS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},hp="[MIN_NAME]",rh="[MAX_NAME]",Sm=function(n,e){if(n===e)return 0;if(n===hp||e===rh)return-1;if(e===hp||n===rh)return 1;{const t=p2(n),r=p2(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Q4=function(n,e){return n===e?0:n<e?-1:1},AI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,j.Wl)(e))},vN=function(n){if("object"!=typeof n||null===n)return(0,j.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,j.Wl)(e[r]),t+=":",t+=vN(n[e[r]]);return t+="}",t},h2=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Fs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const f2=function(n){(0,j.hu)(!FS(n),"Invalid JSON number");const r=1023;let i,a,c,f,m;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(m=0;m<64;m+=8){let F=parseInt(D.substr(m,8),2).toString(16);1===F.length&&(F="0"+F),S+=F}return S.toLowerCase()},nG=new RegExp("^-?(0*)\\d{1,10}$"),p2=function(n){if(nG.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Yv=function(n){try{n()}catch(e){setTimeout(()=>{throw _o("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},MI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class oG{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_o(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class aG{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ks("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_o(e)}}let xI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const v2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,I2="websocket",b2="long_polling";class wN{constructor(e,t,r,i,a=!1,c="",f=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Dm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function C2(n,e,t){let r;if((0,j.hu)("string"==typeof e,"typeof type must == string"),(0,j.hu)("object"==typeof t,"typeof params must == object"),e===I2)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==b2)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function lG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Fs(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class cG{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,j.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,j.p$)(this.counters_)}}const IN={},bN={};function CN(n){const e=n.toString();return IN[e]||(IN[e]=new cG),IN[e]}class dG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fp{constructor(e,t,r,i,a,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SI(e),this.stats_=CN(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),C2(t,b2,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new dG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,j.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new DN((...a)=>{const[c,f,m,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&v2.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fp.forceAllow_=!0}static forceDisallow(){fp.forceDisallow_=!0}static isAvailable(){return!((0,j.Yr)()||!fp.forceAllow_&&(fp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,j.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,j.h$)(t),i=h2(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,j.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,j.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class DN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,j.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=l2(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=DN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){ks("frame writing exception"),f.stack&&ks(f.stack),ks(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ks("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,j.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ks("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let BS=null;typeof MozWebSocket<"u"?BS=MozWebSocket:typeof WebSocket<"u"&&(BS=WebSocket);let Kv=(()=>{class n{constructor(t,r,i,a,c,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SI(this.connId),this.stats_=CN(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const f={v:"5"};return!(0,j.Yr)()&&typeof location<"u"&&location.hostname&&v2.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),c&&(f.p=c),C2(t,I2,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dm.set("previous_websocket_failure",!0);try{let i;if((0,j.Yr)()){i={headers:{"User-Agent":`Firebase/5/${mN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,f=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new BS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==BS&&!n.forceDisallow_}static previouslyFailed(){return Dm.isInMemoryStorage||!0===Dm.get("previous_websocket_failure")}markConnectionHealthy(){Dm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,j.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,j.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,j.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=h2(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),R2=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[fp,Kv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Kv&&Kv.isAvailable();let i=r&&!Kv.previouslyFailed();if(t.webSocketOnly&&(r||_o("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Kv];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class B2{constructor(e,t,r,i,a,c,f,m,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SI("c:"+this.id+":"),this.transportManager_=new R2(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=MI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=AI("t",e),r=AI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=AI("t",e),r=AI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=AI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?_N("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_N("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&_o("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),MI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):MI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class V2{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class $2{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,j.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,j.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class VS extends $2{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,j.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new VS}getInitialEvent(e){return(0,j.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Mr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function _r(){return new Mr("")}function Hn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function pp(n){return n.pieces_.length-n.pieceNum_}function Yr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Mr(n.pieces_,e)}function SN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function RI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function H2(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Mr(e,0)}function gi(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Mr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Mr(t,0)}function Gn(n){return n.pieceNum_>=n.pieces_.length}function jo(n,e){const t=Hn(n),r=Hn(e);if(null===t)return e;if(t===r)return jo(Yr(n),Yr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function OG(n,e){const t=RI(n,0),r=RI(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Sm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function AN(n,e){if(pp(n)!==pp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function bl(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(pp(n)>pp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class PG{constructor(e,t){this.errorPrefix_=t,this.parts_=RI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,j.ug)(this.parts_[r]);G2(this)}}function G2(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Am(n))}function Am(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class MN extends $2{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new MN}getInitialEvent(e){return(0,j.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const NI=1e3;let US,Mm=(()=>{class n extends V2{constructor(t,r,i,a,c,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=SI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=NI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,j.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");MN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&VS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,j.Wl)(c)),(0,j.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new j.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,j.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,j.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const v=m.d,D=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,j.r3)(t,"w")){const i=(0,j.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();_o(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,j.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,j.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,f=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,j.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,j.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):_N("Unrecognized action received from server: "+(0,j.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,j.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=NI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=NI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=NI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,tt.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const D=function(){v?v.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function(Q){(0,j.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(Q)}};const F=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[Q,me]=yield Promise.all([t.authTokenProvider_.getToken(F),t.appCheckTokenProvider_.getToken(F)]);m?ks("getToken() completed but was canceled"):(ks("getToken() completed. Creating connection."),t.authToken_=Q&&Q.accessToken,t.appCheckToken_=me&&me.token,v=new B2(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,qe=>{_o(qe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(Q){t.log_("Failed to get token: "+Q),m||(t.repoInfo_.nodeAdmin&&_o(Q),D())}}})()}interrupt(t){ks("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ks("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,j.xb)(this.interruptReasons_)&&(this.reconnectDelay_=NI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>vN(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Mr(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){ks("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ks("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,j.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+mN.replace(/\./g,"-")]=1,(0,j.uI)()?t["framework.cordova"]=1:(0,j.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=VS.getInstance().currentlyOnline();return(0,j.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Yn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Yn(e,t)}}class $S{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Yn(hp,e),i=new Yn(hp,t);return 0!==this.compare(r,i)}minPost(){return Yn.MIN}}class q2 extends $S{static get __EMPTY_NODE(){return US}static set __EMPTY_NODE(e){US=e}compare(e,t){return Sm(e.name,t.name)}isDefinedOn(e){throw(0,j.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Yn.MIN}maxPost(){return new Yn(rh,US)}makePost(e,t){return(0,j.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Yn(e,US)}toString(){return".key"}}const Iu=new q2;class jS{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let RN,fc=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??ca.EMPTY_NODE,this.right=c??ca.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ca.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ca.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ca{constructor(e,t=ca.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ca(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fc.BLACK,null,null))}remove(e){return new ca(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new jS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new jS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new jS(this.root_,null,this.comparator_,!0,e)}}function jG(n,e){return Sm(n.name,e.name)}function xN(n,e){return Sm(n,e)}ca.EMPTY_NODE=new class UG{copy(e,t,r,i,a){return this}insert(e,t,r){return new fc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Y2=function(n){return"number"==typeof n?"number:"+f2(n):"string:"+n},K2=function(n){if(n.isLeafNode()){const e=n.val();(0,j.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,j.r3)(e,".sv"),"Priority must be a string or number.")}else(0,j.hu)(n===RN||n.isEmpty(),"priority of unexpected type.");(0,j.hu)(n===RN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Z2,X2,Q2,Zv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,j.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),K2(this.priorityNode_)}static set __childrenNodeConstructor(t){Z2=t}static get __childrenNodeConstructor(){return Z2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Gn(t)?this:".priority"===Hn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Hn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,j.hu)(".priority"!==i||1===pp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Y2(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?f2(this.value_):this.value_,this.lazyHash_=c2(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,j.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,j.hu)(a>=0,"Unknown leaf type: "+r),(0,j.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Kr=new class WG extends $S{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Sm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Yn.MIN}maxPost(){return new Yn(rh,new Zv("[PRIORITY-POST]",Q2))}makePost(e,t){const r=X2(e);return new Yn(t,new Zv("[PRIORITY-POST]",r))}toString(){return".priority"}},qG=Math.log(2);class YG{constructor(e){this.count=parseInt(Math.log(e+1)/qG,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const HS=function(n,e,t,r){n.sort(e);const i=function(m,v){const D=v-m;let S,F;if(0===D)return null;if(1===D)return S=n[m],F=t?t(S):S,new fc(F,S.node,fc.BLACK,null,null);{const Q=parseInt(D/2,10)+m,me=i(m,Q),qe=i(Q+1,v);return S=n[Q],F=t?t(S):S,new fc(F,S.node,fc.BLACK,me,qe)}},f=function(m){let v=null,D=null,S=n.length;const F=function(me,qe){const et=S-me,Mt=S;S-=me;const jt=i(et+1,Mt),Nt=n[et],Gt=t?t(Nt):Nt;Q(new fc(Gt,Nt.node,qe,null,jt))},Q=function(me){v?(v.left=me,v=me):(D=me,v=me)};for(let me=0;me<m.count;++me){const qe=m.nextBitIsOne(),et=Math.pow(2,m.count-(me+1));qe?F(et,fc.BLACK):(F(et,fc.BLACK),F(et,fc.RED))}return D}(new YG(n.length));return new ca(r||e,f)};let NN;const Xv={};class ih{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,j.hu)(Xv&&Kr,"ChildrenNode.ts has not been loaded"),NN=NN||new ih({".priority":Xv},{".priority":Kr}),NN}get(e){const t=(0,j.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ca?t:null}hasIndex(e){return(0,j.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,j.hu)(e!==Iu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Yn.Wrap);let f,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();f=i?HS(r,e.getCompare()):Xv;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const D=Object.assign({},this.indexes_);return D[m]=f,new ih(D,v)}addToIndexes(e,t){const r=(0,j.UI)(this.indexes_,(i,a)=>{const c=(0,j.DV)(this.indexSet_,a);if((0,j.hu)(c,"Missing index implementation for "+a),i===Xv){if(c.isDefinedOn(e.node)){const f=[],m=t.getIterator(Yn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),HS(f,c.getCompare())}return Xv}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new Yn(e.name,f))),m.insert(e,e.node)}});return new ih(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,j.UI)(this.indexes_,i=>{if(i===Xv)return i;{const a=t.get(e.name);return a?i.remove(new Yn(e.name,a)):i}});return new ih(r,this.indexSet_)}}let OI,Pn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&K2(this.priorityNode_),this.children_.isEmpty()&&(0,j.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return OI||(OI=new n(new ca(xN),null,ih.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||OI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?OI:r}}getChild(t){const r=Hn(t);return null===r?this:this.getImmediateChild(r).getChild(Yr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,j.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Yn(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?OI:this.priorityNode_;return new n(a,f,c)}}updateChild(t,r){const i=Hn(t);if(null===i)return r;{(0,j.hu)(".priority"!==Hn(t)||1===pp(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Yr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Kr,(f,m)=>{r[f]=m.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):c=!1}),!t&&c&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Y2(this.getPriority().val())+":"),this.forEachChild(Kr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":c2(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Yn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Yn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Yn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Yn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Yn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===PI?-1:0}withIndex(t){if(t===Iu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Iu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Kr),a=r.getIterator(Kr);let c=i.getNext(),f=a.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=a.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===Iu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const PI=new class KG extends Pn{constructor(){super(new ca(xN),Pn.EMPTY_NODE,ih.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Pn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Yn,{MIN:{value:new Yn(hp,Pn.EMPTY_NODE)},MAX:{value:new Yn(rh,PI)}}),q2.__EMPTY_NODE=Pn.EMPTY_NODE,Zv.__childrenNodeConstructor=Pn,function HG(n){RN=n}(PI),function zG(n){Q2=n}(PI);const ZG=!0;function bi(n,e=null){if(null===n)return Pn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,j.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Zv(n,bi(e));if(n instanceof Array||!ZG){let t=Pn.EMPTY_NODE;return Fs(n,(r,i)=>{if((0,j.r3)(n,r)&&"."!==r.substring(0,1)){const a=bi(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(bi(e))}{const t=[];let r=!1;if(Fs(n,(c,f)=>{if("."!==c.substring(0,1)){const m=bi(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Yn(c,m)))}}),0===t.length)return Pn.EMPTY_NODE;const a=HS(t,jG,c=>c.name,xN);if(r){const c=HS(t,Kr.getCompare());return new Pn(a,bi(e),new ih({".priority":c},{".priority":Kr}))}return new Pn(a,bi(e),ih.Default)}}!function GG(n){X2=n}(bi);class ON extends $S{constructor(e){super(),this.indexPath_=e,(0,j.hu)(!Gn(e)&&".priority"!==Hn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Sm(e.name,t.name):a}makePost(e,t){const r=bi(e),i=Pn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Yn(t,i)}maxPost(){const e=Pn.EMPTY_NODE.updateChild(this.indexPath_,PI);return new Yn(rh,e)}toString(){return RI(this.indexPath_,0).join("/")}}const PN=new class XG extends $S{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Sm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Yn.MIN}maxPost(){return Yn.MAX}makePost(e,t){const r=bi(e);return new Yn(t,r)}toString(){return".value"}};function J2(n){return{type:"value",snapshotNode:n}}function Qv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function kI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function FI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class kN{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,j.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(kI(t,f)):(0,j.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Qv(t,r)):c.trackChildChange(FI(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Kr,(i,a)=>{t.hasChild(i)||r.trackChildChange(kI(i,a))}),t.isLeafNode()||t.forEachChild(Kr,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(FI(i,a,c))}else r.trackChildChange(Qv(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Pn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class LI{constructor(e){this.indexedFilter_=new kN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=LI.getStartPost_(e),this.endPost_=LI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,c){return this.matches(new Yn(t,r))||(r=Pn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Pn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Pn.EMPTY_NODE);const a=this;return t.forEachChild(Kr,(c,f)=>{a.matches(new Yn(c,f))||(i=i.updateImmediateChild(c,Pn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class JG{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new LI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new Yn(t,r))||(r=Pn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Pn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Pn.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),c++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Pn.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:i=i.updateImmediateChild(f.name,Pn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(F,Q)=>S(Q,F)}else c=this.index_.getCompare();const f=e;(0,j.hu)(f.numChildren()===this.limit_,"");const m=new Yn(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(f.hasChild(t)){const S=f.getImmediateChild(t);let F=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=F&&(F.name===t||f.hasChild(F.name));)F=i.getChildAfterChild(this.index_,F,this.reverse_);const Q=null==F?1:c(F,m);if(D&&!r.isEmpty()&&Q>=0)return a?.trackChildChange(FI(t,r,S)),f.updateImmediateChild(t,r);{a?.trackChildChange(kI(t,S));const qe=f.updateImmediateChild(t,Pn.EMPTY_NODE);return null!=F&&this.rangedFilter_.matches(F)?(a?.trackChildChange(Qv(F.name,F.node)),qe.updateImmediateChild(F.name,F.node)):qe}}return r.isEmpty()?e:D&&c(v,m)>=0?(null!=a&&(a.trackChildChange(kI(v.name,v.node)),a.trackChildChange(Qv(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,Pn.EMPTY_NODE)):e}}class GS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,j.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,j.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,j.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,j.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,j.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kr}copy(){const e=new GS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function FN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function LN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function zS(n,e){const t=n.copy();return t.index_=e,t}function eB(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Kr?t="$priority":n.index_===PN?t="$value":n.index_===Iu?t="$key":((0,j.hu)(n.index_ instanceof ON,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,j.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,j.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,j.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,j.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,j.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function tB(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Kr&&(e.i=n.index_.toString()),e}class WS extends V2{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=SI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,j.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=WS.getListenId_(e,r),f={};this.listens_[c]=f;const m=eB(e._queryParams);this.restRequest_(a+".json",m,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,j.DV)(this.listens_,c)===f){let F;F=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(F,null)}})}unlisten(e,t){const r=WS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=eB(e._queryParams),r=e._path.toString(),i=new j.BH;return this.restRequest_(r+".json",t,(a,c)=>{let f=c;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,j.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,j.cI)(f.responseText)}catch{_o("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&_o("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class sz{constructor(){this.rootNode_=Pn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function qS(){return{value:null,children:new Map}}function Jv(n,e,t){if(Gn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Hn(e);n.children.has(r)||n.children.set(r,qS()),Jv(n.children.get(r),e=Yr(e),t)}}function BN(n,e){if(Gn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Kr,(r,i)=>{Jv(n,new Mr(r),i)}),BN(n,e)}}if(n.children.size>0){const t=Hn(e);return e=Yr(e),n.children.has(t)&&BN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function VN(n,e,t){null!==n.value?t(e,n.value):function oz(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{VN(i,new Mr(e.toString()+"/"+r),t)})}class az{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fs(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class uz{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new az(e);const r=1e4+2e4*Math.random();MI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Fs(e,(i,a)=>{a>0&&(0,j.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),MI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var os=(()=>((os=os||{})[os.OVERWRITE=0]="OVERWRITE",os[os.MERGE=1]="MERGE",os[os.ACK_USER_WRITE=2]="ACK_USER_WRITE",os[os.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",os))();function jN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class YS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=os.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Gn(this.path)){if(null!=this.affectedTree.value)return(0,j.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Mr(e));return new YS(_r(),t,this.revert)}}return(0,j.hu)(Hn(this.path)===e,"operationForChild called for unrelated child."),new YS(Yr(this.path),this.affectedTree,this.revert)}}class BI{constructor(e,t){this.source=e,this.path=t,this.type=os.LISTEN_COMPLETE}operationForChild(e){return Gn(this.path)?new BI(this.source,_r()):new BI(this.source,Yr(this.path))}}class xm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=os.OVERWRITE}operationForChild(e){return Gn(this.path)?new xm(this.source,_r(),this.snap.getImmediateChild(e)):new xm(this.source,Yr(this.path),this.snap)}}class e0{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=os.MERGE}operationForChild(e){if(Gn(this.path)){const t=this.children.subtree(new Mr(e));return t.isEmpty()?null:t.value?new xm(this.source,_r(),t.value):new e0(this.source,_r(),t)}return(0,j.hu)(Hn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new e0(this.source,Yr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Gn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Hn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class dz{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function VI(n,e,t,r,i,a){const c=r.filter(f=>f.type===t);c.sort((f,m)=>function pz(n,e,t){if(null==e.childName||null==t.childName)throw(0,j.g5)("Should only compare child_ events.");const r=new Yn(e.childName,e.snapshotNode),i=new Yn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),c.forEach(f=>{const m=function fz(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function KS(n,e){return{eventCache:n,serverCache:e}}function $I(n,e,t,r){return KS(new gp(e,t,r),n.serverCache)}function rB(n,e,t,r){return KS(n.eventCache,new gp(e,t,r))}function ZS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Rm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let HN;class Zr{constructor(e,t=(()=>(HN||(HN=new ca(Q4)),HN))()){this.value=e,this.children=t}static fromObject(e){let t=new Zr(null);return Fs(e,(r,i)=>{t=t.set(new Mr(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:_r(),value:this.value};if(Gn(e))return null;{const r=Hn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Yr(e),t);return null!=a?{path:gi(new Mr(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Gn(e))return this;{const t=Hn(e),r=this.children.get(t);return null!==r?r.subtree(Yr(e)):new Zr(null)}}set(e,t){if(Gn(e))return new Zr(t,this.children);{const r=Hn(e),a=(this.children.get(r)||new Zr(null)).set(Yr(e),t),c=this.children.insert(r,a);return new Zr(this.value,c)}}remove(e){if(Gn(e))return this.children.isEmpty()?new Zr(null):new Zr(null,this.children);{const t=Hn(e),r=this.children.get(t);if(r){const i=r.remove(Yr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Zr(null):new Zr(this.value,a)}return this}}get(e){if(Gn(e))return this.value;{const t=Hn(e),r=this.children.get(t);return r?r.get(Yr(e)):null}}setTree(e,t){if(Gn(e))return t;{const r=Hn(e),a=(this.children.get(r)||new Zr(null)).setTree(Yr(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Zr(this.value,c)}}fold(e){return this.fold_(_r(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(gi(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_r(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Gn(e))return null;{const a=Hn(e),c=this.children.get(a);return c?c.findOnPath_(Yr(e),gi(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_r(),t)}foreachOnPath_(e,t,r){if(Gn(e))return this;{this.value&&r(t,this.value);const i=Hn(e),a=this.children.get(i);return a?a.foreachOnPath_(Yr(e),gi(t,i),r):new Zr(null)}}foreach(e){this.foreach_(_r(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(gi(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class pc{constructor(e){this.writeTree_=e}static empty(){return new pc(new Zr(null))}}function UI(n,e,t){if(Gn(e))return new pc(new Zr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=jo(i,e);return a=a.updateChild(c,t),new pc(n.writeTree_.set(i,a))}{const i=new Zr(t),a=n.writeTree_.setTree(e,i);return new pc(a)}}}function GN(n,e,t){let r=n;return Fs(t,(i,a)=>{r=UI(r,gi(e,i),a)}),r}function iB(n,e){if(Gn(e))return pc.empty();{const t=n.writeTree_.setTree(e,new Zr(null));return new pc(t)}}function zN(n,e){return null!=Nm(n,e)}function Nm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(jo(t.path,e)):null}function sB(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Kr,(r,i)=>{e.push(new Yn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Yn(r,i.value))}),e}function mp(n,e){if(Gn(e))return n;{const t=Nm(n,e);return new pc(null!=t?new Zr(t):n.writeTree_.subtree(e))}}function WN(n){return n.writeTree_.isEmpty()}function t0(n,e){return oB(_r(),n.writeTree_,e)}function oB(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,j.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=oB(gi(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(gi(n,".priority"),r)),t}}function XS(n,e){return dB(e,n)}function Ez(n,e){if(n.snap)return bl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&bl(gi(n.path,t),e))return!0;return!1}function Iz(n){return n.visible}function aB(n,e,t){let r=pc.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let f;if(a.snap)bl(t,c)?(f=jo(t,c),r=UI(r,f,a.snap)):bl(c,t)&&(f=jo(c,t),r=UI(r,_r(),a.snap.getChild(f)));else{if(!a.children)throw(0,j.g5)("WriteRecord should have .snap or .children");if(bl(t,c))f=jo(t,c),r=GN(r,f,a.children);else if(bl(c,t))if(f=jo(c,t),Gn(f))r=GN(r,_r(),a.children);else{const m=(0,j.DV)(a.children,Hn(f));if(m){const v=m.getChild(Yr(f));r=UI(r,_r(),v)}}}}}return r}function lB(n,e,t,r,i){if(r||i){const a=mp(n.visibleWrites,e);return!i&&WN(a)?t:i||null!=t||zN(a,_r())?t0(aB(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(bl(v.path,e)||bl(e,v.path))},e),t||Pn.EMPTY_NODE):null}{const a=Nm(n.visibleWrites,e);if(null!=a)return a;{const c=mp(n.visibleWrites,e);return WN(c)?t:null!=t||zN(c,_r())?t0(c,t||Pn.EMPTY_NODE):null}}}function QS(n,e,t,r){return lB(n.writeTree,n.treePath,e,t,r)}function qN(n,e){return function bz(n,e,t){let r=Pn.EMPTY_NODE;const i=Nm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Kr,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=mp(n.visibleWrites,e);return t.forEachChild(Kr,(c,f)=>{const m=t0(mp(a,new Mr(c)),f);r=r.updateImmediateChild(c,m)}),sB(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return sB(mp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function cB(n,e,t,r){return function Cz(n,e,t,r,i){(0,j.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=gi(e,t);if(zN(n.visibleWrites,a))return null;{const c=mp(n.visibleWrites,a);return WN(c)?i.getChild(t):t0(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function JS(n,e){return function Tz(n,e){return Nm(n.visibleWrites,e)}(n.writeTree,gi(n.treePath,e))}function YN(n,e,t){return function Dz(n,e,t,r){const i=gi(e,t),a=Nm(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?t0(mp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function uB(n,e){return dB(gi(n.treePath,e),n.writeTree)}function dB(n,e){return{treePath:n,writeTree:e}}class xz{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,j.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,j.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,FI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,kI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Qv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,j.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,FI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const hB=new class Rz{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class KN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return YN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rm(this.viewCache_),a=function Mz(n,e,t,r,i,a){return function Sz(n,e,t,r,i,a,c){let f;const m=mp(n.visibleWrites,e),v=Nm(m,_r());if(null!=v)f=v;else{if(null==t)return[];f=t0(m,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const D=[],S=c.getCompare(),F=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let Q=F.getNext();for(;Q&&D.length<i;)0!==S(Q,r)&&D.push(Q),Q=F.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function fB(n,e,t,r,i,a){const c=e.eventCache;if(null!=JS(r,t))return e;{let f,m;if(Gn(t))if((0,j.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Rm(e),S=qN(r,v instanceof Pn?v:Pn.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=QS(r,Rm(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=Hn(t);if(".priority"===v){(0,j.hu)(1===pp(t),"Can't have a priority with additional path components");const D=c.getNode();m=e.serverCache.getNode();const S=cB(r,t,D,m);f=null!=S?n.filter.updatePriority(D,S):c.getNode()}else{const D=Yr(t);let S;if(c.isCompleteForChild(v)){m=e.serverCache.getNode();const F=cB(r,t,c.getNode(),m);S=null!=F?c.getNode().getImmediateChild(v).updateChild(D,F):c.getNode().getImmediateChild(v)}else S=YN(r,v,e.serverCache);f=null!=S?n.filter.updateChild(c.getNode(),v,S,D,i,a):c.getNode()}}return $I(e,f,c.isFullyInitialized()||Gn(t),n.filter.filtersNodes())}}function eA(n,e,t,r,i,a,c,f){const m=e.serverCache;let v;const D=c?n.filter:n.filter.getIndexedFilter();if(Gn(t))v=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const Q=m.getNode().updateChild(t,r);v=D.updateFullNode(m.getNode(),Q,null)}else{const Q=Hn(t);if(!m.isCompleteForPath(t)&&pp(t)>1)return e;const me=Yr(t),et=m.getNode().getImmediateChild(Q).updateChild(me,r);v=".priority"===Q?D.updatePriority(m.getNode(),et):D.updateChild(m.getNode(),Q,et,me,hB,null)}const S=rB(e,v,m.isFullyInitialized()||Gn(t),D.filtersNodes());return fB(n,S,t,i,new KN(i,S,a),f)}function ZN(n,e,t,r,i,a,c){const f=e.eventCache;let m,v;const D=new KN(i,e,a);if(Gn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=$I(e,v,!0,n.filter.filtersNodes());else{const S=Hn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=$I(e,v,f.isFullyInitialized(),f.isFiltered());else{const F=Yr(t),Q=f.getNode().getImmediateChild(S);let me;if(Gn(F))me=r;else{const qe=D.getCompleteChild(S);me=null!=qe?".priority"===SN(F)&&qe.getChild(H2(F)).isEmpty()?qe:qe.updateChild(F,r):Pn.EMPTY_NODE}m=Q.equals(me)?e:$I(e,n.filter.updateChild(f.getNode(),S,me,F,D,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function pB(n,e){return n.eventCache.isCompleteForChild(e)}function gB(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function XN(n,e,t,r,i,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=Gn(t)?r:new Zr(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,F)=>{if(D.hasChild(S)){const me=gB(0,e.serverCache.getNode().getImmediateChild(S),F);m=eA(n,m,new Mr(S),me,i,a,c,f)}}),v.children.inorderTraversal((S,F)=>{const Q=!e.serverCache.isCompleteForChild(S)&&null===F.value;if(!D.hasChild(S)&&!Q){const qe=gB(0,e.serverCache.getNode().getImmediateChild(S),F);m=eA(n,m,new Mr(S),qe,i,a,c,f)}}),m}class $z{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new kN(r.getIndex()),a=function ez(n){return n.loadsAllData()?new kN(n.getIndex()):n.hasLimit()?new JG(n):new LI(n)}(r);this.processor_=function Nz(n){return{filter:n}}(a);const c=t.serverCache,f=t.eventCache,m=i.updateFullNode(Pn.EMPTY_NODE,c.getNode(),null),v=a.updateFullNode(Pn.EMPTY_NODE,f.getNode(),null),D=new gp(m,c.isFullyInitialized(),i.filtersNodes()),S=new gp(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=KS(S,D),this.eventGenerator_=new dz(this.query_)}get query(){return this.query_}}function Hz(n,e){const t=Rm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Gn(e)&&!t.getImmediateChild(Hn(e)).isEmpty())?t.getChild(e):null}function mB(n){return 0===n.eventRegistrations_.length}function yB(n,e,t){const r=[];if(t){(0,j.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function _B(n,e,t,r){e.type===os.MERGE&&null!==e.source.queryId&&((0,j.hu)(Rm(n.viewCache_),"We should always have a full cache before handling merges"),(0,j.hu)(ZS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Pz(n,e,t,r,i){const a=new xz;let c,f;if(t.type===os.OVERWRITE){const v=t;v.source.fromUser?c=ZN(n,e,v.path,v.snap,r,i,a):((0,j.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!Gn(v.path),c=eA(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===os.MERGE){const v=t;v.source.fromUser?c=function Fz(n,e,t,r,i,a,c){let f=e;return r.foreach((m,v)=>{const D=gi(t,m);pB(e,Hn(D))&&(f=ZN(n,f,D,v,i,a,c))}),r.foreach((m,v)=>{const D=gi(t,m);pB(e,Hn(D))||(f=ZN(n,f,D,v,i,a,c))}),f}(n,e,v.path,v.children,r,i,a):((0,j.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),c=XN(n,e,v.path,v.children,r,i,f,a))}else if(t.type===os.ACK_USER_WRITE){const v=t;c=v.revert?function Vz(n,e,t,r,i,a){let c;if(null!=JS(r,t))return e;{const f=new KN(r,e,i),m=e.eventCache.getNode();let v;if(Gn(t)||".priority"===Hn(t)){let D;if(e.serverCache.isFullyInitialized())D=QS(r,Rm(e));else{const S=e.serverCache.getNode();(0,j.hu)(S instanceof Pn,"serverChildren would be complete if leaf node"),D=qN(r,S)}v=n.filter.updateFullNode(m,D,a)}else{const D=Hn(t);let S=YN(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),v=null!=S?n.filter.updateChild(m,D,S,Yr(t),f,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,Pn.EMPTY_NODE,Yr(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=QS(r,Rm(e)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=JS(r,_r()),$I(e,v,c,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Lz(n,e,t,r,i,a,c){if(null!=JS(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Gn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return eA(n,e,t,m.getNode().getChild(t),i,a,f,c);if(Gn(t)){let v=new Zr(null);return m.getNode().forEachChild(Iu,(D,S)=>{v=v.set(new Mr(D),S)}),XN(n,e,t,v,i,a,f,c)}return e}{let v=new Zr(null);return r.foreach((D,S)=>{const F=gi(t,D);m.isCompleteForPath(F)&&(v=v.set(D,m.getNode().getChild(F)))}),XN(n,e,t,v,i,a,f,c)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==os.LISTEN_COMPLETE)throw(0,j.g5)("Unknown operation type: "+t.type);c=function Bz(n,e,t,r,i){const a=e.serverCache;return fB(n,rB(e,a.getNode(),a.isFullyInitialized()||Gn(t),a.isFiltered()),t,r,hB,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function kz(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ZS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(J2(ZS(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,i,e,t,r);return function Oz(n,e){(0,j.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,j.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,j.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,vB(n,a.changes,a.viewCache.eventCache.getNode(),null)}function vB(n,e,t,r){return function hz(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function QG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),VI(n,i,"child_removed",e,r,t),VI(n,i,"child_added",e,r,t),VI(n,i,"child_moved",a,r,t),VI(n,i,"child_changed",e,r,t),VI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let tA,rA;class EB{constructor(){this.views=new Map}}function QN(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,j.hu)(null!=a,"SyncTree gave us an op for an invalid query."),_B(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(_B(c,e,t,r));return a}}function wB(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let f=QS(t,i?r:null),m=!1;f?m=!0:r instanceof Pn?(f=qN(t,r),m=!1):(f=Pn.EMPTY_NODE,m=!1);const v=KS(new gp(f,m,!1),new gp(r,i,!1));return new $z(e,v)}return c}function IB(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yp(n,e){let t=null;for(const r of n.views.values())t=t||Hz(r,e);return t}function bB(n,e){return e._queryParams.loadsAllData()?nA(n):n.views.get(e._queryIdentifier)}function CB(n,e){return null!=bB(n,e)}function _p(n){return null!=nA(n)}function nA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Jz=1;class DB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zr(null),this.pendingWriteTree_=function Az(){return{visibleWrites:pc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JN(n,e,t,r,i){return function mz(n,e,t,r,i){(0,j.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=UI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?n0(n,new xm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function vp(n,e,t=!1){const r=function _z(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function vz(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,j.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&Ez(f,r.path)?i=!1:bl(r.path,f.path)&&(a=!0)),c--}return!!i&&(a?(function wz(n){n.visibleWrites=aB(n.allWrites,Iz,_r()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=iB(n.visibleWrites,r.path):Fs(r.children,m=>{n.visibleWrites=iB(n.visibleWrites,gi(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Zr(null);return null!=r.snap?a=a.set(_r(),!0):Fs(r.children,c=>{a=a.set(new Mr(c),!0)}),n0(n,new YS(r.path,a,t))}return[]}function jI(n,e,t){return n0(n,new xm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function iA(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let f=[];if(c&&("default"===e._queryIdentifier||CB(c,e))){const m=function Zz(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const f=_p(n);if("default"===i)for(const[m,v]of n.views.entries())c=c.concat(yB(v,t,r)),mB(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(c=c.concat(yB(m,t,r)),mB(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!_p(n)&&a.push(new(function qz(){return(0,j.hu)(tA,"Reference.ts has not been loaded"),tA}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function Yz(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(f=m.events,!i){const D=-1!==v.findIndex(F=>F._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(F,Q)=>_p(Q));if(D&&!S){const F=n.syncPointTree_.subtree(a);if(!F.isEmpty()){const Q=function oW(n){return n.fold((e,t,r)=>{if(t&&_p(t))return[nA(t)];{let i=[];return t&&(i=IB(t)),Fs(r,(a,c)=>{i=i.concat(c)}),i}})}(F);for(let me=0;me<Q.length;++me){const qe=Q[me],et=qe.query,Mt=MB(n,qe);n.listenProvider_.startListening(GI(et),HI(n,et),Mt.hashFn,Mt.onComplete)}}}!S&&v.length>0&&!r&&(D?n.listenProvider_.stopListening(GI(e),null):v.forEach(F=>{const Q=n.queryToTagMap.get(oA(F));n.listenProvider_.stopListening(GI(F),Q)}))}!function aW(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=oA(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return f}function TB(n,e,t,r){const i=tO(n,r);if(null!=i){const a=nO(i),c=a.path,f=a.queryId,m=jo(c,e);return rO(n,c,new xm(jN(f),m,t))}return[]}function eO(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(F,Q)=>{const me=jo(F,i);a=a||yp(Q,me),c=c||_p(Q)});let m,f=n.syncPointTree_.get(i);f?(c=c||_p(f),a=a||yp(f,_r())):(f=new EB,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?m=!0:(m=!1,a=Pn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((Q,me)=>{const qe=yp(me,_r());qe&&(a=a.updateImmediateChild(Q,qe))}));const v=CB(f,e);if(!v&&!e._queryParams.loadsAllData()){const F=oA(e);(0,j.hu)(!n.queryToTagMap.has(F),"View does not exist, but we have a tag");const Q=function lW(){return Jz++}();n.queryToTagMap.set(F,Q),n.tagToQueryMap.set(Q,F)}let S=function Kz(n,e,t,r,i,a){const c=wB(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Gz(n,e){n.eventRegistrations_.push(e)}(c,t),function zz(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Kr,(a,c)=>{r.push(Qv(a,c))}),t.isFullyInitialized()&&r.push(J2(t.getNode())),vB(n,r,t.getNode(),e)}(c,t)}(f,e,t,XS(n.pendingWriteTree_,i),a,m);if(!v&&!c&&!r){const F=bB(f,e);S=S.concat(function cW(n,e,t){const r=e._path,i=HI(n,e),a=MB(n,t),c=n.listenProvider_.startListening(GI(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,j.hu)(!_p(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,D,S)=>{if(!Gn(v)&&D&&_p(D))return[nA(D).query];{let F=[];return D&&(F=F.concat(IB(D).map(Q=>Q.query))),Fs(S,(Q,me)=>{F=F.concat(me)}),F}});for(let v=0;v<m.length;++v){const D=m[v];n.listenProvider_.stopListening(GI(D),HI(n,D))}}return c}(n,e,F))}return S}function sA(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,f)=>{const v=yp(f,jo(c,e));if(v)return v});return lB(i,e,a,t,!0)}function n0(n,e){return SB(e,n.syncPointTree_,null,XS(n.pendingWriteTree_,_r()))}function SB(n,e,t,r){if(Gn(n.path))return AB(n,e,t,r);{const i=e.get(_r());null==t&&null!=i&&(t=yp(i,_r()));let a=[];const c=Hn(n.path),f=n.operationForChild(c),m=e.children.get(c);if(m&&f){const v=t?t.getImmediateChild(c):null,D=uB(r,c);a=a.concat(SB(f,m,v,D))}return i&&(a=a.concat(QN(i,n,r,t))),a}}function AB(n,e,t,r){const i=e.get(_r());null==t&&null!=i&&(t=yp(i,_r()));let a=[];return e.children.inorderTraversal((c,f)=>{const m=t?t.getImmediateChild(c):null,v=uB(r,c),D=n.operationForChild(c);D&&(a=a.concat(AB(D,f,m,v)))}),i&&(a=a.concat(QN(i,n,r,t))),a}function MB(n,e){const t=e.query,r=HI(n,t);return{hashFn:()=>(function Uz(n){return n.viewCache_.serverCache.getNode()}(e)||Pn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function rW(n,e,t){const r=tO(n,t);if(r){const i=nO(r),a=i.path,c=i.queryId,f=jo(a,e);return rO(n,a,new BI(jN(c),f))}return[]}(n,t._path,r):function nW(n,e){return n0(n,new BI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function tG(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return iA(n,t,null,a)}}}}function HI(n,e){const t=oA(e);return n.queryToTagMap.get(t)}function oA(n){return n._path.toString()+"$"+n._queryIdentifier}function tO(n,e){return n.tagToQueryMap.get(e)}function nO(n){const e=n.indexOf("$");return(0,j.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Mr(n.substr(0,e))}}function rO(n,e,t){const r=n.syncPointTree_.get(e);return(0,j.hu)(r,"Missing sync point for query tag that we're tracking"),QN(r,t,XS(n.pendingWriteTree_,e),null)}function GI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Qz(){return(0,j.hu)(rA,"Reference.ts has not been loaded"),rA}())(n._repo,n._path):n}class iO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new iO(t)}node(){return this.node_}}class sO{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gi(this.path_,e);return new sO(this.syncTree_,t)}node(){return sA(this.syncTree_,this.path_)}}const uW=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},xB=function(n,e,t){return n&&"object"==typeof n?((0,j.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?dW(n[".sv"],e,t):"object"==typeof n[".sv"]?hW(n[".sv"],e):void(0,j.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},dW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,j.hu)(!1,"Unexpected server value: "+n)},hW=function(n,e,t){n.hasOwnProperty("increment")||(0,j.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,j.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,j.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},RB=function(n,e,t,r){return aO(e,new sO(t,n),r)},oO=function(n,e,t){return aO(n,new iO(e),t)};function aO(n,e,t){const r=n.getPriority().val(),i=xB(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,f=xB(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new Zv(f,bi(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Zv(i))),c.forEachChild(Kr,(f,m)=>{const v=aO(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class lO{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function aA(n,e){let t=e instanceof Mr?e:new Mr(e),r=n,i=Hn(t);for(;null!==i;){const a=(0,j.DV)(r.node.children,i)||{children:{},childCount:0};r=new lO(i,r,a),t=Yr(t),i=Hn(t)}return r}function Om(n){return n.node.value}function cO(n,e){n.node.value=e,uO(n)}function NB(n){return n.node.childCount>0}function lA(n,e){Fs(n.node.children,(t,r)=>{e(new lO(t,n,r))})}function OB(n,e,t,r){t&&!r&&e(n),lA(n,i=>{OB(i,e,!0,r)}),t&&r&&e(n)}function zI(n){return new Mr(null===n.parent?n.name:zI(n.parent)+"/"+n.name)}function uO(n){null!==n.parent&&function gW(n,e,t){const r=function fW(n){return void 0===Om(n)&&!NB(n)}(t),i=(0,j.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,uO(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,uO(n))}(n.parent,n.name,n)}const mW=/[\[\].#$\/\u0000-\u001F\u007F]/,yW=/[\[\].#$\u0000-\u001F\u007F]/,dO=10485760,cA=function(n){return"string"==typeof n&&0!==n.length&&!mW.test(n)},PB=function(n){return"string"==typeof n&&0!==n.length&&!yW.test(n)},WI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!FS(n)||n&&"object"==typeof n&&(0,j.r3)(n,".sv")},bu=function(n,e,t,r){r&&void 0===e||qI((0,j.gK)(n,"value"),e,t)},qI=function(n,e,t){const r=t instanceof Mr?new PG(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Am(r));if("function"==typeof e)throw new Error(n+"contains a function "+Am(r)+" with contents = "+e.toString());if(FS(e))throw new Error(n+"contains "+e.toString()+" "+Am(r));if("string"==typeof e&&e.length>dO/3&&(0,j.ug)(e)>dO)throw new Error(n+"contains a string greater than "+dO+" utf8 bytes "+Am(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Fs(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!cA(c)))throw new Error(n+" contains an invalid key ("+c+") "+Am(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function kG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,j.ug)(e),G2(n)})(r,c),qI(n,f,r),function FG(n){const e=n.parts_.pop();n.byteLength_-=(0,j.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Am(r)+" in addition to actual children.")}},kB=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,j.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Fs(e,(c,f)=>{const m=new Mr(c);if(qI(i,f,gi(t,m)),".priority"===SN(m)&&!WI(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=RI(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!cA(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(OG);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&bl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},hO=function(n,e,t){if(!t||void 0!==e){if(FS(e))throw new Error((0,j.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!WI(e))throw new Error((0,j.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},YI=function(n,e,t,r){if(!(r&&void 0===t||cA(t)))throw new Error((0,j.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},KI=function(n,e,t,r){if(!(r&&void 0===t||PB(t)))throw new Error((0,j.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},EW=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),KI(n,e,t,r)},Cl=function(n,e){if(".info"===Hn(e))throw new Error(n+" failed = Can't modify data under /.info/")},FB=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),PB(n)}(t))throw new Error((0,j.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!AN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function LB(n,e,t){uA(n,t),BB(n,r=>AN(r,e))}function ja(n,e,t){uA(n,t),BB(n,r=>bl(r,e)||bl(e,r))}function BB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(IW(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function IW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Tm&&ks("event: "+t.toString()),Yv(r)}}}const VB="repo_interrupt",bW=25;class CW{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qS(),this.transactionQueueTree_=new lO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $B(n){const t=n.infoData_.getNode(new Mr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ZI(n){return uW({timestamp:$B(n)})}function UB(n,e,t,r,i){n.dataUpdateCount++;const a=new Mr(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const m=(0,j.UI)(t,v=>bi(v));c=function iW(n,e,t,r){const i=tO(n,r);if(i){const a=nO(i),c=a.path,f=a.queryId,m=jo(c,e),v=Zr.fromObject(t);return rO(n,c,new e0(jN(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=bi(t);c=TB(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,j.UI)(t,v=>bi(v));c=function tW(n,e,t){const r=Zr.fromObject(t);return n0(n,new e0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=bi(t);c=jI(n.serverSyncTree_,a,m)}let f=a;c.length>0&&(f=s0(n,a)),ja(n.eventQueue_,f,c)}function jB(n,e){fO(n,"connected",e),!1===e&&function MW(n){r0(n,"onDisconnectEvents");const e=ZI(n),t=qS();VN(n.onDisconnect_,_r(),(i,a)=>{const c=RB(i,a,n.serverSyncTree_,e);Jv(t,i,c)});let r=[];VN(t,_r(),(i,a)=>{r=r.concat(jI(n.serverSyncTree_,i,a));const c=yO(n,i);s0(n,c)}),n.onDisconnect_=qS(),ja(n.eventQueue_,_r(),r)}(n)}function fO(n,e,t){const r=new Mr("/.info/"+e),i=bi(t);n.infoData_.updateSnapshot(r,i);const a=jI(n.infoSyncTree_,r,i);ja(n.eventQueue_,r,a)}function dA(n){return n.nextWriteId_++}function pO(n,e,t,r,i){r0(n,"set",{path:e.toString(),value:t,priority:r});const a=ZI(n),c=bi(t,r),f=sA(n.serverSyncTree_,e),m=oO(c,f,a),v=dA(n),D=JN(n.serverSyncTree_,e,m,v,!0);uA(n.eventQueue_,D),n.server_.put(e.toString(),c.val(!0),(F,Q)=>{const me="ok"===F;me||_o("set at "+e+" failed: "+F);const qe=vp(n.serverSyncTree_,v,!me);ja(n.eventQueue_,e,qe),Ep(0,i,F,Q)});const S=yO(n,e);s0(n,S),ja(n.eventQueue_,S,[])}function xW(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&BN(n.onDisconnect_,e),Ep(0,t,r,i)})}function HB(n,e,t,r){const i=bi(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&Jv(n.onDisconnect_,e,i),Ep(0,r,a,c)})}function gO(n,e,t){let r;r=".info"===Hn(e._path)?iA(n.infoSyncTree_,e,t):iA(n.serverSyncTree_,e,t),LB(n.eventQueue_,e._path,r)}function GB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(VB)}function r0(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ks(t,...e)}function Ep(n,e,t,r){e&&Yv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function mO(n,e,t){return sA(n.serverSyncTree_,e,t)||Pn.EMPTY_NODE}function hA(n,e=n.transactionQueueTree_){if(e||fA(n,e),Om(e)){const t=WB(n,e);(0,j.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function FW(n,e,t){const r=t.map(v=>v.currentWriteId),i=mO(n,e,r);let a=i;const c=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,j.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=jo(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{r0(n,"transaction put response",{path:m.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let F=0;F<t.length;F++)t[F].status=2,D=D.concat(vp(n.serverSyncTree_,t[F].currentWriteId)),t[F].onComplete&&S.push(()=>t[F].onComplete(null,!0,t[F].currentOutputSnapshotResolved)),t[F].unwatcher();fA(n,aA(n.transactionQueueTree_,e)),hA(n,n.transactionQueueTree_),ja(n.eventQueue_,e,D);for(let F=0;F<S.length;F++)Yv(S[F])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{_o("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}s0(n,e)}},c)}(n,zI(e),t)}else NB(e)&&lA(e,t=>{hA(n,t)})}function s0(n,e){const t=zB(n,e),r=zI(t);return function LW(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=jo(t,m.path);let S,D=!1;if((0,j.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(vp(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=bW)D=!0,S="maxretry",i=i.concat(vp(n.serverSyncTree_,m.currentWriteId,!0));else{const F=mO(n,m.path,c);m.currentInputSnapshot=F;const Q=e[f].update(F.val());if(void 0!==Q){qI("transaction failed: Data returned ",Q,m.path);let me=bi(Q);"object"==typeof Q&&null!=Q&&(0,j.r3)(Q,".priority")||(me=me.updatePriority(F.getPriority()));const et=m.currentWriteId,Mt=ZI(n),jt=oO(me,F,Mt);m.currentOutputSnapshotRaw=me,m.currentOutputSnapshotResolved=jt,m.currentWriteId=dA(n),c.splice(c.indexOf(et),1),i=i.concat(JN(n.serverSyncTree_,m.path,jt,m.currentWriteId,m.applyLocally)),i=i.concat(vp(n.serverSyncTree_,et,!0))}else D=!0,S="nodata",i=i.concat(vp(n.serverSyncTree_,m.currentWriteId,!0))}ja(n.eventQueue_,t,i),i=[],D&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}fA(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Yv(r[f]);hA(n,n.transactionQueueTree_)}(n,WB(n,t),r),r}function zB(n,e){let t,r=n.transactionQueueTree_;for(t=Hn(e);null!==t&&void 0===Om(r);)r=aA(r,t),t=Hn(e=Yr(e));return r}function WB(n,e){const t=[];return qB(n,e,t),t.sort((r,i)=>r.order-i.order),t}function qB(n,e,t){const r=Om(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);lA(e,i=>{qB(n,i,t)})}function fA(n,e){const t=Om(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,cO(e,t.length>0?t:void 0)}lA(e,r=>{fA(n,r)})}function yO(n,e){const t=zI(zB(n,e)),r=aA(n.transactionQueueTree_,e);return function pW(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{_O(n,i)}),_O(n,r),OB(r,i=>{_O(n,i)}),t}function _O(n,e){const t=Om(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,j.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,j.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(vp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?cO(e,void 0):t.length=a+1,ja(n.eventQueue_,zI(e),i);for(let c=0;c<r.length;c++)Yv(r[c])}}const vO=function(n,e){const t=$W(n),r=t.namespace;return"firebase.com"===t.domain&&wu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&wu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&_o("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new wN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Mr(t.pathString)}},$W=function(n){let e="",t="",r="",i="",a="",c=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function BW(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const F=function VW(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_o(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(c="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const Q=e.slice(0,v);if("localhost"===Q.toLowerCase())t="localhost";else if(Q.split(".").length<=2)t=Q;else{const me=e.indexOf(".");r=e.substring(0,me).toLowerCase(),t=e.substring(me+1),a=r}"ns"in F&&(a=F.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:a}},YB="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",UW=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=YB.charAt(t%64),t=Math.floor(t/64);(0,j.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=YB.charAt(e[i]);return(0,j.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class KB{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,j.Wl)(this.snapshot.exportVal())}}class ZB{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class EO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,j.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class XB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new j.BH;return xW(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Cl("OnDisconnect.remove",this._path);const e=new j.BH;return HB(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Cl("OnDisconnect.set",this._path),bu("OnDisconnect.set",e,this._path,!1);const t=new j.BH;return HB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Cl("OnDisconnect.setWithPriority",this._path),bu("OnDisconnect.setWithPriority",e,this._path,!1),hO("OnDisconnect.setWithPriority",t,!1);const r=new j.BH;return function RW(n,e,t,r,i){const a=bi(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,f)=>{"ok"===c&&Jv(n.onDisconnect_,e,a),Ep(0,i,c,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Cl("OnDisconnect.update",this._path),kB("OnDisconnect.update",e,this._path,!1);const t=new j.BH;return function NW(n,e,t,r){if((0,j.xb)(t))return ks("onDisconnect().update() called with empty data.  Don't do anything."),void Ep(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Fs(t,(c,f)=>{const m=bi(f);Jv(n.onDisconnect_,gi(e,c),m)}),Ep(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ua{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Gn(this._path)?null:SN(this._path)}get ref(){return new Dl(this._repo,this._path)}get _queryIdentifier(){const e=tB(this._queryParams),t=vN(e);return"{}"===t?"default":t}get _queryObject(){return tB(this._queryParams)}isEqual(e){if(!((e=(0,j.m9)(e))instanceof ua))return!1;const t=this._repo===e._repo,r=AN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function NG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function pA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function wp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Iu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==hp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==rh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Kr){if(null!=e&&!WI(e)||null!=t&&!WI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,j.hu)(n.getIndex()instanceof ON||n.getIndex()===PN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function gA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Dl extends ua{constructor(e,t){super(e,t,new GS,!1)}get parent(){const e=H2(this._path);return null===e?null:new Dl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Pm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Mr(e),r=km(this.ref,e);return new Pm(this._node.getChild(t),r,Kr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Pm(i,km(this.ref,r),Kr)))}hasChild(e){const t=new Mr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function QB(n,e){return(n=(0,j.m9)(n))._checkNotDeleted("ref"),void 0!==e?km(n._root,e):n._root}function JB(n,e){(n=(0,j.m9)(n))._checkNotDeleted("refFromURL");const t=vO(e,n._repo.repoInfo_.nodeAdmin);FB("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&wu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),QB(n,t.path.toString())}function km(n,e){return null===Hn((n=(0,j.m9)(n))._path)?EW("child","path",e,!1):KI("child","path",e,!1),new Dl(n._repo,gi(n._path,e))}function wO(n,e){n=(0,j.m9)(n),Cl("set",n._path),bu("set",e,n._path,!1);const t=new j.BH;return pO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function WW(n,e){kB("update",e,n._path,!1);const t=new j.BH;return function AW(n,e,t,r){r0(n,"update",{path:e.toString(),value:t});let i=!0;const a=ZI(n),c={};if(Fs(t,(f,m)=>{i=!1,c[f]=RB(gi(e,f),bi(m),n.serverSyncTree_,a)}),i)ks("update() called with empty data.  Don't do anything."),Ep(0,r,"ok",void 0);else{const f=dA(n),m=function eW(n,e,t,r){!function yz(n,e,t,r){(0,j.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=GN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Zr.fromObject(t);return n0(n,new e0({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,f);uA(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||_o("update at "+e+" failed: "+v);const F=vp(n.serverSyncTree_,f,!S),Q=F.length>0?s0(n,e):e;ja(n.eventQueue_,Q,F),Ep(0,r,v,D)}),Fs(t,v=>{const D=yO(n,gi(e,v));s0(n,D)}),ja(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function qW(n){n=(0,j.m9)(n);const e=new EO(()=>{}),t=new XI(e);return function SW(n,e,t){const r=function sW(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=jo(v,t);r=r||yp(D,S)});let i=n.syncPointTree_.get(t);i?r=r||yp(i,_r()):(i=new EB,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new gp(r,!0,!1):null;return function jz(n){return ZS(n.viewCache_)}(wB(i,e,XS(n.pendingWriteTree_,e._path),a?c.getNode():Pn.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=bi(i).withIndex(e._queryParams.getIndex());let c;if(eO(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=jI(n.serverSyncTree_,e._path,a);else{const f=HI(n.serverSyncTree_,e);c=TB(n.serverSyncTree_,e._path,a,f)}return ja(n.eventQueue_,e._path,c),iA(n.serverSyncTree_,e,t,null,!0),a},i=>(r0(n,"get for query "+(0,j.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Pm(r,new Dl(n._repo,n._path),n._queryParams.getIndex()))}class XI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new KB("value",this,new Pm(e.snapshotNode,new Dl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ZB(this,e,t):null}matches(e){return e instanceof XI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ZB(this,e,t):null}createEvent(e,t){(0,j.hu)(null!=e.childName,"Child events should have a childName.");const r=km(new Dl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new KB(e.type,this,new Pm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof mA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function QI(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(D,S)=>{gO(n._repo,n,f),m(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const c=new EO(t,a||void 0),f="value"===e?new XI(c):new mA(e,c);return function OW(n,e,t){let r;r=".info"===Hn(e._path)?eO(n.infoSyncTree_,e,t):eO(n.serverSyncTree_,e,t),LB(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>gO(n._repo,n,f)}function IO(n,e,t,r){return QI(n,"value",e,t,r)}function eV(n,e,t,r){return QI(n,"child_added",e,t,r)}function tV(n,e,t,r){return QI(n,"child_changed",e,t,r)}function nV(n,e,t,r){return QI(n,"child_moved",e,t,r)}function rV(n,e,t,r){return QI(n,"child_removed",e,t,r)}function iV(n,e,t){let r=null;const i=t?new EO(t):null;"value"===e?r=new XI(i):e&&(r=new mA(e,i)),gO(n._repo,n,r)}class gc{}class sV extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bu("endAt",this._value,e._path,!0);const t=LN(e._queryParams,this._value,this._key);if(gA(t),wp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ua(e._repo,e._path,t,e._orderByCalled)}}class KW extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bu("endBefore",this._value,e._path,!1);const t=function iz(n,e,t){let r;return r=LN(n,e,n.index_===Iu||t?t:hp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(gA(t),wp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ua(e._repo,e._path,t,e._orderByCalled)}}class oV extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bu("startAt",this._value,e._path,!0);const t=FN(e._queryParams,this._value,this._key);if(gA(t),wp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ua(e._repo,e._path,t,e._orderByCalled)}}class QW extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bu("startAfter",this._value,e._path,!1);const t=function rz(n,e,t){let r;return r=FN(n,e,n.index_===Iu||t?t:rh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(gA(t),wp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ua(e._repo,e._path,t,e._orderByCalled)}}class e5 extends gc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ua(e._repo,e._path,function tz(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class n5 extends gc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ua(e._repo,e._path,function nz(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class i5 extends gc{constructor(e){super(),this._path=e}_apply(e){pA(e,"orderByChild");const t=new Mr(this._path);if(Gn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ON(t),i=zS(e._queryParams,r);return wp(i),new ua(e._repo,e._path,i,!0)}}class o5 extends gc{_apply(e){pA(e,"orderByKey");const t=zS(e._queryParams,Iu);return wp(t),new ua(e._repo,e._path,t,!0)}}class l5 extends gc{_apply(e){pA(e,"orderByPriority");const t=zS(e._queryParams,Kr);return wp(t),new ua(e._repo,e._path,t,!0)}}class u5 extends gc{_apply(e){pA(e,"orderByValue");const t=zS(e._queryParams,PN);return wp(t),new ua(e._repo,e._path,t,!0)}}class h5 extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(bu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sV(this._value,this._key)._apply(new oV(this._value,this._key)._apply(e))}}function mc(n,...e){let t=(0,j.m9)(n);for(const r of e)t=r._apply(t);return t}(function Wz(n){(0,j.hu)(!tA,"__referenceConstructor has already been defined"),tA=n})(Dl),function Xz(n){(0,j.hu)(!rA,"__referenceConstructor has already been defined"),rA=n}(Dl);const bO={};function lV(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||wu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ks("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,c=vO(a,i),f=c.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,c=vO(a,i),f=c.repoInfo):m=!c.repoInfo.secure;const D=i&&m?new xI(xI.OWNER):new aG(n.name,n.options,e);FB("Invalid Firebase Database URL",c),Gn(c.path)||wu("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function y5(n,e,t,r){let i=bO[e.name];i||(i={},bO[e.name]=i);let a=i[n.toURLString()];return a&&wu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new CW(n,false,t,r),i[n.toURLString()]=a,a}(f,n,D,new oG(n.name,t));return new v5(S,n)}class v5{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function DW(n,e,t){if(n.stats_=CN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new WS(n.repoInfo_,(r,i,a,c)=>{UB(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>jB(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,j.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Mm(n.repoInfo_,e,(r,i,a,c)=>{UB(n,r,i,a,c)},r=>{jB(n,r)},r=>{!function TW(n,e){Fs(e,(t,r)=>{fO(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function uG(n,e){const t=n.toString();return bN[t]||(bN[t]=e()),bN[t]}(n.repoInfo_,()=>new uz(n.stats_,n.server_)),n.infoData_=new sz,n.infoSyncTree_=new DB({startListening:(r,i,a,c)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=jI(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),fO(n,"connected",!1),n.serverSyncTree_=new DB({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(f,m)=>{const v=c(f,m);ja(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dl(this._repo,_r())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function m5(n,e){const t=bO[e];(!t||t[n.key]!==n)&&wu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),GB(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&wu("Cannot call "+e+" on a deleted database.")}}function cV(){R2.IS_TRANSPORT_INITIALIZED&&_o("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function E5(){cV(),fp.forceDisallow()}function w5(){cV(),Kv.forceDisallow(),fp.forceAllow()}function C5(n,e){d2(n,e)}const T5={".sv":"timestamp"};class M5{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Mm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Mm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function D5(n){o2(Ks.SDK_VERSION),(0,Ks._registerComponent)(new hl.wA("database",(e,{instanceIdentifier:t})=>lV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ks.registerVersion)(i2,"0.14.4",n),(0,Ks.registerVersion)(i2,"0.14.4","esm2017")}();const O5=new Oa.Yd("@firebase/database-compat"),dV=function(n){O5.warn("FIREBASE WARNING: "+n)};class F5{constructor(e){this._delegate=e}cancel(e){(0,j.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,j.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,j.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,j.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,j.Dv)("OnDisconnect.set",1,2,arguments.length),(0,j.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,j.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,j.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,j.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,dV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,j.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class L5{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,j.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ip{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,j.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,j.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,j.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,j.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,j.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),KI("DataSnapshot.child","path",e,!1),new Ip(this._database,this._delegate.child(e))}hasChild(e){return(0,j.Dv)("DataSnapshot.hasChild",1,1,arguments.length),KI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,j.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,j.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,j.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ip(this._database,t)))}hasChildren(){return(0,j.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,j.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,j.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ha(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class no{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,j.Dv)("Query.on",2,4,arguments.length),(0,j.Wj)("Query.on","callback",t,!1);const c=no.getCancelAndContextArgs_("Query.on",r,i),f=(v,D)=>{t.call(c.context,new Ip(this.database,v),D)};f.userCallback=t,f.context=c.context;const m=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return IO(this._delegate,f,m),t;case"child_added":return eV(this._delegate,f,m),t;case"child_removed":return rV(this._delegate,f,m),t;case"child_changed":return tV(this._delegate,f,m),t;case"child_moved":return nV(this._delegate,f,m),t;default:throw new Error((0,j.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,j.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,j.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,j.Wj)("Query.off","callback",t,!0),(0,j.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,iV(this._delegate,e,i)}else iV(this._delegate,e)}get(){return qW(this._delegate).then(e=>new Ip(this.database,e))}once(e,t,r,i){(0,j.Dv)("Query.once",1,4,arguments.length),(0,j.Wj)("Query.once","callback",t,!0);const a=no.getCancelAndContextArgs_("Query.once",r,i),c=new j.BH,f=(v,D)=>{const S=new Ip(this.database,v);t&&t.call(a.context,S,D),c.resolve(S)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),c.reject(v)};switch(e){case"value":IO(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":eV(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":rV(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":tV(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":nV(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,j.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,j.Dv)("Query.limitToFirst",1,1,arguments.length),new no(this.database,mc(this._delegate,function t5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new e5(n)}(e)))}limitToLast(e){return(0,j.Dv)("Query.limitToLast",1,1,arguments.length),new no(this.database,mc(this._delegate,function r5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new n5(n)}(e)))}orderByChild(e){return(0,j.Dv)("Query.orderByChild",1,1,arguments.length),new no(this.database,mc(this._delegate,function s5(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return KI("orderByChild","path",n,!1),new i5(n)}(e)))}orderByKey(){return(0,j.Dv)("Query.orderByKey",0,0,arguments.length),new no(this.database,mc(this._delegate,function a5(){return new o5}()))}orderByPriority(){return(0,j.Dv)("Query.orderByPriority",0,0,arguments.length),new no(this.database,mc(this._delegate,function c5(){return new l5}()))}orderByValue(){return(0,j.Dv)("Query.orderByValue",0,0,arguments.length),new no(this.database,mc(this._delegate,function d5(){return new u5}()))}startAt(e=null,t){return(0,j.Dv)("Query.startAt",0,2,arguments.length),new no(this.database,mc(this._delegate,function XW(n=null,e){return YI("startAt","key",e,!0),new oV(n,e)}(e,t)))}startAfter(e=null,t){return(0,j.Dv)("Query.startAfter",0,2,arguments.length),new no(this.database,mc(this._delegate,function JW(n,e){return YI("startAfter","key",e,!0),new QW(n,e)}(e,t)))}endAt(e=null,t){return(0,j.Dv)("Query.endAt",0,2,arguments.length),new no(this.database,mc(this._delegate,function YW(n,e){return YI("endAt","key",e,!0),new sV(n,e)}(e,t)))}endBefore(e=null,t){return(0,j.Dv)("Query.endBefore",0,2,arguments.length),new no(this.database,mc(this._delegate,function ZW(n,e){return YI("endBefore","key",e,!0),new KW(n,e)}(e,t)))}equalTo(e,t){return(0,j.Dv)("Query.equalTo",1,2,arguments.length),new no(this.database,mc(this._delegate,function f5(n,e){return YI("equalTo","key",e,!0),new h5(n,e)}(e,t)))}toString(){return(0,j.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,j.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,j.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof no))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,j.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,j.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,j.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ha(this.database,new Dl(this._delegate._repo,this._delegate._path))}}class Ha extends no{constructor(e,t){super(e,new ua(t._repo,t._path,new GS,!1)),this.database=e,this._delegate=t}getKey(){return(0,j.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,j.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ha(this.database,km(this._delegate,e))}getParent(){(0,j.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ha(this.database,e):null}getRoot(){return(0,j.Dv)("Reference.root",0,0,arguments.length),new Ha(this.database,this._delegate.root)}set(e,t){(0,j.Dv)("Reference.set",1,2,arguments.length),(0,j.Wj)("Reference.set","onComplete",t,!0);const r=wO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,j.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,dV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Cl("Reference.update",this._delegate._path),(0,j.Wj)("Reference.update","onComplete",t,!0);const r=WW(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,j.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,j.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function zW(n,e,t){if(Cl("setWithPriority",n._path),bu("setWithPriority",e,n._path,!1),hO("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new j.BH;return pO(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,j.Dv)("Reference.remove",0,1,arguments.length),(0,j.Wj)("Reference.remove","onComplete",e,!0);const t=function HW(n){return Cl("remove",n._path),wO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,j.Dv)("Reference.transaction",1,3,arguments.length),(0,j.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,j.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,j.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function x5(n,e,t){var r;if(n=(0,j.m9)(n),Cl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new j.BH,f=IO(n,()=>{});return function kW(n,e,t,r,i,a){r0(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:l2(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=mO(n,e,void 0);c.currentInputSnapshot=f;const m=c.update(f.val());if(void 0===m)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{qI("transaction failed: Data returned ",m,c.path),c.status=0;const v=aA(n.transactionQueueTree_,e),D=Om(v)||[];let S;D.push(c),cO(v,D),"object"==typeof m&&null!==m&&(0,j.r3)(m,".priority")?(S=(0,j.DV)(m,".priority"),(0,j.hu)(WI(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(sA(n.serverSyncTree_,e)||Pn.EMPTY_NODE).getPriority().val();const F=ZI(n),Q=bi(m,S),me=oO(Q,f,F);c.currentOutputSnapshotRaw=Q,c.currentOutputSnapshotResolved=me,c.currentWriteId=dA(n);const qe=JN(n.serverSyncTree_,e,me,c.currentWriteId,c.applyLocally);ja(n.eventQueue_,e,qe),hA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,D)=>{let S=null;m?a.reject(m):(S=new Pm(D,new Dl(n._repo,n._path),Kr),a.resolve(new M5(v,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new L5(a.committed,new Ip(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,j.Dv)("Reference.setPriority",1,2,arguments.length),(0,j.Wj)("Reference.setPriority","onComplete",t,!0);const r=function GW(n,e){n=(0,j.m9)(n),Cl("setPriority",n._path),hO("setPriority",e,!1);const t=new j.BH;return pO(n._repo,gi(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,j.Dv)("Reference.push",0,2,arguments.length),(0,j.Wj)("Reference.push","onComplete",t,!0);const r=function jW(n,e){n=(0,j.m9)(n),Cl("push",n._path),bu("push",e,n._path,!0);const t=$B(n._repo),r=UW(t),i=km(n,r),a=km(n,r);let c;return c=null!=e?wO(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Ha(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new Ha(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Cl("Reference.onDisconnect",this._delegate._path),new F5(new XB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class JI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:E5,forceLongPolling:w5}}useEmulator(e,t,r={}){!function uV(n,e,t,r={}){(n=(0,j.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&wu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&wu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new xI(xI.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,j.Sg)(r.mockUserToken,n.app.options.projectId);a=new xI(c)}!function g5(n,e,t,r){n.repoInfo_=new wN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,j.Dv)("database.ref",0,1,arguments.length),e instanceof Ha){const t=JB(this._delegate,e.toString());return new Ha(this,t)}{const t=QB(this._delegate,e);return new Ha(this,t)}}refFromURL(e){(0,j.Dv)("database.refFromURL",1,1,arguments.length);const r=JB(this._delegate,e);return new Ha(this,r)}goOffline(){return(0,j.Dv)("database.goOffline",0,0,arguments.length),function I5(n){(n=(0,j.m9)(n))._checkNotDeleted("goOffline"),GB(n._repo)}(this._delegate)}goOnline(){return(0,j.Dv)("database.goOnline",0,0,arguments.length),function b5(n){(n=(0,j.m9)(n))._checkNotDeleted("goOnline"),function PW(n){n.persistentConnection_&&n.persistentConnection_.resume(VB)}(n._repo)}(this._delegate)}}JI.ServerValue={TIMESTAMP:function S5(){return T5}(),increment:n=>function A5(n){return{".sv":{increment:n}}}(n)};var V5=Object.freeze({__proto__:null,initStandalone:function B5({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){o2(t);const c=new hl.zt("auth-internal",new hl.H0("database-standalone"));return c.setComponent(new hl.wA("auth-internal",()=>r,"PRIVATE")),{instance:new JI(lV(n,c,void 0,e,a),n),namespace:i}}});const $5=JI.ServerValue;function hV(n){return null==n}function fV(n){return"function"==typeof n.set}function pV(n,e){return fV(e)?e:n.ref(e)}function gV(n,e){if(function j5(n){return"string"==typeof n}(n))return e.stringCase();if(fV(n))return e.firebaseCase();if(function H5(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function eb(n,e,t="on",r=Qy.z){return new Li.y(i=>{let a=null;return a=n[t](e,(c,f)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,dn.U)(i=>{const{snapshot:a,prevKey:c}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:c,key:f}}),(0,Cy.B)())}function mV(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function W5(n,e){const{payload:t,prevKey:r,key:i}=e,a=mV(n,i),c=function z5(n,e){if(hV(e))return 0;{const t=mV(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,f),n}return n;default:return n}}function yV(n){return(hV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function _V(n,e,t){return function G5(n,e,t){return eb(n,"value","once",t).pipe((0,Sr.w)(r=>{const i=[(0,Zt.of)(r)];return e.forEach(a=>i.push(eb(n,a,"on",t))),(0,Bb.T)(...i).pipe(As(W5,[]))}),(0,fg.x)())}(n,e=yV(e),t)}function vV(n,e,t){const r=(e=yV(e)).map(i=>eb(n,i,"on",t));return(0,Bb.T)(...r)}function EV(n,e){return function(r,i){return gV(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Z5(n){return function(t){return t?gV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function wV(n,e){return function(){return eb(n,"value","on",e)}}!function U5(n){n.INTERNAL.registerComponent(new hl.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new JI(i,r)},"PUBLIC").setServiceProps({Reference:Ha,Query:no,Database:JI,DataSnapshot:Ip,enableLogging:C5,INTERNAL:V5,ServerValue:$5}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Z0.Z);const J5=new u.OlP("angularfire2.realtimeDatabaseURL"),eq=new u.OlP("angularfire2.database.use-emulator");let tq=(()=>{class n{constructor(t,r,i,a,c,f,m,v,D,S,F,Q,me,qe,et){this.schedulers=f;const Mt=m,jt=(0,ui.on)(t,c,r);v&&fC(jt,c,D,F,Q,me,S,qe),this.database=(0,ui.cc)(`${jt.name}.database.${i}`,"AngularFireDatabase",jt.name,()=>{const Nt=c.runOutsideAngular(()=>jt.database(i||void 0));return Mt&&Nt.useEmulator(...Mt),Nt},[Mt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>pV(this.database,t));let a=i;return r&&(a=r(i)),function X5(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:EV(r,"update"),set:EV(r,"set"),push:i=>r.push(i),remove:Z5(r),snapshotChanges:i=>_V(n,i,t).pipe(Wn.iC),stateChanges:i=>vV(n,i,t).pipe(Wn.iC),auditTrail:i=>function q5(n,e,t){return function K5(n,e,t){return function Y5(n,e){return eb(n,"value","on",e).pipe((0,dn.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function W4(...n){const e=(0,ps.jO)(n);return(0,$i.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,rl.Xf)(n[m]).subscribe((0,Mi.x)(r,v=>{a[m]=v,!f&&!c[m]&&(c[m]=!0,(f=c.every(Ts.y))&&(c=null))},z4.Z));t.subscribe((0,Mi.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,dn.U)(([i,a])=>{const c=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:c,loadedKeys:f}}),function q4(n){return(0,$i.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Mi.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,dn.U)(i=>i.actions))}(n,vV(n,e).pipe(As((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Wn.iC),valueChanges:(i,a)=>_V(n,i,t).pipe((0,dn.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Wn.iC)}}(a,this)}object(t){return function Q5(n,e){return{query:n,snapshotChanges:()=>wV(n,e.schedulers.outsideAngular)().pipe(Wn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>wV(n,e.schedulers.outsideAngular)().pipe(Wn.iC,(0,dn.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>pV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ui.Dh),u.LFG(ui.xv,8),u.LFG(J5,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Wn.HU),u.LFG(eq,8),u.LFG(af,8),u.LFG(Ky,8),u.LFG(K0,8),u.LFG(Zy,8),u.LFG(Xy,8),u.LFG(sf,8),u.LFG(hg,8),u.LFG(qy,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nq=(()=>{class n{constructor(){rf.Z.registerVersion("angularfire",Wn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[tq]}),n})();const rq_firebaseConfig={apiKey:"AIzaSyC8vB4W-na-a3lnoI0lXyyoNodJc8OlnVA",authDomain:"mileagecalculator-ff59b.firebaseapp.com",projectId:"mileagecalculator-ff59b",storageBucket:"mileagecalculator-ff59b.appspot.com",messagingSenderId:"439632748644",appId:"1:439632748644:web:a307c17d2de0d4059bbf71"};let iq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[e6]}),n.\u0275inj=u.cJS({providers:[wm],imports:[Yu,JH,qH.forRoot(),F3,ui.hO.initializeApp(rq_firebaseConfig),pC,LU,G4,nq]}),n})();Pc().bootstrapModule(iq).catch(n=>console.error(n))},5619:(It,Fe,R)=>{"use strict";R.d(Fe,{X:()=>U});var u=R(8645);class U extends u.x{constructor(ue){super(),this._value=ue}get value(){return this.getValue()}_subscribe(ue){const de=super._subscribe(ue);return!de.closed&&ue.next(this._value),de}getValue(){const{hasError:ue,thrownError:de,_value:Ie}=this;if(ue)throw de;return this._throwIfClosed(),Ie}next(ue){super.next(this._value=ue)}}},5592:(It,Fe,R)=>{"use strict";R.d(Fe,{y:()=>Ae});var u=R(305),U=R(7394),N=R(4850),ue=R(8407),de=R(2653),Ie=R(4674),ne=R(1441);let Ae=(()=>{class ee{constructor(le){le&&(this._subscribe=le)}lift(le){const Me=new ee;return Me.source=this,Me.operator=le,Me}subscribe(le,Me,Ce){const pe=function H(ee){return ee&&ee instanceof u.Lv||function q(ee){return ee&&(0,Ie.m)(ee.next)&&(0,Ie.m)(ee.error)&&(0,Ie.m)(ee.complete)}(ee)&&(0,U.Nn)(ee)}(le)?le:new u.Hp(le,Me,Ce);return(0,ne.x)(()=>{const{operator:Z,source:Re}=this;pe.add(Z?Z.call(pe,Re):Re?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(le){try{return this._subscribe(le)}catch(Me){le.error(Me)}}forEach(le,Me){return new(Me=fe(Me))((Ce,pe)=>{const Z=new u.Hp({next:Re=>{try{le(Re)}catch(je){pe(je),Z.unsubscribe()}},error:pe,complete:Ce});this.subscribe(Z)})}_subscribe(le){var Me;return null===(Me=this.source)||void 0===Me?void 0:Me.subscribe(le)}[N.L](){return this}pipe(...le){return(0,ue.U)(le)(this)}toPromise(le){return new(le=fe(le))((Me,Ce)=>{let pe;this.subscribe(Z=>pe=Z,Z=>Ce(Z),()=>Me(pe))})}}return ee.create=ie=>new ee(ie),ee})();function fe(ee){var ie;return null!==(ie=ee??de.config.Promise)&&void 0!==ie?ie:Promise}},8645:(It,Fe,R)=>{"use strict";R.d(Fe,{x:()=>ne});var u=R(5592),U=R(7394);const ue=(0,R(2306).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=R(9039),Ie=R(1441);let ne=(()=>{class fe extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ee=new Ae(this,this);return ee.operator=H,ee}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(H)}})}error(H){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ee}=this;for(;ee.length;)ee.shift().error(H)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ee,isStopped:ie,observers:le}=this;return ee||ie?U.Lc:(this.currentObservers=null,le.push(H),new U.w0(()=>{this.currentObservers=null,(0,de.P)(le,H)}))}_checkFinalizedStatuses(H){const{hasError:ee,thrownError:ie,isStopped:le}=this;ee?H.error(ie):le&&H.complete()}asObservable(){const H=new u.y;return H.source=this,H}}return fe.create=(q,H)=>new Ae(q,H),fe})();class Ae extends ne{constructor(q,H){super(),this.destination=q,this.source=H}next(q){var H,ee;null===(ee=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ee||ee.call(H,q)}error(q){var H,ee;null===(ee=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ee||ee.call(H,q)}complete(){var q,H;null===(H=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===H||H.call(q)}_subscribe(q){var H,ee;return null!==(ee=null===(H=this.source)||void 0===H?void 0:H.subscribe(q))&&void 0!==ee?ee:U.Lc}}},305:(It,Fe,R)=>{"use strict";R.d(Fe,{Hp:()=>Ce,Lv:()=>ee});var u=R(4674),U=R(7394),N=R(2653),ue=R(3894),de=R(2420);const Ie=fe("C",void 0,void 0);function fe(re,Ee,ae){return{kind:re,value:Ee,error:ae}}var q=R(7599),H=R(1441);class ee extends U.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,U.Nn)(Ee)&&Ee.add(this)):this.destination=je}static create(Ee,ae,ye){return new Ce(Ee,ae,ye)}next(Ee){this.isStopped?Re(function Ae(re){return fe("N",re,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Re(function ne(re){return fe("E",void 0,re)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Re(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ie=Function.prototype.bind;function le(re,Ee){return ie.call(re,Ee)}class Me{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:ae}=this;if(ae.next)try{ae.next(Ee)}catch(ye){pe(ye)}}error(Ee){const{partialObserver:ae}=this;if(ae.error)try{ae.error(Ee)}catch(ye){pe(ye)}else pe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(ae){pe(ae)}}}class Ce extends ee{constructor(Ee,ae,ye){let oe;if(super(),(0,u.m)(Ee)||!Ee)oe={next:Ee??void 0,error:ae??void 0,complete:ye??void 0};else{let K;this&&N.config.useDeprecatedNextContext?(K=Object.create(Ee),K.unsubscribe=()=>this.unsubscribe(),oe={next:Ee.next&&le(Ee.next,K),error:Ee.error&&le(Ee.error,K),complete:Ee.complete&&le(Ee.complete,K)}):oe=Ee}this.destination=new Me(oe)}}function pe(re){N.config.useDeprecatedSynchronousErrorHandling?(0,H.O)(re):(0,ue.h)(re)}function Re(re,Ee){const{onStoppedNotification:ae}=N.config;ae&&q.z.setTimeout(()=>ae(re,Ee))}const je={closed:!0,next:de.Z,error:function Z(re){throw re},complete:de.Z}},7394:(It,Fe,R)=>{"use strict";R.d(Fe,{Lc:()=>Ie,w0:()=>de,Nn:()=>ne});var u=R(4674);const N=(0,R(2306).d)(fe=>function(H){fe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ee,ie)=>`${ie+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=R(9039);class de{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const le of H)le.remove(this);else H.remove(this);const{initialTeardown:ee}=this;if((0,u.m)(ee))try{ee()}catch(le){q=le instanceof N?le.errors:[le]}const{_finalizers:ie}=this;if(ie){this._finalizers=null;for(const le of ie)try{Ae(le)}catch(Me){q=q??[],Me instanceof N?q=[...q,...Me.errors]:q.push(Me)}}if(q)throw new N(q)}}add(q){var H;if(q&&q!==this)if(this.closed)Ae(q);else{if(q instanceof de){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(q)}}_hasParent(q){const{_parentage:H}=this;return H===q||Array.isArray(H)&&H.includes(q)}_addParent(q){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(q),H):H?[H,q]:q}_removeParent(q){const{_parentage:H}=this;H===q?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,q)}remove(q){const{_finalizers:H}=this;H&&(0,ue.P)(H,q),q instanceof de&&q._removeParent(this)}}de.EMPTY=(()=>{const fe=new de;return fe.closed=!0,fe})();const Ie=de.EMPTY;function ne(fe){return fe instanceof de||fe&&"closed"in fe&&(0,u.m)(fe.remove)&&(0,u.m)(fe.add)&&(0,u.m)(fe.unsubscribe)}function Ae(fe){(0,u.m)(fe)?fe():fe.unsubscribe()}},2653:(It,Fe,R)=>{"use strict";R.d(Fe,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(It,Fe,R)=>{"use strict";R.d(Fe,{E:()=>U});const U=new(R(5592).y)(de=>de.complete())},2459:(It,Fe,R)=>{"use strict";R.d(Fe,{D:()=>Ee});var u=R(4829),U=R(3093),N=R(5137),Ie=R(5592),Ae=R(4971),fe=R(4674),q=R(7103);function ee(ae,ye){if(!ae)throw new Error("Iterable cannot be null");return new Ie.y(oe=>{(0,q.f)(oe,ye,()=>{const K=ae[Symbol.asyncIterator]();(0,q.f)(oe,ye,()=>{K.next().then(Pe=>{Pe.done?oe.complete():oe.next(Pe.value)})},0,!0)})})}var ie=R(8382),le=R(4026),Me=R(4266),Ce=R(3664),pe=R(5726),Z=R(9853),Re=R(541);function Ee(ae,ye){return ye?function re(ae,ye){if(null!=ae){if((0,ie.c)(ae))return function ue(ae,ye){return(0,u.Xf)(ae).pipe((0,N.R)(ye),(0,U.Q)(ye))}(ae,ye);if((0,Me.z)(ae))return function ne(ae,ye){return new Ie.y(oe=>{let K=0;return ye.schedule(function(){K===ae.length?oe.complete():(oe.next(ae[K++]),oe.closed||this.schedule())})})}(ae,ye);if((0,le.t)(ae))return function de(ae,ye){return(0,u.Xf)(ae).pipe((0,N.R)(ye),(0,U.Q)(ye))}(ae,ye);if((0,pe.D)(ae))return ee(ae,ye);if((0,Ce.T)(ae))return function H(ae,ye){return new Ie.y(oe=>{let K;return(0,q.f)(oe,ye,()=>{K=ae[Ae.h](),(0,q.f)(oe,ye,()=>{let Pe,ve;try{({value:Pe,done:ve}=K.next())}catch(Ve){return void oe.error(Ve)}ve?oe.complete():oe.next(Pe)},0,!0)}),()=>(0,fe.m)(K?.return)&&K.return()})}(ae,ye);if((0,Re.L)(ae))return function je(ae,ye){return ee((0,Re.Q)(ae),ye)}(ae,ye)}throw(0,Z.z)(ae)}(ae,ye):(0,u.Xf)(ae)}},4829:(It,Fe,R)=>{"use strict";R.d(Fe,{Xf:()=>ie});var u=R(7582),U=R(4266),N=R(4026),ue=R(5592),de=R(8382),Ie=R(5726),ne=R(9853),Ae=R(3664),fe=R(541),q=R(4674),H=R(3894),ee=R(4850);function ie(re){if(re instanceof ue.y)return re;if(null!=re){if((0,de.c)(re))return function le(re){return new ue.y(Ee=>{const ae=re[ee.L]();if((0,q.m)(ae.subscribe))return ae.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(re);if((0,U.z)(re))return function Me(re){return new ue.y(Ee=>{for(let ae=0;ae<re.length&&!Ee.closed;ae++)Ee.next(re[ae]);Ee.complete()})}(re);if((0,N.t)(re))return function Ce(re){return new ue.y(Ee=>{re.then(ae=>{Ee.closed||(Ee.next(ae),Ee.complete())},ae=>Ee.error(ae)).then(null,H.h)})}(re);if((0,Ie.D)(re))return Z(re);if((0,Ae.T)(re))return function pe(re){return new ue.y(Ee=>{for(const ae of re)if(Ee.next(ae),Ee.closed)return;Ee.complete()})}(re);if((0,fe.L)(re))return function Re(re){return Z((0,fe.Q)(re))}(re)}throw(0,ne.z)(re)}function Z(re){return new ue.y(Ee=>{(function je(re,Ee){var ae,ye,oe,K;return(0,u.mG)(this,void 0,void 0,function*(){try{for(ae=(0,u.KL)(re);!(ye=yield ae.next()).done;)if(Ee.next(ye.value),Ee.closed)return}catch(Pe){oe={error:Pe}}finally{try{ye&&!ye.done&&(K=ae.return)&&(yield K.call(ae))}finally{if(oe)throw oe.error}}Ee.complete()})})(re,Ee).catch(ae=>Ee.error(ae))})}},3019:(It,Fe,R)=>{"use strict";R.d(Fe,{T:()=>Ie});var u=R(7537),U=R(4829),N=R(6232),ue=R(4564),de=R(2459);function Ie(...ne){const Ae=(0,ue.yG)(ne),fe=(0,ue._6)(ne,1/0),q=ne;return q.length?1===q.length?(0,U.Xf)(q[0]):(0,u.J)(fe)((0,de.D)(q,Ae)):N.E}},2096:(It,Fe,R)=>{"use strict";R.d(Fe,{of:()=>N});var u=R(4564),U=R(2459);function N(...ue){const de=(0,u.yG)(ue);return(0,U.D)(ue,de)}},8251:(It,Fe,R)=>{"use strict";R.d(Fe,{x:()=>U});var u=R(305);function U(ue,de,Ie,ne,Ae){return new N(ue,de,Ie,ne,Ae)}class N extends u.Lv{constructor(de,Ie,ne,Ae,fe,q){super(de),this.onFinalize=fe,this.shouldUnsubscribe=q,this._next=Ie?function(H){try{Ie(H)}catch(ee){de.error(ee)}}:super._next,this._error=Ae?function(H){try{Ae(H)}catch(ee){de.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ne?function(){try{ne()}catch(H){de.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},3997:(It,Fe,R)=>{"use strict";R.d(Fe,{x:()=>ue});var u=R(2737),U=R(9360),N=R(8251);function ue(Ie,ne=u.y){return Ie=Ie??de,(0,U.e)((Ae,fe)=>{let q,H=!0;Ae.subscribe((0,N.x)(fe,ee=>{const ie=ne(ee);(H||!Ie(q,ie))&&(H=!1,q=ie,fe.next(ee))}))})}function de(Ie,ne){return Ie===ne}},7398:(It,Fe,R)=>{"use strict";R.d(Fe,{U:()=>N});var u=R(9360),U=R(8251);function N(ue,de){return(0,u.e)((Ie,ne)=>{let Ae=0;Ie.subscribe((0,U.x)(ne,fe=>{ne.next(ue.call(de,fe,Ae++))}))})}},7537:(It,Fe,R)=>{"use strict";R.d(Fe,{J:()=>N});var u=R(1631),U=R(2737);function N(ue=1/0){return(0,u.z)(U.y,ue)}},1631:(It,Fe,R)=>{"use strict";R.d(Fe,{z:()=>Ae});var u=R(7398),U=R(4829),N=R(9360),ue=R(7103),de=R(8251),ne=R(4674);function Ae(fe,q,H=1/0){return(0,ne.m)(q)?Ae((ee,ie)=>(0,u.U)((le,Me)=>q(ee,le,ie,Me))((0,U.Xf)(fe(ee,ie))),H):("number"==typeof q&&(H=q),(0,N.e)((ee,ie)=>function Ie(fe,q,H,ee,ie,le,Me,Ce){const pe=[];let Z=0,Re=0,je=!1;const re=()=>{je&&!pe.length&&!Z&&q.complete()},Ee=ye=>Z<ee?ae(ye):pe.push(ye),ae=ye=>{le&&q.next(ye),Z++;let oe=!1;(0,U.Xf)(H(ye,Re++)).subscribe((0,de.x)(q,K=>{ie?.(K),le?Ee(K):q.next(K)},()=>{oe=!0},void 0,()=>{if(oe)try{for(Z--;pe.length&&Z<ee;){const K=pe.shift();Me?(0,ue.f)(q,Me,()=>ae(K)):ae(K)}re()}catch(K){q.error(K)}}))};return fe.subscribe((0,de.x)(q,Ee,()=>{je=!0,re()})),()=>{Ce?.()}}(ee,ie,fe,H)))}},3093:(It,Fe,R)=>{"use strict";R.d(Fe,{Q:()=>ue});var u=R(7103),U=R(9360),N=R(8251);function ue(de,Ie=0){return(0,U.e)((ne,Ae)=>{ne.subscribe((0,N.x)(Ae,fe=>(0,u.f)(Ae,de,()=>Ae.next(fe),Ie),()=>(0,u.f)(Ae,de,()=>Ae.complete(),Ie),fe=>(0,u.f)(Ae,de,()=>Ae.error(fe),Ie)))})}},3020:(It,Fe,R)=>{"use strict";R.d(Fe,{B:()=>de});var u=R(4829),U=R(8645),N=R(305),ue=R(9360);function de(ne={}){const{connector:Ae=(()=>new U.x),resetOnError:fe=!0,resetOnComplete:q=!0,resetOnRefCountZero:H=!0}=ne;return ee=>{let ie,le,Me,Ce=0,pe=!1,Z=!1;const Re=()=>{le?.unsubscribe(),le=void 0},je=()=>{Re(),ie=Me=void 0,pe=Z=!1},re=()=>{const Ee=ie;je(),Ee?.unsubscribe()};return(0,ue.e)((Ee,ae)=>{Ce++,!Z&&!pe&&Re();const ye=Me=Me??Ae();ae.add(()=>{Ce--,0===Ce&&!Z&&!pe&&(le=Ie(re,H))}),ye.subscribe(ae),!ie&&Ce>0&&(ie=new N.Hp({next:oe=>ye.next(oe),error:oe=>{Z=!0,Re(),le=Ie(je,fe,oe),ye.error(oe)},complete:()=>{pe=!0,Re(),le=Ie(je,q),ye.complete()}}),(0,u.Xf)(Ee).subscribe(ie))})(ee)}}function Ie(ne,Ae,...fe){if(!0===Ae)return void ne();if(!1===Ae)return;const q=new N.Hp({next:()=>{q.unsubscribe(),ne()}});return(0,u.Xf)(Ae(...fe)).subscribe(q)}},5137:(It,Fe,R)=>{"use strict";R.d(Fe,{R:()=>U});var u=R(9360);function U(N,ue=0){return(0,u.e)((de,Ie)=>{Ie.add(N.schedule(()=>de.subscribe(Ie),ue))})}},4664:(It,Fe,R)=>{"use strict";R.d(Fe,{w:()=>ue});var u=R(4829),U=R(9360),N=R(8251);function ue(de,Ie){return(0,U.e)((ne,Ae)=>{let fe=null,q=0,H=!1;const ee=()=>H&&!fe&&Ae.complete();ne.subscribe((0,N.x)(Ae,ie=>{fe?.unsubscribe();let le=0;const Me=q++;(0,u.Xf)(de(ie,Me)).subscribe(fe=(0,N.x)(Ae,Ce=>Ae.next(Ie?Ie(ie,Ce,Me,le++):Ce),()=>{fe=null,ee()}))},()=>{H=!0,ee()}))})}},9397:(It,Fe,R)=>{"use strict";R.d(Fe,{b:()=>de});var u=R(4674),U=R(9360),N=R(8251),ue=R(2737);function de(Ie,ne,Ae){const fe=(0,u.m)(Ie)||ne||Ae?{next:Ie,error:ne,complete:Ae}:Ie;return fe?(0,U.e)((q,H)=>{var ee;null===(ee=fe.subscribe)||void 0===ee||ee.call(fe);let ie=!0;q.subscribe((0,N.x)(H,le=>{var Me;null===(Me=fe.next)||void 0===Me||Me.call(fe,le),H.next(le)},()=>{var le;ie=!1,null===(le=fe.complete)||void 0===le||le.call(fe),H.complete()},le=>{var Me;ie=!1,null===(Me=fe.error)||void 0===Me||Me.call(fe,le),H.error(le)},()=>{var le,Me;ie&&(null===(le=fe.unsubscribe)||void 0===le||le.call(fe)),null===(Me=fe.finalize)||void 0===Me||Me.call(fe)}))}):ue.y}},1954:(It,Fe,R)=>{"use strict";R.d(Fe,{o:()=>de});var u=R(7394);class U extends u.w0{constructor(ne,Ae){super()}schedule(ne,Ae=0){return this}}const N={setInterval(Ie,ne,...Ae){const{delegate:fe}=N;return fe?.setInterval?fe.setInterval(Ie,ne,...Ae):setInterval(Ie,ne,...Ae)},clearInterval(Ie){const{delegate:ne}=N;return(ne?.clearInterval||clearInterval)(Ie)},delegate:void 0};var ue=R(9039);class de extends U{constructor(ne,Ae){super(ne,Ae),this.scheduler=ne,this.work=Ae,this.pending=!1}schedule(ne,Ae=0){var fe;if(this.closed)return this;this.state=ne;const q=this.id,H=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(H,q,Ae)),this.pending=!0,this.delay=Ae,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(H,this.id,Ae),this}requestAsyncId(ne,Ae,fe=0){return N.setInterval(ne.flush.bind(ne,this),fe)}recycleAsyncId(ne,Ae,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return Ae;null!=Ae&&N.clearInterval(Ae)}execute(ne,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ne,Ae);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ne,Ae){let q,fe=!1;try{this.work(ne)}catch(H){fe=!0,q=H||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:ne,scheduler:Ae}=this,{actions:fe}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(fe,this),null!=ne&&(this.id=this.recycleAsyncId(Ae,ne,null)),this.delay=null,super.unsubscribe()}}}},2631:(It,Fe,R)=>{"use strict";R.d(Fe,{v:()=>N});var u=R(4552);class U{constructor(de,Ie=U.now){this.schedulerActionCtor=de,this.now=Ie}schedule(de,Ie=0,ne){return new this.schedulerActionCtor(this,de).schedule(ne,Ie)}}U.now=u.l.now;class N extends U{constructor(de,Ie=U.now){super(de,Ie),this.actions=[],this._active=!1}flush(de){const{actions:Ie}=this;if(this._active)return void Ie.push(de);let ne;this._active=!0;do{if(ne=de.execute(de.state,de.delay))break}while(de=Ie.shift());if(this._active=!1,ne){for(;de=Ie.shift();)de.unsubscribe();throw ne}}}},6321:(It,Fe,R)=>{"use strict";R.d(Fe,{z:()=>N});var u=R(1954);const N=new(R(2631).v)(u.o)},4552:(It,Fe,R)=>{"use strict";R.d(Fe,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},7599:(It,Fe,R)=>{"use strict";R.d(Fe,{z:()=>u});const u={setTimeout(U,N,...ue){const{delegate:de}=u;return de?.setTimeout?de.setTimeout(U,N,...ue):setTimeout(U,N,...ue)},clearTimeout(U){const{delegate:N}=u;return(N?.clearTimeout||clearTimeout)(U)},delegate:void 0}},4971:(It,Fe,R)=>{"use strict";R.d(Fe,{h:()=>U});const U=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(It,Fe,R)=>{"use strict";R.d(Fe,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(It,Fe,R)=>{"use strict";R.d(Fe,{_6:()=>Ie,jO:()=>ue,yG:()=>de});var u=R(4674);function N(ne){return ne[ne.length-1]}function ue(ne){return(0,u.m)(N(ne))?ne.pop():void 0}function de(ne){return function U(ne){return ne&&(0,u.m)(ne.schedule)}(N(ne))?ne.pop():void 0}function Ie(ne,Ae){return"number"==typeof N(ne)?ne.pop():Ae}},9039:(It,Fe,R)=>{"use strict";function u(U,N){if(U){const ue=U.indexOf(N);0<=ue&&U.splice(ue,1)}}R.d(Fe,{P:()=>u})},2306:(It,Fe,R)=>{"use strict";function u(U){const ue=U(de=>{Error.call(de),de.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}R.d(Fe,{d:()=>u})},1441:(It,Fe,R)=>{"use strict";R.d(Fe,{O:()=>ue,x:()=>N});var u=R(2653);let U=null;function N(de){if(u.config.useDeprecatedSynchronousErrorHandling){const Ie=!U;if(Ie&&(U={errorThrown:!1,error:null}),de(),Ie){const{errorThrown:ne,error:Ae}=U;if(U=null,ne)throw Ae}}else de()}function ue(de){u.config.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=de)}},7103:(It,Fe,R)=>{"use strict";function u(U,N,ue,de=0,Ie=!1){const ne=N.schedule(function(){ue(),Ie?U.add(this.schedule(null,de)):this.unsubscribe()},de);if(U.add(ne),!Ie)return ne}R.d(Fe,{f:()=>u})},2737:(It,Fe,R)=>{"use strict";function u(U){return U}R.d(Fe,{y:()=>u})},4266:(It,Fe,R)=>{"use strict";R.d(Fe,{z:()=>u});const u=U=>U&&"number"==typeof U.length&&"function"!=typeof U},5726:(It,Fe,R)=>{"use strict";R.d(Fe,{D:()=>U});var u=R(4674);function U(N){return Symbol.asyncIterator&&(0,u.m)(N?.[Symbol.asyncIterator])}},4674:(It,Fe,R)=>{"use strict";function u(U){return"function"==typeof U}R.d(Fe,{m:()=>u})},8382:(It,Fe,R)=>{"use strict";R.d(Fe,{c:()=>N});var u=R(4850),U=R(4674);function N(ue){return(0,U.m)(ue[u.L])}},3664:(It,Fe,R)=>{"use strict";R.d(Fe,{T:()=>N});var u=R(4971),U=R(4674);function N(ue){return(0,U.m)(ue?.[u.h])}},4026:(It,Fe,R)=>{"use strict";R.d(Fe,{t:()=>U});var u=R(4674);function U(N){return(0,u.m)(N?.then)}},541:(It,Fe,R)=>{"use strict";R.d(Fe,{L:()=>ue,Q:()=>N});var u=R(7582),U=R(4674);function N(de){return(0,u.FC)(this,arguments,function*(){const ne=de.getReader();try{for(;;){const{value:Ae,done:fe}=yield(0,u.qq)(ne.read());if(fe)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(Ae)}}finally{ne.releaseLock()}})}function ue(de){return(0,U.m)(de?.getReader)}},9360:(It,Fe,R)=>{"use strict";R.d(Fe,{A:()=>U,e:()=>N});var u=R(4674);function U(ue){return(0,u.m)(ue?.lift)}function N(ue){return de=>{if(U(de))return de.lift(function(Ie){try{return ue(Ie,this)}catch(ne){this.error(ne)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(It,Fe,R)=>{"use strict";function u(){}R.d(Fe,{Z:()=>u})},8407:(It,Fe,R)=>{"use strict";R.d(Fe,{U:()=>N,z:()=>U});var u=R(2737);function U(...ue){return N(ue)}function N(ue){return 0===ue.length?u.y:1===ue.length?ue[0]:function(Ie){return ue.reduce((ne,Ae)=>Ae(ne),Ie)}}},3894:(It,Fe,R)=>{"use strict";R.d(Fe,{h:()=>N});var u=R(2653),U=R(7599);function N(ue){U.z.setTimeout(()=>{const{onUnhandledError:de}=u.config;if(!de)throw ue;de(ue)})}},9853:(It,Fe,R)=>{"use strict";function u(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Fe,{z:()=>u})},863:(It,Fe,R)=>{var u={"./ion-accordion_2.entry.js":[8484,8592,8484],"./ion-action-sheet.entry.js":[9882,8592,9882],"./ion-alert.entry.js":[7068,8592,6304],"./ion-app_8.entry.js":[5860,8592,5860],"./ion-avatar_3.entry.js":[3544,3544],"./ion-back-button.entry.js":[505,8592,505],"./ion-backdrop.entry.js":[469,469],"./ion-breadcrumb_2.entry.js":[9857,8592,9857],"./ion-button_2.entry.js":[1372,1372],"./ion-card_5.entry.js":[3150,3150],"./ion-checkbox.entry.js":[7635,8592,7635],"./ion-chip.entry.js":[6673,6673],"./ion-col_3.entry.js":[1315,1315],"./ion-datetime-button.entry.js":[433,3591,433],"./ion-datetime_3.entry.js":[7059,3591,8592,7059],"./ion-fab_3.entry.js":[4087,8592,4087],"./ion-img.entry.js":[1745,1745],"./ion-infinite-scroll_2.entry.js":[9352,8592,9352],"./ion-input.entry.js":[4530,8592,4530],"./ion-item-option_3.entry.js":[8633,8592,8633],"./ion-item_8.entry.js":[5962,8592,5962],"./ion-loading.entry.js":[3483,3483],"./ion-menu_3.entry.js":[2939,8592,8382],"./ion-modal.entry.js":[8577,8592,8577],"./ion-nav_2.entry.js":[5675,8592,5675],"./ion-picker-column-internal.entry.js":[9992,8592,9992],"./ion-picker-internal.entry.js":[9820,9820],"./ion-popover.entry.js":[185,185],"./ion-progress-bar.entry.js":[5454,5454],"./ion-radio_2.entry.js":[4458,8592,4458],"./ion-range.entry.js":[7666,8592,7666],"./ion-refresher_2.entry.js":[7219,8592,7219],"./ion-reorder_2.entry.js":[2975,8592,2975],"./ion-ripple-effect.entry.js":[7465,7465],"./ion-route_4.entry.js":[4764,4764],"./ion-searchbar.entry.js":[3998,8592,3998],"./ion-segment_2.entry.js":[3672,8592,3672],"./ion-select_3.entry.js":[6754,8592,6754],"./ion-spinner.entry.js":[9588,8592,9588],"./ion-split-pane.entry.js":[9793,9793],"./ion-tab-bar_2.entry.js":[4090,8592,4090],"./ion-tab_2.entry.js":[2841,2841],"./ion-text.entry.js":[8811,8811],"./ion-textarea.entry.js":[3734,8592,3734],"./ion-toast.entry.js":[6642,6642],"./ion-toggle.entry.js":[8866,8592,8866]};function U(N){if(!R.o(u,N))return Promise.resolve().then(()=>{var Ie=new Error("Cannot find module '"+N+"'");throw Ie.code="MODULE_NOT_FOUND",Ie});var ue=u[N],de=ue[0];return Promise.all(ue.slice(1).map(R.e)).then(()=>R(de))}U.keys=()=>Object.keys(u),U.id=863,It.exports=U},5879:(It,Fe,R)=>{"use strict";R.d(Fe,{$8M:()=>uo,$WT:()=>cn,$Z:()=>iC,AFp:()=>rM,AaK:()=>ee,CHM:()=>Wu,CRH:()=>hu,EJc:()=>uT,EpF:()=>xg,F$t:()=>VC,F4k:()=>Vr,FYo:()=>Gb,FiY:()=>Do,Gf:()=>du,GfV:()=>Oy,GkF:()=>EE,Gpc:()=>Me,HDt:()=>Pw,Hsn:()=>Df,JOm:()=>cl,KtG:()=>Nc,LFG:()=>rr,LMc:()=>gR,LSH:()=>Ni,Lbi:()=>Lb,Lck:()=>cu,MAs:()=>yE,MMx:()=>j_,NdJ:()=>bf,Ojb:()=>Ks,OlP:()=>or,Oqu:()=>HE,P3R:()=>ZA,PXZ:()=>Zx,Q6J:()=>p_,QGY:()=>__,Qsj:()=>vs,R0b:()=>is,RDi:()=>Hh,Rgc:()=>jf,SBq:()=>lg,Sil:()=>zx,Suo:()=>Ew,TTD:()=>Sc,TgZ:()=>Mg,VuI:()=>hm,X6Q:()=>IT,XFs:()=>vt,Xpm:()=>O,Xq5:()=>iE,Xts:()=>_y,Y36:()=>tf,YKP:()=>Wg,YNc:()=>gE,Yjl:()=>it,Yz7:()=>Le,Z0I:()=>zt,ZZ4:()=>Tv,_Bn:()=>rc,_UZ:()=>wd,_c5:()=>cR,_uU:()=>go,aQg:()=>Yd,c2e:()=>Zf,cJS:()=>mt,cg1:()=>KE,dDg:()=>uv,dqk:()=>an,eFA:()=>Hw,eJc:()=>Iw,ekj:()=>Pg,eoX:()=>Qf,f3M:()=>rn,g9A:()=>iM,h0i:()=>ko,hGG:()=>OT,iGM:()=>Bd,ifc:()=>Yt,ip1:()=>cT,jDz:()=>uu,kL8:()=>ze,lG2:()=>nt,lqb:()=>gd,lri:()=>Bw,n5z:()=>ti,oAB:()=>we,oxw:()=>BC,q4F:()=>cg,qFp:()=>Ps,qLn:()=>Qh,qOj:()=>mg,qZA:()=>Ed,rWj:()=>Vw,rg0:()=>Bm,s9C:()=>ml,sBO:()=>tR,s_b:()=>Jg,soG:()=>ov,tb:()=>jw,tp0:()=>Ui,uIk:()=>lE,vHH:()=>re,vpe:()=>La,wAp:()=>hn,xp6:()=>dg,z2F:()=>wl,zSh:()=>Ob,zs3:()=>Xc});var u=R(8645),U=R(7394),N=R(5619),ue=R(5592),de=R(3019),Ie=R(2096),ne=R(3020),Ae=R(4664),fe=R(3997);function q(s){for(let o in s)if(s[o]===q)return o;throw Error("Could not find renamed property on target object.")}function H(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ie(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const le=q({__forward_ref__:q});function Me(s){return s.__forward_ref__=Me,s.toString=function(){return ee(this())},s}function Ce(s){return pe(s)?s():s}function pe(s){return"function"==typeof s&&s.hasOwnProperty(le)&&s.__forward_ref__===Me}function Z(s){return s&&!!s.\u0275providers}const je="https://g.co/ng/security#xss";class re extends Error{constructor(o,l){super(function Ee(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function ae(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s,o){throw new re(-201,!1)}function ut(s,o){null==s&&function dt(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Le(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function mt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ht(s){return tn(s,$n)||tn(s,kr)}function zt(s){return null!==Ht(s)}function tn(s,o){return s.hasOwnProperty(o)?s[o]:null}function xn(s){return s&&(s.hasOwnProperty(Mn)||s.hasOwnProperty(er))?s[Mn]:null}const $n=q({\u0275prov:q}),Mn=q({\u0275inj:q}),kr=q({ngInjectableDef:q}),er=q({ngInjectorDef:q});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let Lt;function En(s){const o=Lt;return Lt=s,o}function dr(s,o,l){const d=Ht(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&vt.Optional?null:void 0!==o?o:void ve(ee(s))}const an=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},ln="__NG_DI_FLAG__",tr="ngTempTokenPath",yi=/\n/gm,ar="__source";let Zn;function nr(s){const o=Zn;return Zn=s,o}function br(s,o=vt.Default){if(void 0===Zn)throw new re(-203,!1);return null===Zn?dr(s,void 0,o):Zn.get(s,o&vt.Optional?null:void 0,o)}function rr(s,o=vt.Default){return(function qt(){return Lt}()||br)(Ce(s),o)}function rn(s,o=vt.Default){return rr(s,se(o))}function se(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function te(s){const o=[];for(let l=0;l<s.length;l++){const d=Ce(s[l]);if(Array.isArray(d)){if(0===d.length)throw new re(900,!1);let h,p=vt.Default;for(let _=0;_<d.length;_++){const I=d[_],C=$(I);"number"==typeof C?-1===C?h=I.token:p|=C:h=I}o.push(rr(h,p))}else o.push(rr(d))}return o}function L(s,o){return s[ln]=o,s.prototype[ln]=o,s}function $(s){return s[ln]}function Xe(s){return{toString:s}.toString()}var yt=(()=>((yt=yt||{})[yt.OnPush=0]="OnPush",yt[yt.Default=1]="Default",yt))(),Yt=(()=>{return(s=Yt||(Yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Yt;var s})();const Wt={},Bt=[],sn=q({\u0275cmp:q}),zn=q({\u0275dir:q}),fn=q({\u0275pipe:q}),Gr=q({\u0275mod:q}),xr=q({\u0275fac:q}),$e=q({__NG_ELEMENT_ID__:q}),Oe=q({__NG_ENV_ID__:q});function lt(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}l=h+1}}function Vt(s,o,l){let d=0;for(;d<l.length;){const h=l[d];if("number"==typeof h){if(0!==h)break;d++;const p=l[d++],_=l[d++],I=l[d++];s.setAttribute(o,_,I,p)}else{const p=h,_=l[++d];pn(p)?s.setProperty(o,p,_):s.setAttribute(o,p,_),d++}}return d}function Xt(s){return 3===s||4===s||6===s}function pn(s){return 64===s.charCodeAt(0)}function bn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||pr(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function pr(s,o,l,d,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){_=-1;break}if(I>o){_=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===l){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,l),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}const ir="ng-template";function sr(s,o,l){let d=0,h=!0;for(;d<s.length;){let p=s[d++];if("string"==typeof p&&h){const _=s[d++];if(l&&"class"===p&&-1!==lt(_.toLowerCase(),o,0))return!0}else{if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function lr(s){return 4===s.type&&s.value!==ir}function Rn(s,o,l){return o===(4!==s.type||l?s.value:ir)}function za(s,o,l){let d=4;const h=s.attrs||[],p=function Ho(s){for(let o=0;o<s.length;o++)if(Xt(s[o]))return o;return s.length}(h);let _=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!_)if(4&d){if(d=2|1&d,""!==C&&!Rn(s,C,l)||""===C&&1===o.length){if(Qr(d))return!1;_=!0}}else{const A=8&d?C:o[++I];if(8&d&&null!==s.attrs){if(!sr(s.attrs,A,l)){if(Qr(d))return!1;_=!0}continue}const Y=ls(8&d?"class":C,h,lr(s),l);if(-1===Y){if(Qr(d))return!1;_=!0;continue}if(""!==A){let _e;_e=Y>p?"":h[Y+1].toLowerCase();const xe=8&d?_e:null;if(xe&&-1!==lt(xe,A,0)||2&d&&A!==_e){if(Qr(d))return!1;_=!0}}}}else{if(!_&&!Qr(d)&&!Qr(C))return!1;if(_&&Qr(C))continue;_=!1,d=C|1&d}}return Qr(d)||_}function Qr(s){return 0==(1&s)}function ls(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function gr(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function Ls(s,o,l=!1){for(let d=0;d<o.length;d++)if(za(s,o[d],l))return!0;return!1}function Tl(s,o){e:for(let l=0;l<o.length;l++){const d=o[l];if(s.length===d.length){for(let h=0;h<s.length;h++)if(s[h]!==d[h])continue e;return!0}}return!1}function Yi(s,o){return s?":not("+o.trim()+")":o}function da(s){let o=s[0],l=1,d=2,h="",p=!1;for(;l<s.length;){let _=s[l];if("string"==typeof _)if(2&d){const I=s[++l];h+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?h+="."+_:4&d&&(h+=" "+_);else""!==h&&!Qr(_)&&(o+=Yi(p,h),h=""),d=_,p=p||!Qr(d);l++}return""!==h&&(o+=Yi(p,h)),o}function O(s){return Xe(()=>{const o=cs(s),l={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===yt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Yt.Emulated,styles:s.styles||Bt,_:null,schemas:s.schemas||null,tView:null,id:""};li(l);const d=s.dependencies;return l.directiveDefs=us(d,!1),l.pipeDefs=us(d,!0),l.id=function ha(s){let o=0;const l=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of l)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(l),l})}function V(s){return Be(s)||Et(s)}function X(s){return null!==s}function we(s){return Xe(()=>({type:s.type,bootstrap:s.bootstrap||Bt,declarations:s.declarations||Bt,imports:s.imports||Bt,exports:s.exports||Bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ke(s,o){if(null==s)return Wt;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=d,o&&(o[h]=p)}return l}function nt(s){return Xe(()=>{const o=cs(s);return li(o),o})}function it(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Be(s){return s[sn]||null}function Et(s){return s[zn]||null}function wt(s){return s[fn]||null}function cn(s){const o=Be(s)||Et(s)||wt(s);return null!==o&&o.standalone}function On(s,o){const l=s[Gr]||null;if(!l&&!0===o)throw new Error(`Type ${ee(s)} does not have '\u0275mod' property.`);return l}function cs(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||Wt,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Bt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ke(s.inputs,o),outputs:Ke(s.outputs)}}function li(s){s.features?.forEach(o=>o(s))}function us(s,o){if(!s)return null;const l=o?wt:V;return()=>("function"==typeof s?s():s).map(d=>l(d)).filter(X)}const Rr=0,Dt=1,yn=2,Nr=3,Pi=4,yc=5,_i=6,Eo=7,cr=8,Bs=9,fa=10,on=11,Sl=12,_c=13,Go=14,Dr=15,vc=16,pa=17,Vs=18,qa=19,Ec=20,vi=21,ki=22,Cu=23,$s=24,Vn=25,io=1,ga=2,ds=7,Ya=9,Di=11;function Ti(s){return Array.isArray(s)&&"object"==typeof s[io]}function Si(s){return Array.isArray(s)&&!0===s[io]}function Du(s){return 0!=(4&s.flags)}function Us(s){return s.componentOffset>-1}function zo(s){return 1==(1&s.flags)}function mr(s){return!!s.template}function Za(s){return 0!=(512&s[yn])}function Wo(s,o){return s.hasOwnProperty(xr)?s[xr]:null}let xl=an.WeakRef??class Ml{constructor(o){this.ref=o}deref(){return this.ref}},bc=0,bs=null,Cc=!1;function Lr(s){const o=bs;return bs=s,o}class hs{constructor(){this.id=bc++,this.ref=function Sp(s){return new xl(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,l]of this.producers){const d=l.producerNode.deref();if(void 0!==d&&l.atTrackingVersion===this.trackingVersion){if(d.producerPollStatus(l.seenValueVersion))return!0}else this.producers.delete(o),d?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=Cc;Cc=!0;try{for(const[l,d]of this.consumers){const h=d.consumerNode.deref();void 0!==h&&h.trackingVersion===d.atTrackingVersion?h.onConsumerDependencyMayHaveChanged():(this.consumers.delete(l),h?.producers.delete(this.id))}}finally{Cc=o}}producerAccessed(){if(Cc)throw new Error("");if(null===bs)return;let o=bs.producers.get(this.id);void 0===o?(o={consumerNode:bs.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:bs.trackingVersion},bs.producers.set(this.id,o),this.consumers.set(bs.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=bs.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==bs?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let dh=null;function Bm(s){const o=Lr(null);try{return s()}finally{Lr(o)}}const Rl=()=>{};class xp extends hs{constructor(o,l,d){super(),this.watch=o,this.schedule=l,this.dirty=!1,this.cleanupFn=Rl,this.registerOnCleanup=h=>{this.cleanupFn=h},this.consumerAllowSignalWrites=d}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=Lr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Rl,this.watch(this.registerOnCleanup)}finally{Lr(o)}}cleanup(){this.cleanupFn()}}class Nl{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Sc(){return Xa}function Xa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Bu),Lu}function Lu(){const s=Vu(this),o=s?.current;if(o){const l=s.previous;if(l===Wt)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Bu(s,o,l,d){const h=this.declaredInputs[l],p=Vu(s)||function fh(s,o){return s[Rp]=o}(s,{previous:Wt,current:null}),_=p.current||(p.current={}),I=p.previous,C=I[h];_[h]=new Nl(C&&C.currentValue,o,I===Wt),s[d]=o}Sc.ngInherit=!0;const Rp="__ngSimpleChanges__";function Vu(s){return s[Rp]||null}const js=function(s,o,l){};function ur(s){for(;Array.isArray(s);)s=s[Rr];return s}function Qa(s,o){return ur(o[s])}function Ai(s,o){return ur(o[s.index])}function ph(s,o){return s.data[o]}function Cs(s,o){const l=o[s];return Ti(l)?l:l[Rr]}function oo(s,o){return null==o?null:s[o]}function yh(s){s[pa]=0}function Hu(s){1024&s[yn]||(s[yn]|=1024,el(s,1))}function Mc(s){1024&s[yn]&&(s[yn]&=-1025,el(s,-1))}function el(s,o){let l=s[Nr];if(null===l)return;l[yc]+=o;let d=l;for(l=l[Nr];null!==l&&(1===o&&1===d[yc]||-1===o&&0===d[yc]);)l[yc]+=o,d=l,l=l[Nr]}const un={lFrame:Ku(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ol(){return un.bindingsEnabled}function Hs(){return null!==un.skipHydrationRootTNode}function ot(){return un.lFrame.lView}function Fn(){return un.lFrame.tView}function Wu(s){return un.lFrame.contextLView=s,s[cr]}function Nc(s){return un.lFrame.contextLView=null,s}function Jr(){let s=Fp();for(;null!==s&&64===s.type;)s=s.parent;return s}function Fp(){return un.lFrame.currentTNode}function Fi(s,o){const l=un.lFrame;l.currentTNode=s,l.isParent=o}function Lp(){return un.lFrame.isParent}function Br(){un.lFrame.isParent=!1}function Tr(){return un.lFrame.bindingIndex++}function kl(s,o){const l=un.lFrame;l.bindingIndex=l.bindingRootIndex=s,Ih(o)}function Ih(s){un.lFrame.currentDirectiveIndex=s}function Fc(){return un.lFrame.currentQueryIndex}function Zo(s){un.lFrame.currentQueryIndex=s}function Xo(s){const o=s[Dt];return 2===o.type?o.declTNode:1===o.type?s[_i]:null}function tl(s,o,l){if(l&vt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&vt.Host||(h=Xo(p),null===h||(p=p[Go],10&h.type))););if(null===h)return!1;o=h,s=p}const d=un.lFrame=Bc();return d.currentTNode=o,d.lView=s,!0}function Lc(s){const o=Bc(),l=s[Dt];un.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Bc(){const s=un.lFrame,o=null===s?null:s.child;return null===o?Ku(s):o}function Ku(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function $m(){const s=un.lFrame;return un.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const bh=$m;function Ch(){const s=$m();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Zi(){return un.lFrame.selectedIndex}function Qo(s){un.lFrame.selectedIndex=s}function Er(){const s=un.lFrame;return ph(s.tView,s.selectedIndex)}let Zu=!0;function Ll(){return Zu}function Ea(s){Zu=s}function Vc(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:P}=p;_&&(s.contentHooks??=[]).push(-l,_),I&&((s.contentHooks??=[]).push(l,I),(s.contentCheckHooks??=[]).push(l,I)),C&&(s.viewHooks??=[]).push(-l,C),A&&((s.viewHooks??=[]).push(l,A),(s.viewCheckHooks??=[]).push(l,A)),null!=P&&(s.destroyHooks??=[]).push(l,P)}}function Bl(s,o,l){Li(s,o,3,l)}function Xu(s,o,l,d){(3&s[yn])===l&&Li(s,o,l,d)}function $c(s,o){let l=s[yn];(3&l)===o&&(l&=8191,l+=1,s[yn]=l)}function Li(s,o,l,d){const p=d??-1,_=o.length-1;let I=0;for(let C=void 0!==d?65535&s[pa]:0;C<_;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=d&&I>=d)break}else o[C]<0&&(s[pa]+=65536),(I<p||-1==p)&&(Qu(s,l,o,C),s[pa]=(4294901760&s[pa])+C+2),C++}function Bi(s,o){js(4,s,o);const l=Lr(null);try{o.call(s)}finally{Lr(l),js(5,s,o)}}function Qu(s,o,l,d){const h=l[d]<0,p=l[d+1],I=s[h?-l[d]:l[d]];h?s[yn]>>13<s[pa]>>16&&(3&s[yn])===o&&(s[yn]+=8192,Bi(I,p)):Bi(I,p)}const Un=-1;class Zt{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function dn(s){return s!==Un}function fs(s){return 32767&s}function Ia(s,o){let l=function Rh(s){return s>>16}(s),d=o;for(;l>0;)d=d[Go],l--;return d}let ps=!0;function ba(s){const o=ps;return ps=s,o}const Gs=255,Jo=5;let Hm=0;const gs={};function ea(s,o){const l=Nh(s,o);if(-1!==l)return l;const d=o[Dt];d.firstCreatePass&&(s.injectorIndex=o.length,wo(d.data,s),wo(o,null),wo(d.blueprint,null));const h=zs(s,o),p=s.injectorIndex;if(dn(h)){const _=fs(h),I=Ia(h,o),C=I[Dt].data;for(let A=0;A<8;A++)o[p+A]=I[_+A]|C[_+A]}return o[p+8]=h,p}function wo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Nh(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function zs(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){if(d=ed(h),null===d)return Un;if(l++,h=h[Go],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return Un}function rl(s,o,l){!function $p(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty($e)&&(d=l[$e]),null==d&&(d=l[$e]=Hm++);const h=d&Gs;o.data[s+(h>>Jo)]|=1<<h}(s,o,l)}function il(s,o,l){if(l&vt.Optional||void 0!==s)return s;ve()}function Ca(s,o,l,d){if(l&vt.Optional&&void 0===d&&(d=null),!(l&(vt.Self|vt.Host))){const h=s[Bs],p=En(void 0);try{return h?h.get(o,d,l&vt.Optional):dr(o,d,l&vt.Optional)}finally{En(p)}}return il(d,0,l)}function co(s,o,l,d=vt.Default,h){if(null!==s){if(2048&o[yn]&&!(d&vt.Self)){const _=function Ph(s,o,l,d,h){let p=s,_=o;for(;null!==p&&null!==_&&2048&_[yn]&&!(512&_[yn]);){const I=Oh(p,_,l,d|vt.Self,gs);if(I!==gs)return I;let C=p.parent;if(!C){const A=_[Ec];if(A){const P=A.get(l,gs,d);if(P!==gs)return P}C=ed(_),_=_[Go]}p=C}return h}(s,o,l,d,gs);if(_!==gs)return _}const p=Oh(s,o,l,d,gs);if(p!==gs)return p}return Ca(o,l,d,h)}function Oh(s,o,l,d,h){const p=function Xi(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty($e)?s[$e]:void 0;return"number"==typeof o?o>=0?o&Gs:ms:o}(l);if("function"==typeof p){if(!tl(o,s,d))return d&vt.Host?il(h,0,d):Ca(o,l,d,h);try{const _=p(d);if(null!=_||d&vt.Optional)return _;ve()}finally{bh()}}else if("number"==typeof p){let _=null,I=Nh(s,o),C=Un,A=d&vt.Host?o[Dr][_i]:null;for((-1===I||d&vt.SkipSelf)&&(C=-1===I?zs(s,o):o[I+8],C!==Un&&Io(d,!1)?(_=o[Dt],I=fs(C),o=Ia(C,o)):I=-1);-1!==I;){const P=o[Dt];if(Sr(p,I,P.data)){const Y=$i(I,o,l,_,d,A);if(Y!==gs)return Y}C=o[I+8],C!==Un&&Io(d,o[Dt].data[I+8]===A)&&Sr(p,I,o)?(_=P,I=fs(C),o=Ia(C,o)):I=-1}}return h}function $i(s,o,l,d,h,p){const _=o[Dt],I=_.data[s+8],P=Da(I,_,l,null==d?Us(I)&&ps:d!=_&&0!=(3&I.type),h&vt.Host&&p===I);return null!==P?ta(o,_,P,I):gs}function Da(s,o,l,d,h){const p=s.providerIndexes,_=o.data,I=1048575&p,C=s.directiveStart,P=p>>20,_e=h?I+P:s.directiveEnd;for(let xe=d?I:I+P;xe<_e;xe++){const rt=_[xe];if(xe<C&&l===rt||xe>=C&&rt.type===l)return xe}if(h){const xe=_[C];if(xe&&mr(xe)&&xe.type===l)return C}return null}function ta(s,o,l,d){let h=s[l];const p=o.data;if(function Vi(s){return s instanceof Zt}(h)){const _=h;_.resolving&&function oe(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new re(-200,`Circular dependency in DI detected for ${s}${l}`)}(function ye(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ae(s)}(p[l]));const I=ba(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?En(_.injectImpl):null;tl(s,d,vt.Default);try{h=s[l]=_.factory(void 0,p,s,d),o.firstCreatePass&&l>=d.directiveStart&&function xh(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(d){const _=Xa(o);(l.preOrderHooks??=[]).push(s,_),(l.preOrderCheckHooks??=[]).push(s,_)}h&&(l.preOrderHooks??=[]).push(0-s,h),p&&((l.preOrderHooks??=[]).push(s,p),(l.preOrderCheckHooks??=[]).push(s,p))}(l,p[l],o)}finally{null!==C&&En(C),ba(I),_.resolving=!1,bh()}}return h}function Sr(s,o,l){return!!(l[o+(s>>Jo)]&1<<s)}function Io(s,o){return!(s&vt.Self||s&vt.Host&&o)}class bo{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return co(this._tNode,this._lView,o,se(d),l)}}function ms(){return new bo(Jr(),ot())}function ti(s){return Xe(()=>{const o=s.prototype.constructor,l=o[xr]||sl(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[xr]||sl(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function sl(s){return pe(s)?()=>{const o=sl(Ce(s));return o&&o()}:Wo(s)}function ed(s){const o=s[Dt],l=o.type;return 2===l?o.declTNode:1===l?s[_i]:null}function uo(s){return function Up(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const p=l[h];if(Xt(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(Jr(),s)}const Or="__parameters__";function ho(s,o,l){return Xe(()=>{const d=function As(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...p){if(this instanceof h)return d.apply(this,p),this;const _=new h(...p);return I.annotation=_,I;function I(C,A,P){const Y=C.hasOwnProperty(Or)?C[Or]:Object.defineProperty(C,Or,{value:[]})[Or];for(;Y.length<=P;)Y.push(null);return(Y[P]=Y[P]||[]).push(_),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function Ys(s,o){s.forEach(l=>Array.isArray(l)?Ys(l,o):o(l))}function rd(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function id(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Sa(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}function T(s,o,l){let d=G(s,o);return d>=0?s[1|d]=l:(d=~d,function jl(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function M(s,o){const l=G(s,o);if(l>=0)return s[1|l]}function G(s,o){return function Te(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const p=d+(h-d>>1),_=s[p<<l];if(o===_)return p<<l;_>o?h=p:d=p+1}return~(h<<l)}(s,o,1)}const Do=L(ho("Optional"),8),Ui=L(ho("SkipSelf"),4);function Km(s){return 128==(128&s.flags)}var cl=(()=>((cl=cl||{})[cl.Important=1]="Important",cl[cl.DashCase=2]="DashCase",cl))();const yA=/^>|^->|<!--|-->|--!>|<!-$/g,_A=/(<|>)/,vA="\u200b$1\u200b";const p0=new Map;let nb=0;const Xm="__ngContext__";function _s(s,o){Ti(o)?(s[Xm]=o[qa],function EA(s){p0.set(s[qa],s)}(o)):s[Xm]=o}let v0;function Vh(s,o){return v0(s,o)}function Kp(s){const o=s[Nr];return Si(o)?o[Nr]:o}function ab(s){return E0(s[Sl])}function ey(s){return E0(s[Pi])}function E0(s){for(;null!==s&&!Si(s);)s=s[Pi];return s}function ud(s,o,l,d,h){if(null!=d){let p,_=!1;Si(d)?p=d:Ti(d)&&(_=!0,d=d[Rr]);const I=ur(d);0===s&&null!==l?null==h?b0(o,l,I):dd(o,l,I,h||null,!0):1===s&&null!==l?dd(o,l,I,h||null,!0):2===s?function sy(s,o,l){const d=zl(s,o);d&&function DA(s,o,l,d){s.removeChild(o,l,d)}(s,d,o,l)}(o,I,_):3===s&&o.destroyNode(I),null!=p&&function SA(s,o,l,d,h){const p=l[ds];p!==ur(l)&&ud(o,s,d,p,h);for(let I=Di;I<l.length;I++){const C=l[I];Uh(C[Dt],C,s,o,d,p)}}(o,s,p,l,h)}}function ty(s,o){return s.createComment(function tb(s){return s.replace(yA,o=>o.replace(_A,vA))}(o))}function ny(s,o,l){return s.createElement(o,l)}function lb(s,o){const l=s[Ya],d=l.indexOf(o);Mc(o),l.splice(d,1)}function I0(s,o){if(s.length<=Di)return;const l=Di+o,d=s[l];if(d){const h=d[vc];null!==h&&h!==s&&lb(h,d),o>0&&(s[l-1][Pi]=d[Pi]);const p=id(s,Di+o);!function DO(s,o){Uh(s,o,o[on],2,null,null),o[Rr]=null,o[_i]=null}(d[Dt],d);const _=p[Vs];null!==_&&_.detachView(p[Dt]),d[Nr]=null,d[Pi]=null,d[yn]&=-129}return d}function ry(s,o){if(!(256&o[yn])){const l=o[on];o[Cu]?.destroy(),o[$s]?.destroy(),l.destroyNode&&Uh(s,o,l,3,null,null),function AO(s){let o=s[Sl];if(!o)return So(s[Dt],s);for(;o;){let l=null;if(Ti(o))l=o[Sl];else{const d=o[Di];d&&(l=d)}if(!l){for(;o&&!o[Pi]&&o!==s;)Ti(o)&&So(o[Dt],o),o=o[Nr];null===o&&(o=s),Ti(o)&&So(o[Dt],o),l=o&&o[Pi]}o=l}}(o)}}function So(s,o){if(!(256&o[yn])){o[yn]&=-129,o[yn]|=256,function Qp(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof Zt)){const p=l[d+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const I=h[p[_]],C=p[_+1];js(4,I,C);try{C.call(I)}finally{js(5,I,C)}}else{js(4,h,p);try{p.call(h)}finally{js(5,h,p)}}}}}(s,o),function CA(s,o){const l=s.cleanup,d=o[Eo];if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const _=l[p+3];_>=0?d[_]():d[-_].unsubscribe(),p+=2}else l[p].call(d[l[p+1]]);null!==d&&(o[Eo]=null);const h=o[vi];if(null!==h){o[vi]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,o),1===o[Dt].type&&o[on].destroy();const l=o[vc];if(null!==l&&Si(o[Nr])){l!==o[Nr]&&lb(l,o);const d=o[Vs];null!==d&&d.detachView(s)}!function rb(s){p0.delete(s[qa])}(o)}}function cb(s,o,l){return function ub(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[Rr];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:p}=s.data[d.directiveStart+h];if(p===Yt.None||p===Yt.Emulated)return null}return Ai(d,l)}}(s,o.parent,l)}function dd(s,o,l,d,h){s.insertBefore(o,l,d,h)}function b0(s,o,l){s.appendChild(o,l)}function Jp(s,o,l,d,h){null!==d?dd(s,o,l,d,h):b0(s,o,l)}function zl(s,o){return s.parentNode(o)}function db(s,o,l){return $h(s,o,l)}let hd,cy,uy,$h=function hb(s,o,l){return 40&s.type?Ai(s,l):null};function iy(s,o,l,d){const h=cb(s,d,o),p=o[on],I=db(d.parent||o[_i],d,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)Jp(p,h,l[C],I,!1);else Jp(p,h,l,I,!1);void 0!==hd&&hd(p,d,o,l,h)}function tg(s,o){if(null!==o){const l=o.type;if(3&l)return Ai(o,s);if(4&l)return C0(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return tg(s,d);{const h=s[o.index];return Si(h)?C0(-1,h):ur(h)}}if(32&l)return Vh(o,s)()||ur(s[o.index]);{const d=pb(s,o);return null!==d?Array.isArray(d)?d[0]:tg(Kp(s[Dr]),d):tg(s,o.next)}}return null}function pb(s,o){return null!==o?s[Dr][_i].projection[o.projection]:null}function C0(s,o){const l=Di+s+1;if(l<o.length){const d=o[l],h=d[Dt].firstChild;if(null!==h)return tg(d,h)}return o[ds]}function D0(s,o,l,d,h,p,_){for(;null!=l;){const I=d[l.index],C=l.type;if(_&&0===o&&(I&&_s(ur(I),d),l.flags|=2),32!=(32&l.flags))if(8&C)D0(s,o,l.child,d,h,p,!1),ud(o,s,h,I,p);else if(32&C){const A=Vh(l,d);let P;for(;P=A();)ud(o,s,h,P,p);ud(o,s,h,I,p)}else 16&C?fd(s,o,d,l,h,p):ud(o,s,h,I,p);l=_?l.projectionNext:l.next}}function Uh(s,o,l,d,h,p){D0(l,d,s.firstChild,o,h,p,!1)}function fd(s,o,l,d,h,p){const _=l[Dr],C=_[_i].projection[d.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)ud(o,s,h,C[A],p);else{let A=C;const P=_[Nr];Km(d)&&(A.flags|=128),D0(s,o,A,P,h,p,!0)}}function gb(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function mb(s,o,l){const{mergedAttrs:d,classes:h,styles:p}=l;null!==d&&Vt(s,o,d),null!==h&&gb(s,o,h),null!==p&&function MA(s,o,l){s.setAttribute(o,"style",l)}(s,o,p)}function Hh(s){cy=s}function vb(s){return function S0(){if(void 0===uy&&(uy=null,an.trustedTypes))try{uy=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return uy}()?.createScriptURL(s)||s}class hy{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${je})`}}function Na(s){return s instanceof hy?s.changingThisBreaksApplicationSecurity:s}function ng(s,o){const l=function kA(s){return s instanceof hy&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see ${je})`)}return l===o}const VA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ri=(()=>((Ri=Ri||{})[Ri.NONE=0]="NONE",Ri[Ri.HTML=1]="HTML",Ri[Ri.STYLE=2]="STYLE",Ri[Ri.SCRIPT=3]="SCRIPT",Ri[Ri.URL=4]="URL",Ri[Ri.RESOURCE_URL=5]="RESOURCE_URL",Ri))();function Ni(s){const o=pd();return o?o.sanitize(Ri.URL,s)||"":ng(s,"URL")?Na(s):function A0(s){return(s=String(s)).match(VA)?s:"unsafe:"+s}(ae(s))}function Sb(s){const o=pd();if(o)return vb(o.sanitize(Ri.RESOURCE_URL,s)||"");if(ng(s,"ResourceURL"))return vb(Na(s));throw new re(904,!1)}function ZA(s,o,l){return function Ab(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Sb:Ni}(o,l)(s)}function pd(){const s=ot();return s&&s[fa].sanitizer}class or{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Le({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _y=new or("ENVIRONMENT_INITIALIZER"),x0=new or("INJECTOR",-1),dl=new or("INJECTOR_DEF_TYPES");class Mb{get(o,l=jr){if(l===jr){const d=new Error(`NullInjectorError: No provider for ${ee(o)}!`);throw d.name="NullInjectorError",d}return l}}function BO(...s){return{\u0275providers:QA(0,s),\u0275fromNgModule:!0}}function QA(s,...o){const l=[],d=new Set;let h;return Ys(o,p=>{const _=p;vy(_,l,[],d)&&(h||=[],h.push(_))}),void 0!==h&&R0(h,l),l}function R0(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];N0(h,p=>{o.push(p)})}}function vy(s,o,l,d){if(!(s=Ce(s)))return!1;let h=null,p=xn(s);const _=!p&&Be(s);if(p||_){if(_&&!_.standalone)return!1;h=s}else{const C=s.ngModule;if(p=xn(C),!p)return!1;h=C}const I=d.has(h);if(_){if(I)return!1;if(d.add(h),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of C)vy(A,o,l,d)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let A;d.add(h);try{Ys(p.imports,P=>{vy(P,o,l,d)&&(A||=[],A.push(P))})}finally{}void 0!==A&&R0(A,o)}if(!I){const A=Wo(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:Bt},{provide:dl,useValue:h,multi:!0},{provide:_y,useValue:()=>rr(h),multi:!0})}const C=p.providers;null==C||I||N0(C,P=>{o.push(P)})}}return h!==s&&void 0!==s.providers}function N0(s,o){for(let l of s)Z(l)&&(l=l.\u0275providers),Array.isArray(l)?N0(l,o):o(l)}const JA=q({provide:String,useValue:q});function Rb(s){return null!==s&&"object"==typeof s&&JA in s}function Wh(s){return"function"==typeof s}const Ob=new or("Set Injector scope."),Ey={},$O={};let wy;function Iy(){return void 0===wy&&(wy=new Mb),wy}class gd{}class by extends gd{get destroyed(){return this._destroyed}constructor(o,l,d,h){super(),this.parent=l,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fb(o,_=>this.processProvider(_)),this.records.set(x0,qh(void 0,this)),h.has("environment")&&this.records.set(gd,qh(void 0,this));const p=this.records.get(Ob);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(dl.multi,Bt,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of o)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const l=nr(this),d=En(void 0);try{return o()}finally{nr(l),En(d)}}get(o,l=jr,d=vt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Oe))return o[Oe](this);d=se(d);const h=nr(this),p=En(void 0);try{if(!(d&vt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function UO(s){return"function"==typeof s||"object"==typeof s&&s instanceof or}(o)&&Ht(o);I=C&&this.injectableDefInScope(C)?qh(P0(o),Ey):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(d&vt.Self?Iy():this.parent).get(o,l=d&vt.Optional&&l===jr?null:l)}catch(_){if("NullInjectorError"===_.name){if((_[tr]=_[tr]||[]).unshift(ee(o)),h)throw _;return function k(s,o,l,d){const h=s[tr];throw o[ar]&&h.unshift(o[ar]),s.message=function Se(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ee(o);if(Array.isArray(o))h=o.map(ee).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let I=o[_];p.push(_+":"+("string"==typeof I?JSON.stringify(I):ee(I)))}h=`{${p.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(yi,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[tr]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{En(p),nr(h)}}resolveInjectorInitializers(){const o=nr(this),l=En(void 0);try{const d=this.get(_y.multi,Bt,vt.Self);for(const h of d)h()}finally{nr(o),En(l)}}toString(){const o=[],l=this.records;for(const d of l.keys())o.push(ee(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(o){let l=Wh(o=Ce(o))?o:Ce(o&&o.provide);const d=function tM(s){return Rb(s)?qh(void 0,s.useValue):qh(Pb(s),Ey)}(o);if(Wh(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=qh(void 0,Ey,!0),h.factory=()=>te(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,d)}hydrate(o,l){return l.value===Ey&&(l.value=$O,l.value=l.factory()),"object"==typeof l.value&&l.value&&function nM(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=Ce(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}removeOnDestroy(o){const l=this._onDestroyHooks.indexOf(o);-1!==l&&this._onDestroyHooks.splice(l,1)}}function P0(s){const o=Ht(s),l=null!==o?o.factory:Wo(s);if(null!==l)return l;if(s instanceof or)throw new re(204,!1);if(s instanceof Function)return function eM(s){const o=s.length;if(o>0)throw Sa(o,"?"),new re(204,!1);const l=function vn(s){return s&&(s[$n]||s[kr])||null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new re(204,!1)}function Pb(s,o,l){let d;if(Wh(s)){const h=Ce(s);return Wo(h)||P0(h)}if(Rb(s))d=()=>Ce(s.useValue);else if(function Nb(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...te(s.deps||[]));else if(function O0(s){return!(!s||!s.useExisting)}(s))d=()=>rr(Ce(s.useExisting));else{const h=Ce(s&&(s.useClass||s.provide));if(!function kb(s){return!!s.deps}(s))return Wo(h)||P0(h);d=()=>new h(...te(s.deps))}return d}function qh(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Fb(s,o){for(const l of s)Array.isArray(l)?Fb(l,o):l&&Z(l)?Fb(l.\u0275providers,o):o(l)}const rM=new or("AppId",{providedIn:"root",factory:()=>jO}),jO="ng",iM=new or("Platform Initializer"),Lb=new or("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ks=new or("CSP nonce",{providedIn:"root",factory:()=>function Gh(){if(void 0!==cy)return cy;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let oM=(s,o)=>null;function cM(s,o){return oM(s,o)}class di{}class jb{}class dM{resolveComponentFactory(o){throw function My(s){const o=Error(`No component factory found for ${ee(s)}.`);return o.ngComponent=s,o}(o)}}let Ry=(()=>{class s{}return s.NULL=new dM,s})();function Hb(){return Zh(Jr(),ot())}function Zh(s,o){return new lg(Ai(s,o))}let lg=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=Hb,s})();function hM(s){return s instanceof lg?s.nativeElement:s}class Gb{}let vs=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function Ny(){const s=ot(),l=Cs(Jr().index,s);return(Ti(l)?l:s)[on]}(),s})(),B0=(()=>{class s{}return s.\u0275prov=Le({token:s,providedIn:"root",factory:()=>null}),s})();class Oy{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const cg=new Oy("16.1.4"),Xh={};function yd(s){for(;s;){s[yn]|=64;const o=Kp(s);if(Za(s)&&!o)return s;s=o}return null}function Py(s){return s.ngOriginalError}class Qh{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Py(o);for(;l&&Py(l);)l=Py(l);return l||null}}const V0=new or("",{providedIn:"root",factory:()=>!1});function fl(s){return s instanceof Function?s():s}class Vy extends hs{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){yd(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,l,d){const h=Lr(this);this.trackingVersion++;try{o(l,d)}finally{Lr(h)}}destroy(){this.trackingVersion++}}let ef=null;function $y(){return ef??=new Vy,ef}function Zb(s,o){return s[o]??$y()}function Xb(s,o){const l=$y();l.hasReadASignal&&(s[o]=ef,l.lView=s,ef=new Vy)}const Sn={};function dg(s){Uy(Fn(),ot(),Zi()+s,!1)}function Uy(s,o,l,d){if(!d)if(3==(3&o[yn])){const p=s.preOrderCheckHooks;null!==p&&Bl(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Xu(o,p,0,l)}Qo(l)}function nC(s,o=null,l=null,d){const h=rC(s,o,l,d);return h.resolveInjectorInitializers(),h}function rC(s,o=null,l=null,d,h=new Set){const p=[l||Bt,BO(s)];return d=d||("object"==typeof s?void 0:ee(s)),new by(p,o||Iy(),d||null,h)}let Xc=(()=>{class s{static create(l,d){if(Array.isArray(l))return nC({name:""},d,l,"");{const h=l.name??"";return nC({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=jr,s.NULL=new Mb,s.\u0275prov=Le({token:s,providedIn:"any",factory:()=>rr(x0)}),s.__NG_ELEMENT_ID__=-1,s})();function tf(s,o=vt.Default){const l=ot();return null===l?rr(s,o):co(Jr(),l,Ce(s),o)}function iC(){throw new Error("invalid")}function Hy(s,o,l,d,h,p,_,I,C,A,P){const Y=o.blueprint.slice();return Y[Rr]=h,Y[yn]=140|d,(null!==A||s&&2048&s[yn])&&(Y[yn]|=2048),yh(Y),Y[Nr]=Y[Go]=s,Y[cr]=l,Y[fa]=_||s&&s[fa],Y[on]=I||s&&s[on],Y[Bs]=C||s&&s[Bs]||null,Y[_i]=p,Y[qa]=function CO(){return nb++}(),Y[ki]=P,Y[Ec]=A,Y[Dr]=2==o.type?s[Dr]:Y,Y}function ql(s,o,l,d,h){let p=s.data[o];if(null===p)p=function Gy(s,o,l,d,h){const p=Fp(),_=Lp(),C=s.data[o]=function q0(s,o,l,d,h,p){let _=o?o.injectorIndex:-1,I=0;return Hs()&&(I|=128),{type:l,index:d,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(_?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C,C.prev=p)),C}(s,o,l,d,h),function ei(){return un.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=l,p.value=d,p.attrs=h;const _=function Oc(){const s=un.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Fi(p,!0),p}function nf(s,o,l,d){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function zy(s,o,l,d,h){const p=Zb(o,Cu),_=Zi(),I=2&d;try{if(Qo(-1),I&&o.length>Vn&&Uy(s,o,Vn,!1),js(I?2:0,h),I)p.runInContext(l,d,h);else{const A=Lr(null);try{l(d,h)}finally{Lr(A)}}}finally{I&&null===o[Cu]&&Xb(o,Cu),Qo(_),js(I?3:1,h)}}function H0(s,o,l){if(Du(o)){const d=Lr(null);try{const p=o.directiveEnd;for(let _=o.directiveStart;_<p;_++){const I=s.data[_];I.contentQueries&&I.contentQueries(1,l[_],_)}}finally{Lr(d)}}}function G0(s,o,l){Ol()&&(function tP(s,o,l,d){const h=l.directiveStart,p=l.directiveEnd;Us(l)&&function oP(s,o,l){const d=Ai(o,s),h=W0(l);let _=16;l.signals?_=4096:l.onPush&&(_=64);const I=sf(s,Hy(s,h,null,_,d,o,null,s[fa].rendererFactory.createRenderer(d,l),null,null,null));s[o.index]=I}(o,l,s.data[h+l.componentOffset]),s.firstCreatePass||ea(l,o),_s(d,o);const _=l.initialInputs;for(let I=h;I<p;I++){const C=s.data[I],A=ta(o,s,I,l);_s(A,o),null!==_&&MM(0,I-h,A,C,0,_),mr(C)&&(Cs(l.index,o)[cr]=ta(o,s,I,l))}}(s,o,l,Ai(l,o)),64==(64&l.flags)&&dC(s,o,l))}function z0(s,o,l=Ai){const d=o.localNames;if(null!==d){let h=o.index+1;for(let p=0;p<d.length;p+=2){const _=d[p+1],I=-1===_?l(o,s):s[_];s[h++]=I}}}function W0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Wy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function Wy(s,o,l,d,h,p,_,I,C,A,P){const Y=Vn+d,_e=Y+h,xe=function sC(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:Sn);return l}(Y,_e),rt="function"==typeof A?A():A;return xe[Dt]={type:s,blueprint:xe,template:l,queries:null,viewQuery:I,declTNode:o,data:xe.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:_e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:rt,incompleteFirstPass:!1,ssrId:P}}let wM=s=>null;function bM(s,o,l,d){for(let h in s)if(s.hasOwnProperty(h)){l=null===l?{}:l;const p=s[h];null===d?CM(l,o,h,p):d.hasOwnProperty(h)&&CM(l,o,d[h],p)}return l}function CM(s,o,l,d){s.hasOwnProperty(l)?s[l].push(o,d):s[l]=[o,d]}function Mo(s,o,l,d,h,p,_,I){const C=Ai(o,l);let P,A=o.inputs;!I&&null!=A&&(P=A[d])?(fg(s,l,P,d,h),Us(o)&&function cC(s,o){const l=Cs(o,s);16&l[yn]||(l[yn]|=64)}(l,o.index)):3&o.type&&(d=function lC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=_?_(h,o.value||"",d):h,p.setProperty(C,d,h))}function uC(s,o,l,d){if(Ol()){const h=null===d?null:{"":-1},p=function nP(s,o){const l=s.directiveRegistry;let d=null,h=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];if(Ls(o,_.selectors,!1))if(d||(d=[]),mr(_))if(null!==_.findHostDirectiveDefs){const I=[];h=h||new Map,_.findHostDirectiveDefs(_,I,h),d.unshift(...I,_),hC(s,o,I.length)}else d.unshift(_),hC(s,o,0);else h=h||new Map,_.findHostDirectiveDefs?.(_,d,h),d.push(_)}return null===d?null:[d,h]}(s,l);let _,I;null===p?_=I=null:[_,I]=p,null!==_&&Yy(s,o,l,_,h,I),h&&function AM(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new re(-301,!1);d.push(o[h],p)}}}(l,d,h)}l.mergedAttrs=bn(l.mergedAttrs,l.attrs)}function Yy(s,o,l,d,h,p){for(let A=0;A<d.length;A++)rl(ea(l,o),s,d[A].type);!function iP(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}(l,s.data.length,d.length);for(let A=0;A<d.length;A++){const P=d[A];P.providersResolver&&P.providersResolver(P)}let _=!1,I=!1,C=nf(s,o,d.length,null);for(let A=0;A<d.length;A++){const P=d[A];l.mergedAttrs=bn(l.mergedAttrs,P.hostAttrs),sP(s,l,o,C,P),rP(C,P,h),null!==P.contentQueries&&(l.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(l.flags|=64);const Y=P.type.prototype;!_&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((s.preOrderHooks??=[]).push(l.index),_=!0),!I&&(Y.ngOnChanges||Y.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(l.index),I=!0),C++}!function DM(s,o,l){const h=o.directiveEnd,p=s.data,_=o.attrs,I=[];let C=null,A=null;for(let P=o.directiveStart;P<h;P++){const Y=p[P],_e=l?l.get(Y):null,rt=_e?_e.outputs:null;C=bM(Y.inputs,P,C,_e?_e.inputs:null),A=bM(Y.outputs,P,A,rt);const ht=null===C||null===_||lr(o)?null:K0(C,P,_);I.push(ht)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=A}(s,l,p)}function dC(s,o,l){const d=l.directiveStart,h=l.directiveEnd,p=l.index,_=function kc(){return un.lFrame.currentDirectiveIndex}();try{Qo(p);for(let I=d;I<h;I++){const C=s.data[I],A=o[I];Ih(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&SM(C,A)}}finally{Qo(-1),Ih(_)}}function SM(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function hC(s,o,l){o.componentOffset=l,(s.components??=[]).push(o.index)}function rP(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;mr(o)&&(l[""]=s)}}function sP(s,o,l,d,h){s.data[d]=h;const p=h.factory||(h.factory=Wo(h.type)),_=new Zt(p,mr(h),tf);s.blueprint[d]=_,l[d]=_,function eP(s,o,l,d,h){const p=h.hostBindings;if(p){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const I=~o.index;(function TM(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(_)!=I&&_.push(I),_.push(l,d,p)}}(s,o,d,nf(s,l,h.hostVars,Sn),h)}function Yl(s,o,l,d,h,p){const _=Ai(s,o);!function rf(s,o,l,d,h,p,_){if(null==p)s.removeAttribute(o,h,l);else{const I=null==_?ae(p):_(p,d||"",h);s.setAttribute(o,h,I,l)}}(o[on],_,p,s.value,l,d,h)}function MM(s,o,l,d,h,p){const _=p[o];if(null!==_)for(let I=0;I<_.length;)Ky(d,l,_[I++],_[I++],_[I++])}function Ky(s,o,l,d,h){const p=Lr(null);try{const _=s.inputTransforms;null!==_&&_.hasOwnProperty(d)&&(h=_[d].call(o,h)),null!==s.setInput?s.setInput(o,h,l,d):o[d]=h}finally{Lr(p)}}function K0(s,o,l){let d=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===d&&(d=[]);const _=s[p];for(let I=0;I<_.length;I+=2)if(_[I]===o){d.push(p,_[I+1],l[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function Zy(s,o,l,d){return[s,!0,!1,o,null,0,d,l,null,null,null]}function Xy(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const p=l[d+1];if(-1!==p){const _=s.data[p];Zo(l[d]),_.contentQueries(2,o[p],p)}}}function sf(s,o){return s[Sl]?s[_c][Pi]=o:s[Sl]=o,s[_c]=o,o}function hg(s,o,l){Zo(0);const d=Lr(null);try{o(s,l)}finally{Lr(d)}}function af(s){return s[Eo]||(s[Eo]=[])}function pC(s){return s.cleanup||(s.cleanup=[])}function Jy(s,o){const l=s[Bs],d=l?l.get(Qh,null):null;d&&d.handleError(o)}function fg(s,o,l,d,h){for(let p=0;p<l.length;){const _=l[p++],I=l[p++];Ky(s.data[_],o[_],d,I,h)}}function Z0(s,o){const l=Cs(o,s),d=l[Dt];!function xM(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])}(d,l);const h=l[Rr];null!==h&&null===l[ki]&&(l[ki]=cM(h,l[Bs])),xo(d,l,l[cr])}function xo(s,o,l){Lc(o);try{const d=s.viewQuery;null!==d&&hg(1,d,l);const h=s.template;null!==h&&zy(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Xy(s,o),s.staticViewQueries&&hg(2,s.viewQuery,l);const p=s.components;null!==p&&function kt(s,o){for(let l=0;l<o.length;l++)Z0(s,o[l])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[yn]&=-5,Ch()}}let lf=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(l,d,h){const p=typeof Zone>"u"?null:Zone.current,_=new xp(l,A=>{this.all.has(A)&&this.queue.set(A,p)},h);let I;this.all.add(_),_.notify();const C=()=>{_.cleanup(),I?.(),this.all.delete(_),this.queue.delete(_)};return I=d?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[l,d]of this.queue)this.queue.delete(l),d?d.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=Le({token:s,providedIn:"root",factory:()=>new s}),s})();function cf(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const I=o[_];"number"==typeof I?p=I:1==p?h=ie(h,I):2==p&&(d=ie(d,I+": "+o[++_]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}function pg(s,o,l,d,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&d.push(ur(p)),Si(p)){for(let I=Di;I<p.length;I++){const C=p[I],A=C[Dt].firstChild;null!==A&&pg(C[Dt],C,A,d)}p[ds]!==p[Rr]&&d.push(p[ds])}const _=l.type;if(8&_)pg(s,o,l.child,d);else if(32&_){const I=Vh(l,o);let C;for(;C=I();)d.push(C)}else if(16&_){const I=pb(o,l);if(Array.isArray(I))d.push(...I);else{const C=Kp(o[Dr]);pg(C[Dt],C,I,d,!0)}}l=h?l.projectionNext:l.next}return d}function e_(s,o,l,d=!0){const h=o[fa].rendererFactory;h.begin&&h.begin();try{gg(s,o,s.template,l)}catch(_){throw d&&Jy(o,_),_}finally{h.end&&h.end(),o[fa].effectManager?.flush()}}function gg(s,o,l,d){const h=o[yn];if(256!=(256&h)){o[fa].effectManager?.flush(),Lc(o);try{yh(o),function Pc(s){return un.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&zy(s,o,l,2,d);const _=3==(3&h);if(_){const A=s.preOrderCheckHooks;null!==A&&Bl(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Xu(o,A,0,null),$c(o,0)}if(function Jc(s){for(let o=ab(s);null!==o;o=ey(o)){if(!o[ga])continue;const l=o[Ya];for(let d=0;d<l.length;d++){Hu(l[d])}}}(o),ji(o,2),null!==s.contentQueries&&Xy(s,o),_){const A=s.contentCheckHooks;null!==A&&Bl(o,A)}else{const A=s.contentHooks;null!==A&&Xu(o,A,1),$c(o,1)}!function EM(s,o){const l=s.hostBindingOpCodes;if(null===l)return;const d=Zb(o,$s);try{for(let h=0;h<l.length;h++){const p=l[h];if(p<0)Qo(~p);else{const _=p,I=l[++h],C=l[++h];kl(I,_),d.runInContext(C,2,o[_])}}}finally{null===o[$s]&&Xb(o,$s),Qo(-1)}}(s,o);const I=s.components;null!==I&&t_(o,I,0);const C=s.viewQuery;if(null!==C&&hg(2,C,d),_){const A=s.viewCheckHooks;null!==A&&Bl(o,A)}else{const A=s.viewHooks;null!==A&&Xu(o,A,2),$c(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[yn]&=-73,Mc(o)}finally{Ch()}}}function ji(s,o){for(let l=ab(s);null!==l;l=ey(l))for(let d=Di;d<l.length;d++)J0(l[d],o)}function NM(s,o,l){J0(Cs(o,s),l)}function J0(s,o){if(!function gh(s){return 128==(128&s[yn])}(s))return;const l=s[Dt];if(80&s[yn]&&0===o||1024&s[yn]||2===o)gg(l,s,l.template,s[cr]);else if(s[yc]>0){ji(s,1);const h=s[Dt].components;null!==h&&t_(s,h,1)}}function t_(s,o,l){for(let d=0;d<o.length;d++)NM(s,o[d],l)}class uf{get rootNodes(){const o=this._lView,l=o[Dt];return pg(l,o,l.firstChild,[])}constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cr]}set context(o){this._lView[cr]=o}get destroyed(){return 256==(256&this._lView[yn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Nr];if(Si(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(I0(o,d),id(l,d))}this._attachedToViewContainer=!1}ry(this._lView[Dt],this._lView)}onDestroy(o){!function Ds(s,o){if(256==(256&s[yn]))throw new re(911,!1);null===s[vi]&&(s[vi]=[]),s[vi].push(o)}(this._lView,o)}markForCheck(){yd(this._cdRefInjectingView||this._lView)}detach(){this._lView[yn]&=-129}reattach(){this._lView[yn]|=128}detectChanges(){e_(this._lView[Dt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function SO(s,o){Uh(s,o,o[on],2,null,null)}(this._lView[Dt],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=o}}class Rs extends uf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;e_(o[Dt],o,o[cr],!1)}checkNoChanges(){}get context(){return null}}class gC extends Ry{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Be(o);return new vd(l,this.ngModule)}}function df(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class pl{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,d){d=se(d);const h=this.injector.get(o,Xh,d);return h!==Xh||l===Xh?h:this.parentInjector.get(o,l,d)}}class vd extends jb{get inputs(){const o=this.componentDef,l=o.inputTransforms,d=df(o.inputs);if(null!==l)for(const h of d)l.hasOwnProperty(h.propName)&&(h.transform=l[h.propName]);return d}get outputs(){return df(this.componentDef.outputs)}constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Wa(s){return s.map(da).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}create(o,l,d,h){let p=(h=h||this.ngModule)instanceof gd?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new pl(o,p):o,I=_.get(Gb,null);if(null===I)throw new re(407,!1);const P={rendererFactory:I,sanitizer:_.get(B0,null),effectManager:_.get(lf,null)},Y=I.createRenderer(null,this.componentDef),_e=this.componentDef.selectors[0][0]||"div",xe=d?function oC(s,o,l,d){const p=d.get(V0,!1)||l===Yt.ShadowDom,_=s.selectRootElement(o,p);return function aC(s){wM(s)}(_),_}(Y,d,this.componentDef.encapsulation,_):ny(Y,_e,function n_(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(_e)),Tt=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Kt=Wy(0,null,null,1,0,null,null,null,null,null,null),st=Hy(null,Kt,null,Tt,null,null,P,Y,_,null,null);let Dn,Bn;Lc(st);try{const jn=this.componentDef;let si,fm=null;jn.findHostDirectiveDefs?(si=[],fm=new Map,jn.findHostDirectiveDefs(jn,si,fm),si.push(jn)):si=[jn];const mR=function hf(s,o){const l=s[Dt],d=Vn;return s[d]=o,ql(l,d,2,"#host",null)}(st,xe),nI=function mC(s,o,l,d,h,p,_){const I=h[Dt];!function eE(s,o,l,d){for(const h of s)o.mergedAttrs=bn(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(cf(o,o.mergedAttrs,!0),null!==l&&mb(d,l,o))}(d,s,o,_);let C=null;null!==o&&(C=cM(o,h[Bs]));const A=p.rendererFactory.createRenderer(o,l);let P=16;l.signals?P=4096:l.onPush&&(P=64);const Y=Hy(h,W0(l),null,P,h[s.index],s,p,A,null,null,C);return I.firstCreatePass&&hC(I,s,d.length-1),sf(h,Y),h[s.index]=Y}(mR,xe,jn,si,st,P,Y);Bn=ph(Kt,Vn),xe&&function PM(s,o,l,d){if(d)Vt(s,l,["ng-version",cg.full]);else{const{attrs:h,classes:p}=function ro(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++d]):8===h&&l.push(p);else{if(!Qr(h))break;h=p}d++}return{attrs:o,classes:l}}(o.selectors[0]);h&&Vt(s,l,h),p&&p.length>0&&gb(s,l,p.join(" "))}}(Y,jn,xe,d),void 0!==l&&function _C(s,o,l){const d=s.projection=[];for(let h=0;h<o.length;h++){const p=l[h];d.push(null!=p?Array.from(p):null)}}(Bn,this.ngContentSelectors,l),Dn=function yC(s,o,l,d,h,p){const _=Jr(),I=h[Dt],C=Ai(_,h);Yy(I,h,_,l,null,d);for(let P=0;P<l.length;P++)_s(ta(h,I,_.directiveStart+P,_),h);dC(I,h,_),C&&_s(C,h);const A=ta(h,I,_.directiveStart+_.componentOffset,_);if(s[cr]=h[cr]=A,null!==p)for(const P of p)P(A,o);return H0(I,_,s),A}(nI,jn,si,fm,st,[tE]),xo(Kt,st,null)}finally{Ch()}return new OM(this.componentType,Dn,Zh(Bn,st),st,Bn)}}class OM extends di{constructor(o,l,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=l,this.hostView=this.changeDetectorRef=new Rs(h),this.componentType=o}setInput(o,l){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),l))return;const p=this._rootLView;fg(p[Dt],p,h,o,l),this.previousInputValues.set(o,l),yd(Cs(this._tNode.index,p))}}get injector(){return new bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function tE(){const s=Jr();Vc(ot()[Dt],s)}function mg(s){let o=function r_(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(mr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new re(903,!1);h=o.\u0275dir}if(h){if(l){d.push(h);const _=s;_.inputs=ff(s.inputs),_.inputTransforms=ff(s.inputTransforms),_.declaredInputs=ff(s.declaredInputs),_.outputs=ff(s.outputs);const I=h.hostBindings;I&&yg(s,I);const C=h.viewQuery,A=h.contentQueries;if(C&&vC(s,C),A&&kM(s,A),H(s.inputs,h.inputs),H(s.declaredInputs,h.declaredInputs),H(s.outputs,h.outputs),null!==h.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),H(_.inputTransforms,h.inputTransforms)),mr(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const I=p[_];I&&I.ngInherit&&I(s),I===mg&&(l=!1)}}o=Object.getPrototypeOf(o)}!function nE(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=bn(h.hostAttrs,l=bn(l,h.hostAttrs))}}(d)}function ff(s){return s===Wt?{}:s===Bt?[]:s}function vC(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function kM(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,p)=>{o(d,h,p),l(d,h,p)}:o}function yg(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}function iE(s){const o=s.inputConfig,l={};for(const d in o)if(o.hasOwnProperty(d)){const h=o[d];Array.isArray(h)&&h[2]&&(l[d]=h[2])}s.inputTransforms=l}function pf(s){return!!Eg(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Eg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Es(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function lE(s,o,l,d){const h=ot();return Es(h,Tr(),o)&&(Fn(),Yl(Er(),h,s,o,l,d)),lE}function nu(s,o,l,d){return Es(s,Tr(),l)?o+ae(l)+d:Sn}function gE(s,o,l,d,h,p,_,I){const C=ot(),A=Fn(),P=s+Vn,Y=A.firstCreatePass?function Sg(s,o,l,d,h,p,_,I,C){const A=o.consts,P=ql(o,s,4,_||null,oo(A,I));uC(o,l,P,oo(A,C)),Vc(o,P);const Y=P.tView=Wy(2,P,d,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,P),Y.queries=o.queries.embeddedTView(P)),P}(P,A,C,o,l,d,h,p,_):A.data[P];Fi(Y,!1);const _e=PC(A,C,Y,s);Ll()&&iy(A,C,_e,Y),_s(_e,C),sf(C,C[P]=Zy(_e,C,_e,Y)),zo(Y)&&G0(A,C,Y),null!=_&&z0(C,Y,I)}let PC=function h_(s,o,l,d){return Ea(!0),o[on].createComment("")};function yE(s){return function Ko(s,o){return s[o]}(function qu(){return un.lFrame.contextLView}(),Vn+s)}function p_(s,o,l){const d=ot();return Es(d,Tr(),o)&&Mo(Fn(),Er(),d,s,o,d[on],l,!1),p_}function _E(s,o,l,d,h){const _=h?"class":"style";fg(s,l,o.inputs[_],_,d)}function Mg(s,o,l,d){const h=ot(),p=Fn(),_=Vn+s,I=h[on],C=p.firstCreatePass?function Ag(s,o,l,d,h,p){const _=o.consts,C=ql(o,s,2,d,oo(_,h));return uC(o,l,C,oo(_,p)),null!==C.attrs&&cf(C,C.attrs,!1),null!==C.mergedAttrs&&cf(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(_,p,h,o,l,d):p.data[_],A=ou(p,h,C,I,o,s);h[_]=A;const P=zo(C);return Fi(C,!0),mb(I,A,C),32!=(32&C.flags)&&Ll()&&iy(p,h,A,C),0===function Vm(){return un.lFrame.elementDepthCount}()&&_s(A,h),function zu(){un.lFrame.elementDepthCount++}(),P&&(G0(p,h,C),H0(p,C,h)),null!==d&&z0(h,C),Mg}function Ed(){let s=Jr();Lp()?Br():(s=s.parent,Fi(s,!1));const o=s;(function Rc(s){return un.skipHydrationRootTNode===s})(o)&&function kp(){un.skipHydrationRootTNode=null}(),function Op(){un.lFrame.elementDepthCount--}();const l=Fn();return l.firstCreatePass&&(Vc(l,s),Du(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Vp(s){return 0!=(8&s.flags)}(o)&&_E(l,o,ot(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function nl(s){return 0!=(16&s.flags)}(o)&&_E(l,o,ot(),o.stylesWithoutHost,!1),Ed}function wd(s,o,l,d){return Mg(s,o,l,d),Ed(),wd}let ou=(s,o,l,d,h,p)=>(Ea(!0),ny(d,h,function Mh(){return un.lFrame.currentNamespace}()));function g_(s,o,l){const d=ot(),h=Fn(),p=s+Vn,_=h.firstCreatePass?function WM(s,o,l,d,h){const p=o.consts,_=oo(p,d),I=ql(o,s,8,"ng-container",_);return null!==_&&cf(I,_,!0),uC(o,l,I,oo(p,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(p,h,d,o,l):h.data[p];Fi(_,!0);const I=au(h,d,_,s);return d[p]=I,Ll()&&iy(h,d,I,_),_s(I,d),zo(_)&&(G0(h,d,_),H0(h,_,d)),null!=l&&z0(d,_),g_}function m_(){let s=Jr();const o=Fn();return Lp()?Br():(s=s.parent,Fi(s,!1)),o.firstCreatePass&&(Vc(o,s),Du(s)&&o.queries.elementEnd(s)),m_}function EE(s,o,l){return g_(s,o,l),m_(),EE}let au=(s,o,l,d)=>(Ea(!0),ty(o[on],""));function xg(){return ot()}function __(s){return!!s&&"function"==typeof s.then}function Vr(s){return!!s&&"function"==typeof s.subscribe}function bf(s,o,l,d){const h=ot(),p=Fn(),_=Jr();return function FC(s,o,l,d,h,p,_){const I=zo(d),A=s.firstCreatePass&&pC(s),P=o[cr],Y=af(o);let _e=!0;if(3&d.type||_){const ht=Ai(d,o),Tt=_?_(ht):ht,Kt=Y.length,st=_?Bn=>_(ur(Bn[d.index])):d.index;let Dn=null;if(!_&&I&&(Dn=function Rg(s,o,l,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===l&&h[p+1]===d){const I=o[Eo],C=h[p+2];return I.length>C?I[C]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,d.index)),null!==Dn)(Dn.__ngLastListenerFn__||Dn).__ngNextListenerFn__=p,Dn.__ngLastListenerFn__=p,_e=!1;else{p=LC(d,o,P,p,!1);const Bn=l.listen(Tt,h,p);Y.push(p,Bn),A&&A.push(h,st,Kt,Kt+1)}}else p=LC(d,o,P,p,!1);const xe=d.outputs;let rt;if(_e&&null!==xe&&(rt=xe[h])){const ht=rt.length;if(ht)for(let Tt=0;Tt<ht;Tt+=2){const jn=o[rt[Tt]][rt[Tt+1]].subscribe(p),si=Y.length;Y.push(p,jn),A&&A.push(h,d.index,si,-(si+1))}}}(p,h,h[on],_,s,o,d),bf}function wE(s,o,l,d){try{return js(6,o,l),!1!==l(d)}catch(h){return Jy(s,h),!1}finally{js(7,o,l)}}function LC(s,o,l,d,h){return function p(_){if(_===Function)return d;yd(s.componentOffset>-1?Cs(s.index,o):o);let C=wE(o,l,d,_),A=p.__ngNextListenerFn__;for(;A;)C=wE(o,l,A,_)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&_.preventDefault(),C}}function BC(s=1){return function Dh(s){return(un.lFrame.contextLView=function Um(s,o){for(;s>0;)o=o[Go],s--;return o}(s,un.lFrame.contextLView))[cr]}(s)}function qM(s,o){let l=null;const d=function vo(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(!(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===d?Ls(s,p,!0):Tl(d,p))return h}else l=h}return l}function VC(s){const o=ot()[Dr][_i];if(!o.projection){const d=o.projection=Sa(s?s.length:1,null),h=d.slice();let p=o.child;for(;null!==p;){const _=s?qM(p,s):0;null!==_&&(h[_]?h[_].projectionNext=p:d[_]=p,h[_]=p),p=p.next}}}function Df(s,o=0,l){const d=ot(),h=Fn(),p=ql(h,Vn+s,16,null,l||null);null===p.projection&&(p.projection=o),Br(),(!d[ki]||Hs())&&32!=(32&p.flags)&&function oy(s,o,l){fd(o[on],0,o,l,cb(s,l,o),db(l.parent||o[_i],l,o))}(h,d,p)}function ml(s,o,l){return v_(s,"",o,"",l),ml}function v_(s,o,l,d,h){const p=ot(),_=nu(p,o,l,d);return _!==Sn&&Mo(Fn(),Er(),p,s,_,p[on],h,!1),v_}function Ng(s,o){return s<<17|o<<2}function yl(s){return s>>17&32767}function E_(s){return 2|s}function bd(s){return(131068&s)>>2}function SE(s,o){return-131069&s|o<<2}function AE(s){return 1|s}function RE(s,o,l,d,h){const p=s[l+1],_=null===o;let I=d?yl(p):bd(p),C=!1;for(;0!==I&&(!1===C||_);){const P=s[I+1];Og(s[I],o)&&(C=!0,s[I+1]=d?AE(P):E_(P)),I=d?yl(P):bd(P)}C&&(s[l+1]=d?E_(p):AE(p))}function Og(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&G(s,o)>=0}function Pg(s,o){return function ia(s,o,l,d){const h=ot(),p=Fn(),_=function lo(s){const o=un.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);p.firstUpdatePass&&function LE(s,o,l,d){const h=s.data;if(null===h[l+1]){const p=h[Zi()],_=function ZC(s,o){return o>=s.expandoStartIndex}(s,l);(function Bg(s,o){return 0!=(s.flags&(o?8:16))})(p,d)&&null===o&&!_&&(o=!1),o=function kg(s,o,l,d){const h=function Fl(s){const o=un.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=Tf(l=Fg(null,s,o,l,d),o.attrs,d),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(l=Fg(h,s,o,l,d),null===p){let C=function XC(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==bd(d))return s[yl(d)]}(s,o,d);void 0!==C&&Array.isArray(C)&&(C=Fg(null,s,o,C[1],d),C=Tf(C,o.attrs,d),function QC(s,o,l,d){s[yl(l?o.classBindings:o.styleBindings)]=d}(s,o,d,C))}else p=function BE(s,o,l){let d;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)d=Tf(d,s[p].hostAttrs,l);return Tf(d,o.attrs,l)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,d),function I_(s,o,l,d,h,p){let _=p?o.classBindings:o.styleBindings,I=yl(_),C=bd(_);s[d]=l;let P,A=!1;if(Array.isArray(l)?(P=l[1],(null===P||G(l,P)>0)&&(A=!0)):P=l,h)if(0!==C){const _e=yl(s[I+1]);s[d+1]=Ng(_e,I),0!==_e&&(s[_e+1]=SE(s[_e+1],d)),s[I+1]=function HC(s,o){return 131071&s|o<<17}(s[I+1],d)}else s[d+1]=Ng(I,0),0!==I&&(s[I+1]=SE(s[I+1],d)),I=d;else s[d+1]=Ng(C,0),0===I?I=d:s[C+1]=SE(s[C+1],d),C=d;A&&(s[d+1]=E_(s[d+1])),RE(s,P,d,!0),RE(s,P,d,!1),function xE(s,o,l,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&G(p,o)>=0&&(l[d+1]=AE(l[d+1]))}(o,P,s,d,p),_=Ng(I,C),p?o.classBindings=_:o.styleBindings=_}(h,p,o,l,_,d)}}(p,s,_,d),o!==Sn&&Es(h,_,o)&&function $E(s,o,l,d,h,p,_,I){if(!(3&o.type))return;const C=s.data,A=C[I+1],P=function YM(s){return 1==(1&s)}(A)?UE(C,o,l,h,bd(A),_):void 0;Lg(P)||(Lg(p)||function TE(s){return 2==(2&s)}(A)&&(p=UE(C,null,l,h,I,_)),function AA(s,o,l,d,h){if(o)h?s.addClass(l,d):s.removeClass(l,d);else{let p=-1===d.indexOf("-")?void 0:cl.DashCase;null==h?s.removeStyle(l,d,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=cl.Important),s.setStyle(l,d,h,p))}}(d,_,Qa(Zi(),l),h,p))}(p,p.data[Zi()],h,h[on],s,h[_+1]=function eD(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ee(Na(s)))),s}(o,l),d,_)}(s,o,null,!0),Pg}function Fg(s,o,l,d,h){let p=null;const _=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<_&&(p=o[I],d=Tf(d,p.hostAttrs,h),p!==s);)I++;return null!==s&&(l.directiveStylingLast=I),d}function Tf(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),T(s,_,!!l||o[++p]))}return void 0===s?null:s}function UE(s,o,l,d,h,p){const _=null===o;let I;for(;h>0;){const C=s[h],A=Array.isArray(C),P=A?C[1]:C,Y=null===P;let _e=l[h+1];_e===Sn&&(_e=Y?Bt:void 0);let xe=Y?M(_e,d):P===d?_e:void 0;if(A&&!Lg(xe)&&(xe=M(C,d)),Lg(xe)&&(I=xe,_))return I;const rt=s[h+1];h=_?yl(rt):bd(rt)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(I=M(C,d))}return I}function Lg(s){return void 0!==s}function go(s,o=""){const l=ot(),d=Fn(),h=s+Vn,p=d.firstCreatePass?ql(d,h,1,o,null):d.data[h],_=jE(d,l,p,o,s);l[h]=_,Ll()&&iy(d,l,_,p),Fi(p,!1)}let jE=(s,o,l,d,h)=>(Ea(!0),function Xp(s,o){return s.createText(o)}(o[on],d));function HE(s){return Oo("",s,""),HE}function Oo(s,o,l){const d=ot(),h=nu(d,s,o,l);return h!==Sn&&function Qc(s,o,l){const d=Qa(o,s);!function w0(s,o,l){s.setValue(o,l)}(s[on],d,l)}(d,Zi(),h),Oo}const Pr=void 0;var YE=["en",[["a","p"],["AM","PM"],Pr],[["AM","PM"],Pr,Pr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pr,"{1} 'at' {0}",Pr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oa(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Ft={};function KE(s){const o=function tx(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=at(o);if(l)return l;const d=o.split("-")[0];if(l=at(d),l)return l;if("en"===d)return YE;throw new re(701,!1)}function ze(s){return KE(s)[hn.PluralCase]}function at(s){return s in Ft||(Ft[s]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[s]),Ft[s]}var hn=(()=>((hn=hn||{})[hn.LocaleId=0]="LocaleId",hn[hn.DayPeriodsFormat=1]="DayPeriodsFormat",hn[hn.DayPeriodsStandalone=2]="DayPeriodsStandalone",hn[hn.DaysFormat=3]="DaysFormat",hn[hn.DaysStandalone=4]="DaysStandalone",hn[hn.MonthsFormat=5]="MonthsFormat",hn[hn.MonthsStandalone=6]="MonthsStandalone",hn[hn.Eras=7]="Eras",hn[hn.FirstDayOfWeek=8]="FirstDayOfWeek",hn[hn.WeekendRange=9]="WeekendRange",hn[hn.DateFormat=10]="DateFormat",hn[hn.TimeFormat=11]="TimeFormat",hn[hn.DateTimeFormat=12]="DateTimeFormat",hn[hn.NumberSymbols=13]="NumberSymbols",hn[hn.NumberFormats=14]="NumberFormats",hn[hn.CurrencyCode=15]="CurrencyCode",hn[hn.CurrencySymbol=16]="CurrencySymbol",hn[hn.CurrencyName=17]="CurrencyName",hn[hn.Currencies=18]="Currencies",hn[hn.Directionality=19]="Directionality",hn[hn.PluralCase=20]="PluralCase",hn[hn.ExtraData=21]="ExtraData",hn))();const Mf="en-US";let ZE=Mf;function iw(s,o,l,d,h){if(s=Ce(s),Array.isArray(s))for(let p=0;p<s.length;p++)iw(s[p],o,l,d,h);else{const p=Fn(),_=ot();let I=Wh(s)?s:Ce(s.provide),C=Pb(s);const A=Jr(),P=1048575&A.providerIndexes,Y=A.directiveStart,_e=A.providerIndexes>>20;if(Wh(s)||!s.multi){const xe=new Zt(C,h,tf),rt=Fa(I,o,h?P:P+_e,Y);-1===rt?(rl(ea(A,_),p,I),vl(p,s,o.length),o.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(xe),_.push(xe)):(l[rt]=xe,_[rt]=xe)}else{const xe=Fa(I,o,P+_e,Y),rt=Fa(I,o,P,P+_e),Tt=rt>=0&&l[rt];if(h&&!Tt||!h&&!(xe>=0&&l[xe])){rl(ea(A,_),p,I);const Kt=function Ex(s,o,l,d,h){const p=new Zt(s,l,tf);return p.multi=[],p.index=o,p.componentProviders=0,ii(p,h,d&&!l),p}(h?U_:$_,l.length,h,d,C);!h&&Tt&&(l[rt].providerFactory=Kt),vl(p,s,o.length,0),o.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(Kt),_.push(Kt)}else vl(p,s,xe>-1?xe:rt,ii(l[h?rt:xe],C,!h&&d));!h&&d&&Tt&&l[rt].componentProviders++}}}function vl(s,o,l,d){const h=Wh(o),p=function VO(s){return!!s.useClass}(o);if(h||p){const C=(p?Ce(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const P=A.indexOf(l);-1===P?A.push(l,[d,C]):A[P+1].push(d,C)}else A.push(l,C)}}}function ii(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Fa(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function $_(s,o,l,d){return Rd(this.multi,[])}function U_(s,o,l,d){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=ta(l,l[Dt],this.providerFactory.index,d);p=I.slice(0,_),Rd(h,p);for(let C=_;C<I.length;C++)p.push(I[C])}else p=[],Rd(h,p);return p}function Rd(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function rc(s,o=[]){return l=>{l.providersResolver=(d,h)=>function Gi(s,o,l){const d=Fn();if(d.firstCreatePass){const h=mr(s);iw(l,d.data,d.blueprint,h,!0),iw(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class ko{}class Wg{}function cu(s,o){return new Nd(s,o??null,[])}class Nd extends ko{constructor(o,l,d){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gC(this);const h=On(o);this._bootstrapComponents=fl(h.bootstrap),this._r3Injector=rC(o,l,[{provide:ko,useValue:this},{provide:Ry,useValue:this.componentFactoryResolver},...d],ee(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class El extends Wg{constructor(o){super(),this.moduleType=o}create(o){return new Nd(this.moduleType,o,[])}}class Od extends ko{constructor(o){super(),this.componentFactoryResolver=new gC(this),this.instance=null;const l=new by([...o.providers,{provide:ko,useValue:this},{provide:Ry,useValue:this.componentFactoryResolver}],o.parent||Iy(),o.debugName,new Set(["environment"]));this.injector=l,o.runEnvironmentInitializers&&l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function j_(s,o,l=null){return new Od({providers:s,parent:o,debugName:l,runEnvironmentInitializers:!0}).injector}let H_=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=QA(0,l.type),h=d.length>0?j_([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Le({token:s,providedIn:"environment",factory:()=>new s(rr(gd))}),s})();function uu(s){s.getStandaloneInjector=o=>o.get(H_).getOrCreateStandaloneInjector(s)}function Uf(s){return o=>{setTimeout(s,void 0,o)}}const La=class G_ extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){let h=o,p=l||(()=>null),_=d;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),p=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(p=Uf(p),h&&(h=Uf(h)),_&&(_=Uf(_)));const I=super.subscribe({next:h,error:p,complete:_});return o instanceof U.w0&&o.add(I),I}};function VD(){return this._results[Symbol.iterator]()}class Ba{get changes(){return this._changes||(this._changes=new La)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ba.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=VD)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=function ys(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function qs(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=o[d];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let jf=(()=>{class s{}return s.__NG_ELEMENT_ID__=pw,s})();const Hf=jf,$D=class extends Hf{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,l){return this.createEmbeddedViewImpl(o,l,null)}createEmbeddedViewImpl(o,l,d){const _=this._declarationTContainer.tView,I=Hy(this._declarationLView,_,o,4096&this._declarationLView[yn]?4096:16,null,_.declTNode,null,null,null,l||null,d||null);I[vc]=this._declarationLView[this._declarationTContainer.index];const A=this._declarationLView[Vs];return null!==A&&(I[Vs]=A.createEmbeddedView(_)),xo(_,I,o),new uf(I)}};function pw(){return Fd(Jr(),ot())}function Fd(s,o){return 4&s.type?new $D(o,s,Zh(s,o)):null}let Jg=(()=>{class s{}return s.__NG_ELEMENT_ID__=xx,s})();function xx(){return Gf(Jr(),ot())}const oc=Jg,UD=class extends oc{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return Zh(this._hostTNode,this._hostLView)}get injector(){return new bo(this._hostTNode,this._hostLView)}get parentInjector(){const o=zs(this._hostTNode,this._hostLView);if(dn(o)){const l=Ia(o,this._hostLView),d=fs(o);return new bo(l[Dt].data[d+8],l)}return new bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Js(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-Di}createEmbeddedView(o,l,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const I=o.createEmbeddedViewImpl(l||{},p,null);return this.insertImpl(I,h,false),I}createComponent(o,l,d,h,p){const _=o&&!function Ul(s){return"function"==typeof s}(o);let I;if(_)I=l;else{const ht=l||{};I=ht.index,d=ht.injector,h=ht.projectableNodes,p=ht.environmentInjector||ht.ngModuleRef}const C=_?o:new vd(Be(o)),A=d||this.parentInjector;if(!p&&null==C.ngModule){const Tt=(_?A:this.parentInjector).get(gd,null);Tt&&(p=Tt)}Be(C.componentType??{});const xe=C.create(A,h,null,p);return this.insertImpl(xe.hostView,I,false),xe}insert(o,l){return this.insertImpl(o,l,!1)}insertImpl(o,l,d){const h=o._lView,p=h[Dt];if(function mh(s){return Si(s[Nr])}(h)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const A=h[Nr],P=new UD(A,A[_i],A[Nr]);P.detach(P.indexOf(o))}}const _=this._adjustIndex(l),I=this._lContainer;if(function bA(s,o,l,d){const h=Di+d,p=l.length;d>0&&(l[h-1][Pi]=o),d<p-Di?(o[Pi]=l[h],rd(l,Di+d,o)):(l.push(o),o[Pi]=null),o[Nr]=l;const _=o[vc];null!==_&&l!==_&&function MO(s,o){const l=s[Ya];o[Dr]!==o[Nr][Nr][Dr]&&(s[ga]=!0),null===l?s[Ya]=[o]:l.push(o)}(_,o);const I=o[Vs];null!==I&&I.insertView(s),o[yn]|=128}(p,h,I,_),!d){const C=C0(_,I),A=h[on],P=zl(A,I[ds]);null!==P&&function TO(s,o,l,d,h,p){d[Rr]=h,d[_i]=o,Uh(s,d,l,1,h,p)}(p,I[_i],A,h,P,C)}return o.attachToViewContainerRef(),rd(q_(I),_,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Js(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=I0(this._lContainer,l);d&&(id(q_(this._lContainer),l),ry(d[Dt],d))}detach(o){const l=this._adjustIndex(o,-1),d=I0(this._lContainer,l);return d&&null!=id(q_(this._lContainer),l)?new uf(d):null}_adjustIndex(o,l=0){return o??this.length+l}};function Js(s){return s[8]}function q_(s){return s[8]||(s[8]=[])}function Gf(s,o){let l;const d=o[s.index];return Si(d)?l=d:(l=Zy(d,o,null,s),o[s.index]=l,sf(o,l)),Va(l,o,s,d),new UD(l,s,o)}let Va=function _w(s,o,l,d){if(s[ds])return;let h;h=8&l.type?ur(d):function jD(s,o){const l=s[on],d=l.createComment(""),h=Ai(o,s);return dd(l,zl(l,h),d,function eg(s,o){return s.nextSibling(o)}(l,h),!1),d}(o,l),s[ds]=h};class vw{constructor(o){this.queryList=o,this.matches=null}clone(){return new vw(this.queryList)}setDirty(){this.queryList.setDirty()}}class An{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<d;p++){const _=l.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new An(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==zf(o,l).matches&&this.queries[l].setDirty()}}class HD{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class tm{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,p=this.getByIndex(d).embeddedTView(o,h);p&&(p.indexInDeclarationView=d,null!==l?l.push(p):l=[p])}return null!==l?new tm(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Y_{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Y_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(o,l,GD(l,p)),this.matchTNodeWithReadOption(o,l,Da(l,o,p,!1,!1))}else d===jf?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Da(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===lg||h===Jg||h===jf&&4&l.type)this.addMatch(l.index,-2);else{const p=Da(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function GD(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function K_(s,o,l,d){return-1===l?function zD(s,o){return 11&s.type?Zh(s,o):4&s.type?Fd(s,o):null}(o,s):-2===l?function Nx(s,o,l){return l===lg?Zh(o,s):l===jf?Fd(o,s):l===Jg?Gf(o,s):void 0}(s,o,d):ta(s,s[Dt],l,o)}function WD(s,o,l,d){const h=o[Vs].queries[d];if(null===h.matches){const p=s.data,_=l.matches,I=[];for(let C=0;C<_.length;C+=2){const A=_[C];I.push(A<0?null:K_(o,p[A],_[C+1],l.metadata.read))}h.matches=I}return h.matches}function Z_(s,o,l,d){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const _=WD(s,o,h,l);for(let I=0;I<p.length;I+=2){const C=p[I];if(C>0)d.push(_[I/2]);else{const A=p[I+1],P=o[-C];for(let Y=Di;Y<P.length;Y++){const _e=P[Y];_e[vc]===_e[Nr]&&Z_(_e[Dt],_e,A,d)}if(null!==P[Ya]){const Y=P[Ya];for(let _e=0;_e<Y.length;_e++){const xe=Y[_e];Z_(xe[Dt],xe,A,d)}}}}}return d}function Bd(s){const o=ot(),l=Fn(),d=Fc();Zo(d+1);const h=zf(l,d);if(s.dirty&&function Np(s){return 4==(4&s[yn])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Z_(l,o,d,[]):WD(l,o,h,d);s.reset(p,hM),s.notifyOnChanges()}return!0}return!1}function du(s,o,l){const d=Fn();d.firstCreatePass&&(ww(d,new HD(s,o,l),-1),2==(2&o)&&(d.staticViewQueries=!0)),Vd(d,ot(),o)}function Ew(s,o,l,d){const h=Fn();if(h.firstCreatePass){const p=Jr();ww(h,new HD(o,l,d),p.index),function YD(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}Vd(h,ot(),l)}function hu(){return function qD(s,o){return s[Vs].queries[o].queryList}(ot(),Fc())}function Vd(s,o,l){const d=new Ba(4==(4&l));(function JO(s,o,l,d){const h=af(o);h.push(l),s.firstCreatePass&&pC(s).push(d,h.length-1)})(s,o,d,d.destroy),null===o[Vs]&&(o[Vs]=new An),o[Vs].queries.push(new vw(d))}function ww(s,o,l){null===s.queries&&(s.queries=new tm),s.queries.track(new Y_(o,l))}function zf(s,o){return s.queries.getByIndex(o)}function Iw(s){return!!On(s)}const cT=new or("Application Initializer");let Nw=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d}),this.appInits=rn(cT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const h of this.appInits){const p=h();if(__(p))l.push(p);else if(Vr(p)){const _=new Promise((I,C)=>{p.subscribe({complete:I,error:C})});l.push(_)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Le({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Zf=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Le({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ov=new or("LocaleId",{providedIn:"root",factory:()=>rn(ov,vt.Optional|vt.SkipSelf)||function Ow(){return typeof $localize<"u"&&$localize.locale||Mf}()}),uT=new or("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Pw=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new N.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Le({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class Gx{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let zx=(()=>{class s{compileModuleSync(l){return new El(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),p=fl(On(l).declarations).reduce((_,I)=>{const C=Be(I);return C&&_.push(new vd(C)),_},[]);return new Gx(d,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Le({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Fw(...s){}class is{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new La(!1),this.onMicrotaskEmpty=new La(!1),this.onStable=new La(!1),this.onError=new La(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Yx(){const s="function"==typeof an.requestAnimationFrame;let o=an[s?"requestAnimationFrame":"setTimeout"],l=an[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&l){const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function am(s){const o=()=>{!function Hd(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(an,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,av(s),s.isCheckStableRunning=!0,lc(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),av(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,p,_,I)=>{try{return lv(s),l.invokeTask(h,p,_,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),cv(s)}},onInvoke:(l,d,h,p,_,I,C)=>{try{return lv(s),l.invoke(h,p,_,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),cv(s)}},onHasTask:(l,d,h,p)=>{l.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,av(s),lc(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,d,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!is.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(is.isInAngularZone())throw new re(909,!1)}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,jd,Fw,Fw);try{return p.runTask(_,l,d)}finally{p.cancelTask(_)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const jd={};function lc(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function av(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function lv(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function cv(s){s._nesting--,lc(s)}class fT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new La,this.onMicrotaskEmpty=new La,this.onStable=new La,this.onError=new La}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}const Lw=new or("",{providedIn:"root",factory:pT});function pT(){const s=rn(is);let o=!0;const l=new ue.y(h=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(o),h.complete()})}),d=new ue.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{is.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const _=s.onUnstable.subscribe(()=>{is.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),_.unsubscribe()}});return(0,de.T)(l,d.pipe((0,ne.B)()))}const Bw=new or(""),Vw=new or("");let $w,uv=(()=>{class s{constructor(l,d,h){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$w||(function Gd(s){$w=s}(h),h.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{is.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(rr(is),rr(Qf),rr(Vw))},s.\u0275prov=Le({token:s,factory:s.\u0275fac}),s})(),Qf=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return $w?.findTestabilityInTree(this,l,d)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Le({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),cc=null;const gT=new or("AllowMultipleToken"),Uw=new or("PlatformDestroyListeners"),jw=new or("appBootstrapListener");class Zx{constructor(o,l){this.name=o,this.token=l}}function Hw(s,o,l=[]){const d=`Platform: ${o}`,h=new or(d);return(p=[])=>{let _=ep();if(!_||_.injector.get(gT,!1)){const I=[...l,...p,{provide:h,useValue:!0}];s?s(I):function yT(s){if(cc&&!cc.get(gT,!1))throw new re(400,!1);(function uc(){!function hh(s){dh=s}(()=>{throw new re(600,!1)})})(),cc=s;const o=s.get(vT);(function dv(s){s.get(iM,null)?.forEach(l=>l())})(s)}(function hv(s=[],o){return Xc.create({name:o,providers:[{provide:Ob,useValue:"platform"},{provide:Uw,useValue:new Set([()=>cc=null])},...s]})}(I,d))}return function Gw(s){const o=ep();if(!o)throw new re(401,!1);return o}()}}function ep(){return cc?.get(vT)??null}let vT=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const h=function pv(s="zone.js",o){return"noop"===s?new fT:"zone.js"===s?new is(o):s}(d?.ngZone,function fv(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return h.run(()=>{const p=function AD(s,o,l){return new Nd(s,o,l)}(l.moduleType,this.injector,function cm(s){return[{provide:is,useFactory:s},{provide:_y,multi:!0,useFactory:()=>{const o=rn(Os,{optional:!0});return()=>o.initialize()}},{provide:Ww,useFactory:wT},{provide:Lw,useFactory:pT}]}(()=>h)),_=p.injector.get(Qh,null);return h.runOutsideAngular(()=>{const I=h.onError.subscribe({next:C=>{_.handleError(C)}});p.onDestroy(()=>{zd(this._modules,p),I.unsubscribe()})}),function ET(s,o,l){try{const d=l();return __(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(_,h,()=>{const I=p.injector.get(Nw);return I.runInitializers(),I.donePromise.then(()=>(function Cn(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(ZE=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(ov,Mf)||Mf),this._moduleDoBootstrap(p),p))})})}bootstrapModule(l,d=[]){const h=zw({},d);return function lm(s,o,l){const d=new El(l);return Promise.resolve(d)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const d=l.injector.get(wl);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new re(-403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(Uw,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(rr(Xc))},s.\u0275prov=Le({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function zw(s,o){return Array.isArray(o)?o.reduce(zw,s):{...s,...o}}let wl=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=rn(Ww),this.zoneIsStable=rn(Lw),this.componentTypes=[],this.components=[],this.isStable=rn(Pw).hasPendingTasks.pipe((0,Ae.w)(l=>l?(0,Ie.of)(!1):this.zoneIsStable),(0,fe.x)(),(0,ne.B)()),this._injector=rn(gd)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const h=l instanceof jb;if(!this._injector.get(Nw).done)throw!h&&cn(l),new re(405,!1);let _;_=h?l:this._injector.get(Ry).resolveComponentFactory(l),this.componentTypes.push(_.componentType);const I=function mT(s){return s.isBoundToModule}(_)?void 0:this._injector.get(ko),A=_.create(Xc.NULL,[],d||_.selector,I),P=A.location.nativeElement,Y=A.injector.get(Bw,null);return Y?.registerApplication(P),A.onDestroy(()=>{this.detachView(A.hostView),zd(this.components,A),Y?.unregisterApplication(P)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;zd(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(jw,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>zd(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new re(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Le({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function zd(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}const Ww=new or("",{providedIn:"root",factory:()=>rn(Qh).handleError.bind(void 0)});function wT(){const s=rn(is),o=rn(Qh);return l=>s.runOutsideAngular(()=>o.handleError(l))}let Os=(()=>{class s{constructor(){this.zone=rn(is),this.applicationRef=rn(wl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Le({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function IT(){return!1}let tR=(()=>{class s{}return s.__NG_ELEMENT_ID__=np,s})();function np(s){return function bT(s,o,l){if(Us(s)&&!l){const d=Cs(s.index,o);return new uf(d,d)}return 47&s.type?new uf(o[Dr],o):null}(Jr(),ot(),16==(16&s))}class Iv{constructor(){}supports(o){return pf(o)}create(o){return new sR(o)}}const ss=(s,o)=>o;class sR{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ss}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,p=null;for(;l||d;){const _=!d||l&&l.currentIndex<bv(d,h,p)?l:d,I=bv(_,h,p),C=_.currentIndex;if(_===d)h--,d=d._nextRemoved;else if(l=l._next,null==_.previousIndex)h++;else{p||(p=[]);const A=I-h,P=C-h;if(A!=P){for(let _e=0;_e<A;_e++){const xe=_e<p.length?p[_e]:p[_e]=0,rt=xe+_e;P<=rt&&rt<A&&(p[_e]=xe+1)}p[_.previousIndex]=P-A}}I!==C&&o(_,I,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!pf(o))throw new re(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],_=this._trackByFn(I,p),null!==l&&Object.is(l.trackById,_)?(d&&(l=this._verifyReinsertion(l,p,_,I)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,_,I),d=!0),l=l._next}else h=0,function aE(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Symbol.iterator]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,I=>{_=this._trackByFn(h,I),null!==l&&Object.is(l.trackById,_)?(d&&(l=this._verifyReinsertion(l,I,_,h)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,_,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new oR(l,d),p,h),o}_verifyReinsertion(o,l,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new AT),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class oR{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aR{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class AT{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new aR,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bv(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class MT{constructor(){}supports(o){return o instanceof Map||Eg(o)}create(){return new Cv}}class Cv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Eg(o)))throw new re(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const d=new Dv(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class Dv{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xT(){return new Tv([new Iv])}let Tv=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||xT()),deps:[[s,new Ui,new Do]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new re(901,!1)}}return s.\u0275prov=Le({token:s,providedIn:"root",factory:xT}),s})();function Sv(){return new Yd([new MT])}let Yd=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Sv()),deps:[[s,new Ui,new Do]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new re(901,!1)}}return s.\u0275prov=Le({token:s,providedIn:"root",factory:Sv}),s})();const cR=Hw(null,"core",[]);let OT=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(rr(wl))},s.\u0275mod=we({type:s}),s.\u0275inj=mt({}),s})();function hm(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function gR(s,o){const l=Be(s),d=o.elementInjector||Iy();return new vd(l).create(d,o.projectableNodes,o.hostElement,o.environmentInjector)}function Ps(s){const o=Be(s);if(!o)return null;const l=new vd(o);return{get selector(){return l.selector},get type(){return l.componentType},get inputs(){return l.inputs},get outputs(){return l.outputs},get ngContentSelectors(){return l.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3106:(It,Fe,R)=>{"use strict";R.d(Fe,{Z:()=>Me});var u=R(9058),U=R(4537),N=R(534),ue=R(7879);class de{constructor(pe,Z){this._delegate=pe,this.firebase=Z,(0,N._addComponent)(pe,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(pe,Z=N._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(pe);return!je.isInitialized()&&"EXPLICIT"===(null===(Re=je.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&je.initialize(),je.getImmediate({identifier:Z})}_removeServiceInstance(pe,Z=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Z)}_addComponent(pe){(0,N._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,N._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ne=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function fe(){const Ce=function Ae(Ce){const pe={},Z={__esModule:!0,initializeApp:function re(oe,K={}){const Pe=N.initializeApp(oe,K);if((0,u.r3)(pe,Pe.name))return pe[Pe.name];const ve=new Ce(Pe,Z);return pe[Pe.name]=ve,ve},app:je,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function ae(oe){const K=oe.name,Pe=K.replace("-compat","");if(N._registerComponent(oe)&&"PUBLIC"===oe.type){const ve=(Ve=je())=>{if("function"!=typeof Ve[Pe])throw ne.create("invalid-app-argument",{appName:K});return Ve[Pe]()};void 0!==oe.serviceProps&&(0,u.ZB)(ve,oe.serviceProps),Z[Pe]=ve,Ce.prototype[Pe]=function(...Ve){return this._getService.bind(this,K).apply(this,oe.multipleInstances?Ve:[])}}return"PUBLIC"===oe.type?Z[Pe]:null},removeApp:function Re(oe){delete pe[oe]},useAsService:function ye(oe,K){return"serverAuth"===K?null:K},modularAPIs:N}};function je(oe){if(!(0,u.r3)(pe,oe=oe||N._DEFAULT_ENTRY_NAME))throw ne.create("no-app",{appName:oe});return pe[oe]}return Z.default=Z,Object.defineProperty(Z,"apps",{get:function Ee(){return Object.keys(pe).map(oe=>pe[oe])}}),je.App=Ce,Z}(de);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function pe(Z){(0,u.ZB)(Ce,Z)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ce}(),H=new ue.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=q;!function le(Ce){(0,N.registerVersion)("@firebase/app-compat","0.2.13",Ce)}()},534:(It,Fe,R)=>{"use strict";R.r(Fe),R.d(Fe,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>mi,_DEFAULT_ENTRY_NAME:()=>vt,_addComponent:()=>dr,_addOrOverwriteComponent:()=>Xr,_apps:()=>qt,_clearComponents:()=>kn,_components:()=>En,_getProvider:()=>hr,_registerComponent:()=>an,_removeServiceInstance:()=>fr,deleteApp:()=>Zn,getApp:()=>Hr,getApps:()=>ar,initializeApp:()=>yi,onLog:()=>br,registerVersion:()=>nr,setLogLevel:()=>rr});var u=R(5861),U=R(4537),N=R(7879),ue=R(9058);const de=($e,Oe)=>Oe.some(lt=>$e instanceof lt);let Ie,ne;const q=new WeakMap,H=new WeakMap,ee=new WeakMap,ie=new WeakMap,le=new WeakMap;let pe={get($e,Oe,lt){if($e instanceof IDBTransaction){if("done"===Oe)return H.get($e);if("objectStoreNames"===Oe)return $e.objectStoreNames||ee.get($e);if("store"===Oe)return lt.objectStoreNames[1]?void 0:lt.objectStore(lt.objectStoreNames[0])}return re($e[Oe])},set:($e,Oe,lt)=>($e[Oe]=lt,!0),has:($e,Oe)=>$e instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in $e};function je($e){return"function"==typeof $e?function Re($e){return $e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($e)?function(...Oe){return $e.apply(Ee(this),Oe),re(q.get(this))}:function(...Oe){return re($e.apply(Ee(this),Oe))}:function(Oe,...lt){const Vt=$e.call(Ee(this),Oe,...lt);return ee.set(Vt,Oe.sort?Oe.sort():[Oe]),re(Vt)}}($e):($e instanceof IDBTransaction&&function Ce($e){if(H.has($e))return;const Oe=new Promise((lt,Vt)=>{const Xt=()=>{$e.removeEventListener("complete",pn),$e.removeEventListener("error",bn),$e.removeEventListener("abort",bn)},pn=()=>{lt(),Xt()},bn=()=>{Vt($e.error||new DOMException("AbortError","AbortError")),Xt()};$e.addEventListener("complete",pn),$e.addEventListener("error",bn),$e.addEventListener("abort",bn)});H.set($e,Oe)}($e),de($e,function Ae(){return Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($e,pe):$e)}function re($e){if($e instanceof IDBRequest)return function Me($e){const Oe=new Promise((lt,Vt)=>{const Xt=()=>{$e.removeEventListener("success",pn),$e.removeEventListener("error",bn)},pn=()=>{lt(re($e.result)),Xt()},bn=()=>{Vt($e.error),Xt()};$e.addEventListener("success",pn),$e.addEventListener("error",bn)});return Oe.then(lt=>{lt instanceof IDBCursor&&q.set(lt,$e)}).catch(()=>{}),le.set(Oe,$e),Oe}($e);if(ie.has($e))return ie.get($e);const Oe=je($e);return Oe!==$e&&(ie.set($e,Oe),le.set(Oe,$e)),Oe}const Ee=$e=>le.get($e),oe=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],Pe=new Map;function ve($e,Oe){if(!($e instanceof IDBDatabase)||Oe in $e||"string"!=typeof Oe)return;if(Pe.get(Oe))return Pe.get(Oe);const lt=Oe.replace(/FromIndex$/,""),Vt=Oe!==lt,Xt=K.includes(lt);if(!(lt in(Vt?IDBIndex:IDBObjectStore).prototype)||!Xt&&!oe.includes(lt))return;const pn=function(){var bn=(0,u.Z)(function*(pr,...ir){const sr=this.transaction(pr,Xt?"readwrite":"readonly");let lr=sr.store;return Vt&&(lr=lr.index(ir.shift())),(yield Promise.all([lr[lt](...ir),Xt&&sr.done]))[0]});return function(ir){return bn.apply(this,arguments)}}();return Pe.set(Oe,pn),pn}!function Z($e){pe=$e(pe)}($e=>({...$e,get:(Oe,lt,Vt)=>ve(Oe,lt)||$e.get(Oe,lt,Vt),has:(Oe,lt)=>!!ve(Oe,lt)||$e.has(Oe,lt)}));class Ve{constructor(Oe){this.container=Oe}getPlatformInfoString(){return this.container.getProviders().map(lt=>{if(function Ye($e){const Oe=$e.getComponent();return"VERSION"===Oe?.type}(lt)){const Vt=lt.getImmediate();return`${Vt.library}/${Vt.version}`}return null}).filter(lt=>lt).join(" ")}}const Qe="@firebase/app",$t=new N.Yd("@firebase/app"),vt="[DEFAULT]",Lt={[Qe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qt=new Map,En=new Map;function dr($e,Oe){try{$e.container.addComponent(Oe)}catch(lt){$t.debug(`Component ${Oe.name} failed to register with FirebaseApp ${$e.name}`,lt)}}function Xr($e,Oe){$e.container.addOrOverwriteComponent(Oe)}function an($e){const Oe=$e.name;if(En.has(Oe))return $t.debug(`There were multiple attempts to register component ${Oe}.`),!1;En.set(Oe,$e);for(const lt of qt.values())dr(lt,$e);return!0}function hr($e,Oe){const lt=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return lt&&lt.triggerHeartbeat(),$e.container.getProvider(Oe)}function fr($e,Oe,lt=vt){hr($e,Oe).clearInstance(lt)}function kn(){En.clear()}const ln=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tr{constructor(Oe,lt,Vt){this._isDeleted=!1,this._options=Object.assign({},Oe),this._config=Object.assign({},lt),this._name=lt.name,this._automaticDataCollectionEnabled=lt.automaticDataCollectionEnabled,this._container=Vt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Oe){this._isDeleted=Oe}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}const mi="9.23.0";function yi($e,Oe={}){let lt=$e;"object"!=typeof Oe&&(Oe={name:Oe});const Vt=Object.assign({name:vt,automaticDataCollectionEnabled:!1},Oe),Xt=Vt.name;if("string"!=typeof Xt||!Xt)throw ln.create("bad-app-name",{appName:String(Xt)});if(lt||(lt=(0,ue.aH)()),!lt)throw ln.create("no-options");const pn=qt.get(Xt);if(pn){if((0,ue.vZ)(lt,pn.options)&&(0,ue.vZ)(Vt,pn.config))return pn;throw ln.create("duplicate-app",{appName:Xt})}const bn=new U.H0(Xt);for(const ir of En.values())bn.addComponent(ir);const pr=new tr(lt,Vt,bn);return qt.set(Xt,pr),pr}function Hr($e=vt){const Oe=qt.get($e);if(!Oe&&$e===vt&&(0,ue.aH)())return yi();if(!Oe)throw ln.create("no-app",{appName:$e});return Oe}function ar(){return Array.from(qt.values())}function Zn($e){return vr.apply(this,arguments)}function vr(){return(vr=(0,u.Z)(function*($e){const Oe=$e.name;qt.has(Oe)&&(qt.delete(Oe),yield Promise.all($e.container.getProviders().map(lt=>lt.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function nr($e,Oe,lt){var Vt;let Xt=null!==(Vt=Lt[$e])&&void 0!==Vt?Vt:$e;lt&&(Xt+=`-${lt}`);const pn=Xt.match(/\s|\//),bn=Oe.match(/\s|\//);if(pn||bn){const pr=[`Unable to register library "${Xt}" with version "${Oe}":`];return pn&&pr.push(`library name "${Xt}" contains illegal characters (whitespace or "/")`),pn&&bn&&pr.push("and"),bn&&pr.push(`version name "${Oe}" contains illegal characters (whitespace or "/")`),void $t.warn(pr.join(" "))}an(new U.wA(`${Xt}-version`,()=>({library:Xt,version:Oe}),"VERSION"))}function br($e,Oe){if(null!==$e&&"function"!=typeof $e)throw ln.create("invalid-log-argument");(0,N.Am)($e,Oe)}function rr($e){(0,N.Ub)($e)}const Cr="firebase-heartbeat-database",rn=1,se="firebase-heartbeat-store";let te=null;function L(){return te||(te=function ae($e,Oe,{blocked:lt,upgrade:Vt,blocking:Xt,terminated:pn}={}){const bn=indexedDB.open($e,Oe),pr=re(bn);return Vt&&bn.addEventListener("upgradeneeded",ir=>{Vt(re(bn.result),ir.oldVersion,ir.newVersion,re(bn.transaction),ir)}),lt&&bn.addEventListener("blocked",ir=>lt(ir.oldVersion,ir.newVersion,ir)),pr.then(ir=>{pn&&ir.addEventListener("close",()=>pn()),Xt&&ir.addEventListener("versionchange",sr=>Xt(sr.oldVersion,sr.newVersion,sr))}).catch(()=>{}),pr}(Cr,rn,{upgrade:($e,Oe)=>{0===Oe&&$e.createObjectStore(se)}}).catch($e=>{throw ln.create("idb-open",{originalErrorMessage:$e.message})})),te}function k(){return(k=(0,u.Z)(function*($e){try{return yield(yield L()).transaction(se).objectStore(se).get(yt($e))}catch(Oe){if(Oe instanceof ue.ZR)$t.warn(Oe.message);else{const lt=ln.create("idb-get",{originalErrorMessage:Oe?.message});$t.warn(lt.message)}}})).apply(this,arguments)}function Se($e,Oe){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,u.Z)(function*($e,Oe){try{const Vt=(yield L()).transaction(se,"readwrite");yield Vt.objectStore(se).put(Oe,yt($e)),yield Vt.done}catch(lt){if(lt instanceof ue.ZR)$t.warn(lt.message);else{const Vt=ln.create("idb-set",{originalErrorMessage:lt?.message});$t.warn(Vt.message)}}})).apply(this,arguments)}function yt($e){return`${$e.name}!${$e.options.appId}`}class Bt{constructor(Oe){this.container=Oe,this._heartbeatsCache=null;const lt=this.container.getProvider("app").getImmediate();this._storage=new fn(lt),this._heartbeatsCachePromise=this._storage.read().then(Vt=>(this._heartbeatsCache=Vt,Vt))}triggerHeartbeat(){var Oe=this;return(0,u.Z)(function*(){const Vt=Oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xt=sn();if(null===Oe._heartbeatsCache&&(Oe._heartbeatsCache=yield Oe._heartbeatsCachePromise),Oe._heartbeatsCache.lastSentHeartbeatDate!==Xt&&!Oe._heartbeatsCache.heartbeats.some(pn=>pn.date===Xt))return Oe._heartbeatsCache.heartbeats.push({date:Xt,agent:Vt}),Oe._heartbeatsCache.heartbeats=Oe._heartbeatsCache.heartbeats.filter(pn=>{const bn=new Date(pn.date).valueOf();return Date.now()-bn<=2592e6}),Oe._storage.overwrite(Oe._heartbeatsCache)})()}getHeartbeatsHeader(){var Oe=this;return(0,u.Z)(function*(){if(null===Oe._heartbeatsCache&&(yield Oe._heartbeatsCachePromise),null===Oe._heartbeatsCache||0===Oe._heartbeatsCache.heartbeats.length)return"";const lt=sn(),{heartbeatsToSend:Vt,unsentEntries:Xt}=function zn($e,Oe=1024){const lt=[];let Vt=$e.slice();for(const Xt of $e){const pn=lt.find(bn=>bn.agent===Xt.agent);if(pn){if(pn.dates.push(Xt.date),Gr(lt)>Oe){pn.dates.pop();break}}else if(lt.push({agent:Xt.agent,dates:[Xt.date]}),Gr(lt)>Oe){lt.pop();break}Vt=Vt.slice(1)}return{heartbeatsToSend:lt,unsentEntries:Vt}}(Oe._heartbeatsCache.heartbeats),pn=(0,ue.L)(JSON.stringify({version:2,heartbeats:Vt}));return Oe._heartbeatsCache.lastSentHeartbeatDate=lt,Xt.length>0?(Oe._heartbeatsCache.heartbeats=Xt,yield Oe._storage.overwrite(Oe._heartbeatsCache)):(Oe._heartbeatsCache.heartbeats=[],Oe._storage.overwrite(Oe._heartbeatsCache)),pn})()}}function sn(){return(new Date).toISOString().substring(0,10)}class fn{constructor(Oe){this.app=Oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Oe=this;return(0,u.Z)(function*(){return(yield Oe._canUseIndexedDBPromise)&&(yield function $($e){return k.apply(this,arguments)}(Oe.app))||{heartbeats:[]}})()}overwrite(Oe){var lt=this;return(0,u.Z)(function*(){var Vt;if(yield lt._canUseIndexedDBPromise){const pn=yield lt.read();return Se(lt.app,{lastSentHeartbeatDate:null!==(Vt=Oe.lastSentHeartbeatDate)&&void 0!==Vt?Vt:pn.lastSentHeartbeatDate,heartbeats:Oe.heartbeats})}})()}add(Oe){var lt=this;return(0,u.Z)(function*(){var Vt;if(yield lt._canUseIndexedDBPromise){const pn=yield lt.read();return Se(lt.app,{lastSentHeartbeatDate:null!==(Vt=Oe.lastSentHeartbeatDate)&&void 0!==Vt?Vt:pn.lastSentHeartbeatDate,heartbeats:[...pn.heartbeats,...Oe.heartbeats]})}})()}}function Gr($e){return(0,ue.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function xr($e){an(new U.wA("platform-logger",Oe=>new Ve(Oe),"PRIVATE")),an(new U.wA("heartbeat",Oe=>new Bt(Oe),"PRIVATE")),nr(Qe,"0.9.13",$e),nr(Qe,"0.9.13","esm2017"),nr("fire-js","")}("")},4537:(It,Fe,R)=>{"use strict";R.d(Fe,{H0:()=>Ae,wA:()=>N,zt:()=>de});var u=R(5861),U=R(9058);class N{constructor(q,H,ee){this.name=q,this.instanceFactory=H,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ue="[DEFAULT]";class de{constructor(q,H){this.name=q,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const H=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(H)){const ee=new U.BH;if(this.instancesDeferred.set(H,ee),this.isInitialized(H)||this.shouldAutoInitialize())try{const ie=this.getOrInitializeService({instanceIdentifier:H});ie&&ee.resolve(ie)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(q){var H;const ee=this.normalizeInstanceIdentifier(q?.identifier),ie=null!==(H=q?.optional)&&void 0!==H&&H;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(ie)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(le){if(ie)return null;throw le}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function ne(fe){return"EAGER"===fe.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[H,ee]of this.instancesDeferred.entries()){const ie=this.normalizeInstanceIdentifier(H);try{const le=this.getOrInitializeService({instanceIdentifier:ie});ee.resolve(le)}catch{}}}}clearInstance(q=ue){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,u.Z)(function*(){const H=Array.from(q.instances.values());yield Promise.all([...H.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...H.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ue){return this.instances.has(q)}getOptions(q=ue){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:H={}}=q,ee=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ie=this.getOrInitializeService({instanceIdentifier:ee,options:H});for(const[le,Me]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(le)&&Me.resolve(ie);return ie}onInit(q,H){var ee;const ie=this.normalizeInstanceIdentifier(H),le=null!==(ee=this.onInitCallbacks.get(ie))&&void 0!==ee?ee:new Set;le.add(q),this.onInitCallbacks.set(ie,le);const Me=this.instances.get(ie);return Me&&q(Me,ie),()=>{le.delete(q)}}invokeOnInitCallbacks(q,H){const ee=this.onInitCallbacks.get(H);if(ee)for(const ie of ee)try{ie(q,H)}catch{}}getOrInitializeService({instanceIdentifier:q,options:H={}}){let ee=this.instances.get(q);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=q,fe===ue?void 0:fe),options:H}),this.instances.set(q,ee),this.instancesOptions.set(q,H),this.invokeOnInitCallbacks(ee,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,ee)}catch{}var fe;return ee||null}normalizeInstanceIdentifier(q=ue){return this.component?this.component.multipleInstances?q:ue:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const H=this.getProvider(q.name);if(H.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);H.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const H=new de(q,this);return this.providers.set(q,H),H}getProviders(){return Array.from(this.providers.values())}}},7879:(It,Fe,R)=>{"use strict";R.d(Fe,{Am:()=>fe,Ub:()=>Ae,Yd:()=>ne,in:()=>U});const u=[];var U=(()=>((U=U||{})[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U))();const N={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ue=U.INFO,de={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Ie=(q,H,...ee)=>{if(H<q.logLevel)return;const ie=(new Date).toISOString(),le=de[H];if(!le)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[le](`[${ie}]  ${q.name}:`,...ee)};class ne{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=Ie,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in U))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...H),this._logHandler(this,U.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...H),this._logHandler(this,U.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,U.INFO,...H),this._logHandler(this,U.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,U.WARN,...H),this._logHandler(this,U.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...H),this._logHandler(this,U.ERROR,...H)}}function Ae(q){u.forEach(H=>{H.setLogLevel(q)})}function fe(q,H){for(const ee of u){let ie=null;H&&H.level&&(ie=N[H.level]),ee.userLogHandler=null===q?null:(le,Me,...Ce)=>{const pe=Ce.map(Z=>{if(null==Z)return null;if("string"==typeof Z)return Z;if("number"==typeof Z||"boolean"==typeof Z)return Z.toString();if(Z instanceof Error)return Z.message;try{return JSON.stringify(Z)}catch{return null}}).filter(Z=>Z).join(" ");Me>=(ie??le.logLevel)&&q({level:U[Me].toLowerCase(),message:pe,args:Ce,type:le.name})}}}},3182:(It,Fe,R)=>{"use strict";R.d(Fe,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=R(534);(0,u.registerVersion)("firebase","9.23.0","app")},7142:(It,Fe,R)=>{"use strict";R.d(Fe,{Z:()=>u.Z});var u=R(3106);u.Z.registerVersion("firebase","9.23.0","app-compat")},6365:(It,Fe,R)=>{"use strict";R.r(Fe);var u=R(5861),U=R(3106),N=R(6878),ue=R(9058),ne=(R(534),R(7879),R(4537));function Ae(){return window}function H(){return H=(0,u.Z)(function*(L,$,k){var Se;const{BuildInfo:Xe}=Ae();(0,N.as)($.sessionId,"AuthEvent did not contain a session ID");const yt=yield function Z(L){return Re.apply(this,arguments)}($.sessionId),Yt={};return(0,N.at)()?Yt.ibi=Xe.packageName:(0,N.au)()?Yt.apn=Xe.packageName:(0,N.av)(L,"operation-not-supported-in-this-environment"),Xe.displayName&&(Yt.appDisplayName=Xe.displayName),Yt.sessionId=yt,(0,N.aw)(L,k,$.type,void 0,null!==(Se=$.eventId)&&void 0!==Se?Se:void 0,Yt)}),H.apply(this,arguments)}function ie(){return(ie=(0,u.Z)(function*(L){const{BuildInfo:$}=Ae(),k={};(0,N.at)()?k.iosBundleId=$.packageName:(0,N.au)()?k.androidPackageName=$.packageName:(0,N.av)(L,"operation-not-supported-in-this-environment"),yield(0,N.ax)(L,k)})).apply(this,arguments)}function Ce(){return(Ce=(0,u.Z)(function*(L,$,k){const{cordova:Se}=Ae();let Xe=()=>{};try{yield new Promise((yt,Yt)=>{let Wt=null;function Bt(){var fn;yt();const Gr=null===(fn=Se.plugins.browsertab)||void 0===fn?void 0:fn.close;"function"==typeof Gr&&Gr(),"function"==typeof k?.close&&k.close()}function sn(){Wt||(Wt=window.setTimeout(()=>{Yt((0,N.az)(L,"redirect-cancelled-by-user"))},2e3))}function zn(){"visible"===document?.visibilityState&&sn()}$.addPassiveListener(Bt),document.addEventListener("resume",sn,!1),(0,N.au)()&&document.addEventListener("visibilitychange",zn,!1),Xe=()=>{$.removePassiveListener(Bt),document.removeEventListener("resume",sn,!1),document.removeEventListener("visibilitychange",zn,!1),Wt&&window.clearTimeout(Wt)}})}finally{Xe()}})).apply(this,arguments)}function Re(){return(Re=(0,u.Z)(function*(L){const $=function je(L){if((0,N.as)(/[0-9a-zA-Z]+/.test(L),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(L);const $=new ArrayBuffer(L.length),k=new Uint8Array($);for(let Se=0;Se<L.length;Se++)k[Se]=L.charCodeAt(Se);return k}(L),k=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(k)).map(Xe=>Xe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ee extends N.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(k=>k($)),super.onEvent($)}initialized(){var $=this;return(0,u.Z)(function*(){yield $.initPromise})()}}function oe(L){return K.apply(this,arguments)}function K(){return(K=(0,u.Z)(function*(L){const $=yield Ve()._get(Ye(L));return $&&(yield Ve()._remove(Ye(L))),$})).apply(this,arguments)}function ve(){const L=[];for(let k=0;k<20;k++){const Se=Math.floor(62*Math.random());L.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Se))}return L.join("")}function Ve(){return(0,N.aC)(N.b)}function Ye(L){return(0,N.aD)("authEvent",L.config.apiKey,L.name)}function $t(L){if(!L?.includes("?"))return{};const[$,...k]=L.split("?");return(0,ue.zd)(k.join("?"))}const z=class Je{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize($){var k=this;return(0,u.Z)(function*(){const Se=$._key();let Xe=k.eventManagers.get(Se);return Xe||(Xe=new Ee($),k.eventManagers.set(Se,Xe),k.attachCallbackListeners($,Xe)),Xe})()}_openPopup($){(0,N.av)($,"operation-not-supported-in-this-environment")}_openRedirect($,k,Se,Xe){var yt=this;return(0,u.Z)(function*(){!function pe(L){var $,k,Se,Xe,yt,Yt,Wt,Bt,sn,zn;const fn=Ae();(0,N.aA)("function"==typeof(null===($=fn?.universalLinks)||void 0===$?void 0:$.subscribe),L,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aA)(typeof(null===(k=fn?.BuildInfo)||void 0===k?void 0:k.packageName)<"u",L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aA)("function"==typeof(null===(yt=null===(Xe=null===(Se=fn?.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===yt?void 0:yt.openUrl),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(Bt=null===(Wt=null===(Yt=fn?.cordova)||void 0===Yt?void 0:Yt.plugins)||void 0===Wt?void 0:Wt.browsertab)||void 0===Bt?void 0:Bt.isAvailable),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(zn=null===(sn=fn?.cordova)||void 0===sn?void 0:sn.InAppBrowser)||void 0===zn?void 0:zn.open),L,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const Yt=yield yt._initialize($);yield Yt.initialized(),Yt.resetRedirect(),(0,N.aG)(),yield yt._originValidation($);const Wt=function ae(L,$,k=null){return{type:$,eventId:k,urlResponse:null,sessionId:ve(),postBody:null,tenantId:L.tenantId,error:(0,N.az)(L,"no-auth-event")}}($,Se,Xe);yield function ye(L,$){return Ve()._set(Ye(L),$)}($,Wt);const Bt=yield function q(L,$,k){return H.apply(this,arguments)}($,Wt,k),sn=yield function le(L){const{cordova:$}=Ae();return new Promise(k=>{$.plugins.browsertab.isAvailable(Se=>{let Xe=null;Se?$.plugins.browsertab.openUrl(L):Xe=$.InAppBrowser.open(L,(0,N.ay)()?"_blank":"_system","location=yes"),k(Xe)})})}(Bt);return function Me(L,$,k){return Ce.apply(this,arguments)}($,Yt,sn)})()}_isIframeWebStorageSupported($,k){throw new Error("Method not implemented.")}_originValidation($){const k=$._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function ee(L){return ie.apply(this,arguments)}($)),this.originValidationPromises[k]}attachCallbackListeners($,k){const{universalLinks:Se,handleOpenURL:Xe,BuildInfo:yt}=Ae(),Yt=setTimeout((0,u.Z)(function*(){yield oe($),k.onEvent(J())}),500),Wt=function(){var zn=(0,u.Z)(function*(fn){clearTimeout(Yt);const Gr=yield oe($);let xr=null;Gr&&fn?.url&&(xr=function Pe(L,$){var k,Se;const Xe=function xt(L){const $=$t(L),k=$.link?decodeURIComponent($.link):void 0,Se=$t(k).link,Xe=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return $t(Xe).link||Xe||Se||k||L}($);if(Xe.includes("/__/auth/callback")){const yt=$t(Xe),Yt=yt.firebaseError?function Qe(L){try{return JSON.parse(L)}catch{return null}}(decodeURIComponent(yt.firebaseError)):null,Wt=null===(Se=null===(k=Yt?.code)||void 0===k?void 0:k.split("auth/"))||void 0===Se?void 0:Se[1],Bt=Wt?(0,N.az)(Wt):null;return Bt?{type:L.type,eventId:L.eventId,tenantId:L.tenantId,error:Bt,urlResponse:null,sessionId:null,postBody:null}:{type:L.type,eventId:L.eventId,tenantId:L.tenantId,sessionId:L.sessionId,urlResponse:Xe,postBody:null}}return null}(Gr,fn.url)),k.onEvent(xr||J())});return function(Gr){return zn.apply(this,arguments)}}();typeof Se<"u"&&"function"==typeof Se.subscribe&&Se.subscribe(null,Wt);const Bt=Xe,sn=`${yt.packageName.toLowerCase()}://`;Ae().handleOpenURL=function(){var zn=(0,u.Z)(function*(fn){if(fn.toLowerCase().startsWith(sn)&&Wt({url:fn}),"function"==typeof Bt)try{Bt(fn)}catch(Gr){console.error(Gr)}});return function(fn){return zn.apply(this,arguments)}}()}};function J(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.az)("no-auth-event")}}function ut(){var L;return(null===(L=self?.location)||void 0===L?void 0:L.protocol)||null}function pt(L=(0,ue.z$)()){return!("file:"!==ut()&&"ionic:"!==ut()&&"capacitor:"!==ut()||!L.toLowerCase().match(/iphone|ipad|ipod|android/))}function mt(){try{const L=self.localStorage,$=N.aL();if(L)return L.setItem($,"1"),L.removeItem($),!function ct(L=(0,ue.z$)()){return function He(){return(0,ue.w1)()&&11===document?.documentMode}()||function Le(L=(0,ue.z$)()){return/Edge\/\d+/.test(L)}(L)}()||(0,ue.hl)()}catch{return Ht()&&(0,ue.hl)()}return!1}function Ht(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zt(){return(function dt(){return"http:"===ut()||"https:"===ut()}()||(0,ue.ru)()||pt())&&!function Ue(){return(0,ue.b$)()||(0,ue.UG)()}()&&mt()&&!Ht()}function tn(){return pt()&&typeof document<"u"}function xn(){return(xn=(0,u.Z)(function*(){return!!tn()&&new Promise(L=>{const $=setTimeout(()=>{L(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),L(!0)})})})).apply(this,arguments)}const Mn={LOCAL:"local",NONE:"none",SESSION:"session"},kr=N.aA,er="persistence";function Lt(L){return qt.apply(this,arguments)}function qt(){return(qt=(0,u.Z)(function*(L){yield L._initializationPromise;const $=dr(),k=N.aD(er,L.config.apiKey,L.name);$&&$.setItem(k,L._getPersistence())})).apply(this,arguments)}function dr(){var L;try{return(null===(L=function $n(){return typeof window<"u"?window:null}())||void 0===L?void 0:L.sessionStorage)||null}catch{return null}}const Xr=N.aA;class an{constructor(){this.browserResolver=N.aC(N.k),this.cordovaResolver=N.aC(z),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize($){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._initialize($)})()}_openPopup($,k,Se,Xe){var yt=this;return(0,u.Z)(function*(){return yield yt.selectUnderlyingResolver(),yt.assertedUnderlyingResolver._openPopup($,k,Se,Xe)})()}_openRedirect($,k,Se,Xe){var yt=this;return(0,u.Z)(function*(){return yield yt.selectUnderlyingResolver(),yt.assertedUnderlyingResolver._openRedirect($,k,Se,Xe)})()}_isIframeWebStorageSupported($,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,k)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return tn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,u.Z)(function*(){if($.underlyingResolver)return;const k=yield function vn(){return xn.apply(this,arguments)}();$.underlyingResolver=k?$.cordovaResolver:$.browserResolver})()}}function hr(L){return L.unwrap()}function kn(L){return ln(L)}function ln(L){const{_tokenResponse:$}=L instanceof ue.ZR?L.customData:L;if(!$)return null;if(!(L instanceof ue.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return N.P.credentialFromResult(L);const k=$.providerId;if(!k||k===N.p.PASSWORD)return null;let Se;switch(k){case N.p.GOOGLE:Se=N.V;break;case N.p.FACEBOOK:Se=N.U;break;case N.p.GITHUB:Se=N.W;break;case N.p.TWITTER:Se=N.Z;break;default:const{oauthIdToken:Xe,oauthAccessToken:yt,oauthTokenSecret:Yt,pendingToken:Wt,nonce:Bt}=$;return yt||Yt||Xe||Wt?Wt?k.startsWith("saml.")?N.aO._create(k,Wt):N.L._fromParams({providerId:k,signInMethod:k,pendingToken:Wt,idToken:Xe,accessToken:yt}):new N.X(k).credential({idToken:Xe,accessToken:yt,rawNonce:Bt}):null}return L instanceof ue.ZR?Se.credentialFromError(L):Se.credentialFromResult(L)}function tr(L,$){return $.catch(k=>{throw k instanceof ue.ZR&&function jr(L,$){var k;const Se=null===(k=$.customData)||void 0===k?void 0:k._tokenResponse;if("auth/multi-factor-auth-required"===$?.code)$.resolver=new Hr(L,N.aq(L,$));else if(Se){const Xe=ln($),yt=$;Xe&&(yt.credential=Xe,yt.tenantId=Se.tenantId||void 0,yt.email=Se.email||void 0,yt.phoneNumber=Se.phoneNumber||void 0)}}(L,k),k}).then(k=>{const Xe=k.user;return{operationType:k.operationType,credential:kn(k),additionalUserInfo:N.ao(k),user:ar.getOrCreate(Xe)}})}function mi(L,$){return yi.apply(this,arguments)}function yi(){return(yi=(0,u.Z)(function*(L,$){const k=yield $;return{verificationId:k.verificationId,confirm:Se=>tr(L,k.confirm(Se))}})).apply(this,arguments)}class Hr{constructor($,k){this.resolver=k,this.auth=function fr(L){return L.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return tr(hr(this.auth),this.resolver.resolveSignIn($))}}class ar{constructor($){this._delegate=$,this.multiFactor=N.ar($)}static getOrCreate($){return ar.USER_MAP.has($)||ar.USER_MAP.set($,new ar($)),ar.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var k=this;return(0,u.Z)(function*(){return tr(k.auth,N.a0(k._delegate,$))})()}linkWithPhoneNumber($,k){var Se=this;return(0,u.Z)(function*(){return mi(Se.auth,N.l(Se._delegate,$,k))})()}linkWithPopup($){var k=this;return(0,u.Z)(function*(){return tr(k.auth,N.d(k._delegate,$,an))})()}linkWithRedirect($){var k=this;return(0,u.Z)(function*(){return yield Lt(N.aH(k.auth)),N.g(k._delegate,$,an)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var k=this;return(0,u.Z)(function*(){return tr(k.auth,N.a1(k._delegate,$))})()}reauthenticateWithPhoneNumber($,k){return mi(this.auth,N.r(this._delegate,$,k))}reauthenticateWithPopup($){return tr(this.auth,N.e(this._delegate,$,an))}reauthenticateWithRedirect($){var k=this;return(0,u.Z)(function*(){return yield Lt(N.aH(k.auth)),N.h(k._delegate,$,an)})()}sendEmailVerification($){return N.ae(this._delegate,$)}unlink($){var k=this;return(0,u.Z)(function*(){return yield N.an(k._delegate,$),k})()}updateEmail($){return N.aj(this._delegate,$)}updatePassword($){return N.ak(this._delegate,$)}updatePhoneNumber($){return N.u(this._delegate,$)}updateProfile($){return N.ai(this._delegate,$)}verifyBeforeUpdateEmail($,k){return N.af(this._delegate,$,k)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ar.USER_MAP=new WeakMap;const Zn=N.aA;let vr=(()=>{class L{constructor(k,Se){if(this.app=k,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Xe}=k.options;Zn(Xe,"invalid-api-key",{appName:k.name}),Zn(Xe,"invalid-api-key",{appName:k.name});const yt=typeof window<"u"?an:void 0;this._delegate=Se.initialize({options:{persistence:br(Xe,k.name),popupRedirectResolver:yt}}),this._delegate._updateErrorMap(N.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ar.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(k){this._delegate.languageCode=k}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(k){this._delegate.tenantId=k}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(k,Se){N.I(this._delegate,k,Se)}applyActionCode(k){return N.a5(this._delegate,k)}checkActionCode(k){return N.a6(this._delegate,k)}confirmPasswordReset(k,Se){return N.a4(this._delegate,k,Se)}createUserWithEmailAndPassword(k,Se){var Xe=this;return(0,u.Z)(function*(){return tr(Xe._delegate,N.a8(Xe._delegate,k,Se))})()}fetchProvidersForEmail(k){return this.fetchSignInMethodsForEmail(k)}fetchSignInMethodsForEmail(k){return N.ad(this._delegate,k)}isSignInWithEmailLink(k){return N.ab(this._delegate,k)}getRedirectResult(){var k=this;return(0,u.Z)(function*(){Zn(zt(),k._delegate,"operation-not-supported-in-this-environment");const Se=yield N.j(k._delegate,an);return Se?tr(k._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(k){!function ce(L,$){(0,N.aH)(L)._logFramework($)}(this._delegate,k)}onAuthStateChanged(k,Se,Xe){const{next:yt,error:Yt,complete:Wt}=nr(k,Se,Xe);return this._delegate.onAuthStateChanged(yt,Yt,Wt)}onIdTokenChanged(k,Se,Xe){const{next:yt,error:Yt,complete:Wt}=nr(k,Se,Xe);return this._delegate.onIdTokenChanged(yt,Yt,Wt)}sendSignInLinkToEmail(k,Se){return N.aa(this._delegate,k,Se)}sendPasswordResetEmail(k,Se){return N.a3(this._delegate,k,Se||void 0)}setPersistence(k){var Se=this;return(0,u.Z)(function*(){let Xe;switch(function vt(L,$){kr(Object.values(Mn).includes($),L,"invalid-persistence-type"),(0,ue.b$)()?kr($!==Mn.SESSION,L,"unsupported-persistence-type"):(0,ue.UG)()?kr($===Mn.NONE,L,"unsupported-persistence-type"):Ht()?kr($===Mn.NONE||$===Mn.LOCAL&&(0,ue.hl)(),L,"unsupported-persistence-type"):kr($===Mn.NONE||mt(),L,"unsupported-persistence-type")}(Se._delegate,k),k){case Mn.SESSION:Xe=N.a;break;case Mn.LOCAL:Xe=(yield N.aC(N.i)._isAvailable())?N.i:N.b;break;case Mn.NONE:Xe=N.N;break;default:return N.av("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(Xe)})()}signInAndRetrieveDataWithCredential(k){return this.signInWithCredential(k)}signInAnonymously(){return tr(this._delegate,N._(this._delegate))}signInWithCredential(k){return tr(this._delegate,N.$(this._delegate,k))}signInWithCustomToken(k){return tr(this._delegate,N.a2(this._delegate,k))}signInWithEmailAndPassword(k,Se){return tr(this._delegate,N.a9(this._delegate,k,Se))}signInWithEmailLink(k,Se){return tr(this._delegate,N.ac(this._delegate,k,Se))}signInWithPhoneNumber(k,Se){return mi(this._delegate,N.s(this._delegate,k,Se))}signInWithPopup(k){var Se=this;return(0,u.Z)(function*(){return Zn(zt(),Se._delegate,"operation-not-supported-in-this-environment"),tr(Se._delegate,N.c(Se._delegate,k,an))})()}signInWithRedirect(k){var Se=this;return(0,u.Z)(function*(){return Zn(zt(),Se._delegate,"operation-not-supported-in-this-environment"),yield Lt(Se._delegate),N.f(Se._delegate,k,an)})()}updateCurrentUser(k){return this._delegate.updateCurrentUser(k)}verifyPasswordResetCode(k){return N.a7(this._delegate,k)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return L.Persistence=Mn,L})();function nr(L,$,k){let Se=L;"function"!=typeof L&&({next:Se,error:$,complete:k}=L);const Xe=Se;return{next:Yt=>Xe(Yt&&ar.getOrCreate(Yt)),error:$,complete:k}}function br(L,$){const k=function En(L,$){const k=dr();if(!k)return[];const Se=N.aD(er,L,$);switch(k.getItem(Se)){case Mn.NONE:return[N.N];case Mn.LOCAL:return[N.i,N.a];case Mn.SESSION:return[N.a];default:return[]}}(L,$);if(typeof self<"u"&&!k.includes(N.i)&&k.push(N.i),typeof window<"u")for(const Se of[N.b,N.a])k.includes(Se)||k.push(Se);return k.includes(N.N)||k.push(N.N),k}class rr{constructor(){this.providerId="phone",this._delegate=new N.P(hr(U.Z.auth()))}static credential($,k){return N.P.credential($,k)}verifyPhoneNumber($,k){return this._delegate.verifyPhoneNumber($,k)}unwrap(){return this._delegate}}rr.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,rr.PROVIDER_ID=N.P.PROVIDER_ID;const Cr=N.aA;class rn{constructor($,k,Se=U.Z.app()){var Xe;Cr(null===(Xe=Se.options)||void 0===Xe?void 0:Xe.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new N.R($,k,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function te(L){L.INTERNAL.registerComponent(new ne.wA("auth-compat",$=>{const k=$.getProvider("app-compat").getImmediate(),Se=$.getProvider("auth");return new vr(k,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.Q,FacebookAuthProvider:N.U,GithubAuthProvider:N.W,GoogleAuthProvider:N.V,OAuthProvider:N.X,SAMLAuthProvider:N.Y,PhoneAuthProvider:rr,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:rn,TwitterAuthProvider:N.Z,Auth:vr,AuthCredential:N.J,Error:ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),L.registerVersion("@firebase/auth-compat","0.4.2")}(U.Z)},5861:(It,Fe,R)=>{"use strict";function u(N,ue,de,Ie,ne,Ae,fe){try{var q=N[Ae](fe),H=q.value}catch(ee){return void de(ee)}q.done?ue(H):Promise.resolve(H).then(Ie,ne)}function U(N){return function(){var ue=this,de=arguments;return new Promise(function(Ie,ne){var Ae=N.apply(ue,de);function fe(H){u(Ae,Ie,ne,fe,q,"next",H)}function q(H){u(Ae,Ie,ne,fe,q,"throw",H)}fe(void 0)})}}R.d(Fe,{Z:()=>U})},7582:(It,Fe,R)=>{"use strict";function ue(z,J){var ce={};for(var ge in z)Object.prototype.hasOwnProperty.call(z,ge)&&J.indexOf(ge)<0&&(ce[ge]=z[ge]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(ge=Object.getOwnPropertySymbols(z);Ne<ge.length;Ne++)J.indexOf(ge[Ne])<0&&Object.prototype.propertyIsEnumerable.call(z,ge[Ne])&&(ce[ge[Ne]]=z[ge[Ne]])}return ce}function de(z,J,ce,ge){var ut,Ne=arguments.length,Ge=Ne<3?J:null===ge?ge=Object.getOwnPropertyDescriptor(J,ce):ge;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ge=Reflect.decorate(z,J,ce,ge);else for(var dt=z.length-1;dt>=0;dt--)(ut=z[dt])&&(Ge=(Ne<3?ut(Ge):Ne>3?ut(J,ce,Ge):ut(J,ce))||Ge);return Ne>3&&Ge&&Object.defineProperty(J,ce,Ge),Ge}function ee(z,J,ce,ge){return new(ce||(ce=Promise))(function(Ge,ut){function dt(He){try{Ue(ge.next(He))}catch(Le){ut(Le)}}function pt(He){try{Ue(ge.throw(He))}catch(Le){ut(Le)}}function Ue(He){He.done?Ge(He.value):function Ne(Ge){return Ge instanceof ce?Ge:new ce(function(ut){ut(Ge)})}(He.value).then(dt,pt)}Ue((ge=ge.apply(z,J||[])).next())})}function re(z){return this instanceof re?(this.v=z,this):new re(z)}function Ee(z,J,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,ge=ce.apply(z,J||[]),Ge=[];return Ne={},ut("next"),ut("throw"),ut("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function ut(ct){ge[ct]&&(Ne[ct]=function(mt){return new Promise(function(Ht,zt){Ge.push([ct,mt,Ht,zt])>1||dt(ct,mt)})})}function dt(ct,mt){try{!function pt(ct){ct.value instanceof re?Promise.resolve(ct.value.v).then(Ue,He):Le(Ge[0][2],ct)}(ge[ct](mt))}catch(Ht){Le(Ge[0][3],Ht)}}function Ue(ct){dt("next",ct)}function He(ct){dt("throw",ct)}function Le(ct,mt){ct(mt),Ge.shift(),Ge.length&&dt(Ge[0][0],Ge[0][1])}}function ye(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,J=z[Symbol.asyncIterator];return J?J.call(z):(z=function Ce(z){var J="function"==typeof Symbol&&Symbol.iterator,ce=J&&z[J],ge=0;if(ce)return ce.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ge>=z.length&&(z=void 0),{value:z&&z[ge++],done:!z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ce={},ge("next"),ge("throw"),ge("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function ge(Ge){ce[Ge]=z[Ge]&&function(ut){return new Promise(function(dt,pt){!function Ne(Ge,ut,dt,pt){Promise.resolve(pt).then(function(Ue){Ge({value:Ue,done:dt})},ut)}(dt,pt,(ut=z[Ge](ut)).done,ut.value)})}}}R.d(Fe,{FC:()=>Ee,KL:()=>ye,_T:()=>ue,gn:()=>de,mG:()=>ee,qq:()=>re}),"function"==typeof SuppressedError&&SuppressedError}},It=>{It(It.s=7672)}]);